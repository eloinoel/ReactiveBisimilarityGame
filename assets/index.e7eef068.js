const lf=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function e(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(t){if(t.ep)return;t.ep=!0;const s=e(t);fetch(t.href,s)}};lf();var uf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function df(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}var xl={exports:{}};(function(v,i){(function(d,t){v.exports=t()})(uf,function(){return function(e){var d={};function t(s){if(d[s])return d[s].exports;var u=d[s]={i:s,l:!1,exports:{}};return e[s].call(u.exports,u,u.exports,t),u.l=!0,u.exports}return t.m=e,t.c=d,t.d=function(s,u,n){t.o(s,u)||Object.defineProperty(s,u,{enumerable:!0,get:n})},t.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},t.t=function(s,u){if(u&1&&(s=t(s)),u&8||u&4&&typeof s=="object"&&s&&s.__esModule)return s;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:s}),u&2&&typeof s!="string")for(var a in s)t.d(n,a,function(h){return s[h]}.bind(null,a));return n},t.n=function(s){var u=s&&s.__esModule?function(){return s.default}:function(){return s};return t.d(u,"a",u),u},t.o=function(s,u){return Object.prototype.hasOwnProperty.call(s,u)},t.p="",t(t.s=1528)}([function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}function s(r,o,c){var l=c?r[o]:Object.getOwnPropertyDescriptor(r,o);return!c&&l.value&&typeof l.value=="object"&&(l=l.value),l&&t(l)?(typeof l.enumerable=="undefined"&&(l.enumerable=!0),typeof l.configurable=="undefined"&&(l.configurable=!0),l):!1}function u(r,o){var c=Object.getOwnPropertyDescriptor(r,o);return c?(c.value&&typeof c.value=="object"&&(c=c.value),c.configurable===!1):!1}function n(r,o,c,l){for(var f in o)if(!!o.hasOwnProperty(f)){var p=s(o,f,c);if(p!==!1){var g=l||r;if(u(g.prototype,f)){if(h.ignoreFinals)continue;throw new Error("cannot override final property '"+f+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(r.prototype,f,p)}else r.prototype[f]=o[f]}}function a(r,o){if(!!o){Array.isArray(o)||(o=[o]);for(var c=0;c<o.length;c++)n(r,o[c].prototype||o[c])}}function h(r){r||(r={});var o,c;if(r.initialize){if(typeof r.initialize!="function")throw new Error("initialize must be a function");o=r.initialize,delete r.initialize}else if(r.Extends){var l=r.Extends;o=function(){l.apply(this,arguments)}}else o=function(){};r.Extends?(o.prototype=Object.create(r.Extends.prototype),o.prototype.constructor=o,c=r.Extends,delete r.Extends):o.prototype.constructor=o;var f=null;return r.Mixins&&(f=r.Mixins,delete r.Mixins),a(o,f),n(o,r,!0,c),o}h.extend=n,h.mixin=a,h.ignoreFinals=!1,e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=typeof s;return!s||a==="number"||a==="string"?n:s.hasOwnProperty(u)&&s[u]!==void 0?s[u]:n};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(124),n=new s({initialize:function(h,r){this.x=0,this.y=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0):(r===void 0&&(r=h),this.x=h||0,this.y=r||0)},clone:function(){return new n(this.x,this.y)},copy:function(a){return this.x=a.x||0,this.y=a.y||0,this},setFromObject:function(a){return this.x=a.x||0,this.y=a.y||0,this},set:function(a,h){return h===void 0&&(h=a),this.x=a,this.y=h,this},setTo:function(a,h){return this.set(a,h)},setToPolar:function(a,h){return h==null&&(h=1),this.x=Math.cos(a)*h,this.y=Math.sin(a)*h,this},equals:function(a){return this.x===a.x&&this.y===a.y},fuzzyEquals:function(a,h){return u(this.x,a.x,h)&&u(this.y,a.y,h)},angle:function(){var a=Math.atan2(this.y,this.x);return a<0&&(a+=2*Math.PI),a},setAngle:function(a){return this.setToPolar(a,this.length())},add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a):(this.x=0,this.y=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(a){var h=a.x-this.x,r=a.y-this.y;return Math.sqrt(h*h+r*r)},distanceSq:function(a){var h=a.x-this.x,r=a.y-this.y;return h*h+r*r},length:function(){var a=this.x,h=this.y;return Math.sqrt(a*a+h*h)},setLength:function(a){return this.normalize().scale(a)},lengthSq:function(){var a=this.x,h=this.y;return a*a+h*h},normalize:function(){var a=this.x,h=this.y,r=a*a+h*h;return r>0&&(r=1/Math.sqrt(r),this.x=a*r,this.y=h*r),this},normalizeRightHand:function(){var a=this.x;return this.x=this.y*-1,this.y=a,this},normalizeLeftHand:function(){var a=this.x;return this.x=this.y,this.y=a*-1,this},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},lerp:function(a,h){h===void 0&&(h=0);var r=this.x,o=this.y;return this.x=r+h*(a.x-r),this.y=o+h*(a.y-o),this},transformMat3:function(a){var h=this.x,r=this.y,o=a.val;return this.x=o[0]*h+o[3]*r+o[6],this.y=o[1]*h+o[4]*r+o[7],this},transformMat4:function(a){var h=this.x,r=this.y,o=a.val;return this.x=o[0]*h+o[4]*r+o[12],this.y=o[1]*h+o[5]*r+o[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(a){var h=this.length();return h&&h>a&&this.scale(a/h),this},reflect:function(a){return a=a.clone().normalize(),this.subtract(a.scale(2*this.dot(a)))},mirror:function(a){return this.reflect(a).negate()},rotate:function(a){var h=Math.cos(a),r=Math.sin(a);return this.set(h*this.x-r*this.y,r*this.x+h*this.y)}});n.ZERO=new n,n.RIGHT=new n(1,0),n.LEFT=new n(-1,0),n.UP=new n(0,-1),n.DOWN=new n(0,1),n.ONE=new n(1,1),e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(56),n=new s({initialize:function(h,r){h===void 0&&(h=0),r===void 0&&(r=h),this.type=u.POINT,this.x=h,this.y=r},setTo:function(a,h){return a===void 0&&(a=0),h===void 0&&(h=a),this.x=a,this.y=h,this}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(24),n=t(20),a=new s({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},existing:function(h){return(h.renderCanvas||h.renderWebGL)&&this.displayList.add(h),h.preUpdate&&this.updateList.add(h),h},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(h,r){a.prototype.hasOwnProperty(h)||(a.prototype[h]=r)},a.remove=function(h){a.prototype.hasOwnProperty(h)&&delete a.prototype[h]},u.register("GameObjectFactory",a,"add"),e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(!s||typeof s=="number")return n;if(s.hasOwnProperty(u))return s[u];if(u.indexOf(".")!==-1){for(var a=u.split("."),h=s,r=n,o=0;o<a.length;o++)if(h.hasOwnProperty(a[o]))r=h[a[o]],h=h[a[o]];else{r=n;break}return r}else return n};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){if(typeof s!="object"||s.nodeType||s===s.window)return!1;try{if(s.constructor&&!{}.hasOwnProperty.call(s.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},s={install:function(u){for(var n in t)u[n]=t[n]},register:function(u,n){t[u]=n},destroy:function(){t={}}};e.exports=s},function(e,d,t){var s=Object.prototype.hasOwnProperty,u="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(u=!1));function a(c,l,f){this.fn=c,this.context=l,this.once=f||!1}function h(c,l,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new a(f,p||c,g),x=u?u+l:l;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],m]:c._events[x].push(m):(c._events[x]=m,c._eventsCount++),c}function r(c,l){--c._eventsCount===0?c._events=new n:delete c._events[l]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],f,p;if(this._eventsCount===0)return l;for(p in f=this._events)s.call(f,p)&&l.push(u?p.slice(1):p);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(f)):l},o.prototype.listeners=function(l){var f=u?u+l:l,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,m=p.length,x=new Array(m);g<m;g++)x[g]=p[g].fn;return x},o.prototype.listenerCount=function(l){var f=u?u+l:l,p=this._events[f];return p?p.fn?1:p.length:0},o.prototype.emit=function(l,f,p,g,m,x){var y=u?u+l:l;if(!this._events[y])return!1;var T=this._events[y],S=arguments.length,C,E;if(T.fn){switch(T.once&&this.removeListener(l,T.fn,void 0,!0),S){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,f),!0;case 3:return T.fn.call(T.context,f,p),!0;case 4:return T.fn.call(T.context,f,p,g),!0;case 5:return T.fn.call(T.context,f,p,g,m),!0;case 6:return T.fn.call(T.context,f,p,g,m,x),!0}for(E=1,C=new Array(S-1);E<S;E++)C[E-1]=arguments[E];T.fn.apply(T.context,C)}else{var P=T.length,M;for(E=0;E<P;E++)switch(T[E].once&&this.removeListener(l,T[E].fn,void 0,!0),S){case 1:T[E].fn.call(T[E].context);break;case 2:T[E].fn.call(T[E].context,f);break;case 3:T[E].fn.call(T[E].context,f,p);break;case 4:T[E].fn.call(T[E].context,f,p,g);break;default:if(!C)for(M=1,C=new Array(S-1);M<S;M++)C[M-1]=arguments[M];T[E].fn.apply(T[E].context,C)}}return!0},o.prototype.on=function(l,f,p){return h(this,l,f,p,!1)},o.prototype.once=function(l,f,p){return h(this,l,f,p,!0)},o.prototype.removeListener=function(l,f,p,g){var m=u?u+l:l;if(!this._events[m])return this;if(!f)return r(this,m),this;var x=this._events[m];if(x.fn)x.fn===f&&(!g||x.once)&&(!p||x.context===p)&&r(this,m);else{for(var y=0,T=[],S=x.length;y<S;y++)(x[y].fn!==f||g&&!x[y].once||p&&x[y].context!==p)&&T.push(x[y]);T.length?this._events[m]=T.length===1?T[0]:T:r(this,m)}return this},o.prototype.removeAllListeners=function(l){var f;return l?(f=u?u+l:l,this._events[f]&&r(this,f)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=u,o.EventEmitter=o,e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(57),n=t(171),a=t(306),h=t(56),r=t(47),o=t(174),c=new s({initialize:function(f,p,g,m){f===void 0&&(f=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),this.type=h.RECTANGLE,this.x=f,this.y=p,this.width=g,this.height=m},contains:function(l,f){return u(this,l,f)},getPoint:function(l,f){return n(this,l,f)},getPoints:function(l,f,p){return a(this,l,f,p)},getRandomPoint:function(l){return o(this,l)},setTo:function(l,f,p,g){return this.x=l,this.y=f,this.width=p,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(l,f){return f===void 0&&(f=l),this.x=l,this.y=f,this},setSize:function(l,f){return f===void 0&&(f=l),this.width=l,this.height=f,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(l){return l===void 0&&(l=new r),l.setTo(this.x,this.y,this.right,this.y),l},getLineB:function(l){return l===void 0&&(l=new r),l.setTo(this.right,this.y,this.right,this.bottom),l},getLineC:function(l){return l===void 0&&(l=new r),l.setTo(this.right,this.bottom,this.x,this.bottom),l},getLineD:function(l){return l===void 0&&(l=new r),l.setTo(this.x,this.bottom,this.x,this.y),l},left:{get:function(){return this.x},set:function(l){l>=this.right?this.width=0:this.width=this.right-l,this.x=l}},right:{get:function(){return this.x+this.width},set:function(l){l<=this.x?this.width=0:this.width=l-this.x}},top:{get:function(){return this.y},set:function(l){l>=this.bottom?this.height=0:this.height=this.bottom-l,this.y=l}},bottom:{get:function(){return this.y+this.height},set:function(l){l<=this.y?this.height=0:this.height=l-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(l){this.x=l-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(l){this.y=l-this.height/2}}});e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Alpha:t(607),AlphaSingle:t(303),BlendMode:t(304),ComputedSize:t(608),Crop:t(609),Depth:t(305),Flip:t(610),GetBounds:t(611),Mask:t(309),Origin:t(632),PathFollower:t(633),Pipeline:t(167),ScrollFactor:t(312),Size:t(634),Texture:t(635),TextureCrop:t(636),Tint:t(637),ToJSON:t(176),Transform:t(313),TransformMatrix:t(25),Visible:t(314)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(s){for(var u="",n=0;n<s;++n)n>0&&(u+=`
else `),n<s-1&&(u+="if(test == "+n+".0){}");return u}e.exports={getTintFromFloats:function(s,u,n,a){var h=(s*255|0)&255,r=(u*255|0)&255,o=(n*255|0)&255,c=(a*255|0)&255;return(c<<24|h<<16|r<<8|o)>>>0},getTintAppendFloatAlpha:function(s,u){var n=(u*255|0)&255;return(n<<24|s)>>>0},getTintAppendFloatAlphaAndSwap:function(s,u){var n=(s>>16|0)&255,a=(s>>8|0)&255,h=(s|0)&255,r=(u*255|0)&255;return(r<<24|h<<16|a<<8|n)>>>0},getFloatsFromUintRGB:function(s){var u=(s>>16|0)&255,n=(s>>8|0)&255,a=(s|0)&255;return[u/255,n/255,a/255]},checkShaderMax:function(s,u){(!u||u===-1)&&(u=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS));for(var n=s.createShader(s.FRAGMENT_SHADER),a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var h=a.replace(/%forloop%/gi,t(u));if(s.shaderSource(n,h),s.compileShader(n),!s.getShaderParameter(n,s.COMPILE_STATUS))u=u/2|0;else break}return u},parseFragmentShaderMaxTextures:function(s,u){if(!s)return"";for(var n="",a=0;a<u;a++)a>0&&(n+=`
	else `),a<u-1&&(n+="if (outTexId < "+a+".5)"),n+=`
	{`,n+=`
		texture = texture2D(uMainSampler[`+a+"], outTexCoord);",n+=`
	}`;return s=s.replace(/%count%/gi,u.toString()),s.replace(/%forloop%/gi,n)}}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(193),u=t(6),n=function(a,h,r){var o=u(a,h,null);if(o===null)return r;if(Array.isArray(o))return s.RND.pick(o);if(typeof o=="object"){if(o.hasOwnProperty("randInt"))return s.RND.integerInRange(o.randInt[0],o.randInt[1]);if(o.hasOwnProperty("randFloat"))return s.RND.realInRange(o.randFloat[0],o.randFloat[1])}else if(typeof o=="function")return o(h);return o};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(176),n=t(101),a=t(9),h=t(75),r=t(20),o=new s({Extends:a,initialize:function(l,f){a.call(this),this.scene=l,this.displayList=null,this.type=f,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this),l.sys.queueDepthSort()},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},setState:function(c){return this.state=c,this},setDataEnabled:function(){return this.data||(this.data=new n(this)),this},setData:function(c,l){return this.data||(this.data=new n(this)),this.data.set(c,l),this},incData:function(c,l){return this.data||(this.data=new n(this)),this.data.inc(c,l),this},toggleData:function(c){return this.data||(this.data=new n(this)),this.data.toggle(c),this},getData:function(c){return this.data||(this.data=new n(this)),this.data.get(c)},setInteractive:function(c,l,f){return this.scene.sys.input.enable(this,c,l,f),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return u(this)},willRender:function(c){return!(o.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},getIndexList:function(){for(var c=this,l=this.parentContainer,f=[];l&&(f.unshift(l.getIndex(c)),c=l,l.parentContainer);)l=l.parentContainer;return this.displayList?f.unshift(this.displayList.getIndex(c)):f.unshift(this.scene.sys.displayList.getIndex(c)),f},addToDisplayList:function(c){return c===void 0&&(c=this.scene.sys.displayList),this.displayList&&this.displayList!==c&&this.removeFromDisplayList(),c.exists(this)||(this.displayList=c,c.add(this,!0),c.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),c.events.emit(r.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var c=this.displayList||this.scene.sys.displayList;return c.exists(this)&&(c.remove(this,!0),c.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),c.events.emit(r.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(c){!this.scene||this.ignoreDestroy||(c===void 0&&(c=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(h.DESTROY,this,c),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});o.RENDER_MASK=15,e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(24),n=t(20),a=new s({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(h,r){a.prototype.hasOwnProperty(h)||(a.prototype[h]=r)},a.remove=function(h){a.prototype.hasOwnProperty(h)&&delete a.prototype[h]},u.register("GameObjectCreator",a,"make"),e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(7),u=function(){var n,a,h,r,o,c,l=arguments[0]||{},f=1,p=arguments.length,g=!1;for(typeof l=="boolean"&&(g=l,l=arguments[1]||{},f=2),p===f&&(l=this,--f);f<p;f++)if((n=arguments[f])!=null)for(a in n)h=l[a],r=n[a],l!==r&&(g&&r&&(s(r)||(o=Array.isArray(r)))?(o?(o=!1,c=h&&Array.isArray(h)?h:[]):c=h&&s(h)?h:{},l[a]=u(g,c,r)):r!==void 0&&(l[a]=r));return l};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return Math.max(u,Math.min(n,s))};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=new s,n=new s,a=new s,h={camera:u,sprite:n,calc:a},r=function(o,c,l){var f=u,p=n,g=a;return p.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),f.copyFrom(c.matrix),l?(f.multiplyWithOffset(l,-c.scrollX*o.scrollFactorX,-c.scrollY*o.scrollFactorY),p.e=o.x,p.f=o.y):(p.e-=c.scrollX*o.scrollFactorX,p.f-=c.scrollY*o.scrollFactorY),f.multiply(p,g),h};e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:t(656),BOOT:t(657),CREATE:t(658),DESTROY:t(659),PAUSE:t(660),POST_UPDATE:t(661),PRE_RENDER:t(662),PRE_UPDATE:t(663),READY:t(664),REMOVED_FROM_SCENE:t(665),RENDER:t(666),RESUME:t(667),SHUTDOWN:t(668),SLEEP:t(669),START:t(670),TRANSITION_COMPLETE:t(671),TRANSITION_INIT:t(672),TRANSITION_OUT:t(673),TRANSITION_START:t(674),TRANSITION_WAKE:t(675),UPDATE:t(676),WAKE:t(677)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BLUR:t(612),BOOT:t(613),CONTEXT_LOST:t(614),CONTEXT_RESTORED:t(615),DESTROY:t(616),FOCUS:t(617),HIDDEN:t(618),PAUSE:t(619),POST_RENDER:t(620),POST_STEP:t(621),PRE_RENDER:t(622),PRE_STEP:t(623),READY:t(624),RESUME:t(625),STEP:t(626),VISIBLE:t(627)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(95),a=t(2),h=t(155),r=t(240),o=t(517),c=t(156),l=new s({initialize:function(p,g){this.loader=p,this.cache=a(g,"cache",!1),this.type=a(g,"type",!1),this.key=a(g,"key",!1);var m=this.key;if(p.prefix&&p.prefix!==""&&(this.key=p.prefix+m),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var x=a(g,"url");x===void 0?x=p.path+m+"."+a(g,"extension",""):typeof x=="string"&&!x.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(x=p.path+x),this.url=x,this.src="",this.xhrSettings=c(a(g,"responseType",void 0)),a(g,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,a(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?u.FILE_POPULATED:u.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=a(g,"config",{}),this.multiFile,this.linkFile},setLink:function(f){this.linkFile=f,f.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===u.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=u.FILE_LOADING,this.src=h(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=o(this,this.loader.xhr))},onLoad:function(f,p){var g=f.responseURL&&(f.responseURL.indexOf("file://")===0||f.responseURL.indexOf("capacitor://")===0),m=g&&p.target.status===0,x=!(p.target&&p.target.status!==200)||m;f.readyState===4&&f.status>=400&&f.status<=599&&(x=!1),this.state=u.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,x)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(f){f.lengthComputable&&(this.bytesLoaded=f.loaded,this.bytesTotal=f.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=u.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=u.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=u.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(f){f===void 0&&(f=this.data);var p=this.key,g=this.type;this.loader.emit(n.FILE_COMPLETE,p,g,f),this.loader.emit(n.FILE_KEY_COMPLETE+g+"-"+p,p,g,f),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});l.createObjectURL=function(f,p,g){if(typeof URL=="function")f.src=URL.createObjectURL(p);else{var m=new FileReader;m.onload=function(){f.removeAttribute("crossOrigin"),f.src="data:"+(p.type||g)+";base64,"+m.result.split(",")[1]},m.onerror=f.onerror,m.readAsDataURL(p)}},l.revokeObjectURL=function(f){typeof URL=="function"&&URL.revokeObjectURL(f.src)},e.exports=l},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},s={},u={};u.register=function(n,a,h,r){r===void 0&&(r=!1),t[n]={plugin:a,mapping:h,custom:r}},u.registerCustom=function(n,a,h,r){s[n]={plugin:a,mapping:h,data:r}},u.hasCore=function(n){return t.hasOwnProperty(n)},u.hasCustom=function(n){return s.hasOwnProperty(n)},u.getCore=function(n){return t[n]},u.getCustom=function(n){return s[n]},u.getCustomClass=function(n){return s.hasOwnProperty(n)?s[n].plugin:null},u.remove=function(n){t.hasOwnProperty(n)&&delete t[n]},u.removeCustom=function(n){s.hasOwnProperty(n)&&delete s[n]},u.destroyCorePlugins=function(){for(var n in t)t.hasOwnProperty(n)&&delete t[n]},u.destroyCustomPlugins=function(){for(var n in s)s.hasOwnProperty(n)&&delete s[n]},e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(14),n=t(3),a=new s({initialize:function(r,o,c,l,f,p){r===void 0&&(r=1),o===void 0&&(o=0),c===void 0&&(c=0),l===void 0&&(l=1),f===void 0&&(f=0),p===void 0&&(p=0),this.matrix=new Float32Array([r,o,c,l,f,p,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(h){this.matrix[0]=h}},b:{get:function(){return this.matrix[1]},set:function(h){this.matrix[1]=h}},c:{get:function(){return this.matrix[2]},set:function(h){this.matrix[2]=h}},d:{get:function(){return this.matrix[3]},set:function(h){this.matrix[3]=h}},e:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},f:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},tx:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},ty:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var h=this.matrix,r=h[0],o=h[1],c=h[2],l=h[3];return r||o?o>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):c||l?u.TAU-(l>0?Math.acos(-c/this.scaleY):-Math.acos(c/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var h=this.matrix;return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,this},translate:function(h,r){var o=this.matrix;return o[4]=o[0]*h+o[2]*r+o[4],o[5]=o[1]*h+o[3]*r+o[5],this},scale:function(h,r){var o=this.matrix;return o[0]*=h,o[1]*=h,o[2]*=r,o[3]*=r,this},rotate:function(h){var r=Math.sin(h),o=Math.cos(h),c=this.matrix,l=c[0],f=c[1],p=c[2],g=c[3];return c[0]=l*o+p*r,c[1]=f*o+g*r,c[2]=l*-r+p*o,c[3]=f*-r+g*o,this},multiply:function(h,r){var o=this.matrix,c=h.matrix,l=o[0],f=o[1],p=o[2],g=o[3],m=o[4],x=o[5],y=c[0],T=c[1],S=c[2],C=c[3],E=c[4],P=c[5],M=r===void 0?this:r;return M.a=y*l+T*p,M.b=y*f+T*g,M.c=S*l+C*p,M.d=S*f+C*g,M.e=E*l+P*p+m,M.f=E*f+P*g+x,M},multiplyWithOffset:function(h,r,o){var c=this.matrix,l=h.matrix,f=c[0],p=c[1],g=c[2],m=c[3],x=c[4],y=c[5],T=r*f+o*g+x,S=r*p+o*m+y,C=l[0],E=l[1],P=l[2],M=l[3],O=l[4],A=l[5];return c[0]=C*f+E*g,c[1]=C*p+E*m,c[2]=P*f+M*g,c[3]=P*p+M*m,c[4]=O*f+A*g+T,c[5]=O*p+A*m+S,this},transform:function(h,r,o,c,l,f){var p=this.matrix,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],S=p[5];return p[0]=h*g+r*x,p[1]=h*m+r*y,p[2]=o*g+c*x,p[3]=o*m+c*y,p[4]=l*g+f*x+T,p[5]=l*m+f*y+S,this},transformPoint:function(h,r,o){o===void 0&&(o={x:0,y:0});var c=this.matrix,l=c[0],f=c[1],p=c[2],g=c[3],m=c[4],x=c[5];return o.x=h*l+r*p+m,o.y=h*f+r*g+x,o},invert:function(){var h=this.matrix,r=h[0],o=h[1],c=h[2],l=h[3],f=h[4],p=h[5],g=r*l-o*c;return h[0]=l/g,h[1]=-o/g,h[2]=-c/g,h[3]=r/g,h[4]=(c*p-l*f)/g,h[5]=-(r*p-o*f)/g,this},copyFrom:function(h){var r=this.matrix;return r[0]=h.a,r[1]=h.b,r[2]=h.c,r[3]=h.d,r[4]=h.e,r[5]=h.f,this},copyFromArray:function(h){var r=this.matrix;return r[0]=h[0],r[1]=h[1],r[2]=h[2],r[3]=h[3],r[4]=h[4],r[5]=h[5],this},copyToContext:function(h){var r=this.matrix;return h.transform(r[0],r[1],r[2],r[3],r[4],r[5]),h},setToContext:function(h){var r=this.matrix;return h.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),h},copyToArray:function(h){var r=this.matrix;return h===void 0?h=[r[0],r[1],r[2],r[3],r[4],r[5]]:(h[0]=r[0],h[1]=r[1],h[2]=r[2],h[3]=r[3],h[4]=r[4],h[5]=r[5]),h},setTransform:function(h,r,o,c,l,f){var p=this.matrix;return p[0]=h,p[1]=r,p[2]=o,p[3]=c,p[4]=l,p[5]=f,this},decomposeMatrix:function(){var h=this.decomposedMatrix,r=this.matrix,o=r[0],c=r[1],l=r[2],f=r[3],p=o*f-c*l;if(h.translateX=r[4],h.translateY=r[5],o||c){var g=Math.sqrt(o*o+c*c);h.rotation=c>0?Math.acos(o/g):-Math.acos(o/g),h.scaleX=g,h.scaleY=p/g}else if(l||f){var m=Math.sqrt(l*l+f*f);h.rotation=Math.PI*.5-(f>0?Math.acos(-l/m):-Math.acos(l/m)),h.scaleX=p/m,h.scaleY=m}else h.rotation=0,h.scaleX=0,h.scaleY=0;return h},applyITRS:function(h,r,o,c,l){var f=this.matrix,p=Math.sin(o),g=Math.cos(o);return f[4]=h,f[5]=r,f[0]=g*c,f[1]=p*c,f[2]=-p*l,f[3]=g*l,this},applyInverse:function(h,r,o){o===void 0&&(o=new n);var c=this.matrix,l=c[0],f=c[1],p=c[2],g=c[3],m=c[4],x=c[5],y=1/(l*g+p*-f);return o.x=g*y*h+-p*y*r+(x*p-m*g)*y,o.y=l*y*r+-f*y*h+(-x*l+m*f)*y,o},getX:function(h,r){return h*this.a+r*this.c+this.e},getY:function(h,r){return h*this.b+r*this.d+this.f},getXRound:function(h,r,o){var c=this.getX(h,r);return o&&(c=Math.round(c)),c},getYRound:function(h,r,o){var c=this.getY(h,r);return o&&(c=Math.round(c)),c},getCSSMatrix:function(){var h=this.matrix;return"matrix("+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n,a,h,r,o,c){n===void 0&&(n=0),a===void 0&&(a=0),h===void 0&&(h=c.width),r===void 0&&(r=c.height),o||(o={});var l=s(o,"isNotEmpty",!1),f=s(o,"isColliding",!1),p=s(o,"hasInterestingFace",!1);n<0&&(h+=n,n=0),a<0&&(r+=a,a=0),n+h>c.width&&(h=Math.max(c.width-n,0)),a+r>c.height&&(r=Math.max(c.height-a,0));for(var g=[],m=a;m<a+r;m++)for(var x=n;x<n+h;x++){var y=c.data[m][x];if(y!==null){if(l&&y.index===-1||f&&!y.collides||p&&!y.hasInterestingFace)continue;g.push(y)}}return g};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h,r){a===void 0&&(a=0),h===void 0&&(h=0),r===void 0&&(r=1);var o,c=0,l=s.length;if(r===1)for(o=h;o<l;o++)s[o][u]=n+c*a,c++;else for(o=h;o>=0;o--)s[o][u]=n+c*a,c++;return s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(13),n=function(a,h,r){h.x=u(r,"x",0),h.y=u(r,"y",0),h.depth=u(r,"depth",0),h.flipX=u(r,"flipX",!1),h.flipY=u(r,"flipY",!1);var o=u(r,"scale",null);typeof o=="number"?h.setScale(o):o!==null&&(h.scaleX=u(o,"x",1),h.scaleY=u(o,"y",1));var c=u(r,"scrollFactor",null);typeof c=="number"?h.setScrollFactor(c):c!==null&&(h.scrollFactorX=u(c,"x",1),h.scrollFactorY=u(c,"y",1)),h.rotation=u(r,"rotation",0);var l=u(r,"angle",null);l!==null&&(h.angle=l),h.alpha=u(r,"alpha",1);var f=u(r,"origin",null);if(typeof f=="number")h.setOrigin(f);else if(f!==null){var p=u(f,"x",.5),g=u(f,"y",.5);h.setOrigin(p,g)}h.blendMode=u(r,"blendMode",s.NORMAL),h.visible=u(r,"visible",!0);var m=u(r,"add",!0);return m&&a.sys.displayList.add(h),h.preUpdate&&a.sys.updateList.add(h),h};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,a,h,r,o){var c=r.alpha*h.alpha;if(c<=0)return!1;var l=s(h,r,o).calc;return a.globalCompositeOperation=n.blendModes[h.blendMode],a.globalAlpha=c,a.save(),l.setToContext(a),a.imageSmoothingEnabled=!(!n.antialias||h.frame&&h.frame.source.scaleMode),!0};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(33),u=t(192),n=[],a=!1,h=function(){var r=function(y,T,S,C,E){T===void 0&&(T=1),S===void 0&&(S=1),C===void 0&&(C=s.CANVAS),E===void 0&&(E=!1);var P,M=l(C);return M===null?(M={parent:y,canvas:document.createElement("canvas"),type:C},C===s.CANVAS&&n.push(M),P=M.canvas):(M.parent=y,P=M.canvas),E&&(M.parent=P),P.width=T,P.height=S,a&&C===s.CANVAS&&u.disable(P.getContext("2d")),P},o=function(y,T,S){return r(y,T,S,s.CANVAS)},c=function(y,T,S){return r(y,T,S,s.WEBGL)},l=function(y){if(y===void 0&&(y=s.CANVAS),y===s.WEBGL)return null;for(var T=0;T<n.length;T++){var S=n[T];if(!S.parent&&S.type===y)return S}return null},f=function(y){var T=y instanceof HTMLCanvasElement;n.forEach(function(S){(T&&S.canvas===y||!T&&S.parent===y)&&(S.parent=null,S.canvas.width=1,S.canvas.height=1)})},p=function(){var y=0;return n.forEach(function(T){T.parent&&y++}),y},g=function(){return n.length-p()},m=function(){a=!0},x=function(){a=!1};return{create2D:o,create:r,createWebGL:c,disableSmoothing:m,enableSmoothing:x,first:l,free:g,pool:n,remove:f,total:p}};e.exports=h()},function(e,d){var t={};e.exports=t,function(){t._nextId=0,t._seed=0,t._nowStartTime=+new Date,t.extend=function(u,n){var a,h;typeof n=="boolean"?(a=2,h=n):(a=1,h=!0);for(var r=a;r<arguments.length;r++){var o=arguments[r];if(o)for(var c in o)h&&o[c]&&o[c].constructor===Object&&(!u[c]||u[c].constructor===Object)?(u[c]=u[c]||{},t.extend(u[c],h,o[c])):u[c]=o[c]}return u},t.clone=function(u,n){return t.extend({},n,u)},t.keys=function(u){if(Object.keys)return Object.keys(u);var n=[];for(var a in u)n.push(a);return n},t.values=function(u){var n=[];if(Object.keys){for(var a=Object.keys(u),h=0;h<a.length;h++)n.push(u[a[h]]);return n}for(var r in u)n.push(u[r]);return n},t.get=function(u,n,a,h){n=n.split(".").slice(a,h);for(var r=0;r<n.length;r+=1)u=u[n[r]];return u},t.set=function(u,n,a,h,r){var o=n.split(".").slice(h,r);return t.get(u,n,0,-1)[o[o.length-1]]=a,a},t.shuffle=function(u){for(var n=u.length-1;n>0;n--){var a=Math.floor(t.random()*(n+1)),h=u[n];u[n]=u[a],u[a]=h}return u},t.choose=function(u){return u[Math.floor(t.random()*u.length)]},t.isElement=function(u){return typeof HTMLElement!="undefined"?u instanceof HTMLElement:!!(u&&u.nodeType&&u.nodeName)},t.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},t.isFunction=function(u){return typeof u=="function"},t.isPlainObject=function(u){return typeof u=="object"&&u.constructor===Object},t.isString=function(u){return Object.prototype.toString.call(u)==="[object String]"},t.clamp=function(u,n,a){return u<n?n:u>a?a:u},t.sign=function(u){return u<0?-1:1},t.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-t._nowStartTime},t.random=function(u,n){return u=typeof u!="undefined"?u:0,n=typeof n!="undefined"?n:1,u+s()*(n-u)};var s=function(){return t._seed=(t._seed*9301+49297)%233280,t._seed/233280};t.colorToNumber=function(u){return u=u.replace("#",""),u.length==3&&(u=u.charAt(0)+u.charAt(0)+u.charAt(1)+u.charAt(1)+u.charAt(2)+u.charAt(2)),parseInt(u,16)},t.logLevel=1,t.log=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.info=function(){console&&t.logLevel>0&&t.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.warn=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.nextId=function(){return t._nextId++},t.indexOf=function(u,n){if(u.indexOf)return u.indexOf(n);for(var a=0;a<u.length;a++)if(u[a]===n)return a;return-1},t.map=function(u,n){if(u.map)return u.map(n);for(var a=[],h=0;h<u.length;h+=1)a.push(n(u[h]));return a},t.topologicalSort=function(u){var n=[],a=[],h=[];for(var r in u)!a[r]&&!h[r]&&t._topologicalSort(r,a,h,u,n);return n},t._topologicalSort=function(u,n,a,h,r){var o=h[u]||[];a[u]=!0;for(var c=0;c<o.length;c+=1){var l=o[c];a[l]||n[l]||t._topologicalSort(l,n,a,h,r)}a[u]=!1,n[u]=!0,r.push(u)},t.chain=function(){for(var u=[],n=0;n<arguments.length;n+=1){var a=arguments[n];a._chained?u.push.apply(u,a._chained):u.push(a)}var h=function(){for(var r,o=new Array(arguments.length),c=0,l=arguments.length;c<l;c++)o[c]=arguments[c];for(c=0;c<u.length;c+=1){var f=u[c].apply(r,o);typeof f!="undefined"&&(r=f)}return r};return h._chained=u,h},t.chainPathBefore=function(u,n,a){return t.set(u,n,t.chain(a,t.get(u,n)))},t.chainPathAfter=function(u,n,a){return t.set(u,n,t.chain(t.get(u,n),a))}}()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={VERSION:"3.55.2",BlendModes:t(35),ScaleModes:t(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};e.exports=s},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(47),h=new s({Extends:n,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Transform,u.Visible],initialize:function(o,c,l){c===void 0&&(c="Shape"),n.call(this,o,c),this.geom=l,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new a,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(r,o){return o===void 0&&(o=1),r===void 0?this.isFilled=!1:(this.fillColor=r,this.fillAlpha=o,this.isFilled=!0),this},setStrokeStyle:function(r,o,c){return c===void 0&&(c=1),r===void 0?this.isStroked=!1:(this.lineWidth=r,this.strokeColor=o,this.strokeAlpha=c,this.isStroked=!0),this},setClosePath:function(r){return this.closePath=r,this},setSize:function(r,o){return this.width=r,this.height=o,this},setDisplaySize:function(r,o){return this.displayWidth=r,this.displayHeight=o,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}}});e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=function(n){return n*s.DEG_TO_RAD};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DESTROY:t(743),FADE_IN_COMPLETE:t(744),FADE_IN_START:t(745),FADE_OUT_COMPLETE:t(746),FADE_OUT_START:t(747),FLASH_COMPLETE:t(748),FLASH_START:t(749),FOLLOW_UPDATE:t(750),PAN_COMPLETE:t(751),PAN_START:t(752),POST_RENDER:t(753),PRE_RENDER:t(754),ROTATE_COMPLETE:t(755),ROTATE_START:t(756),SHAKE_COMPLETE:t(757),SHAKE_START:t(758),ZOOM_COMPLETE:t(759),ZOOM_START:t(760)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(103),n=t(328),a=t(188),h=t(329),r=new s({initialize:function(c,l,f,p){c===void 0&&(c=0),l===void 0&&(l=0),f===void 0&&(f=0),p===void 0&&(p=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(c,l,f,p)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(o,c,l,f,p){return f===void 0&&(f=255),p===void 0&&(p=!0),this._locked=!0,this.red=o,this.green=c,this.blue=l,this.alpha=f,this._locked=!1,this.update(p)},setGLTo:function(o,c,l,f){return f===void 0&&(f=1),this._locked=!0,this.redGL=o,this.greenGL=c,this.blueGL=l,this.alphaGL=f,this._locked=!1,this.update(!0)},setFromRGB:function(o){return this._locked=!0,this.red=o.r,this.green=o.g,this.blue=o.b,o.hasOwnProperty("a")&&(this.alpha=o.a),this._locked=!1,this.update(!0)},setFromHSV:function(o,c,l){return a(o,c,l,this)},update:function(o){if(o===void 0&&(o=!1),this._locked)return this;var c=this.r,l=this.g,f=this.b,p=this.a;return this._color=u(c,l,f),this._color32=n(c,l,f,p),this._rgba="rgba("+c+","+l+","+f+","+p/255+")",o&&h(c,l,f,this),this},updateHSV:function(){var o=this.r,c=this.g,l=this.b;return h(o,c,l,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(o){return this.setTo(o,o,o)},random:function(o,c){o===void 0&&(o=0),c===void 0&&(c=255);var l=Math.floor(o+Math.random()*(c-o)),f=Math.floor(o+Math.random()*(c-o)),p=Math.floor(o+Math.random()*(c-o));return this.setTo(l,f,p)},randomGray:function(o,c){o===void 0&&(o=0),c===void 0&&(c=255);var l=Math.floor(o+Math.random()*(c-o));return this.setTo(l,l,l)},saturate:function(o){return this.s+=o/100,this},desaturate:function(o){return this.s-=o/100,this},lighten:function(o){return this.v+=o/100,this},darken:function(o){return this.v-=o/100,this},brighten:function(o){var c=this.r,l=this.g,f=this.b;return c=Math.max(0,Math.min(255,c-Math.round(255*-(o/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(o/100)))),f=Math.max(0,Math.min(255,f-Math.round(255*-(o/100)))),this.setTo(c,l,f)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(o){this.gl[0]=Math.min(Math.abs(o),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(o){this.gl[1]=Math.min(Math.abs(o),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(o){this.gl[2]=Math.min(Math.abs(o),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(o){this.gl[3]=Math.min(Math.abs(o),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(o){o=Math.floor(Math.abs(o)),this.r=Math.min(o,255),this.gl[0]=o/255,this.update(!0)}},green:{get:function(){return this.g},set:function(o){o=Math.floor(Math.abs(o)),this.g=Math.min(o,255),this.gl[1]=o/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(o){o=Math.floor(Math.abs(o)),this.b=Math.min(o,255),this.gl[2]=o/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(o){o=Math.floor(Math.abs(o)),this.a=Math.min(o,255),this.gl[3]=o/255,this.update()}},h:{get:function(){return this._h},set:function(o){this._h=o,a(o,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(o){this._s=o,a(this._h,o,this._v,this)}},v:{get:function(){return this._v},set:function(o){this._v=o,a(this._h,this._s,o,this)}}});e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,h,r){this.x=0,this.y=0,this.z=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=h||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this},max:function(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this},clone:function(){return new u(this.x,this.y,this.z)},addVectors:function(n,a){return this.x=n.x+a.x,this.y=n.y+a.y,this.z=n.z+a.z,this},crossVectors:function(n,a){var h=n.x,r=n.y,o=n.z,c=a.x,l=a.y,f=a.z;return this.x=r*f-o*l,this.y=o*c-h*f,this.z=h*l-r*c,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this},set:function(n,a,h){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0):(this.x=n||0,this.y=a||0,this.z=h||0),this},setFromMatrixPosition:function(n){return this.fromArray(n.val,12)},setFromMatrixColumn:function(n,a){return this.fromArray(n.val,a*4)},fromArray:function(n,a){return a===void 0&&(a=0),this.x=n[a],this.y=n[a+1],this.z=n[a+2],this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this},addScalar:function(n){return this.x+=n,this.y+=n,this.z+=n,this},addScale:function(n,a){return this.x+=n.x*a,this.y+=n.y*a,this.z+=n.z*a||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this},scale:function(n){return isFinite(n)?(this.x*=n,this.y*=n,this.z*=n):(this.x=0,this.y=0,this.z=0),this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(n){var a=n.x-this.x,h=n.y-this.y,r=n.z-this.z||0;return Math.sqrt(a*a+h*h+r*r)},distanceSq:function(n){var a=n.x-this.x,h=n.y-this.y,r=n.z-this.z||0;return a*a+h*h+r*r},length:function(){var n=this.x,a=this.y,h=this.z;return Math.sqrt(n*n+a*a+h*h)},lengthSq:function(){var n=this.x,a=this.y,h=this.z;return n*n+a*a+h*h},normalize:function(){var n=this.x,a=this.y,h=this.z,r=n*n+a*a+h*h;return r>0&&(r=1/Math.sqrt(r),this.x=n*r,this.y=a*r,this.z=h*r),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z},cross:function(n){var a=this.x,h=this.y,r=this.z,o=n.x,c=n.y,l=n.z;return this.x=h*l-r*c,this.y=r*o-a*l,this.z=a*c-h*o,this},lerp:function(n,a){a===void 0&&(a=0);var h=this.x,r=this.y,o=this.z;return this.x=h+a*(n.x-h),this.y=r+a*(n.y-r),this.z=o+a*(n.z-o),this},applyMatrix3:function(n){var a=this.x,h=this.y,r=this.z,o=n.val;return this.x=o[0]*a+o[3]*h+o[6]*r,this.y=o[1]*a+o[4]*h+o[7]*r,this.z=o[2]*a+o[5]*h+o[8]*r,this},applyMatrix4:function(n){var a=this.x,h=this.y,r=this.z,o=n.val,c=1/(o[3]*a+o[7]*h+o[11]*r+o[15]);return this.x=(o[0]*a+o[4]*h+o[8]*r+o[12])*c,this.y=(o[1]*a+o[5]*h+o[9]*r+o[13])*c,this.z=(o[2]*a+o[6]*h+o[10]*r+o[14])*c,this},transformMat3:function(n){var a=this.x,h=this.y,r=this.z,o=n.val;return this.x=a*o[0]+h*o[3]+r*o[6],this.y=a*o[1]+h*o[4]+r*o[7],this.z=a*o[2]+h*o[5]+r*o[8],this},transformMat4:function(n){var a=this.x,h=this.y,r=this.z,o=n.val;return this.x=o[0]*a+o[4]*h+o[8]*r+o[12],this.y=o[1]*a+o[5]*h+o[9]*r+o[13],this.z=o[2]*a+o[6]*h+o[10]*r+o[14],this},transformCoordinates:function(n){var a=this.x,h=this.y,r=this.z,o=n.val,c=a*o[0]+h*o[4]+r*o[8]+o[12],l=a*o[1]+h*o[5]+r*o[9]+o[13],f=a*o[2]+h*o[6]+r*o[10]+o[14],p=a*o[3]+h*o[7]+r*o[11]+o[15];return this.x=c/p,this.y=l/p,this.z=f/p,this},transformQuat:function(n){var a=this.x,h=this.y,r=this.z,o=n.x,c=n.y,l=n.z,f=n.w,p=f*a+c*r-l*h,g=f*h+l*a-o*r,m=f*r+o*h-c*a,x=-o*a-c*h-l*r;return this.x=p*f+x*-o+g*-l-m*-c,this.y=g*f+x*-c+m*-o-p*-l,this.z=m*f+x*-l+p*-c-g*-o,this},project:function(n){var a=this.x,h=this.y,r=this.z,o=n.val,c=o[0],l=o[1],f=o[2],p=o[3],g=o[4],m=o[5],x=o[6],y=o[7],T=o[8],S=o[9],C=o[10],E=o[11],P=o[12],M=o[13],O=o[14],A=o[15],R=1/(a*p+h*y+r*E+A);return this.x=(a*c+h*g+r*T+P)*R,this.y=(a*l+h*m+r*S+M)*R,this.z=(a*f+h*x+r*C+O)*R,this},projectViewMatrix:function(n,a){return this.applyMatrix4(n).applyMatrix4(a)},unprojectViewMatrix:function(n,a){return this.applyMatrix4(n).applyMatrix4(a)},unproject:function(n,a){var h=n.x,r=n.y,o=n.z,c=n.w,l=this.x-h,f=c-this.y-1-r,p=this.z;return this.x=2*l/o-1,this.y=2*f/c-1,this.z=2*p-1,this.project(a)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});u.ZERO=new u,u.RIGHT=new u(1,0,0),u.LEFT=new u(-1,0,0),u.UP=new u(0,-1,0),u.DOWN=new u(0,1,0),u.FORWARD=new u(0,0,1),u.BACK=new u(0,0,-1),u.ONE=new u(1,1,1),e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(e,d,t){var s={};e.exports=s;var u=t(64),n=t(83),a=t(165),h=t(32),r=t(84),o=t(271);(function(){s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s.create=function(l){var f={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!l.hasOwnProperty("position")&&l.hasOwnProperty("vertices")?l.position=u.centre(l.vertices):l.hasOwnProperty("vertices")||(f.vertices=u.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var p=h.extend(f,l);return c(p,l),p.setOnCollideWith=function(g,m){return m?this.onCollideWith[g.id]=m:delete this.onCollideWith[g.id],this},p},s.nextGroup=function(l){return l?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var c=function(l,f){f=f||{},s.set(l,{bounds:l.bounds||r.create(l.vertices),positionPrev:l.positionPrev||n.clone(l.position),anglePrev:l.anglePrev||l.angle,vertices:l.vertices,parts:l.parts||[l],isStatic:l.isStatic,isSleeping:l.isSleeping,parent:l.parent||l});var p=l.bounds;if(u.rotate(l.vertices,l.angle,l.position),o.rotate(l.axes,l.angle),r.update(p,l.vertices,l.velocity),s.set(l,{axes:f.axes||l.axes,area:f.area||l.area,mass:f.mass||l.mass,inertia:f.inertia||l.inertia}),l.parts.length===1){var g=l.centerOfMass,m=l.centerOffset,x=p.max.x-p.min.x,y=p.max.y-p.min.y;g.x=-(p.min.x-l.position.x)/x,g.y=-(p.min.y-l.position.y)/y,m.x=x*g.x,m.y=y*g.y}};s.set=function(l,f,p){var g;typeof f=="string"&&(g=f,f={},f[g]=p);for(g in f)if(!!Object.prototype.hasOwnProperty.call(f,g))switch(p=f[g],g){case"isStatic":s.setStatic(l,p);break;case"isSleeping":a.set(l,p);break;case"mass":s.setMass(l,p);break;case"density":s.setDensity(l,p);break;case"inertia":s.setInertia(l,p);break;case"vertices":s.setVertices(l,p);break;case"position":s.setPosition(l,p);break;case"angle":s.setAngle(l,p);break;case"velocity":s.setVelocity(l,p);break;case"angularVelocity":s.setAngularVelocity(l,p);break;case"parts":s.setParts(l,p);break;case"centre":s.setCentre(l,p);break;default:l[g]=p}},s.setStatic=function(l,f){for(var p=0;p<l.parts.length;p++){var g=l.parts[p];g.isStatic=f,f?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},s.setMass=function(l,f){var p=l.inertia/(l.mass/6);l.inertia=p*(f/6),l.inverseInertia=1/l.inertia,l.mass=f,l.inverseMass=1/l.mass,l.density=l.mass/l.area},s.setDensity=function(l,f){s.setMass(l,f*l.area),l.density=f},s.setInertia=function(l,f){l.inertia=f,l.inverseInertia=1/l.inertia},s.setVertices=function(l,f){f[0].body===l?l.vertices=f:l.vertices=u.create(f,l),l.axes=o.fromVertices(l.vertices),l.area=u.area(l.vertices),s.setMass(l,l.density*l.area);var p=u.centre(l.vertices);u.translate(l.vertices,p,-1),s.setInertia(l,s._inertiaScale*u.inertia(l.vertices,l.mass)),u.translate(l.vertices,l.position),r.update(l.bounds,l.vertices,l.velocity)},s.setParts=function(l,f,p){var g;for(f=f.slice(0),l.parts.length=0,l.parts.push(l),l.parent=l,g=0;g<f.length;g++){var m=f[g];m!==l&&(m.parent=l,l.parts.push(m))}if(l.parts.length!==1){if(p=typeof p!="undefined"?p:!0,p){var x=[];for(g=0;g<f.length;g++)x=x.concat(f[g].vertices);u.clockwiseSort(x);var y=u.hull(x),T=u.centre(y);s.setVertices(l,y),u.translate(l.vertices,T)}var S=s._totalProperties(l),C=S.centre.x,E=S.centre.y,P=l.bounds,M=l.centerOfMass,O=l.centerOffset;r.update(P,l.vertices,l.velocity),M.x=-(P.min.x-C)/(P.max.x-P.min.x),M.y=-(P.min.y-E)/(P.max.y-P.min.y),O.x=C,O.y=E,l.area=S.area,l.parent=l,l.position.x=C,l.position.y=E,l.positionPrev.x=C,l.positionPrev.y=E,s.setMass(l,S.mass),s.setInertia(l,S.inertia),s.setPosition(l,S.centre)}},s.setCentre=function(l,f,p){p?(l.positionPrev.x+=f.x,l.positionPrev.y+=f.y,l.position.x+=f.x,l.position.y+=f.y):(l.positionPrev.x=f.x-(l.position.x-l.positionPrev.x),l.positionPrev.y=f.y-(l.position.y-l.positionPrev.y),l.position.x=f.x,l.position.y=f.y)},s.setPosition=function(l,f){var p=n.sub(f,l.position);l.positionPrev.x+=p.x,l.positionPrev.y+=p.y;for(var g=0;g<l.parts.length;g++){var m=l.parts[g];m.position.x+=p.x,m.position.y+=p.y,u.translate(m.vertices,p),r.update(m.bounds,m.vertices,l.velocity)}},s.setAngle=function(l,f){var p=f-l.angle;l.anglePrev+=p;for(var g=0;g<l.parts.length;g++){var m=l.parts[g];m.angle+=p,u.rotate(m.vertices,p,l.position),o.rotate(m.axes,p),r.update(m.bounds,m.vertices,l.velocity),g>0&&n.rotateAbout(m.position,p,l.position,m.position)}},s.setVelocity=function(l,f){l.positionPrev.x=l.position.x-f.x,l.positionPrev.y=l.position.y-f.y,l.velocity.x=f.x,l.velocity.y=f.y,l.speed=n.magnitude(l.velocity)},s.setAngularVelocity=function(l,f){l.anglePrev=l.angle-f,l.angularVelocity=f,l.angularSpeed=Math.abs(l.angularVelocity)},s.translate=function(l,f){s.setPosition(l,n.add(l.position,f))},s.rotate=function(l,f,p){if(!p)s.setAngle(l,l.angle+f);else{var g=Math.cos(f),m=Math.sin(f),x=l.position.x-p.x,y=l.position.y-p.y;s.setPosition(l,{x:p.x+(x*g-y*m),y:p.y+(x*m+y*g)}),s.setAngle(l,l.angle+f)}},s.scale=function(l,f,p,g){var m=0,x=0;g=g||l.position;for(var y=0;y<l.parts.length;y++){var T=l.parts[y];T.scale.x=f,T.scale.y=p,u.scale(T.vertices,f,p,g),T.axes=o.fromVertices(T.vertices),T.area=u.area(T.vertices),s.setMass(T,l.density*T.area),u.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),s.setInertia(T,s._inertiaScale*u.inertia(T.vertices,T.mass)),u.translate(T.vertices,{x:T.position.x,y:T.position.y}),y>0&&(m+=T.area,x+=T.inertia),T.position.x=g.x+(T.position.x-g.x)*f,T.position.y=g.y+(T.position.y-g.y)*p,r.update(T.bounds,T.vertices,l.velocity)}l.parts.length>1&&(l.area=m,l.isStatic||(s.setMass(l,l.density*m),s.setInertia(l,x))),l.circleRadius&&(f===p?l.circleRadius*=f:l.circleRadius=null)},s.update=function(l,f,p,g){var m=Math.pow(f*p*l.timeScale,2),x=1-l.frictionAir*p*l.timeScale,y=l.position.x-l.positionPrev.x,T=l.position.y-l.positionPrev.y;l.velocity.x=y*x*g+l.force.x/l.mass*m,l.velocity.y=T*x*g+l.force.y/l.mass*m,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.position.x+=l.velocity.x,l.position.y+=l.velocity.y,l.angularVelocity=(l.angle-l.anglePrev)*x*g+l.torque/l.inertia*m,l.anglePrev=l.angle,l.angle+=l.angularVelocity,l.speed=n.magnitude(l.velocity),l.angularSpeed=Math.abs(l.angularVelocity);for(var S=0;S<l.parts.length;S++){var C=l.parts[S];u.translate(C.vertices,l.velocity),S>0&&(C.position.x+=l.velocity.x,C.position.y+=l.velocity.y),l.angularVelocity!==0&&(u.rotate(C.vertices,l.angularVelocity,l.position),o.rotate(C.axes,l.angularVelocity),S>0&&n.rotateAbout(C.position,l.angularVelocity,l.position,C.position)),r.update(C.bounds,C.vertices,l.velocity)}},s.applyForce=function(l,f,p){l.force.x+=p.x,l.force.y+=p.y;var g={x:f.x-l.position.x,y:f.y-l.position.y};l.torque+=g.x*p.y-g.y*p.x},s._totalProperties=function(l){for(var f={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=l.parts.length===1?0:1;p<l.parts.length;p++){var g=l.parts[p],m=g.mass!==1/0?g.mass:1;f.mass+=m,f.area+=g.area,f.inertia+=g.inertia,f.centre=n.add(f.centre,n.mult(g.position,m))}return f.centre=n.div(f.centre,f.mass),f}})()},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.y+s.height-s.height*s.originY};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x-s.width*s.originX};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x+s.width-s.width*s.originX};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.y-s.height*s.originY};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h,r){a===void 0&&(a=0),h===void 0&&(h=0),r===void 0&&(r=1);var o,c=0,l=s.length;if(r===1)for(o=h;o<l;o++)s[o][u]+=n+c*a,c++;else for(o=h;o>=0;o--)s[o][u]+=n+c*a,c++;return s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(307),n=t(172),a=t(56),h=t(173),r=t(3),o=new s({initialize:function(l,f,p,g){l===void 0&&(l=0),f===void 0&&(f=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=a.LINE,this.x1=l,this.y1=f,this.x2=p,this.y2=g},getPoint:function(c,l){return u(this,c,l)},getPoints:function(c,l,f){return n(this,c,l,f)},getRandomPoint:function(c){return h(this,c)},setTo:function(c,l,f,p){return c===void 0&&(c=0),l===void 0&&(l=0),f===void 0&&(f=0),p===void 0&&(p=0),this.x1=c,this.y1=l,this.x2=f,this.y2=p,this},getPointA:function(c){return c===void 0&&(c=new r),c.set(this.x1,this.y1),c},getPointB:function(c){return c===void 0&&(c=new r),c.set(this.x2,this.y2),c},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(c){this.x1<=this.x2?this.x1=c:this.x2=c}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(c){this.x1>this.x2?this.x1=c:this.x2=c}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(c){this.y1<=this.y2?this.y1=c:this.y2=c}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(c){this.y1>this.y2?this.y1=c:this.y2=c}}});e.exports=o},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h=n||u.fillColor,r=a||u.fillAlpha,o=(h&16711680)>>>16,c=(h&65280)>>>8,l=h&255;s.fillStyle="rgba("+o+","+c+","+l+","+r+")"};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,h,r,o){var c=[];o.forEach(function(f){f&&c.push(f)}),this.loader=a,this.type=h,this.key=r,this.multiKeyIndex=a.multiKeyIndex++,this.files=c,this.complete=!1,this.pending=c.length,this.failed=0,this.config={},this.baseURL=a.baseURL,this.path=a.path,this.prefix=a.prefix;for(var l=0;l<c.length;l++)c[l].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(n){return this.files.push(n),n.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(n){var a=this.files.indexOf(n);a!==-1&&this.pending--},onFileFailed:function(n){var a=this.files.indexOf(n);a!==-1&&this.failed++}});e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h=s-n,r=u-a;return Math.sqrt(h*h+r*r)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BOOT:t(922),DESTROY:t(923),DRAG_END:t(924),DRAG_ENTER:t(925),DRAG:t(926),DRAG_LEAVE:t(927),DRAG_OVER:t(928),DRAG_START:t(929),DROP:t(930),GAME_OUT:t(931),GAME_OVER:t(932),GAMEOBJECT_DOWN:t(933),GAMEOBJECT_DRAG_END:t(934),GAMEOBJECT_DRAG_ENTER:t(935),GAMEOBJECT_DRAG:t(936),GAMEOBJECT_DRAG_LEAVE:t(937),GAMEOBJECT_DRAG_OVER:t(938),GAMEOBJECT_DRAG_START:t(939),GAMEOBJECT_DROP:t(940),GAMEOBJECT_MOVE:t(941),GAMEOBJECT_OUT:t(942),GAMEOBJECT_OVER:t(943),GAMEOBJECT_POINTER_DOWN:t(944),GAMEOBJECT_POINTER_MOVE:t(945),GAMEOBJECT_POINTER_OUT:t(946),GAMEOBJECT_POINTER_OVER:t(947),GAMEOBJECT_POINTER_UP:t(948),GAMEOBJECT_POINTER_WHEEL:t(949),GAMEOBJECT_UP:t(950),GAMEOBJECT_WHEEL:t(951),MANAGER_BOOT:t(952),MANAGER_PROCESS:t(953),MANAGER_UPDATE:t(954),POINTER_DOWN:t(955),POINTER_DOWN_OUTSIDE:t(956),POINTER_MOVE:t(957),POINTER_OUT:t(958),POINTER_OVER:t(959),POINTER_UP:t(960),POINTER_UP_OUTSIDE:t(961),POINTER_WHEEL:t(962),POINTERLOCK_CHANGE:t(963),PRE_UPDATE:t(964),SHUTDOWN:t(965),START:t(966),UPDATE:t(967)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.y=u+s.height*s.originY,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x=u+s.width*s.originX,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x=u-s.width+s.width*s.originX,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.y=u-s.height+s.height*s.originY,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.width<=0||s.height<=0?!1:s.x<=u&&s.x+s.width>=u&&s.y<=n&&s.y+s.height>=n};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(175),n=t(9),a=t(374),h=t(2),r=t(69),o=t(91),c=t(141),l=t(12),f=t(375),p=new s({Extends:n,initialize:function(m){n.call(this);var x=m.game,y=x.renderer,T=y.gl;this.name=h(m,"name","WebGLPipeline"),this.game=x,this.renderer=y,this.manager,this.gl=T,this.view=x.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=h(m,"topology",T.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=h(m,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=m,this.glReset=!1},boot:function(){var g,m=this.gl,x=this.config,y=this.renderer;this.isPostFX||(this.projectionMatrix=new r().identity());var T=this.renderTargets,S=h(x,"renderTarget",!1);typeof S=="boolean"&&S&&(S=1);var C=y.width,E=y.height;if(typeof S=="number")for(g=0;g<S;g++)T.push(new c(y,C,E,1,0,!0));else if(Array.isArray(S))for(g=0;g<S.length;g++){var P=h(S[g],"scale",1),M=h(S[g],"minFilter",0),O=h(S[g],"autoClear",1);T.push(new c(y,C,E,P,M,O))}T.length&&(this.currentRenderTarget=T[0]),this.setShadersFromConfig(x);var A=this.shaders,R=0;for(g=0;g<A.length;g++)A[g].vertexSize>R&&(R=A[g].vertexSize);var F=h(x,"batchSize",y.config.batchSize);this.vertexCapacity=F*6;var I=new ArrayBuffer(this.vertexCapacity*R);this.vertexData=I,this.bytes=new Uint8Array(I),this.vertexViewF32=new Float32Array(I),this.vertexViewU32=new Uint32Array(I);var B=h(x,"vertices",null);for(B?(this.vertexViewF32.set(B),this.vertexBuffer=y.createVertexBuffer(I,m.STATIC_DRAW)):this.vertexBuffer=y.createVertexBuffer(I.byteLength,m.DYNAMIC_DRAW),this.setVertexBuffer(),g=A.length-1;g>=0;g--)A[g].rebind();this.hasBooted=!0,y.on(o.RESIZE,this.resize,this),y.on(o.PRE_RENDER,this.onPreRender,this),y.on(o.RENDER,this.onRender,this),y.on(o.POST_RENDER,this.onPostRender,this),this.emit(a.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,m){var x=this.renderer;if(g!==this.currentShader||x.currentProgram!==this.currentShader.program){this.flush(),x.resetTextures();var y=this.setVertexBuffer();y&&!m&&(m=!0),g.bind(m,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var m=this.shaders,x=0;x<m.length;x++)if(m[x].name===g)return m[x]},setShadersFromConfig:function(g){var m,x=this.shaders,y=this.renderer;for(m=0;m<x.length;m++)x[m].destroy();var T="vertShader",S="fragShader",C="attributes",E=h(g,T,null),P=l.parseFragmentShaderMaxTextures(h(g,S,null),y.maxTextures),M=h(g,C,null),O=h(g,"shaders",[]),A=O.length;if(A===0)E&&P&&(this.shaders=[new f(this,"default",E,P,u(M))]);else{var R=[];for(m=0;m<A;m++){var F=O[m],I=h(F,"name","default"),B=h(F,T,E),N=l.parseFragmentShaderMaxTextures(h(F,S,P),y.maxTextures),Y=h(F,C,M);B&&N&&R.push(new f(this,I,B,N,u(Y)))}this.shaders=R}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(g,m){return m===void 0&&(m=g.frame),this.currentUnit=this.renderer.setTextureSource(m.source),this.currentUnit},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},resize:function(g,m){(g!==this.width||m!==this.height)&&this.flush(),this.width=g,this.height=m;for(var x=this.renderTargets,y=0;y<x.length;y++)x[y].resize(g,m);return this.setProjectionMatrix(g,m),this.emit(a.RESIZE,g,m,this),this.onResize(g,m),this},setProjectionMatrix:function(g,m){var x=this.projectionMatrix;if(!x)return this;this.projectionWidth=g,this.projectionHeight=m,x.ortho(0,g,m,0,-1e3,1e3);for(var y=this.shaders,T="uProjectionMatrix",S=0;S<y.length;S++){var C=y[S];C.hasUniform(T)&&(C.resetUniform(T),C.setMatrix4fv(T,!1,x.val,C))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,m=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==m)&&this.setProjectionMatrix(g,m)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var m=this.setVertexBuffer();return g.bind(m),this.currentShader=g,this.emit(a.BIND,this,g),this.onActive(g),this},rebind:function(g){this.setVertexBuffer();for(var m=this.shaders,x=m.length-1;x>=0;x--){var y=m[x].rebind();(!g||y===g)&&(this.currentShader=y)}return this.emit(a.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var g=this.gl,m=this.vertexBuffer;return g.getParameter(g.ARRAY_BUFFER_BINDING)!==m?(g.bindBuffer(g.ARRAY_BUFFER,m),!0):!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(a.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var m=this.gl,x=this.vertexCount,y=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),x===this.vertexCapacity?m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.DYNAMIC_DRAW):m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,x*y)),m.drawArrays(this.topology,0,x)),this.vertexCount=0,this.emit(a.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,m,x,y,T,S,C){var E=this.vertexViewF32,P=this.vertexViewU32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++M]=g,E[++M]=m,E[++M]=x,E[++M]=y,E[++M]=T,E[++M]=S,P[++M]=C,this.vertexCount++},batchQuad:function(g,m,x,y,T,S,C,E,P,M,O,A,R,F,I,B,N,Y,X,W){W===void 0&&(W=this.currentUnit);var w=!1;return this.shouldFlush(6)&&(this.flush(),w=!0,W=this.setTexture2D(X)),this.batchVert(m,x,M,O,W,Y,F),this.batchVert(y,T,M,R,W,Y,B),this.batchVert(S,C,A,R,W,Y,N),this.batchVert(m,x,M,O,W,Y,F),this.batchVert(S,C,A,R,W,Y,N),this.batchVert(E,P,A,O,W,Y,I),this.onBatch(g),w},batchTri:function(g,m,x,y,T,S,C,E,P,M,O,A,R,F,I,B,N){N===void 0&&(N=this.currentUnit);var Y=!1;return this.shouldFlush(3)&&(this.flush(),Y=!0,N=this.setTexture2D(B)),this.batchVert(m,x,E,P,N,I,A),this.batchVert(y,T,E,O,N,I,R),this.batchVert(S,C,M,O,N,I,F),this.onBatch(g),Y},drawFillRect:function(g,m,x,y,T,S,C,E){C===void 0&&(C=this.renderer.whiteTexture.glTexture),E===void 0&&(E=!0),g=Math.floor(g),m=Math.floor(m);var P=Math.floor(g+x),M=Math.floor(m+y),O=this.setTexture2D(C),A=l.getTintAppendFloatAlphaAndSwap(T,S),R=0,F=0,I=1,B=1;E&&(F=1,B=0),this.batchQuad(null,g,m,g,M,P,M,P,m,R,F,I,B,A,A,A,A,0,C,O)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(g),this.currentUnit},bindTexture:function(g,m){m===void 0&&(m=0);var x=this.gl;return x.activeTexture(x.TEXTURE0+m),x.bindTexture(x.TEXTURE_2D,g),this},bindRenderTarget:function(g,m){return this.bindTexture(g.texture,m)},setTime:function(g){return this.set1f(g,this.game.loop.getDuration()),this},set1f:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1f(g,m),this},set2f:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2f(g,m,x),this},set3f:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3f(g,m,x,y),this},set4f:function(g,m,x,y,T,S){return S===void 0&&(S=this.currentShader),S.set4f(g,m,x,y,T),this},set1fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1fv(g,m),this},set2fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2fv(g,m),this},set3fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3fv(g,m),this},set4fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4fv(g,m),this},set1iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1iv(g,m),this},set2iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2iv(g,m),this},set3iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3iv(g,m),this},set4iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4iv(g,m),this},set1i:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1i(g,m),this},set2i:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2i(g,m,x),this},set3i:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3i(g,m,x,y),this},set4i:function(g,m,x,y,T,S){return S===void 0&&(S=this.currentShader),S.set4i(g,m,x,y,T),this},setMatrix2fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix2fv(g,m,x),this},setMatrix3fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix3fv(g,m,x),this},setMatrix4fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix4fv(g,m,x),this},destroy:function(){this.emit(a.DESTROY,this);var g,m=this.shaders;for(g=0;g<m.length;g++)m[g].destroy();var x=this.renderTargets;for(g=0;g<x.length;g++)x[g].destroy();this.gl.deleteBuffer(this.vertexBuffer);var y=this.renderer;return y.off(o.RESIZE,this.resize,this),y.off(o.PRE_RENDER,this.onPreRender,this),y.off(o.RENDER,this.onRender,this),y.off(o.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});e.exports=p},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function s(L,D,b){b=b||2;var G=D&&D.length,z=G?D[0]*b:L.length,U=u(L,0,z,b,!0),H=[];if(!U||U.next===U.prev)return H;var $,K,Z,k,J,q,Q;if(G&&(U=l(L,D,U,b)),L.length>80*b){$=Z=L[0],K=k=L[1];for(var _=b;_<z;_+=b)J=L[_],q=L[_+1],J<$&&($=J),q<K&&(K=q),J>Z&&(Z=J),q>k&&(k=q);Q=Math.max(Z-$,k-K),Q=Q!==0?1/Q:0}return a(U,H,b,$,K,Q),H}function u(L,D,b,G,z){var U,H;if(z===w(L,D,b,G)>0)for(U=D;U<b;U+=G)H=Y(U,L[U],L[U+1],H);else for(U=b-G;U>=D;U-=G)H=Y(U,L[U],L[U+1],H);return H&&M(H,H.next)&&(X(H),H=H.next),H}function n(L,D){if(!L)return L;D||(D=L);var b=L,G;do if(G=!1,!b.steiner&&(M(b,b.next)||P(b.prev,b,b.next)===0)){if(X(b),b=D=b.prev,b===b.next)break;G=!0}else b=b.next;while(G||b!==D);return D}function a(L,D,b,G,z,U,H){if(!!L){!H&&U&&x(L,G,z,U);for(var $=L,K,Z;L.prev!==L.next;){if(K=L.prev,Z=L.next,U?r(L,G,z,U):h(L)){D.push(K.i/b),D.push(L.i/b),D.push(Z.i/b),X(L),L=Z.next,$=Z.next;continue}if(L=Z,L===$){H?H===1?(L=o(n(L),D,b),a(L,D,b,G,z,U,2)):H===2&&c(L,D,b,G,z,U):a(n(L),D,b,G,z,U,1);break}}}}function h(L){var D=L.prev,b=L,G=L.next;if(P(D,b,G)>=0)return!1;for(var z=L.next.next;z!==L.prev;){if(C(D.x,D.y,b.x,b.y,G.x,G.y,z.x,z.y)&&P(z.prev,z,z.next)>=0)return!1;z=z.next}return!0}function r(L,D,b,G){var z=L.prev,U=L,H=L.next;if(P(z,U,H)>=0)return!1;for(var $=z.x<U.x?z.x<H.x?z.x:H.x:U.x<H.x?U.x:H.x,K=z.y<U.y?z.y<H.y?z.y:H.y:U.y<H.y?U.y:H.y,Z=z.x>U.x?z.x>H.x?z.x:H.x:U.x>H.x?U.x:H.x,k=z.y>U.y?z.y>H.y?z.y:H.y:U.y>H.y?U.y:H.y,J=T($,K,D,b,G),q=T(Z,k,D,b,G),Q=L.prevZ,_=L.nextZ;Q&&Q.z>=J&&_&&_.z<=q;){if(Q!==L.prev&&Q!==L.next&&C(z.x,z.y,U.x,U.y,H.x,H.y,Q.x,Q.y)&&P(Q.prev,Q,Q.next)>=0||(Q=Q.prevZ,_!==L.prev&&_!==L.next&&C(z.x,z.y,U.x,U.y,H.x,H.y,_.x,_.y)&&P(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;Q&&Q.z>=J;){if(Q!==L.prev&&Q!==L.next&&C(z.x,z.y,U.x,U.y,H.x,H.y,Q.x,Q.y)&&P(Q.prev,Q,Q.next)>=0)return!1;Q=Q.prevZ}for(;_&&_.z<=q;){if(_!==L.prev&&_!==L.next&&C(z.x,z.y,U.x,U.y,H.x,H.y,_.x,_.y)&&P(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function o(L,D,b){var G=L;do{var z=G.prev,U=G.next.next;!M(z,U)&&O(z,G,G.next,U)&&I(z,U)&&I(U,z)&&(D.push(z.i/b),D.push(G.i/b),D.push(U.i/b),X(G),X(G.next),G=L=U),G=G.next}while(G!==L);return n(G)}function c(L,D,b,G,z,U){var H=L;do{for(var $=H.next.next;$!==H.prev;){if(H.i!==$.i&&E(H,$)){var K=N(H,$);H=n(H,H.next),K=n(K,K.next),a(H,D,b,G,z,U),a(K,D,b,G,z,U);return}$=$.next}H=H.next}while(H!==L)}function l(L,D,b,G){var z=[],U,H,$,K,Z;for(U=0,H=D.length;U<H;U++)$=D[U]*G,K=U<H-1?D[U+1]*G:L.length,Z=u(L,$,K,G,!1),Z===Z.next&&(Z.steiner=!0),z.push(S(Z));for(z.sort(f),U=0;U<z.length;U++)p(z[U],b),b=n(b,b.next);return b}function f(L,D){return L.x-D.x}function p(L,D){if(D=g(L,D),D){var b=N(D,L);n(D,D.next),n(b,b.next)}}function g(L,D){var b=D,G=L.x,z=L.y,U=-1/0,H;do{if(z<=b.y&&z>=b.next.y&&b.next.y!==b.y){var $=b.x+(z-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if($<=G&&$>U){if(U=$,$===G){if(z===b.y)return b;if(z===b.next.y)return b.next}H=b.x<b.next.x?b:b.next}}b=b.next}while(b!==D);if(!H)return null;if(G===U)return H;var K=H,Z=H.x,k=H.y,J=1/0,q;b=H;do G>=b.x&&b.x>=Z&&G!==b.x&&C(z<k?G:U,z,Z,k,z<k?U:G,z,b.x,b.y)&&(q=Math.abs(z-b.y)/(G-b.x),I(b,L)&&(q<J||q===J&&(b.x>H.x||b.x===H.x&&m(H,b)))&&(H=b,J=q)),b=b.next;while(b!==K);return H}function m(L,D){return P(L.prev,L,D.prev)<0&&P(D.next,L,L.next)<0}function x(L,D,b,G){var z=L;do z.z===null&&(z.z=T(z.x,z.y,D,b,G)),z.prevZ=z.prev,z.nextZ=z.next,z=z.next;while(z!==L);z.prevZ.nextZ=null,z.prevZ=null,y(z)}function y(L){var D,b,G,z,U,H,$,K,Z=1;do{for(b=L,L=null,U=null,H=0;b;){for(H++,G=b,$=0,D=0;D<Z&&($++,G=G.nextZ,!!G);D++);for(K=Z;$>0||K>0&&G;)$!==0&&(K===0||!G||b.z<=G.z)?(z=b,b=b.nextZ,$--):(z=G,G=G.nextZ,K--),U?U.nextZ=z:L=z,z.prevZ=U,U=z;b=G}U.nextZ=null,Z*=2}while(H>1);return L}function T(L,D,b,G,z){return L=32767*(L-b)*z,D=32767*(D-G)*z,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,L|D<<1}function S(L){var D=L,b=L;do(D.x<b.x||D.x===b.x&&D.y<b.y)&&(b=D),D=D.next;while(D!==L);return b}function C(L,D,b,G,z,U,H,$){return(z-H)*(D-$)-(L-H)*(U-$)>=0&&(L-H)*(G-$)-(b-H)*(D-$)>=0&&(b-H)*(U-$)-(z-H)*(G-$)>=0}function E(L,D){return L.next.i!==D.i&&L.prev.i!==D.i&&!F(L,D)&&(I(L,D)&&I(D,L)&&B(L,D)&&(P(L.prev,L,D.prev)||P(L,D.prev,D))||M(L,D)&&P(L.prev,L,L.next)>0&&P(D.prev,D,D.next)>0)}function P(L,D,b){return(D.y-L.y)*(b.x-D.x)-(D.x-L.x)*(b.y-D.y)}function M(L,D){return L.x===D.x&&L.y===D.y}function O(L,D,b,G){var z=R(P(L,D,b)),U=R(P(L,D,G)),H=R(P(b,G,L)),$=R(P(b,G,D));return!!(z!==U&&H!==$||z===0&&A(L,b,D)||U===0&&A(L,G,D)||H===0&&A(b,L,G)||$===0&&A(b,D,G))}function A(L,D,b){return D.x<=Math.max(L.x,b.x)&&D.x>=Math.min(L.x,b.x)&&D.y<=Math.max(L.y,b.y)&&D.y>=Math.min(L.y,b.y)}function R(L){return L>0?1:L<0?-1:0}function F(L,D){var b=L;do{if(b.i!==L.i&&b.next.i!==L.i&&b.i!==D.i&&b.next.i!==D.i&&O(b,b.next,L,D))return!0;b=b.next}while(b!==L);return!1}function I(L,D){return P(L.prev,L,L.next)<0?P(L,D,L.next)>=0&&P(L,L.prev,D)>=0:P(L,D,L.prev)<0||P(L,L.next,D)<0}function B(L,D){var b=L,G=!1,z=(L.x+D.x)/2,U=(L.y+D.y)/2;do b.y>U!=b.next.y>U&&b.next.y!==b.y&&z<(b.next.x-b.x)*(U-b.y)/(b.next.y-b.y)+b.x&&(G=!G),b=b.next;while(b!==L);return G}function N(L,D){var b=new W(L.i,L.x,L.y),G=new W(D.i,D.x,D.y),z=L.next,U=D.prev;return L.next=D,D.prev=L,b.next=z,z.prev=b,G.next=b,b.prev=G,U.next=G,G.prev=U,G}function Y(L,D,b,G){var z=new W(L,D,b);return G?(z.next=G.next,z.prev=G,G.next.prev=z,G.next=z):(z.prev=z,z.next=z),z}function X(L){L.next.prev=L.prev,L.prev.next=L.next,L.prevZ&&(L.prevZ.nextZ=L.nextZ),L.nextZ&&(L.nextZ.prevZ=L.prevZ)}function W(L,D,b){this.i=L,this.x=D,this.y=b,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}s.deviation=function(L,D,b,G){var z=D&&D.length,U=z?D[0]*b:L.length,H=Math.abs(w(L,0,U,b));if(z)for(var $=0,K=D.length;$<K;$++){var Z=D[$]*b,k=$<K-1?D[$+1]*b:L.length;H-=Math.abs(w(L,Z,k,b))}var J=0;for($=0;$<G.length;$+=3){var q=G[$]*b,Q=G[$+1]*b,_=G[$+2]*b;J+=Math.abs((L[q]-L[_])*(L[Q+1]-L[q+1])-(L[q]-L[Q])*(L[_+1]-L[q+1]))}return H===0&&J===0?0:Math.abs((J-H)/H)};function w(L,D,b,G){for(var z=0,U=D,H=b-G;U<b;U+=G)z+=(L[H]-L[U])*(L[U+1]+L[H+1]),H=U;return z}s.flatten=function(L){for(var D=L[0][0].length,b={vertices:[],holes:[],dimensions:D},G=0,z=0;z<L.length;z++){for(var U=0;U<L[z].length;U++)for(var H=0;H<D;H++)b.vertices.push(L[z][U][H]);z>0&&(G+=L[z-1].length,b.holes.push(G))}return b},e.exports=s},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h=n||u.strokeColor,r=a||u.strokeAlpha,o=(h&16711680)>>>16,c=(h&65280)>>>8,l=h&255;s.strokeStyle="rgba("+o+","+c+","+l+","+r+")",s.lineWidth=u.lineWidth};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(6),o=t(7),c=new s({Extends:n,initialize:function(f,p,g,m,x){var y="json";if(o(p)){var T=p;p=h(T,"key"),g=h(T,"url"),m=h(T,"xhrSettings"),y=h(T,"extension",y),x=h(T,"dataKey",x)}var S={type:"json",cache:f.cacheManager.json,extension:y,responseType:"text",key:p,url:g,xhrSettings:m,config:x};n.call(this,f,S),o(g)&&(x?this.data=r(g,x):this.data=g,this.state=u.FILE_POPULATED)},onProcess:function(){if(this.state!==u.FILE_POPULATED){this.state=u.FILE_PROCESSING;try{var l=JSON.parse(this.xhrLoader.responseText)}catch(p){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),p}var f=this.config;typeof f=="string"?this.data=r(l,f,l):this.data=l}this.onProcessComplete()}});a.register("json",function(l,f,p,g){if(Array.isArray(l))for(var m=0;m<l.length;m++)this.addFile(new c(this,l[m]));else this.addFile(new c(this,l,f,g,p));return this}),e.exports=c},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(158),u=t(26),n=function(a,h,r,o,c){for(var l=null,f=null,p=null,g=null,m=u(a,h,r,o,null,c),x=0;x<m.length;x++){var y=m[x];y&&(y.collides?(l=s(y.x,y.y-1,!0,c),f=s(y.x,y.y+1,!0,c),p=s(y.x-1,y.y,!0,c),g=s(y.x+1,y.y,!0,c),y.faceTop=!(l&&l.collides),y.faceBottom=!(f&&f.collides),y.faceLeft=!(p&&p.collides),y.faceRight=!(g&&g.collides)):y.resetFaces())}};e.exports=n},function(e,d,t){var s={};e.exports=s;var u=t(83),n=t(32);(function(){s.create=function(a,h){for(var r=[],o=0;o<a.length;o++){var c=a[o],l={x:c.x,y:c.y,index:o,body:h,isInternal:!1,contact:null,offset:null};l.contact={vertex:l,normalImpulse:0,tangentImpulse:0},r.push(l)}return r},s.fromPath=function(a,h){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,o=[];return a.replace(r,function(c,l,f){o.push({x:parseFloat(l),y:parseFloat(f)})}),s.create(o,h)},s.centre=function(a){for(var h=s.area(a,!0),r={x:0,y:0},o,c,l,f=0;f<a.length;f++)l=(f+1)%a.length,o=u.cross(a[f],a[l]),c=u.mult(u.add(a[f],a[l]),o),r=u.add(r,c);return u.div(r,6*h)},s.mean=function(a){for(var h={x:0,y:0},r=0;r<a.length;r++)h.x+=a[r].x,h.y+=a[r].y;return u.div(h,a.length)},s.area=function(a,h){for(var r=0,o=a.length-1,c=0;c<a.length;c++)r+=(a[o].x-a[c].x)*(a[o].y+a[c].y),o=c;return h?r/2:Math.abs(r)/2},s.inertia=function(a,h){for(var r=0,o=0,c=a,l,f,p=0;p<c.length;p++)f=(p+1)%c.length,l=Math.abs(u.cross(c[f],c[p])),r+=l*(u.dot(c[f],c[f])+u.dot(c[f],c[p])+u.dot(c[p],c[p])),o+=l;return h/6*(r/o)},s.translate=function(a,h,r){var o;if(r)for(o=0;o<a.length;o++)a[o].x+=h.x*r,a[o].y+=h.y*r;else for(o=0;o<a.length;o++)a[o].x+=h.x,a[o].y+=h.y;return a},s.rotate=function(a,h,r){if(h!==0){for(var o=Math.cos(h),c=Math.sin(h),l=0;l<a.length;l++){var f=a[l],p=f.x-r.x,g=f.y-r.y;f.x=r.x+(p*o-g*c),f.y=r.y+(p*c+g*o)}return a}},s.contains=function(a,h){for(var r=0;r<a.length;r++){var o=a[r],c=a[(r+1)%a.length];if((h.x-o.x)*(c.y-o.y)+(h.y-o.y)*(o.x-c.x)>0)return!1}return!0},s.scale=function(a,h,r,o){if(h===1&&r===1)return a;o=o||s.centre(a);for(var c,l,f=0;f<a.length;f++)c=a[f],l=u.sub(c,o),a[f].x=o.x+l.x*h,a[f].y=o.y+l.y*r;return a},s.chamfer=function(a,h,r,o,c){typeof h=="number"?h=[h]:h=h||[8],r=typeof r!="undefined"?r:-1,o=o||2,c=c||14;for(var l=[],f=0;f<a.length;f++){var p=a[f-1>=0?f-1:a.length-1],g=a[f],m=a[(f+1)%a.length],x=h[f<h.length?f:h.length-1];if(x===0){l.push(g);continue}var y=u.normalise({x:g.y-p.y,y:p.x-g.x}),T=u.normalise({x:m.y-g.y,y:g.x-m.x}),S=Math.sqrt(2*Math.pow(x,2)),C=u.mult(n.clone(y),x),E=u.normalise(u.mult(u.add(y,T),.5)),P=u.sub(g,u.mult(E,S)),M=r;r===-1&&(M=Math.pow(x,.32)*1.75),M=n.clamp(M,o,c),M%2===1&&(M+=1);for(var O=Math.acos(u.dot(y,T)),A=O/M,R=0;R<M;R++)l.push(u.add(u.rotate(C,A*R),P))}return l},s.clockwiseSort=function(a){var h=s.mean(a);return a.sort(function(r,o){return u.angle(h,r)-u.angle(h,o)}),a},s.isConvex=function(a){var h=0,r=a.length,o,c,l,f;if(r<3)return null;for(o=0;o<r;o++)if(c=(o+1)%r,l=(o+2)%r,f=(a[c].x-a[o].x)*(a[l].y-a[c].y),f-=(a[c].y-a[o].y)*(a[l].x-a[c].x),f<0?h|=1:f>0&&(h|=2),h===3)return!1;return h!==0?!0:null},s.hull=function(a){var h=[],r=[],o,c;for(a=a.slice(0),a.sort(function(l,f){var p=l.x-f.x;return p!==0?p:l.y-f.y}),c=0;c<a.length;c+=1){for(o=a[c];r.length>=2&&u.cross3(r[r.length-2],r[r.length-1],o)<=0;)r.pop();r.push(o)}for(c=a.length-1;c>=0;c-=1){for(o=a[c];h.length>=2&&u.cross3(h[h.length-2],h[h.length-1],o)<=0;)h.pop();h.push(o)}return h.pop(),r.pop(),h.concat(r)}})()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(66),n=t(300),a=t(301),h=t(56),r=t(170),o=new s({initialize:function(l,f,p){l===void 0&&(l=0),f===void 0&&(f=0),p===void 0&&(p=0),this.type=h.CIRCLE,this.x=l,this.y=f,this._radius=p,this._diameter=p*2},contains:function(c,l){return u(this,c,l)},getPoint:function(c,l){return n(this,c,l)},getPoints:function(c,l,f){return a(this,c,l,f)},getRandomPoint:function(c){return r(this,c)},setTo:function(c,l,f){return this.x=c,this.y=l,this._radius=f,this._diameter=f*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(c,l){return l===void 0&&(l=c),this.x=c,this.y=l,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this._diameter=c*2}},diameter:{get:function(){return this._diameter},set:function(c){this._diameter=c,this._radius=c*.5}},left:{get:function(){return this.x-this._radius},set:function(c){this.x=c+this._radius}},right:{get:function(){return this.x+this._radius},set:function(c){this.x=c-this._radius}},top:{get:function(){return this.y-this._radius},set:function(c){this.y=c+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(c){this.y=c-this._radius}}});e.exports=o},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(s.radius>0&&u>=s.left&&u<=s.right&&n>=s.top&&n<=s.bottom){var a=(s.x-u)*(s.x-u),h=(s.y-n)*(s.y-n);return a+h<=s.radius*s.radius}else return!1};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.sqrt((s.x2-s.x1)*(s.x2-s.x1)+(s.y2-s.y1)*(s.y2-s.y1))};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=n-u;return u+((s-u)%a+a)%a};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(39),n=1e-6,a=new s({initialize:function(p){this.val=new Float32Array(16),p?this.copy(p):this.identity()},clone:function(){return new a(this)},set:function(f){return this.copy(f)},setValues:function(f,p,g,m,x,y,T,S,C,E,P,M,O,A,R,F){var I=this.val;return I[0]=f,I[1]=p,I[2]=g,I[3]=m,I[4]=x,I[5]=y,I[6]=T,I[7]=S,I[8]=C,I[9]=E,I[10]=P,I[11]=M,I[12]=O,I[13]=A,I[14]=R,I[15]=F,this},copy:function(f){var p=f.val;return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},fromArray:function(f){return this.setValues(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(f,p,g){var m=h.fromQuat(g),x=m.val,y=p.x,T=p.y,S=p.z;return this.setValues(x[0]*y,x[1]*y,x[2]*y,0,x[4]*T,x[5]*T,x[6]*T,0,x[8]*S,x[9]*S,x[10]*S,0,f.x,f.y,f.z,1)},xyz:function(f,p,g){this.identity();var m=this.val;return m[12]=f,m[13]=p,m[14]=g,this},scaling:function(f,p,g){this.zero();var m=this.val;return m[0]=f,m[5]=p,m[10]=g,m[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var f=this.val,p=f[1],g=f[2],m=f[3],x=f[6],y=f[7],T=f[11];return f[1]=f[4],f[2]=f[8],f[3]=f[12],f[4]=p,f[6]=f[9],f[7]=f[13],f[8]=g,f[9]=x,f[11]=f[14],f[12]=m,f[13]=y,f[14]=T,this},getInverse:function(f){return this.copy(f),this.invert()},invert:function(){var f=this.val,p=f[0],g=f[1],m=f[2],x=f[3],y=f[4],T=f[5],S=f[6],C=f[7],E=f[8],P=f[9],M=f[10],O=f[11],A=f[12],R=f[13],F=f[14],I=f[15],B=p*T-g*y,N=p*S-m*y,Y=p*C-x*y,X=g*S-m*T,W=g*C-x*T,w=m*C-x*S,L=E*R-P*A,D=E*F-M*A,b=E*I-O*A,G=P*F-M*R,z=P*I-O*R,U=M*I-O*F,H=B*U-N*z+Y*G+X*b-W*D+w*L;return H?(H=1/H,this.setValues((T*U-S*z+C*G)*H,(m*z-g*U-x*G)*H,(R*w-F*W+I*X)*H,(M*W-P*w-O*X)*H,(S*b-y*U-C*D)*H,(p*U-m*b+x*D)*H,(F*Y-A*w-I*N)*H,(E*w-M*Y+O*N)*H,(y*z-T*b+C*L)*H,(g*b-p*z-x*L)*H,(A*W-R*Y+I*B)*H,(P*Y-E*W-O*B)*H,(T*D-y*G-S*L)*H,(p*G-g*D+m*L)*H,(R*N-A*X-F*B)*H,(E*X-P*N+M*B)*H)):this},adjoint:function(){var f=this.val,p=f[0],g=f[1],m=f[2],x=f[3],y=f[4],T=f[5],S=f[6],C=f[7],E=f[8],P=f[9],M=f[10],O=f[11],A=f[12],R=f[13],F=f[14],I=f[15];return this.setValues(T*(M*I-O*F)-P*(S*I-C*F)+R*(S*O-C*M),-(g*(M*I-O*F)-P*(m*I-x*F)+R*(m*O-x*M)),g*(S*I-C*F)-T*(m*I-x*F)+R*(m*C-x*S),-(g*(S*O-C*M)-T*(m*O-x*M)+P*(m*C-x*S)),-(y*(M*I-O*F)-E*(S*I-C*F)+A*(S*O-C*M)),p*(M*I-O*F)-E*(m*I-x*F)+A*(m*O-x*M),-(p*(S*I-C*F)-y*(m*I-x*F)+A*(m*C-x*S)),p*(S*O-C*M)-y*(m*O-x*M)+E*(m*C-x*S),y*(P*I-O*R)-E*(T*I-C*R)+A*(T*O-C*P),-(p*(P*I-O*R)-E*(g*I-x*R)+A*(g*O-x*P)),p*(T*I-C*R)-y*(g*I-x*R)+A*(g*C-x*T),-(p*(T*O-C*P)-y*(g*O-x*P)+E*(g*C-x*T)),-(y*(P*F-M*R)-E*(T*F-S*R)+A*(T*M-S*P)),p*(P*F-M*R)-E*(g*F-m*R)+A*(g*M-m*P),-(p*(T*F-S*R)-y*(g*F-m*R)+A*(g*S-m*T)),p*(T*M-S*P)-y*(g*M-m*P)+E*(g*S-m*T))},determinant:function(){var f=this.val,p=f[0],g=f[1],m=f[2],x=f[3],y=f[4],T=f[5],S=f[6],C=f[7],E=f[8],P=f[9],M=f[10],O=f[11],A=f[12],R=f[13],F=f[14],I=f[15],B=p*T-g*y,N=p*S-m*y,Y=p*C-x*y,X=g*S-m*T,W=g*C-x*T,w=m*C-x*S,L=E*R-P*A,D=E*F-M*A,b=E*I-O*A,G=P*F-M*R,z=P*I-O*R,U=M*I-O*F;return B*U-N*z+Y*G+X*b-W*D+w*L},multiply:function(f){var p=this.val,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],S=p[5],C=p[6],E=p[7],P=p[8],M=p[9],O=p[10],A=p[11],R=p[12],F=p[13],I=p[14],B=p[15],N=f.val,Y=N[0],X=N[1],W=N[2],w=N[3];return p[0]=Y*g+X*T+W*P+w*R,p[1]=Y*m+X*S+W*M+w*F,p[2]=Y*x+X*C+W*O+w*I,p[3]=Y*y+X*E+W*A+w*B,Y=N[4],X=N[5],W=N[6],w=N[7],p[4]=Y*g+X*T+W*P+w*R,p[5]=Y*m+X*S+W*M+w*F,p[6]=Y*x+X*C+W*O+w*I,p[7]=Y*y+X*E+W*A+w*B,Y=N[8],X=N[9],W=N[10],w=N[11],p[8]=Y*g+X*T+W*P+w*R,p[9]=Y*m+X*S+W*M+w*F,p[10]=Y*x+X*C+W*O+w*I,p[11]=Y*y+X*E+W*A+w*B,Y=N[12],X=N[13],W=N[14],w=N[15],p[12]=Y*g+X*T+W*P+w*R,p[13]=Y*m+X*S+W*M+w*F,p[14]=Y*x+X*C+W*O+w*I,p[15]=Y*y+X*E+W*A+w*B,this},multiplyLocal:function(f){var p=this.val,g=f.val;return this.setValues(p[0]*g[0]+p[1]*g[4]+p[2]*g[8]+p[3]*g[12],p[0]*g[1]+p[1]*g[5]+p[2]*g[9]+p[3]*g[13],p[0]*g[2]+p[1]*g[6]+p[2]*g[10]+p[3]*g[14],p[0]*g[3]+p[1]*g[7]+p[2]*g[11]+p[3]*g[15],p[4]*g[0]+p[5]*g[4]+p[6]*g[8]+p[7]*g[12],p[4]*g[1]+p[5]*g[5]+p[6]*g[9]+p[7]*g[13],p[4]*g[2]+p[5]*g[6]+p[6]*g[10]+p[7]*g[14],p[4]*g[3]+p[5]*g[7]+p[6]*g[11]+p[7]*g[15],p[8]*g[0]+p[9]*g[4]+p[10]*g[8]+p[11]*g[12],p[8]*g[1]+p[9]*g[5]+p[10]*g[9]+p[11]*g[13],p[8]*g[2]+p[9]*g[6]+p[10]*g[10]+p[11]*g[14],p[8]*g[3]+p[9]*g[7]+p[10]*g[11]+p[11]*g[15],p[12]*g[0]+p[13]*g[4]+p[14]*g[8]+p[15]*g[12],p[12]*g[1]+p[13]*g[5]+p[14]*g[9]+p[15]*g[13],p[12]*g[2]+p[13]*g[6]+p[14]*g[10]+p[15]*g[14],p[12]*g[3]+p[13]*g[7]+p[14]*g[11]+p[15]*g[15])},premultiply:function(f){return this.multiplyMatrices(f,this)},multiplyMatrices:function(f,p){var g=f.val,m=p.val,x=g[0],y=g[4],T=g[8],S=g[12],C=g[1],E=g[5],P=g[9],M=g[13],O=g[2],A=g[6],R=g[10],F=g[14],I=g[3],B=g[7],N=g[11],Y=g[15],X=m[0],W=m[4],w=m[8],L=m[12],D=m[1],b=m[5],G=m[9],z=m[13],U=m[2],H=m[6],$=m[10],K=m[14],Z=m[3],k=m[7],J=m[11],q=m[15];return this.setValues(x*X+y*D+T*U+S*Z,C*X+E*D+P*U+M*Z,O*X+A*D+R*U+F*Z,I*X+B*D+N*U+Y*Z,x*W+y*b+T*H+S*k,C*W+E*b+P*H+M*k,O*W+A*b+R*H+F*k,I*W+B*b+N*H+Y*k,x*w+y*G+T*$+S*J,C*w+E*G+P*$+M*J,O*w+A*G+R*$+F*J,I*w+B*G+N*$+Y*J,x*L+y*z+T*K+S*q,C*L+E*z+P*K+M*q,O*L+A*z+R*K+F*q,I*L+B*z+N*K+Y*q)},translate:function(f){return this.translateXYZ(f.x,f.y,f.z)},translateXYZ:function(f,p,g){var m=this.val;return m[12]=m[0]*f+m[4]*p+m[8]*g+m[12],m[13]=m[1]*f+m[5]*p+m[9]*g+m[13],m[14]=m[2]*f+m[6]*p+m[10]*g+m[14],m[15]=m[3]*f+m[7]*p+m[11]*g+m[15],this},scale:function(f){return this.scaleXYZ(f.x,f.y,f.z)},scaleXYZ:function(f,p,g){var m=this.val;return m[0]=m[0]*f,m[1]=m[1]*f,m[2]=m[2]*f,m[3]=m[3]*f,m[4]=m[4]*p,m[5]=m[5]*p,m[6]=m[6]*p,m[7]=m[7]*p,m[8]=m[8]*g,m[9]=m[9]*g,m[10]=m[10]*g,m[11]=m[11]*g,this},makeRotationAxis:function(f,p){var g=Math.cos(p),m=Math.sin(p),x=1-g,y=f.x,T=f.y,S=f.z,C=x*y,E=x*T;return this.setValues(C*y+g,C*T-m*S,C*S+m*T,0,C*T+m*S,E*T+g,E*S-m*y,0,C*S-m*T,E*S+m*y,x*S*S+g,0,0,0,0,1)},rotate:function(f,p){var g=this.val,m=p.x,x=p.y,y=p.z,T=Math.sqrt(m*m+x*x+y*y);if(Math.abs(T)<n)return this;T=1/T,m*=T,x*=T,y*=T;var S=Math.sin(f),C=Math.cos(f),E=1-C,P=g[0],M=g[1],O=g[2],A=g[3],R=g[4],F=g[5],I=g[6],B=g[7],N=g[8],Y=g[9],X=g[10],W=g[11],w=g[12],L=g[13],D=g[14],b=g[15],G=m*m*E+C,z=x*m*E+y*S,U=y*m*E-x*S,H=m*x*E-y*S,$=x*x*E+C,K=y*x*E+m*S,Z=m*y*E+x*S,k=x*y*E-m*S,J=y*y*E+C;return this.setValues(P*G+R*z+N*U,M*G+F*z+Y*U,O*G+I*z+X*U,A*G+B*z+W*U,P*H+R*$+N*K,M*H+F*$+Y*K,O*H+I*$+X*K,A*H+B*$+W*K,P*Z+R*k+N*J,M*Z+F*k+Y*J,O*Z+I*k+X*J,A*Z+B*k+W*J,w,L,D,b)},rotateX:function(f){var p=this.val,g=Math.sin(f),m=Math.cos(f),x=p[4],y=p[5],T=p[6],S=p[7],C=p[8],E=p[9],P=p[10],M=p[11];return p[4]=x*m+C*g,p[5]=y*m+E*g,p[6]=T*m+P*g,p[7]=S*m+M*g,p[8]=C*m-x*g,p[9]=E*m-y*g,p[10]=P*m-T*g,p[11]=M*m-S*g,this},rotateY:function(f){var p=this.val,g=Math.sin(f),m=Math.cos(f),x=p[0],y=p[1],T=p[2],S=p[3],C=p[8],E=p[9],P=p[10],M=p[11];return p[0]=x*m-C*g,p[1]=y*m-E*g,p[2]=T*m-P*g,p[3]=S*m-M*g,p[8]=x*g+C*m,p[9]=y*g+E*m,p[10]=T*g+P*m,p[11]=S*g+M*m,this},rotateZ:function(f){var p=this.val,g=Math.sin(f),m=Math.cos(f),x=p[0],y=p[1],T=p[2],S=p[3],C=p[4],E=p[5],P=p[6],M=p[7];return p[0]=x*m+C*g,p[1]=y*m+E*g,p[2]=T*m+P*g,p[3]=S*m+M*g,p[4]=C*m-x*g,p[5]=E*m-y*g,p[6]=P*m-T*g,p[7]=M*m-S*g,this},fromRotationTranslation:function(f,p){var g=f.x,m=f.y,x=f.z,y=f.w,T=g+g,S=m+m,C=x+x,E=g*T,P=g*S,M=g*C,O=m*S,A=m*C,R=x*C,F=y*T,I=y*S,B=y*C;return this.setValues(1-(O+R),P+B,M-I,0,P-B,1-(E+R),A+F,0,M+I,A-F,1-(E+O),0,p.x,p.y,p.z,1)},fromQuat:function(f){var p=f.x,g=f.y,m=f.z,x=f.w,y=p+p,T=g+g,S=m+m,C=p*y,E=p*T,P=p*S,M=g*T,O=g*S,A=m*S,R=x*y,F=x*T,I=x*S;return this.setValues(1-(M+A),E+I,P-F,0,E-I,1-(C+A),O+R,0,P+F,O-R,1-(C+M),0,0,0,0,1)},frustum:function(f,p,g,m,x,y){var T=1/(p-f),S=1/(m-g),C=1/(x-y);return this.setValues(x*2*T,0,0,0,0,x*2*S,0,0,(p+f)*T,(m+g)*S,(y+x)*C,-1,0,0,y*x*2*C,0)},perspective:function(f,p,g,m){var x=1/Math.tan(f/2),y=1/(g-m);return this.setValues(x/p,0,0,0,0,x,0,0,0,0,(m+g)*y,-1,0,0,2*m*g*y,0)},perspectiveLH:function(f,p,g,m){return this.setValues(2*g/f,0,0,0,0,2*g/p,0,0,0,0,-m/(g-m),1,0,0,g*m/(g-m),0)},ortho:function(f,p,g,m,x,y){var T=f-p,S=g-m,C=x-y;return T=T===0?T:1/T,S=S===0?S:1/S,C=C===0?C:1/C,this.setValues(-2*T,0,0,0,0,-2*S,0,0,0,0,2*C,0,(f+p)*T,(m+g)*S,(y+x)*C,1)},lookAtRH:function(f,p,g){var m=this.val;return l.subVectors(f,p),l.getLengthSquared()===0&&(l.z=1),l.normalize(),o.crossVectors(g,l),o.getLengthSquared()===0&&(Math.abs(g.z)===1?l.x+=1e-4:l.z+=1e-4,l.normalize(),o.crossVectors(g,l)),o.normalize(),c.crossVectors(l,o),m[0]=o.x,m[1]=o.y,m[2]=o.z,m[4]=c.x,m[5]=c.y,m[6]=c.z,m[8]=l.x,m[9]=l.y,m[10]=l.z,this},lookAt:function(f,p,g){var m=f.x,x=f.y,y=f.z,T=g.x,S=g.y,C=g.z,E=p.x,P=p.y,M=p.z;if(Math.abs(m-E)<n&&Math.abs(x-P)<n&&Math.abs(y-M)<n)return this.identity();var O=m-E,A=x-P,R=y-M,F=1/Math.sqrt(O*O+A*A+R*R);O*=F,A*=F,R*=F;var I=S*R-C*A,B=C*O-T*R,N=T*A-S*O;F=Math.sqrt(I*I+B*B+N*N),F?(F=1/F,I*=F,B*=F,N*=F):(I=0,B=0,N=0);var Y=A*N-R*B,X=R*I-O*N,W=O*B-A*I;return F=Math.sqrt(Y*Y+X*X+W*W),F?(F=1/F,Y*=F,X*=F,W*=F):(Y=0,X=0,W=0),this.setValues(I,Y,O,0,B,X,A,0,N,W,R,0,-(I*m+B*x+N*y),-(Y*m+X*x+W*y),-(O*m+A*x+R*y),1)},yawPitchRoll:function(f,p,g){this.zero(),h.zero(),r.zero();var m=this.val,x=h.val,y=r.val,T=Math.sin(g),S=Math.cos(g);return m[10]=1,m[15]=1,m[0]=S,m[1]=T,m[4]=-T,m[5]=S,T=Math.sin(p),S=Math.cos(p),x[0]=1,x[15]=1,x[5]=S,x[10]=S,x[9]=-T,x[6]=T,T=Math.sin(f),S=Math.cos(f),y[5]=1,y[15]=1,y[0]=S,y[2]=-T,y[8]=T,y[10]=S,this.multiplyLocal(h),this.multiplyLocal(r),this},setWorldMatrix:function(f,p,g,m,x){return this.yawPitchRoll(f.y,f.x,f.z),h.scaling(g.x,g.y,g.z),r.xyz(p.x,p.y,p.z),this.multiplyLocal(h),this.multiplyLocal(r),m&&this.multiplyLocal(m),x&&this.multiplyLocal(x),this},multiplyToMat4:function(f,p){var g=this.val,m=f.val,x=g[0],y=g[1],T=g[2],S=g[3],C=g[4],E=g[5],P=g[6],M=g[7],O=g[8],A=g[9],R=g[10],F=g[11],I=g[12],B=g[13],N=g[14],Y=g[15],X=m[0],W=m[1],w=m[2],L=m[3],D=m[4],b=m[5],G=m[6],z=m[7],U=m[8],H=m[9],$=m[10],K=m[11],Z=m[12],k=m[13],J=m[14],q=m[15];return p.setValues(X*x+W*C+w*O+L*I,W*y+W*E+w*A+L*B,w*T+W*P+w*R+L*N,L*S+W*M+w*F+L*Y,D*x+b*C+G*O+z*I,D*y+b*E+G*A+z*B,D*T+b*P+G*R+z*N,D*S+b*M+G*F+z*Y,U*x+H*C+$*O+K*I,U*y+H*E+$*A+K*B,U*T+H*P+$*R+K*N,U*S+H*M+$*F+K*Y,Z*x+k*C+J*O+q*I,Z*y+k*E+J*A+q*B,Z*T+k*P+J*R+q*N,Z*S+k*M+J*F+q*Y)},fromRotationXYTranslation:function(f,p,g){var m=p.x,x=p.y,y=p.z,T=Math.sin(f.x),S=Math.cos(f.x),C=Math.sin(f.y),E=Math.cos(f.y),P=m,M=x,O=y,A=-T,R=0-A*C,F=0-S*C,I=A*E,B=S*E;return g||(P=E*m+C*y,M=R*m+S*x+I*y,O=F*m+T*x+B*y),this.setValues(E,R,F,0,0,S,T,0,C,I,B,0,P,M,O,1)},getMaxScaleOnAxis:function(){var f=this.val,p=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],g=f[4]*f[4]+f[5]*f[5]+f[6]*f[6],m=f[8]*f[8]+f[9]*f[9]+f[10]*f[10];return Math.sqrt(Math.max(p,g,m))}}),h=new a,r=new a,o=new u,c=new u,l=new u;e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COMPLETE:t(987),DECODED:t(988),DECODED_ALL:t(989),DESTROY:t(990),DETUNE:t(991),GLOBAL_DETUNE:t(992),GLOBAL_MUTE:t(993),GLOBAL_RATE:t(994),GLOBAL_VOLUME:t(995),LOOP:t(996),LOOPED:t(997),MUTE:t(998),PAN:t(999),PAUSE_ALL:t(1e3),PAUSE:t(1001),PLAY:t(1002),RATE:t(1003),RESUME_ALL:t(1004),RESUME:t(1005),SEEK:t(1006),STOP_ALL:t(1007),STOP:t(1008),UNLOCKED:t(1009),VOLUME:t(1010)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=new s({Extends:n,initialize:function c(l,f,p,g,m){var x="png",y;if(r(f)){var T=f;f=h(T,"key"),p=h(T,"url"),y=h(T,"normalMap"),g=h(T,"xhrSettings"),x=h(T,"extension",x),m=h(T,"frameConfig")}Array.isArray(p)&&(y=p[1],p=p[0]);var S={type:"image",cache:l.textureManager,extension:x,responseType:"blob",key:f,url:p,xhrSettings:g,config:m};if(n.call(this,l,S),y){var C=new c(l,this.key,y,g,m);C.type="normalMap",this.setLink(C),l.addFile(C)}},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var c=this;this.data.onload=function(){n.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(c.data),c.onProcessError()},n.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var c,l=this.linkFile;l&&l.state===u.FILE_COMPLETE?(this.type==="image"?c=this.cache.addImage(this.key,this.data,l.data):c=this.cache.addImage(l.key,l.data,this.data),this.pendingDestroy(c),l.pendingDestroy(c)):l||(c=this.cache.addImage(this.key,this.data),this.pendingDestroy(c))}});a.register("image",function(c,l,f){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new o(this,c[p]));else this.addFile(new o(this,c,l,f));return this}),e.exports=o},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u?s.setCollision(!0,!0,!0,!0,!1):s.resetCollision(!1)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(164),u=t(0),n=t(11),a=t(15),h=t(1065),r=new u({Extends:a,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,h],initialize:function(c,l,f,p,g){a.call(this,c,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(p,g),this.setPosition(l,f),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(o,c){this.anims.update(o,c)},play:function(o,c){return this.anims.play(o,c)},playReverse:function(o,c){return this.anims.playReverse(o,c)},playAfterDelay:function(o,c){return this.anims.playAfterDelay(o,c)},playAfterRepeat:function(o,c){return this.anims.playAfterRepeat(o,c)},chain:function(o){return this.anims.chain(o)},stop:function(){return this.anims.stop()},stopAfterDelay:function(o){return this.anims.stopAfterDelay(o)},stopAfterRepeat:function(o){return this.anims.stopAfterRepeat(o)},stopOnFrame:function(o){return this.anims.stopOnFrame(o)},toJSON:function(){return n.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});e.exports=r},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){if(!(u>=s.length)){for(var n=s.length-1,a=s[u],h=u;h<n;h++)s[h]=s[h+1];return s.length=n,a}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:t(643),DESTROY:t(644),REMOVED_FROM_SCENE:t(645),VIDEO_COMPLETE:t(646),VIDEO_CREATED:t(647),VIDEO_ERROR:t(648),VIDEO_LOOP:t(649),VIDEO_PLAY:t(650),VIDEO_SEEKED:t(651),VIDEO_SEEKING:t(652),VIDEO_STOP:t(653),VIDEO_TIMEOUT:t(654),VIDEO_UNLOCKED:t(655)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return n===void 0&&(n=0),u===0?s:(s-=n,s=u*Math.floor(s/u),a?(n+s)/u:n+s)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u={};for(var n in s)Array.isArray(s[n])?u[n]=s[n].slice(0):u[n]=s[n];return u};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h=s.length;if(u<0||u>h||u>=n||n>h||u+n>h){if(a)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(a,h){return String(a).localeCompare(h)}function s(a,h){var r=a.length;if(r<=1)return a;for(var o=new Array(r),c=1;c<r;c*=2){u(a,h,c,o);var l=a;a=o,o=l}return a}function u(a,h,r,o){var c=a.length,l=0,f=r*2,p,g,m,x,y;for(p=0;p<c;p+=f)for(g=p+r,m=g+r,g>c&&(g=c),m>c&&(m=c),x=p,y=g;;)if(x<g&&y<m)h(a[x],a[y])<=0?o[l++]=a[x++]:o[l++]=a[y++];else if(x<g)o[l++]=a[x++];else if(y<m)o[l++]=a[y++];else break}var n=function(a,h){h===void 0&&(h=t);var r=s(a,h);return r!==a&&u(r,null,a.length,a),a};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(134),u=t(205),n=function(a,h){var r=s.Power0;if(typeof a=="string")if(s.hasOwnProperty(a))r=s[a];else{var o="";a.indexOf(".")&&(o=a.substr(a.indexOf(".")+1),o.toLowerCase()==="in"?o="easeIn":o.toLowerCase()==="out"?o="easeOut":o.toLowerCase()==="inout"&&(o="easeInOut")),a=u(a.substr(0,a.indexOf(".")+1)+o),s.hasOwnProperty(a)&&(r=s[a])}else typeof a=="function"?r=a:Array.isArray(a)&&a.length;if(!h)return r;var c=h.slice(0);return c.unshift(0),function(l){return c[0]=l,r.apply(this,c)}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,a,h,r,o){var c=n.strokeTint,l=s.getTintAppendFloatAlpha(a.strokeColor,a.strokeAlpha*h);c.TL=l,c.TR=l,c.BL=l,c.BR=l;var f=a.pathData,p=f.length-1,g=a.lineWidth,m=g/2,x=f[0]-r,y=f[1]-o;a.closePath||(p-=2);for(var T=2;T<p;T+=2){var S=f[T]-r,C=f[T+1]-o;n.batchLine(x,y,S,C,m,m,g,T-2,a.closePath?T===p-1:!1),x=S,y=C}};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(115),n=t(476),a=t(477),h=t(56),r=t(47),o=t(181),c=new s({initialize:function(f,p,g,m,x,y){f===void 0&&(f=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),this.type=h.TRIANGLE,this.x1=f,this.y1=p,this.x2=g,this.y2=m,this.x3=x,this.y3=y},contains:function(l,f){return u(this,l,f)},getPoint:function(l,f){return n(this,l,f)},getPoints:function(l,f,p){return a(this,l,f,p)},getRandomPoint:function(l){return o(this,l)},setTo:function(l,f,p,g,m,x){return l===void 0&&(l=0),f===void 0&&(f=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),this.x1=l,this.y1=f,this.x2=p,this.y2=g,this.x3=m,this.y3=x,this},getLineA:function(l){return l===void 0&&(l=new r),l.setTo(this.x1,this.y1,this.x2,this.y2),l},getLineB:function(l){return l===void 0&&(l=new r),l.setTo(this.x2,this.y2,this.x3,this.y3),l},getLineC:function(l){return l===void 0&&(l=new r),l.setTo(this.x3,this.y3,this.x1,this.y1),l},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(l){var f=0;this.x1<=this.x2&&this.x1<=this.x3?f=this.x1-l:this.x2<=this.x1&&this.x2<=this.x3?f=this.x2-l:f=this.x3-l,this.x1-=f,this.x2-=f,this.x3-=f}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(l){var f=0;this.x1>=this.x2&&this.x1>=this.x3?f=this.x1-l:this.x2>=this.x1&&this.x2>=this.x3?f=this.x2-l:f=this.x3-l,this.x1-=f,this.x2-=f,this.x3-=f}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(l){var f=0;this.y1<=this.y2&&this.y1<=this.y3?f=this.y1-l:this.y2<=this.y1&&this.y2<=this.y3?f=this.y2-l:f=this.y3-l,this.y1-=f,this.y2-=f,this.y3-=f}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(l){var f=0;this.y1>=this.y2&&this.y1>=this.y3?f=this.y1-l:this.y2>=this.y1&&this.y2>=this.y3?f=this.y2-l:f=this.y3-l,this.y1-=f,this.y2-=f,this.y3-=f}}});e.exports=c},function(e,d){var t={};e.exports=t,function(){t.create=function(s,u){return{x:s||0,y:u||0}},t.clone=function(s){return{x:s.x,y:s.y}},t.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},t.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},t.rotate=function(s,u,n){var a=Math.cos(u),h=Math.sin(u);n||(n={});var r=s.x*a-s.y*h;return n.y=s.x*h+s.y*a,n.x=r,n},t.rotateAbout=function(s,u,n,a){var h=Math.cos(u),r=Math.sin(u);a||(a={});var o=n.x+((s.x-n.x)*h-(s.y-n.y)*r);return a.y=n.y+((s.x-n.x)*r+(s.y-n.y)*h),a.x=o,a},t.normalise=function(s){var u=t.magnitude(s);return u===0?{x:0,y:0}:{x:s.x/u,y:s.y/u}},t.dot=function(s,u){return s.x*u.x+s.y*u.y},t.cross=function(s,u){return s.x*u.y-s.y*u.x},t.cross3=function(s,u,n){return(u.x-s.x)*(n.y-s.y)-(u.y-s.y)*(n.x-s.x)},t.add=function(s,u,n){return n||(n={}),n.x=s.x+u.x,n.y=s.y+u.y,n},t.sub=function(s,u,n){return n||(n={}),n.x=s.x-u.x,n.y=s.y-u.y,n},t.mult=function(s,u){return{x:s.x*u,y:s.y*u}},t.div=function(s,u){return{x:s.x/u,y:s.y/u}},t.perp=function(s,u){return u=u===!0?-1:1,{x:u*-s.y,y:u*s.x}},t.neg=function(s){return{x:-s.x,y:-s.y}},t.angle=function(s,u){return Math.atan2(u.y-s.y,u.x-s.x)},t._temp=[t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]}()},function(e,d){var t={};e.exports=t,function(){t.create=function(s){var u={min:{x:0,y:0},max:{x:0,y:0}};return s&&t.update(u,s),u},t.update=function(s,u,n){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var a=0;a<u.length;a++){var h=u[a];h.x>s.max.x&&(s.max.x=h.x),h.x<s.min.x&&(s.min.x=h.x),h.y>s.max.y&&(s.max.y=h.y),h.y<s.min.y&&(s.min.y=h.y)}n&&(n.x>0?s.max.x+=n.x:s.min.x+=n.x,n.y>0?s.max.y+=n.y:s.min.y+=n.y)},t.contains=function(s,u){return u.x>=s.min.x&&u.x<=s.max.x&&u.y>=s.min.y&&u.y<=s.max.y},t.overlaps=function(s,u){return s.min.x<=u.max.x&&s.max.x>=u.min.x&&s.max.y>=u.min.y&&s.min.y<=u.max.y},t.translate=function(s,u){s.min.x+=u.x,s.max.x+=u.x,s.min.y+=u.y,s.max.y+=u.y},t.shift=function(s,u){var n=s.max.x-s.min.x,a=s.max.y-s.min.y;s.min.x=u.x,s.max.x=u.x+n,s.min.y=u.y,s.max.y=u.y+a}}()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(0),n=t(11),a=t(502),h=new u({Mixins:[n.Alpha,n.Flip,n.Visible],initialize:function(o,c,l,f,p,g,m,x){this.layer=o,this.index=c,this.x=l,this.y=f,this.width=p,this.height=g,this.right,this.bottom,this.baseWidth=m!==void 0?m:p,this.baseHeight=x!==void 0?x:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(r,o){return!(r<this.pixelX||o<this.pixelY||r>this.right||o>this.bottom)},copy:function(r){return this.index=r.index,this.alpha=r.alpha,this.properties=r.properties,this.visible=r.visible,this.setFlip(r.flipX,r.flipY),this.tint=r.tint,this.rotation=r.rotation,this.collideUp=r.collideUp,this.collideDown=r.collideDown,this.collideLeft=r.collideLeft,this.collideRight=r.collideRight,this.collisionCallback=r.collisionCallback,this.collisionCallbackContext=r.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(r){var o=this.tilemapLayer;return o?o.tileToWorldX(this.x,r):this.x*this.baseWidth},getRight:function(r){var o=this.tilemapLayer;return o?this.getLeft(r)+this.width*o.scaleX:this.getLeft(r)+this.width},getTop:function(r){var o=this.tilemapLayer;return o?o.tileToWorldY(this.y,r)-(this.height-this.baseHeight)*o.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(r){var o=this.tilemapLayer;return o?this.getTop(r)+this.height*o.scaleY:this.getTop(r)+this.height},getBounds:function(r,o){return o===void 0&&(o=new a),o.x=this.getLeft(),o.y=this.getTop(),o.width=this.getRight()-o.x,o.height=this.getBottom()-o.y,o},getCenterX:function(r){return(this.getLeft(r)+this.getRight(r))/2},getCenterY:function(r){return(this.getTop(r)+this.getBottom(r))/2},intersects:function(r,o,c,l){return!(c<=this.pixelX||l<=this.pixelY||r>=this.right||o>=this.bottom)},isInteresting:function(r,o){return r&&o?this.canCollide||this.hasInterestingFace:r?this.collides:o?this.hasInterestingFace:!1},resetCollision:function(r){if(r===void 0&&(r=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,r){var o=this.tilemapLayer;o&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(r,o,c,l,f){if(o===void 0&&(o=r),c===void 0&&(c=r),l===void 0&&(l=r),f===void 0&&(f=!0),this.collideLeft=r,this.collideRight=o,this.collideUp=c,this.collideDown=l,this.faceLeft=r,this.faceRight=o,this.faceTop=c,this.faceBottom=l,f){var p=this.tilemapLayer;p&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(r,o){return r===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=r,this.collisionCallbackContext=o),this},setSize:function(r,o,c,l){return r!==void 0&&(this.width=r),o!==void 0&&(this.height=o),c!==void 0&&(this.baseWidth=c),l!==void 0&&(this.baseHeight=l),this.updatePixelXY(),this},updatePixelXY:function(){var r=this.layer.orientation;if(r===s.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(r===s.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(r===s.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(r===s.HEXAGONAL){var o=this.layer.hexSideLength,c=(this.baseHeight-o)/2+o;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*c}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var r=this.layer.tilemapLayer;if(r){var o=r.gidMap[this.index];if(o)return o}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var r=this.tilemapLayer;return r?r.tilemap:null}}});e.exports=h},function(e,d,t){var s={};e.exports=s;var u=t(64),n=t(32),a=t(41),h=t(84),r=t(83),o=t(1393);(function(){s.rectangle=function(c,l,f,p,g){g=g||{};var m={label:"Rectangle Body",position:{x:c,y:l},vertices:u.fromPath("L 0 0 L "+f+" 0 L "+f+" "+p+" L 0 "+p)};if(g.chamfer){var x=g.chamfer;m.vertices=u.chamfer(m.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete g.chamfer}return a.create(n.extend({},m,g))},s.trapezoid=function(c,l,f,p,g,m){m=m||{},g*=.5;var x=(1-g*2)*f,y=f*g,T=y+x,S=T+y,C;g<.5?C="L 0 0 L "+y+" "+-p+" L "+T+" "+-p+" L "+S+" 0":C="L 0 0 L "+T+" "+-p+" L "+S+" 0";var E={label:"Trapezoid Body",position:{x:c,y:l},vertices:u.fromPath(C)};if(m.chamfer){var P=m.chamfer;E.vertices=u.chamfer(E.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete m.chamfer}return a.create(n.extend({},E,m))},s.circle=function(c,l,f,p,g){p=p||{};var m={label:"Circle Body",circleRadius:f};g=g||25;var x=Math.ceil(Math.max(10,Math.min(g,f)));return x%2===1&&(x+=1),s.polygon(c,l,x,f,n.extend({},m,p))},s.polygon=function(c,l,f,p,g){if(g=g||{},f<3)return s.circle(c,l,p,g);for(var m=2*Math.PI/f,x="",y=m*.5,T=0;T<f;T+=1){var S=y+T*m,C=Math.cos(S)*p,E=Math.sin(S)*p;x+="L "+C.toFixed(3)+" "+E.toFixed(3)+" "}var P={label:"Polygon Body",position:{x:c,y:l},vertices:u.fromPath(x)};if(g.chamfer){var M=g.chamfer;P.vertices=u.chamfer(P.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete g.chamfer}return a.create(n.extend({},P,g))},s.fromVertices=function(c,l,f,p,g,m,x){var y,T,S,C,E,P;for(p=p||{},T=[],g=typeof g!="undefined"?g:!1,m=typeof m!="undefined"?m:.01,x=typeof x!="undefined"?x:10,o||n.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),n.isArray(f[0])||(f=[f]),P=0;P<f.length;P+=1)if(C=f[P],S=u.isConvex(C),S||!o)S?C=u.clockwiseSort(C):C=u.hull(C),T.push({position:{x:c,y:l},vertices:C});else{var M=C.map(function(F){return[F.x,F.y]});o.makeCCW(M),m!==!1&&o.removeCollinearPoints(M,m);var O=o.quickDecomp(M);for(E=0;E<O.length;E++){var A=O[E],R=A.map(function(F){return{x:F[0],y:F[1]}});x>0&&u.area(R)<x||T.push({position:u.centre(R),vertices:R})}}for(E=0;E<T.length;E++)T[E]=a.create(n.extend(T[E],p));return g&&s.flagCoincidentParts(T,5),T.length>1?(y=a.create(n.extend({parts:T.slice(0)},p)),a.setPosition(y,{x:c,y:l}),y):T[0]},s.flagCoincidentParts=function(c,l){l===void 0&&(l=5);for(var f=0;f<c.length;f++)for(var p=c[f],g=f+1;g<c.length;g++){var m=c[g];if(h.overlaps(p.bounds,m.bounds))for(var x=p.vertices,y=m.vertices,T=0;T<p.vertices.length;T++)for(var S=0;S<m.vertices.length;S++){var C=r.magnitudeSquared(r.sub(x[(T+1)%x.length],y[S])),E=r.magnitudeSquared(r.sub(x[T],y[(S+1)%y.length]));C<l&&E<l&&(x[T].isInternal=!0,y[S].isInternal=!0)}}return c}})()},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x-s.width*s.originX+s.width*.5};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.width*s.originX;return s.x=u+n-s.width*.5,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.y-s.height*s.originY+s.height*.5};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.height*s.originY;return s.y=u+n-s.height*.5,s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={POST_RENDER:t(628),PRE_RENDER:t(629),RENDER:t(630),RESIZE:t(631)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74),u=function(n,a,h,r){r===void 0&&(r=n);var o;if(!Array.isArray(a))return o=n.indexOf(a),o!==-1?(s(n,o),h&&h.call(r,a),a):null;for(var c=a.length-1,l=[];c>=0;){var f=a[c];o=n.indexOf(f),o!==-1&&(s(n,o),l.push(f),h&&h.call(r,f)),c--}return l};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(199),n=t(10),a=t(3),h=new s({initialize:function(o){this.type=o,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new a,this._tmpVec2B=new a},draw:function(r,o){return o===void 0&&(o=32),r.strokePoints(this.getPoints(o))},getBounds:function(r,o){r||(r=new n),o===void 0&&(o=16);var c=this.getLength();o>c&&(o=c/2);var l=Math.max(1,Math.round(c/o));return u(this.getSpacedPoints(l),r)},getDistancePoints:function(r){var o=this.getLength(),c=Math.max(1,o/r);return this.getSpacedPoints(c)},getEndPoint:function(r){return r===void 0&&(r=new a),this.getPointAt(1,r)},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(r===void 0&&(r=this.arcLengthDivisions),this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var o=[],c,l=this.getPoint(0,this._tmpVec2A),f=0;o.push(0);for(var p=1;p<=r;p++)c=this.getPoint(p/r,this._tmpVec2B),f+=c.distance(l),o.push(f),l.copy(c);return this.cacheArcLengths=o,o},getPointAt:function(r,o){var c=this.getUtoTmapping(r);return this.getPoint(c,o)},getPoints:function(r,o,c){c===void 0&&(c=[]),r||(o?r=this.getLength()/o:r=this.defaultDivisions);for(var l=0;l<=r;l++)c.push(this.getPoint(l/r));return c},getRandomPoint:function(r){return r===void 0&&(r=new a),this.getPoint(Math.random(),r)},getSpacedPoints:function(r,o,c){c===void 0&&(c=[]),r||(o?r=this.getLength()/o:r=this.defaultDivisions);for(var l=0;l<=r;l++){var f=this.getUtoTmapping(l/r,null,r);c.push(this.getPoint(f))}return c},getStartPoint:function(r){return r===void 0&&(r=new a),this.getPointAt(0,r)},getTangent:function(r,o){o===void 0&&(o=new a);var c=1e-4,l=r-c,f=r+c;return l<0&&(l=0),f>1&&(f=1),this.getPoint(l,this._tmpVec2A),this.getPoint(f,o),o.subtract(this._tmpVec2A).normalize()},getTangentAt:function(r,o){var c=this.getUtoTmapping(r);return this.getTangent(c,o)},getTFromDistance:function(r,o){return r<=0?0:this.getUtoTmapping(0,r,o)},getUtoTmapping:function(r,o,c){var l=this.getLengths(c),f=0,p=l.length,g;o?g=Math.min(o,l[p-1]):g=r*l[p-1];for(var m=0,x=p-1,y;m<=x;)if(f=Math.floor(m+(x-m)/2),y=l[f]-g,y<0)m=f+1;else if(y>0)x=f-1;else{x=f;break}if(f=x,l[f]===g)return f/(p-1);var T=l[f],S=l[f+1],C=S-T,E=(g-T)/C;return(f+E)/(p-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:t(968),COMPLETE:t(969),FILE_COMPLETE:t(970),FILE_KEY_COMPLETE:t(971),FILE_LOAD_ERROR:t(972),FILE_LOAD:t(973),FILE_PROGRESS:t(974),POST_PROCESS:t(975),PROGRESS:t(976),START:t(977)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,h){h===void 0&&(h=new s);var r=n.x1,o=n.y1,c=n.x2,l=n.y2,f=a.x1,p=a.y1,g=a.x2,m=a.y2,x=(g-f)*(o-p)-(m-p)*(r-f),y=(c-r)*(o-p)-(l-o)*(r-f),T=(m-p)*(c-r)-(g-f)*(l-o);if(T===0)return!1;var S=x/T,C=y/T;return S>=0&&S<=1&&C>=0&&C<=1?(h.x=r+S*(c-r),h.y=o+S*(l-o),!0):!1};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.atan2(s.y2-s.y1,s.x2-s.x1)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=function(n,a,h){return n=s(n,0,1),(h-a)*n+a};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s&&s.hasOwnProperty(u)?s[u]:n};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(315),n=new s({initialize:function(h,r){this.parent=h,this.events=r,r||(this.events=h.events?h.events:h),this.list={},this.values={},this._frozen=!1,!h.hasOwnProperty("sys")&&this.events&&this.events.once(u.DESTROY,this.destroy,this)},get:function(a){var h=this.list;if(Array.isArray(a)){for(var r=[],o=0;o<a.length;o++)r.push(h[a[o]]);return r}else return h[a]},getAll:function(){var a={};for(var h in this.list)this.list.hasOwnProperty(h)&&(a[h]=this.list[h]);return a},query:function(a){var h={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(a)&&(h[r]=this.list[r]);return h},set:function(a,h){if(this._frozen)return this;if(typeof a=="string")return this.setValue(a,h);for(var r in a)this.setValue(r,a[r]);return this},inc:function(a,h){if(this._frozen)return this;h===void 0&&(h=1);var r=this.get(a);return r===void 0&&(r=0),this.set(a,r+h),this},toggle:function(a){return this._frozen?this:(this.set(a,!this.get(a)),this)},setValue:function(a,h){if(this._frozen)return this;if(this.has(a))this.values[a]=h;else{var r=this,o=this.list,c=this.events,l=this.parent;Object.defineProperty(this.values,a,{enumerable:!0,configurable:!0,get:function(){return o[a]},set:function(f){if(!r._frozen){var p=o[a];o[a]=f,c.emit(u.CHANGE_DATA,l,a,f,p),c.emit(u.CHANGE_DATA_KEY+a,l,f,p)}}}),o[a]=h,c.emit(u.SET_DATA,l,a,h)}return this},each:function(a,h){for(var r=[this.parent,null,void 0],o=1;o<arguments.length;o++)r.push(arguments[o]);for(var c in this.list)r[1]=c,r[2]=this.list[c],a.apply(h,r);return this},merge:function(a,h){h===void 0&&(h=!0);for(var r in a)a.hasOwnProperty(r)&&(h||!h&&!this.has(r))&&this.setValue(r,a[r]);return this},remove:function(a){if(this._frozen)return this;if(Array.isArray(a))for(var h=0;h<a.length;h++)this.removeValue(a[h]);else return this.removeValue(a);return this},removeValue:function(a){if(this.has(a)){var h=this.list[a];delete this.list[a],delete this.values[a],this.events.emit(u.REMOVE_DATA,this.parent,a,h)}return this},pop:function(a){var h=void 0;return!this._frozen&&this.has(a)&&(h=this.list[a],delete this.list[a],delete this.values[a],this.events.emit(u.REMOVE_DATA,this.parent,a,h)),h},has:function(a){return this.list.hasOwnProperty(a)},setFreeze:function(a){return this._frozen=a,this},reset:function(){for(var a in this.list)delete this.list[a],delete this.values[a];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(u.CHANGE_DATA),this.events.off(u.SET_DATA),this.events.off(u.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(a){this._frozen=!!a}},count:{get:function(){var a=0;for(var h in this.list)this.list[h]!==void 0&&a++;return a}}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a){if(this.entries={},this.size=0,Array.isArray(a))for(var h=0;h<a.length;h++)this.set(a[h][0],a[h][1])},set:function(n,a){return this.has(n)||this.size++,this.entries[n]=a,this},get:function(n){if(this.has(n))return this.entries[n]},getArray:function(){var n=[],a=this.entries;for(var h in a)n.push(a[h]);return n},has:function(n){return this.entries.hasOwnProperty(n)},delete:function(n){return this.has(n)&&(delete this.entries[n],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(n){delete this.entries[n]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var n=[],a=this.entries;for(var h in a)n.push(a[h]);return n},dump:function(){var n=this.entries;console.group("Map");for(var a in n)console.log(a,n[a]);console.groupEnd()},each:function(n){var a=this.entries;for(var h in a)if(n(h,a[h])===!1)break;return this},contains:function(n){var a=this.entries;for(var h in a)if(a[h]===n)return!0;return!1},merge:function(n,a){a===void 0&&(a=!1);var h=this.entries,r=n.entries;for(var o in r)h.hasOwnProperty(o)&&a?h[o]=r[o]:this.set(o,r[o]);return this}});e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s<<16|u<<8|n};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ENTER_FULLSCREEN:t(800),FULLSCREEN_FAILED:t(801),FULLSCREEN_UNSUPPORTED:t(802),LEAVE_FULLSCREEN:t(803),ORIENTATION_CHANGE:t(804),RESIZE:t(805)}},function(e,d,t){(function(s){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function n(){if(typeof importScripts=="function")return u;var a=navigator.userAgent;/Windows/.test(a)?u.windows=!0:/Mac OS/.test(a)&&!/like Mac OS/.test(a)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(u.iOS=!0,u.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),u.iOSVersion=parseInt(RegExp.$1,10)):u.macOS=!0:/Android/.test(a)?u.android=!0:/Linux/.test(a)?u.linux=!0:/iP[ao]d|iPhone/i.test(a)?(u.iOS=!0,navigator.appVersion.match(/OS (\d+)/),u.iOSVersion=parseInt(RegExp.$1,10),u.iPhone=a.toLowerCase().indexOf("iphone")!==-1,u.iPad=a.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(a)||/\bKF[A-Z][A-Z]+/.test(a)||/Silk.*Mobile Safari/.test(a)?u.kindle=!0:/CrOS/.test(a)&&(u.chromeOS=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(u.android=!1,u.iOS=!1,u.macOS=!1,u.windows=!0,u.windowsPhone=!0);var h=/Silk/.test(a);return(u.windows||u.macOS||u.linux&&!h||u.chromeOS)&&(u.desktop=!0),(u.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(u.desktop=!1),navigator.standalone&&(u.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(u.cordova=!0),window.ejecta!==void 0&&(u.ejecta=!0)),typeof s!="undefined"&&s.versions&&s.versions.node&&(u.node=!0),u.node&&typeof s.versions=="object"&&(u.nodeWebkit=!!s.versions["node-webkit"],u.electron=!!s.versions.electron),/Crosswalk/.test(a)&&(u.crosswalk=!0),u.pixelRatio=window.devicePixelRatio||1,u}e.exports=n()}).call(this,t(807))},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:t(861),ERROR:t(862),LOAD:t(863),READY:t(864),REMOVE:t(865)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(59),n=t(2),a=t(878),h=t(879),r=t(25),o=t(12),c=t(107),l=t(58),f=new s({Extends:l,initialize:function(g){var m=g.game.renderer,x=n(g,"fragShader",a);g.fragShader=o.parseFragmentShaderMaxTextures(x,m.maxTextures),g.vertShader=n(g,"vertShader",h),g.attributes=n(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),l.call(this,g),this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){l.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(p,g,m){this.manager.set(this,p);var x=this._tempMatrix1,y=this._tempMatrix2,T=this._tempMatrix3,S=p.frame,C=S.glTexture,E=S.u0,P=S.v0,M=S.u1,O=S.v1,A=S.x,R=S.y,F=S.cutWidth,I=S.cutHeight,B=S.customPivot,N=p.displayOriginX,Y=p.displayOriginY,X=-N+A,W=-Y+R;if(p.isCropped){var w=p._crop;(w.flipX!==p.flipX||w.flipY!==p.flipY)&&S.updateCropUVs(w,p.flipX,p.flipY),E=w.u0,P=w.v0,M=w.u1,O=w.v1,F=w.width,I=w.height,A=w.x,R=w.y,X=-N+A,W=-Y+R}var L=1,D=1;p.flipX&&(B||(X+=-S.realWidth+N*2),L=-1),(p.flipY||S.source.isGLTexture&&!C.flipY)&&(B||(W+=-S.realHeight+Y*2),D=-1),y.applyITRS(p.x,p.y,p.rotation,p.scaleX*L,p.scaleY*D),x.copyFrom(g.matrix),m?(x.multiplyWithOffset(m,-g.scrollX*p.scrollFactorX,-g.scrollY*p.scrollFactorY),y.e=p.x,y.f=p.y):(y.e-=g.scrollX*p.scrollFactorX,y.f-=g.scrollY*p.scrollFactorY),x.multiply(y,T);var b=X+F,G=W+I,z=g.roundPixels,U=T.getXRound(X,W,z),H=T.getYRound(X,W,z),$=T.getXRound(X,G,z),K=T.getYRound(X,G,z),Z=T.getXRound(b,G,z),k=T.getYRound(b,G,z),J=T.getXRound(b,W,z),q=T.getYRound(b,W,z),Q=o.getTintAppendFloatAlpha,_=g.alpha,at=Q(p.tintTopLeft,_*p._alphaTL),st=Q(p.tintTopRight,_*p._alphaTR),tt=Q(p.tintBottomLeft,_*p._alphaBL),j=Q(p.tintBottomRight,_*p._alphaBR);this.shouldFlush(6)&&this.flush();var ot=this.setGameObject(p,S);this.manager.preBatch(p),this.batchQuad(p,U,H,$,K,Z,k,J,q,E,P,M,O,at,st,tt,j,p.tintFill,C,ot),this.manager.postBatch(p)},batchTexture:function(p,g,m,x,y,T,S,C,E,P,M,O,A,R,F,I,B,N,Y,X,W,w,L,D,b,G,z,U,H,$,K,Z){this.manager.set(this,p);var k=this._tempMatrix1,J=this._tempMatrix2,q=this._tempMatrix3,Q=N/m+z,_=Y/x+U,at=(N+X)/m+z,st=(Y+W)/x+U,tt=S,j=C,ot=-I,et=-B;if(p.isCropped){var nt=p._crop,jt=nt.width,qt=nt.height;tt=jt,j=qt,S=jt,C=qt,N=nt.x,Y=nt.y;var yt=N,lt=Y;O&&(yt=X-nt.x-jt),A&&(lt=W-nt.y-qt),Q=yt/m+z,_=lt/x+U,at=(yt+jt)/m+z,st=(lt+qt)/x+U,ot=-I+N,et=-B+Y}A=A^(!K&&g.isRenderTexture?1:0),O&&(tt*=-1,ot+=S),A&&(j*=-1,et+=C);var Rt=ot+tt,At=et+j;J.applyITRS(y,T,M,E,P),k.copyFrom(H.matrix),$?(k.multiplyWithOffset($,-H.scrollX*R,-H.scrollY*F),J.e=y,J.f=T):(J.e-=H.scrollX*R,J.f-=H.scrollY*F),k.multiply(J,q);var Et=H.roundPixels,_t=q.getXRound(ot,et,Et),Ye=q.getYRound(ot,et,Et),Ue=q.getXRound(ot,At,Et),Xe=q.getYRound(ot,At,Et),We=q.getXRound(Rt,At,Et),He=q.getYRound(Rt,At,Et),$e=q.getXRound(Rt,et,Et),hf=q.getYRound(Rt,et,Et);Z===void 0&&(Z=this.renderer.setTexture2D(g)),p&&this.manager.preBatch(p),this.batchQuad(p,_t,Ye,Ue,Xe,We,He,$e,hf,Q,_,at,st,w,L,D,b,G,g,Z),p&&this.manager.postBatch(p)},batchTextureFrame:function(p,g,m,x,y,T,S){this.manager.set(this);var C=this._tempMatrix1.copyFrom(T),E=this._tempMatrix2,P=g+p.width,M=m+p.height;S?C.multiply(S,E):E=C;var O=E.getX(g,m),A=E.getY(g,m),R=E.getX(g,M),F=E.getY(g,M),I=E.getX(P,M),B=E.getY(P,M),N=E.getX(P,m),Y=E.getY(P,m),X=this.renderer.setTextureSource(p.source);x=o.getTintAppendFloatAlpha(x,y),this.batchQuad(null,O,A,R,F,I,B,N,Y,p.u0,p.v0,p.u1,p.v1,x,x,x,x,0,p.glTexture,X)},batchFillRect:function(p,g,m,x,y,T){this.renderer.pipelines.set(this);var S=this.calcMatrix;T&&T.multiply(y,S);var C=p+m,E=g+x,P=S.getX(p,g),M=S.getY(p,g),O=S.getX(p,E),A=S.getY(p,E),R=S.getX(C,E),F=S.getY(C,E),I=S.getX(C,g),B=S.getY(C,g),N=this.fillTint;this.batchQuad(null,P,M,O,A,R,F,I,B,0,0,1,1,N.TL,N.TR,N.BL,N.BR,2)},batchFillTriangle:function(p,g,m,x,y,T,S,C){this.renderer.pipelines.set(this);var E=this.calcMatrix;C&&C.multiply(S,E);var P=E.getX(p,g),M=E.getY(p,g),O=E.getX(m,x),A=E.getY(m,x),R=E.getX(y,T),F=E.getY(y,T),I=this.fillTint;this.batchTri(null,P,M,O,A,R,F,0,0,1,1,I.TL,I.TR,I.BL,2)},batchStrokeTriangle:function(p,g,m,x,y,T,S,C,E){var P=this.tempTriangle;P[0].x=p,P[0].y=g,P[0].width=S,P[1].x=m,P[1].y=x,P[1].width=S,P[2].x=y,P[2].y=T,P[2].width=S,P[3].x=p,P[3].y=g,P[3].width=S,this.batchStrokePath(P,S,!1,C,E)},batchFillPath:function(p,g,m){this.renderer.pipelines.set(this);var x=this.calcMatrix;m&&m.multiply(g,x);for(var y=p.length,T=this.polygonCache,S,C,E=this.fillTint.TL,P=this.fillTint.TR,M=this.fillTint.BL,O=0;O<y;++O)C=p[O],T.push(C.x,C.y);S=u(T),y=S.length;for(var A=0;A<y;A+=3){var R=S[A+0]*2,F=S[A+1]*2,I=S[A+2]*2,B=T[R+0],N=T[R+1],Y=T[F+0],X=T[F+1],W=T[I+0],w=T[I+1],L=x.getX(B,N),D=x.getY(B,N),b=x.getX(Y,X),G=x.getY(Y,X),z=x.getX(W,w),U=x.getY(W,w);this.batchTri(null,L,D,b,G,z,U,0,0,1,1,E,P,M,2)}T.length=0},batchStrokePath:function(p,g,m,x,y){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var T=p.length-1,S=0;S<T;S++){var C=p[S],E=p[S+1];this.batchLine(C.x,C.y,E.x,E.y,C.width/2,E.width/2,g,S,!m&&S===T-1,x,y)}},batchLine:function(p,g,m,x,y,T,S,C,E,P,M){this.renderer.pipelines.set(this);var O=this.calcMatrix;M&&M.multiply(P,O);var A=m-p,R=x-g,F=Math.sqrt(A*A+R*R),I=y*(x-g)/F,B=y*(p-m)/F,N=T*(x-g)/F,Y=T*(p-m)/F,X=m-N,W=x-Y,w=p-I,L=g-B,D=m+N,b=x+Y,G=p+I,z=g+B,U=O.getX(X,W),H=O.getY(X,W),$=O.getX(w,L),K=O.getY(w,L),Z=O.getX(D,b),k=O.getY(D,b),J=O.getX(G,z),q=O.getY(G,z),Q=this.strokeTint,_=Q.TL,at=Q.TR,st=Q.BL,tt=Q.BR;if(this.batchQuad(null,J,q,$,K,U,H,Z,k,0,0,1,1,_,at,st,tt,2),!(S<=2)){var j=this.prevQuad,ot=this.firstQuad;C>0&&j[4]?this.batchQuad(null,J,q,$,K,j[0],j[1],j[2],j[3],0,0,1,1,_,at,st,tt,2):(ot[0]=J,ot[1]=q,ot[2]=$,ot[3]=K,ot[4]=1),E&&ot[4]?this.batchQuad(null,U,H,Z,k,ot[0],ot[1],ot[2],ot[3],0,0,1,1,_,at,st,tt,2):(j[0]=U,j[1]=H,j[2]=Z,j[3]=k,j[4]=1)}}});e.exports=f},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(18),n=t(17),a=new s({initialize:function(r,o,c,l,f,p,g){this.texture=r,this.name=o,this.source=r.source[c],this.sourceIndex=c,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(p,g,l,f)},setSize:function(h,r,o,c){o===void 0&&(o=0),c===void 0&&(c=0),this.cutX=o,this.cutY=c,this.cutWidth=h,this.cutHeight=r,this.width=h,this.height=r,this.halfWidth=Math.floor(h*.5),this.halfHeight=Math.floor(r*.5),this.centerX=Math.floor(h/2),this.centerY=Math.floor(r/2);var l=this.data,f=l.cut;f.x=o,f.y=c,f.w=h,f.h=r,f.r=o+h,f.b=c+r,l.sourceSize.w=h,l.sourceSize.h=r,l.spriteSourceSize.w=h,l.spriteSourceSize.h=r,l.radius=.5*Math.sqrt(h*h+r*r);var p=l.drawImage;return p.x=o,p.y=c,p.width=h,p.height=r,this.updateUVs()},setTrim:function(h,r,o,c,l,f){var p=this.data,g=p.spriteSourceSize;return p.trim=!0,p.sourceSize.w=h,p.sourceSize.h=r,g.x=o,g.y=c,g.w=l,g.h=f,g.r=o+l,g.b=c+f,this.x=o,this.y=c,this.width=l,this.height=f,this.halfWidth=l*.5,this.halfHeight=f*.5,this.centerX=Math.floor(l/2),this.centerY=Math.floor(f/2),this.updateUVs()},setCropUVs:function(h,r,o,c,l,f,p){var g=this.cutX,m=this.cutY,x=this.cutWidth,y=this.cutHeight,T=this.realWidth,S=this.realHeight;r=u(r,0,T),o=u(o,0,S),c=u(c,0,T-r),l=u(l,0,S-o);var C=g+r,E=m+o,P=c,M=l,O=this.data;if(O.trim){var A=O.spriteSourceSize;c=u(c,0,x-r),l=u(l,0,y-o);var R=r+c,F=o+l,I=!(A.r<r||A.b<o||A.x>R||A.y>F);if(I){var B=Math.max(A.x,r),N=Math.max(A.y,o),Y=Math.min(A.r,R)-B,X=Math.min(A.b,F)-N;P=Y,M=X,f?C=g+(x-(B-A.x)-Y):C=g+(B-A.x),p?E=m+(y-(N-A.y)-X):E=m+(N-A.y),r=B,o=N,c=Y,l=X}else C=0,E=0,P=0,M=0}else f&&(C=g+(x-r-c)),p&&(E=m+(y-o-l));var W=this.source.width,w=this.source.height;return h.u0=Math.max(0,C/W),h.v0=Math.max(0,E/w),h.u1=Math.min(1,(C+P)/W),h.v1=Math.min(1,(E+M)/w),h.x=r,h.y=o,h.cx=C,h.cy=E,h.cw=P,h.ch=M,h.width=c,h.height=l,h.flipX=f,h.flipY=p,h},updateCropUVs:function(h,r,o){return this.setCropUVs(h,h.x,h.y,h.width,h.height,r,o)},setUVs:function(h,r,o,c,l,f){var p=this.data.drawImage;return p.width=h,p.height=r,this.u0=o,this.v0=c,this.u1=l,this.v1=f,this},updateUVs:function(){var h=this.cutX,r=this.cutY,o=this.cutWidth,c=this.cutHeight,l=this.data.drawImage;l.width=o,l.height=c;var f=this.source.width,p=this.source.height;return this.u0=h/f,this.v0=r/p,this.u1=(h+o)/f,this.v1=(r+c)/p,this},updateUVsInverted:function(){var h=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/h,this.v0=this.cutY/r,this.u1=this.cutX/h,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function(){var h=new a(this.texture,this.name,this.sourceIndex);return h.cutX=this.cutX,h.cutY=this.cutY,h.cutWidth=this.cutWidth,h.cutHeight=this.cutHeight,h.x=this.x,h.y=this.y,h.width=this.width,h.height=this.height,h.halfWidth=this.halfWidth,h.halfHeight=this.halfHeight,h.centerX=this.centerX,h.centerY=this.centerY,h.rotated=this.rotated,h.data=n(!0,h.data,this.data),h.updateUVs(),h},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(208),u=t(0),n=t(1),a=t(79),h=new u({initialize:function(o){this.parent=o,this.list=[],this.position=0,this.addCallback=n,this.removeCallback=n,this._sortKey=""},add:function(r,o){return o?s.Add(this.list,r):s.Add(this.list,r,0,this.addCallback,this)},addAt:function(r,o,c){return c?s.AddAt(this.list,r,o):s.AddAt(this.list,r,o,0,this.addCallback,this)},getAt:function(r){return this.list[r]},getIndex:function(r){return this.list.indexOf(r)},sort:function(r,o){return r?(o===void 0&&(o=function(c,l){return c[r]-l[r]}),a(this.list,o),this):this},getByName:function(r){return s.GetFirst(this.list,"name",r)},getRandom:function(r,o){return s.GetRandom(this.list,r,o)},getFirst:function(r,o,c,l){return s.GetFirst(this.list,r,o,c,l)},getAll:function(r,o,c,l){return s.GetAll(this.list,r,o,c,l)},count:function(r,o){return s.CountAllMatching(this.list,r,o)},swap:function(r,o){s.Swap(this.list,r,o)},moveTo:function(r,o){return s.MoveTo(this.list,r,o)},moveAbove:function(r,o){return s.MoveAbove(this.list,r,o)},moveBelow:function(r,o){return s.MoveBelow(this.list,r,o)},remove:function(r,o){return o?s.Remove(this.list,r):s.Remove(this.list,r,this.removeCallback,this)},removeAt:function(r,o){return o?s.RemoveAt(this.list,r):s.RemoveAt(this.list,r,this.removeCallback,this)},removeBetween:function(r,o,c){return c?s.RemoveBetween(this.list,r,o):s.RemoveBetween(this.list,r,o,this.removeCallback,this)},removeAll:function(r){for(var o=this.list.length;o--;)this.remove(this.list[o],r);return this},bringToTop:function(r){return s.BringToTop(this.list,r)},sendToBack:function(r){return s.SendToBack(this.list,r)},moveUp:function(r){return s.MoveUp(this.list,r),r},moveDown:function(r){return s.MoveDown(this.list,r),r},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(r,o){return s.Replace(this.list,r,o)},exists:function(r){return this.list.indexOf(r)>-1},setAll:function(r,o,c,l){return s.SetAll(this.list,r,o,c,l),this},each:function(r,o){for(var c=[null],l=2;l<arguments.length;l++)c.push(arguments[l]);for(l=0;l<this.list.length;l++)c[0]=this.list[l],r.apply(o,c)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(112),n=t(445),a=t(446),h=t(56),r=t(180),o=new s({initialize:function(l,f,p,g){l===void 0&&(l=0),f===void 0&&(f=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=h.ELLIPSE,this.x=l,this.y=f,this.width=p,this.height=g},contains:function(c,l){return u(this,c,l)},getPoint:function(c,l){return n(this,c,l)},getPoints:function(c,l,f){return a(this,c,l,f)},getRandomPoint:function(c){return r(this,c)},setTo:function(c,l,f,p){return this.x=c,this.y=l,this.width=f,this.height=p,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(c,l){return l===void 0&&(l=c),this.x=c,this.y=l,this},setSize:function(c,l){return l===void 0&&(l=c),this.width=c,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(c){this.x=c+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(c){this.x=c-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(c){this.y=c+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(c){this.y=c-this.height/2}}});e.exports=o},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(s.width<=0||s.height<=0)return!1;var a=(u-s.x)/s.width,h=(n-s.y)/s.height;return a*=a,h*=h,a+h<.25};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(275),u=t(0),n=t(75),a=t(9),h=t(207),r=t(2),o=t(6),c=t(7),l=t(437),f=t(149),p=t(73),g=new u({Extends:a,initialize:function(x,y,T){a.call(this),T?y&&!Array.isArray(y)&&(y=[y]):Array.isArray(y)?c(y[0])&&(T=y,y=null):c(y)&&(T=y,y=null),this.scene=x,this.children=new f,this.isParent=!0,this.type="Group",this.classType=r(T,"classType",p),this.name=r(T,"name",""),this.active=r(T,"active",!0),this.maxSize=r(T,"maxSize",-1),this.defaultKey=r(T,"defaultKey",null),this.defaultFrame=r(T,"defaultFrame",null),this.runChildUpdate=r(T,"runChildUpdate",!1),this.createCallback=r(T,"createCallback",null),this.removeCallback=r(T,"removeCallback",null),this.createMultipleCallback=r(T,"createMultipleCallback",null),this.internalCreateCallback=r(T,"internalCreateCallback",null),this.internalRemoveCallback=r(T,"internalRemoveCallback",null),y&&this.addMultiple(y),T&&this.createMultiple(T),this.on(n.ADDED_TO_SCENE,this.addedToScene,this),this.on(n.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(m,x,y,T,S,C){if(m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.defaultKey),T===void 0&&(T=this.defaultFrame),S===void 0&&(S=!0),C===void 0&&(C=!0),this.isFull())return null;var E=new this.classType(this.scene,m,x,y,T);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=S,E.setActive(C),this.add(E),E},createMultiple:function(m){if(this.isFull())return[];Array.isArray(m)||(m=[m]);var x=[];if(m[0].key)for(var y=0;y<m.length;y++){var T=this.createFromConfig(m[y]);x=x.concat(T)}return x},createFromConfig:function(m){if(this.isFull())return[];this.classType=r(m,"classType",this.classType);var x=r(m,"key",void 0),y=r(m,"frame",null),T=r(m,"visible",!0),S=r(m,"active",!0),C=[];if(x===void 0)return C;Array.isArray(x)||(x=[x]),Array.isArray(y)||(y=[y]);var E=r(m,"repeat",0),P=r(m,"randomKey",!1),M=r(m,"randomFrame",!1),O=r(m,"yoyo",!1),A=r(m,"quantity",!1),R=r(m,"frameQuantity",1),F=r(m,"max",0),I=l(x,y,{max:F,qty:A||R,random:P,randomB:M,repeat:E,yoyo:O});m.createCallback&&(this.createCallback=m.createCallback),m.removeCallback&&(this.removeCallback=m.removeCallback);for(var B=0;B<I.length;B++){var N=this.create(0,0,I[B].a,I[B].b,T,S);if(!N)break;C.push(N)}var Y=o(m,"setXY.x",0),X=o(m,"setXY.y",0),W=o(m,"setXY.stepX",0),w=o(m,"setXY.stepY",0);s.SetXY(C,Y,X,W,w);var L=o(m,"setRotation.value",0),D=o(m,"setRotation.step",0);s.SetRotation(C,L,D);var b=o(m,"setScale.x",1),G=o(m,"setScale.y",b),z=o(m,"setScale.stepX",0),U=o(m,"setScale.stepY",0);s.SetScale(C,b,G,z,U);var H=o(m,"setOrigin.x",.5),$=o(m,"setOrigin.y",H),K=o(m,"setOrigin.stepX",0),Z=o(m,"setOrigin.stepY",0);s.SetOrigin(C,H,$,K,Z);var k=o(m,"setAlpha.value",1),J=o(m,"setAlpha.step",0);s.SetAlpha(C,k,J);var q=o(m,"setDepth.value",0),Q=o(m,"setDepth.step",0);s.SetDepth(C,q,Q);var _=o(m,"setScrollFactor.x",1),at=o(m,"setScrollFactor.y",_),st=o(m,"setScrollFactor.stepX",0),tt=o(m,"setScrollFactor.stepY",0);s.SetScrollFactor(C,_,at,st,tt);var j=r(m,"hitArea",null),ot=r(m,"hitAreaCallback",null);j&&s.SetHitArea(C,j,ot);var et=r(m,"gridAlign",!1);return et&&s.GridAlign(C,et),this.createMultipleCallback&&this.createMultipleCallback.call(this,C),C},preUpdate:function(m,x){if(!(!this.runChildUpdate||this.children.size===0))for(var y=this.children.entries.slice(),T=0;T<y.length;T++){var S=y[T];S.active&&S.update(m,x)}},add:function(m,x){return x===void 0&&(x=!1),this.isFull()?this:(this.children.set(m),this.internalCreateCallback&&this.internalCreateCallback.call(this,m),this.createCallback&&this.createCallback.call(this,m),x&&(m.addToDisplayList(this.scene.sys.displayList),m.addToUpdateList()),m.on(n.DESTROY,this.remove,this),this)},addMultiple:function(m,x){if(x===void 0&&(x=!1),Array.isArray(m))for(var y=0;y<m.length;y++)this.add(m[y],x);return this},remove:function(m,x,y){return x===void 0&&(x=!1),y===void 0&&(y=!1),this.children.contains(m)?(this.children.delete(m),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,m),this.removeCallback&&this.removeCallback.call(this,m),m.off(n.DESTROY,this.remove,this),y?m.destroy():x&&(m.removeFromDisplayList(),m.removeFromUpdateList()),this):this},clear:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1);for(var y=this.children,T=0;T<y.size;T++){var S=y.entries[T];S.off(n.DESTROY,this.remove,this),x?S.destroy():m&&(S.removeFromDisplayList(),S.removeFromUpdateList())}return this.children.clear(),this},contains:function(m){return this.children.contains(m)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(m,x,y,T){return h(this.children.entries,m,x,y,T)},getFirst:function(m,x,y,T,S,C,E){return this.getHandler(!0,1,m,x,y,T,S,C,E)},getFirstNth:function(m,x,y,T,S,C,E,P){return this.getHandler(!0,m,x,y,T,S,C,E,P)},getLast:function(m,x,y,T,S,C,E){return this.getHandler(!1,1,m,x,y,T,S,C,E)},getLastNth:function(m,x,y,T,S,C,E,P){return this.getHandler(!1,m,x,y,T,S,C,E,P)},getHandler:function(m,x,y,T,S,C,E,P,M){y===void 0&&(y=!1),T===void 0&&(T=!1);var O,A,R=0,F=this.children.entries;if(m)for(A=0;A<F.length;A++)if(O=F[A],O.active===y){if(R++,R===x)break}else O=null;else for(A=F.length-1;A>=0;A--)if(O=F[A],O.active===y){if(R++,R===x)break}else O=null;return O?(typeof S=="number"&&(O.x=S),typeof C=="number"&&(O.y=C),O):T?this.create(S,C,E,P,M):null},get:function(m,x,y,T,S){return this.getFirst(!1,!0,m,x,y,T,S)},getFirstAlive:function(m,x,y,T,S,C){return this.getFirst(!0,m,x,y,T,S,C)},getFirstDead:function(m,x,y,T,S,C){return this.getFirst(!1,m,x,y,T,S,C)},playAnimation:function(m,x){return s.PlayAnimation(this.children.entries,m,x),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(m){m===void 0&&(m=!0);for(var x=0,y=0;y<this.children.size;y++)this.children.entries[y].active===m&&x++;return x},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var m=this.getTotalUsed(),x=this.maxSize===-1?999999999999:this.maxSize;return x-m},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},propertyValueSet:function(m,x,y,T,S){return s.PropertyValueSet(this.children.entries,m,x,y,T,S),this},propertyValueInc:function(m,x,y,T,S){return s.PropertyValueInc(this.children.entries,m,x,y,T,S),this},setX:function(m,x){return s.SetX(this.children.entries,m,x),this},setY:function(m,x){return s.SetY(this.children.entries,m,x),this},setXY:function(m,x,y,T){return s.SetXY(this.children.entries,m,x,y,T),this},incX:function(m,x){return s.IncX(this.children.entries,m,x),this},incY:function(m,x){return s.IncY(this.children.entries,m,x),this},incXY:function(m,x,y,T){return s.IncXY(this.children.entries,m,x,y,T),this},shiftPosition:function(m,x,y){return s.ShiftPosition(this.children.entries,m,x,y),this},angle:function(m,x){return s.Angle(this.children.entries,m,x),this},rotate:function(m,x){return s.Rotate(this.children.entries,m,x),this},rotateAround:function(m,x){return s.RotateAround(this.children.entries,m,x),this},rotateAroundDistance:function(m,x,y){return s.RotateAroundDistance(this.children.entries,m,x,y),this},setAlpha:function(m,x){return s.SetAlpha(this.children.entries,m,x),this},setTint:function(m,x,y,T){return s.SetTint(this.children.entries,m,x,y,T),this},setOrigin:function(m,x,y,T){return s.SetOrigin(this.children.entries,m,x,y,T),this},scaleX:function(m,x){return s.ScaleX(this.children.entries,m,x),this},scaleY:function(m,x){return s.ScaleY(this.children.entries,m,x),this},scaleXY:function(m,x,y,T){return s.ScaleXY(this.children.entries,m,x,y,T),this},setDepth:function(m,x){return s.SetDepth(this.children.entries,m,x),this},setBlendMode:function(m){return s.SetBlendMode(this.children.entries,m),this},setHitArea:function(m,x){return s.SetHitArea(this.children.entries,m,x),this},shuffle:function(){return s.Shuffle(this.children.entries),this},kill:function(m){this.children.contains(m)&&m.setActive(!1)},killAndHide:function(m){this.children.contains(m)&&(m.setActive(!1),m.setVisible(!1))},setVisible:function(m,x,y){return s.SetVisible(this.children.entries,m,x,y),this},toggleVisible:function(){return s.ToggleVisible(this.children.entries),this},destroy:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(n.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(x,m),this.scene=void 0,this.children=void 0)}});e.exports=g},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,a,h,r,o,c){for(var l=s.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*r),f=h.pathData,p=h.pathIndexes,g=0;g<p.length;g+=3){var m=p[g]*2,x=p[g+1]*2,y=p[g+2]*2,T=f[m+0]-o,S=f[m+1]-c,C=f[x+0]-o,E=f[x+1]-c,P=f[y+0]-o,M=f[y+1]-c,O=a.getX(T,S),A=a.getY(T,S),R=a.getX(C,E),F=a.getY(C,E),I=a.getX(P,M),B=a.getY(P,M);n.batchTri(h,O,A,R,F,I,B,0,0,1,1,l,l,l,2)}};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=s.x3-s.x1,h=s.y3-s.y1,r=s.x2-s.x1,o=s.y2-s.y1,c=u-s.x1,l=n-s.y1,f=a*a+h*h,p=a*r+h*o,g=a*c+h*l,m=r*r+o*o,x=r*c+o*l,y=f*m-p*p,T=y===0?0:1/y,S=(m*g-p*x)*T,C=(f*x-p*g)*T;return S>=0&&C>=0&&S+C<1};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(10),n=t(3);function a(r,o,c,l){var f=r-c,p=o-l,g=f*f+p*p;return Math.sqrt(g)}var h=new s({initialize:function(o,c,l){this.vertex1=o,this.vertex2=c,this.vertex3=l,this.bounds=new u,this._inCenter=new n},getInCenter:function(r){r===void 0&&(r=!0);var o=this.vertex1,c=this.vertex2,l=this.vertex3,f,p,g,m,x,y;r?(f=o.x,p=o.y,g=c.x,m=c.y,x=l.x,y=l.y):(f=o.vx,p=o.vy,g=c.vx,m=c.vy,x=l.vx,y=l.vy);var T=a(x,y,g,m),S=a(f,p,x,y),C=a(g,m,f,p),E=T+S+C;return this._inCenter.set((f*T+g*S+x*C)/E,(p*T+m*S+y*C)/E)},contains:function(r,o,c){var l=this.vertex1,f=this.vertex2,p=this.vertex3,g=l.vx,m=l.vy,x=f.vx,y=f.vy,T=p.vx,S=p.vy;if(c){var C=c.a,E=c.b,P=c.c,M=c.d,O=c.e,A=c.f;g=l.vx*C+l.vy*P+O,m=l.vx*E+l.vy*M+A,x=f.vx*C+f.vy*P+O,y=f.vx*E+f.vy*M+A,T=p.vx*C+p.vy*P+O,S=p.vx*E+p.vy*M+A}var R=T-g,F=S-m,I=x-g,B=y-m,N=r-g,Y=o-m,X=R*R+F*F,W=R*I+F*B,w=R*N+F*Y,L=I*I+B*B,D=I*N+B*Y,b=X*L-W*W,G=b===0?0:1/b,z=(L*w-W*D)*G,U=(X*D-W*w)*G;return z>=0&&U>=0&&z+U<1},isCounterClockwise:function(r){var o=this.vertex1,c=this.vertex2,l=this.vertex3,f=(c.vx-o.vx)*(l.vy-o.vy)-(c.vy-o.vy)*(l.vx-o.vx);return r<=0?f>=0:f<0},load:function(r,o,c,l,f){return c=this.vertex1.load(r,o,c,l,f),c=this.vertex2.load(r,o,c,l,f),c=this.vertex3.load(r,o,c,l,f),c},transformCoordinatesLocal:function(r,o,c,l){return this.vertex1.transformCoordinatesLocal(r,o,c,l),this.vertex2.transformCoordinatesLocal(r,o,c,l),this.vertex3.transformCoordinatesLocal(r,o,c,l),this},updateBounds:function(){var r=this.vertex1,o=this.vertex2,c=this.vertex3,l=this.bounds;return l.x=Math.min(r.vx,o.vx,c.vx),l.y=Math.min(r.vy,o.vy,c.vy),l.width=Math.max(r.vx,o.vx,c.vx)-l.x,l.height=Math.max(r.vy,o.vy,c.vy)-l.y,this},isInView:function(r,o,c,l,f,p,g,m,x,y,T){var S=this.vertex1.update(f,p,g,m,x,y,T,l),C=this.vertex2.update(f,p,g,m,x,y,T,l),E=this.vertex3.update(f,p,g,m,x,y,T,l);if(S.ta<=0&&C.ta<=0&&E.ta<=0||o&&!this.isCounterClockwise(c))return!1;var P=this.bounds;P.x=Math.min(S.tx,C.tx,E.tx),P.y=Math.min(S.ty,C.ty,E.ty),P.width=Math.max(S.tx,C.tx,E.tx)-P.x,P.height=Math.max(S.ty,C.ty,E.ty)-P.y;var M=r.x+r.width,O=r.y+r.height;return P.width<=0||P.height<=0||r.width<=0||r.height<=0?!1:!(P.right<r.x||P.bottom<r.y||P.x>M||P.y>O)},translate:function(r,o){o===void 0&&(o=0);var c=this.vertex1,l=this.vertex2,f=this.vertex3;return c.x+=r,c.y+=o,l.x+=r,l.y+=o,f.x+=r,f.y+=o,this},x:{get:function(){return this.getInCenter().x},set:function(r){var o=this.getInCenter();this.translate(r-o.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(r){var o=this.getInCenter();this.translate(0,r-o.y)}},alpha:{get:function(){var r=this.vertex1,o=this.vertex2,c=this.vertex3;return(r.alpha+o.alpha+c.alpha)/3},set:function(r){this.vertex1.alpha=r,this.vertex2.alpha=r,this.vertex3.alpha=r}},depth:{get:function(){var r=this.vertex1,o=this.vertex2,c=this.vertex3;return(r.vz+o.vz+c.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(12),n=t(39),a=new s({Extends:n,initialize:function(r,o,c,l,f,p,g,m,x,y){p===void 0&&(p=16777215),g===void 0&&(g=1),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),n.call(this,r,o,c),this.vx=0,this.vy=0,this.vz=0,this.nx=m,this.ny=x,this.nz=y,this.u=l,this.v=f,this.color=p,this.alpha=g,this.tx=0,this.ty=0,this.ta=0},setUVs:function(h,r){return this.u=h,this.v=r,this},transformCoordinatesLocal:function(h,r,o,c){var l=this.x,f=this.y,p=this.z,g=h.val,m=l*g[0]+f*g[4]+p*g[8]+g[12],x=l*g[1]+f*g[5]+p*g[9]+g[13],y=l*g[2]+f*g[6]+p*g[10]+g[14],T=l*g[3]+f*g[7]+p*g[11]+g[15];this.vx=m/T*r,this.vy=-(x/T)*o,c<=0?this.vz=y/T:this.vz=-(y/T)},update:function(h,r,o,c,l,f,p,g){var m=this.vx*h+this.vy*o+l,x=this.vx*r+this.vy*c+f;return p&&(m=Math.round(m),x=Math.round(x)),this.tx=m,this.ty=x,this.ta=this.alpha*g,this},load:function(h,r,o,c,l){return h[++o]=this.tx,h[++o]=this.ty,h[++o]=this.u,h[++o]=this.v,h[++o]=c,h[++o]=l,r[++o]=u.getTintAppendFloatAlpha(this.color,this.ta),o}});e.exports=a},function(e,d,t){var s={};e.exports=s;var u=t(166),n=t(32),a=t(84),h=t(41);(function(){s.create=function(r){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},r)},s.setModified=function(r,o,c,l){if(u.trigger(r,"compositeModified",r),r.isModified=o,c&&r.parent&&s.setModified(r.parent,o,c,l),l)for(var f=0;f<r.composites.length;f++){var p=r.composites[f];s.setModified(p,o,c,l)}},s.add=function(r,o){var c=[].concat(o);u.trigger(r,"beforeAdd",{object:o});for(var l=0;l<c.length;l++){var f=c[l];switch(f.type){case"body":if(f.parent!==f){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(r,f);break;case"constraint":s.addConstraint(r,f);break;case"composite":s.addComposite(r,f);break;case"mouseConstraint":s.addConstraint(r,f.constraint);break}}return u.trigger(r,"afterAdd",{object:o}),r},s.remove=function(r,o,c){var l=[].concat(o);u.trigger(r,"beforeRemove",{object:o});for(var f=0;f<l.length;f++){var p=l[f];switch(p.type){case"body":s.removeBody(r,p,c);break;case"constraint":s.removeConstraint(r,p,c);break;case"composite":s.removeComposite(r,p,c);break;case"mouseConstraint":s.removeConstraint(r,p.constraint);break}}return u.trigger(r,"afterRemove",{object:o}),r},s.addComposite=function(r,o){return r.composites.push(o),o.parent=r,s.setModified(r,!0,!0,!1),r},s.removeComposite=function(r,o,c){var l=r.composites.indexOf(o);if(l!==-1&&(s.removeCompositeAt(r,l),s.setModified(r,!0,!0,!1)),c)for(var f=0;f<r.composites.length;f++)s.removeComposite(r.composites[f],o,!0);return r},s.removeCompositeAt=function(r,o){return r.composites.splice(o,1),s.setModified(r,!0,!0,!1),r},s.addBody=function(r,o){return r.bodies.push(o),s.setModified(r,!0,!0,!1),r},s.removeBody=function(r,o,c){var l=r.bodies.indexOf(o);if(l!==-1&&(s.removeBodyAt(r,l),s.setModified(r,!0,!0,!1)),c)for(var f=0;f<r.composites.length;f++)s.removeBody(r.composites[f],o,!0);return r},s.removeBodyAt=function(r,o){return r.bodies.splice(o,1),s.setModified(r,!0,!0,!1),r},s.addConstraint=function(r,o){return r.constraints.push(o),s.setModified(r,!0,!0,!1),r},s.removeConstraint=function(r,o,c){var l=r.constraints.indexOf(o);if(l!==-1&&s.removeConstraintAt(r,l),c)for(var f=0;f<r.composites.length;f++)s.removeConstraint(r.composites[f],o,!0);return r},s.removeConstraintAt=function(r,o){return r.constraints.splice(o,1),s.setModified(r,!0,!0,!1),r},s.clear=function(r,o,c){if(c)for(var l=0;l<r.composites.length;l++)s.clear(r.composites[l],o,!0);return o?r.bodies=r.bodies.filter(function(f){return f.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,s.setModified(r,!0,!0,!1),r},s.allBodies=function(r){for(var o=[].concat(r.bodies),c=0;c<r.composites.length;c++)o=o.concat(s.allBodies(r.composites[c]));return o},s.allConstraints=function(r){for(var o=[].concat(r.constraints),c=0;c<r.composites.length;c++)o=o.concat(s.allConstraints(r.composites[c]));return o},s.allComposites=function(r){for(var o=[].concat(r.composites),c=0;c<r.composites.length;c++)o=o.concat(s.allComposites(r.composites[c]));return o},s.get=function(r,o,c){var l,f;switch(c){case"body":l=s.allBodies(r);break;case"constraint":l=s.allConstraints(r);break;case"composite":l=s.allComposites(r).concat(r);break}return l?(f=l.filter(function(p){return p.id.toString()===o.toString()}),f.length===0?null:f[0]):null},s.move=function(r,o,c){return s.remove(r,o),s.add(c,o),r},s.rebase=function(r){for(var o=s.allBodies(r).concat(s.allConstraints(r)).concat(s.allComposites(r)),c=0;c<o.length;c++)o[c].id=n.nextId();return s.setModified(r,!0,!0,!1),r},s.translate=function(r,o,c){for(var l=c?s.allBodies(r):r.bodies,f=0;f<l.length;f++)h.translate(l[f],o);return s.setModified(r,!0,!0,!1),r},s.rotate=function(r,o,c,l){for(var f=Math.cos(o),p=Math.sin(o),g=l?s.allBodies(r):r.bodies,m=0;m<g.length;m++){var x=g[m],y=x.position.x-c.x,T=x.position.y-c.y;h.setPosition(x,{x:c.x+(y*f-T*p),y:c.y+(y*p+T*f)}),h.rotate(x,o)}return s.setModified(r,!0,!0,!1),r},s.scale=function(r,o,c,l,f){for(var p=f?s.allBodies(r):r.bodies,g=0;g<p.length;g++){var m=p[g],x=m.position.x-l.x,y=m.position.y-l.y;h.setPosition(m,{x:l.x+x*o,y:l.y+y*c}),h.scale(m,o,c)}return s.setModified(r,!0,!0,!1),r},s.bounds=function(r){for(var o=s.allBodies(r),c=[],l=0;l<o.length;l+=1){var f=o[l];c.push(f.bounds.min,f.bounds.max)}return a.create(c)}})()},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s>=0&&s<n.width&&u>=0&&u<n.height};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(29),n=t(2),a=new s({initialize:function(r){r===void 0&&(r={}),this.name=n(r,"name","layer"),this.x=n(r,"x",0),this.y=n(r,"y",0),this.width=n(r,"width",0),this.height=n(r,"height",0),this.tileWidth=n(r,"tileWidth",0),this.tileHeight=n(r,"tileHeight",0),this.baseTileWidth=n(r,"baseTileWidth",this.tileWidth),this.baseTileHeight=n(r,"baseTileHeight",this.tileHeight),this.orientation=n(r,"orientation",u.ORTHOGONAL),this.widthInPixels=n(r,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=n(r,"heightInPixels",this.height*this.baseTileHeight),this.alpha=n(r,"alpha",1),this.visible=n(r,"visible",!0),this.properties=n(r,"properties",[]),this.indexes=n(r,"indexes",[]),this.collideIndexes=n(r,"collideIndexes",[]),this.callbacks=n(r,"callbacks",[]),this.bodies=n(r,"bodies",[]),this.data=n(r,"data",[]),this.tilemapLayer=n(r,"tilemapLayer",null),this.hexSideLength=n(r,"hexSideLength",0)}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(29),n=t(2),a=new s({initialize:function(r){r===void 0&&(r={}),this.name=n(r,"name","map"),this.width=n(r,"width",0),this.height=n(r,"height",0),this.infinite=n(r,"infinite",!1),this.tileWidth=n(r,"tileWidth",0),this.tileHeight=n(r,"tileHeight",0),this.widthInPixels=n(r,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=n(r,"heightInPixels",this.height*this.tileHeight),this.format=n(r,"format",null),this.orientation=n(r,"orientation",u.ORTHOGONAL),this.renderOrder=n(r,"renderOrder","right-down"),this.version=n(r,"version","1"),this.properties=n(r,"properties",{}),this.layers=n(r,"layers",[]),this.images=n(r,"images",[]),this.objects=n(r,"objects",{}),this.collision=n(r,"collision",{}),this.tilesets=n(r,"tilesets",[]),this.imageCollections=n(r,"imageCollections",[]),this.tiles=n(r,"tiles",[]),this.hexSideLength=n(r,"hexSideLength",0)}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,h,r,o,c,l,f,p){(r===void 0||r<=0)&&(r=32),(o===void 0||o<=0)&&(o=32),c===void 0&&(c=0),l===void 0&&(l=0),f===void 0&&(f={}),p===void 0&&(p={}),this.name=a,this.firstgid=h,this.tileWidth=r,this.tileHeight=o,this.tileMargin=c,this.tileSpacing=l,this.tileProperties=f,this.tileData=p,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(n){return this.containsTileIndex(n)?this.tileProperties[n-this.firstgid]:null},getTileData:function(n){return this.containsTileIndex(n)?this.tileData[n-this.firstgid]:null},getTileCollisionGroup:function(n){var a=this.getTileData(n);return a&&a.objectgroup?a.objectgroup:null},containsTileIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},getTileTextureCoordinates:function(n){return this.containsTileIndex(n)?this.texCoordinates[n-this.firstgid]:null},setImage:function(n){return this.image=n,this.glTexture=n.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(n,a){return n!==void 0&&(this.tileWidth=n),a!==void 0&&(this.tileHeight=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(n,a){return n!==void 0&&(this.tileMargin=n),a!==void 0&&(this.tileSpacing=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(n,a){var h=(a-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(n-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(h%1!==0||r%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),h=Math.floor(h),r=Math.floor(r),this.rows=h,this.columns=r,this.total=h*r,this.texCoordinates.length=0;for(var o=this.tileMargin,c=this.tileMargin,l=0;l<this.rows;l++){for(var f=0;f<this.columns;f++)this.texCoordinates.push({x:o,y:c}),o+=this.tileWidth+this.tileSpacing;o=this.tileMargin,c+=this.tileHeight+this.tileSpacing}return this}});e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n===void 0&&(n=1e-4),Math.abs(s-u)<n};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(1068),h=new s({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,a],initialize:function(o,c,l,f,p){n.call(this,o,"Image"),this._crop=this.resetCropObject(),this.setTexture(f,p),this.setPosition(c,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.hasOwnProperty(u)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=function(n,a){var h=s(n);for(var r in a)h.hasOwnProperty(r)||(h[r]=a[r]);return h};e.exports=u},function(e,d,t){var s={};e.exports=s;var u=t(64),n=t(83),a=t(165),h=t(84),r=t(271),o=t(32);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(c){var l=c;l.bodyA&&!l.pointA&&(l.pointA={x:0,y:0}),l.bodyB&&!l.pointB&&(l.pointB={x:0,y:0});var f=l.bodyA?n.add(l.bodyA.position,l.pointA):l.pointA,p=l.bodyB?n.add(l.bodyB.position,l.pointB):l.pointB,g=n.magnitude(n.sub(f,p));l.length=typeof l.length!="undefined"?l.length:g,l.id=l.id||o.nextId(),l.label=l.label||"Constraint",l.type="constraint",l.stiffness=l.stiffness||(l.length>0?1:.7),l.damping=l.damping||0,l.angularStiffness=l.angularStiffness||0,l.angleA=l.bodyA?l.bodyA.angle:l.angleA,l.angleB=l.bodyB?l.bodyB.angle:l.angleB,l.plugin={};var m={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return l.length===0&&l.stiffness>.1?(m.type="pin",m.anchors=!1):l.stiffness<.9&&(m.type="spring"),l.render=o.extend(m,l.render),l},s.preSolveAll=function(c){for(var l=0;l<c.length;l+=1){var f=c[l],p=f.constraintImpulse;f.isStatic||p.x===0&&p.y===0&&p.angle===0||(f.position.x+=p.x,f.position.y+=p.y,f.angle+=p.angle)}},s.solveAll=function(c,l){for(var f=0;f<c.length;f+=1){var p=c[f],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic;(g||m)&&s.solve(c[f],l)}for(f=0;f<c.length;f+=1)p=c[f],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic,!g&&!m&&s.solve(c[f],l)},s.solve=function(c,l){var f=c.bodyA,p=c.bodyB,g=c.pointA,m=c.pointB;if(!(!f&&!p)){f&&!f.isStatic&&(n.rotate(g,f.angle-c.angleA,g),c.angleA=f.angle),p&&!p.isStatic&&(n.rotate(m,p.angle-c.angleB,m),c.angleB=p.angle);var x=g,y=m;if(f&&(x=n.add(f.position,g)),p&&(y=n.add(p.position,m)),!(!x||!y)){var T=n.sub(x,y),S=n.magnitude(T);S<s._minLength&&(S=s._minLength);var C=(S-c.length)/S,E=c.stiffness<1?c.stiffness*l:c.stiffness,P=n.mult(T,C*E),M=(f?f.inverseMass:0)+(p?p.inverseMass:0),O=(f?f.inverseInertia:0)+(p?p.inverseInertia:0),A=M+O,R,F,I,B,N;if(c.damping){var Y=n.create();I=n.div(T,S),N=n.sub(p&&n.sub(p.position,p.positionPrev)||Y,f&&n.sub(f.position,f.positionPrev)||Y),B=n.dot(I,N)}f&&!f.isStatic&&(F=f.inverseMass/M,f.constraintImpulse.x-=P.x*F,f.constraintImpulse.y-=P.y*F,f.position.x-=P.x*F,f.position.y-=P.y*F,c.damping&&(f.positionPrev.x-=c.damping*I.x*B*F,f.positionPrev.y-=c.damping*I.y*B*F),R=n.cross(g,P)/A*s._torqueDampen*f.inverseInertia*(1-c.angularStiffness),f.constraintImpulse.angle-=R,f.angle-=R),p&&!p.isStatic&&(F=p.inverseMass/M,p.constraintImpulse.x+=P.x*F,p.constraintImpulse.y+=P.y*F,p.position.x+=P.x*F,p.position.y+=P.y*F,c.damping&&(p.positionPrev.x+=c.damping*I.x*B*F,p.positionPrev.y+=c.damping*I.y*B*F),R=n.cross(m,P)/A*s._torqueDampen*p.inverseInertia*(1-c.angularStiffness),p.constraintImpulse.angle+=R,p.angle+=R)}}},s.postSolveAll=function(c){for(var l=0;l<c.length;l++){var f=c[l],p=f.constraintImpulse;if(!(f.isStatic||p.x===0&&p.y===0&&p.angle===0)){a.set(f,!1);for(var g=0;g<f.parts.length;g++){var m=f.parts[g];u.translate(m.vertices,p),g>0&&(m.position.x+=p.x,m.position.y+=p.y),p.angle!==0&&(u.rotate(m.vertices,p.angle,f.position),r.rotate(m.axes,p.angle),g>0&&n.rotateAbout(m.position,p.angle,f.position,m.position)),h.update(m.bounds,m.vertices,f.velocity)}p.angle*=s._warming,p.x*=s._warming,p.y*=s._warming}}},s.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+c.pointA.x,y:(c.bodyA?c.bodyA.position.y:0)+c.pointA.y}},s.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+c.pointB.x,y:(c.bodyB?c.bodyB.position.y:0)+c.pointB.y}}})()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(65),n=t(66),a=t(0),h=t(11),r=t(15),o=t(10),c=t(57),l=new a({Extends:r,Mixins:[h.Depth,h.GetBounds,h.Origin,h.Transform,h.ScrollFactor,h.Visible],initialize:function(p,g,m,x,y){x===void 0&&(x=1),y===void 0&&(y=x),r.call(this,p,"Zone"),this.setPosition(g,m),this.width=x,this.height=y,this.blendMode=s.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(f){this.scaleX=f/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(f){this.scaleY=f/this.height}},setSize:function(f,p,g){g===void 0&&(g=!0),this.width=f,this.height=p,this.updateDisplayOrigin();var m=this.input;return g&&m&&!m.customHitArea&&(m.hitArea.width=f,m.hitArea.height=p),this},setDisplaySize:function(f,p){return this.displayWidth=f,this.displayHeight=p,this},setCircleDropZone:function(f){return this.setDropZone(new u(0,0,f),n)},setRectangleDropZone:function(f,p){return this.setDropZone(new o(0,0,f,p),c)},setDropZone:function(f,p){return f===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(f,p,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(f,p,g){g.addToRenderList(p)},renderWebGL:function(f,p,g){g.addToRenderList(p)}});e.exports=l},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 2*(s.width+s.height)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=s.length-1;u>0;u--){var n=Math.floor(Math.random()*(u+1)),a=s[u];s[u]=s[n],s[n]=a}return s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD_ANIMATION:t(724),ANIMATION_COMPLETE:t(725),ANIMATION_COMPLETE_KEY:t(726),ANIMATION_REPEAT:t(727),ANIMATION_RESTART:t(728),ANIMATION_START:t(729),ANIMATION_STOP:t(730),ANIMATION_UPDATE:t(731),PAUSE_ALL:t(732),REMOVE_ANIMATION:t(733),RESUME_ALL:t(734)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(36),a=t(9),h=t(37),r=t(10),o=t(25),c=t(187),l=t(3),f=new s({Extends:a,Mixins:[u.Alpha,u.Visible],initialize:function(g,m,x,y){g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),a.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=g,this._y=m,this._width=x,this._height=y,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new o,this.transparent=!0,this.backgroundColor=c("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new l(x/2,y/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(p){this.renderList.push(p)},setOrigin:function(p,g){return p===void 0&&(p=.5),g===void 0&&(g=p),this.originX=p,this.originY=g,this},getScroll:function(p,g,m){m===void 0&&(m=new l);var x=this.width*.5,y=this.height*.5;return m.x=p-x,m.y=g-y,this.useBounds&&(m.x=this.clampX(m.x),m.y=this.clampY(m.y)),m},centerOnX:function(p){var g=this.width*.5;return this.midPoint.x=p,this.scrollX=p-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(p){var g=this.height*.5;return this.midPoint.y=p,this.scrollY=p-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(p,g){return this.centerOnX(p),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var p=this._bounds,g=this.width*.5,m=this.height*.5;this.midPoint.set(p.centerX,p.centerY),this.scrollX=p.centerX-g,this.scrollY=p.centerY-m}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(p){if(this.disableCull)return p;var g=this.matrix.matrix,m=g[0],x=g[1],y=g[2],T=g[3],S=m*T-x*y;if(!S)return p;var C=g[4],E=g[5],P=this.scrollX,M=this.scrollY,O=this.width,A=this.height,R=this.y,F=R+A,I=this.x,B=I+O,N=this.culledObjects,Y=p.length;S=1/S,N.length=0;for(var X=0;X<Y;++X){var W=p[X];if(!W.hasOwnProperty("width")||W.parentContainer){N.push(W);continue}var w=W.width,L=W.height,D=W.x-P*W.scrollFactorX-w*W.originX,b=W.y-M*W.scrollFactorY-L*W.originY,G=D*m+b*y+C,z=D*x+b*T+E,U=(D+w)*m+(b+L)*y+C,H=(D+w)*x+(b+L)*T+E;U>I&&G<B&&H>R&&z<F&&N.push(W)}return N},getWorldPoint:function(p,g,m){m===void 0&&(m=new l);var x=this.matrix.matrix,y=x[0],T=x[1],S=x[2],C=x[3],E=x[4],P=x[5],M=y*C-T*S;if(!M)return m.x=p,m.y=g,m;M=1/M;var O=C*M,A=-T*M,R=-S*M,F=y*M,I=(S*P-C*E)*M,B=(T*E-y*P)*M,N=Math.cos(this.rotation),Y=Math.sin(this.rotation),X=this.zoomX,W=this.zoomY,w=this.scrollX,L=this.scrollY,D=p+(w*N-L*Y)*X,b=g+(w*Y+L*N)*W;return m.x=D*O+b*R+I,m.y=D*A+b*F+B,m},ignore:function(p){var g=this.id;Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++){var x=p[m];Array.isArray(x)?this.ignore(x):x.isParent?this.ignore(x.getChildren()):x.cameraFilter|=g}return this},preRender:function(){this.renderList.length=0;var p=this.width,g=this.height,m=p*.5,x=g*.5,y=this.zoomX,T=this.zoomY,S=this.matrix,C=p*this.originX,E=g*this.originY,P=this.scrollX,M=this.scrollY;this.useBounds&&(P=this.clampX(P),M=this.clampY(M)),this.roundPixels&&(C=Math.round(C),E=Math.round(E)),this.scrollX=P,this.scrollY=M;var O=P+m,A=M+x;this.midPoint.set(O,A);var R=p/y,F=g/T;this.worldView.setTo(O-R/2,A-F/2,R,F),S.applyITRS(this.x+C,this.y+E,this.rotation,y,T),S.translate(-C,-E)},clampX:function(p){var g=this._bounds,m=this.displayWidth,x=g.x+(m-this.width)/2,y=Math.max(x,x+g.width-m);return p<x?p=x:p>y&&(p=y),p},clampY:function(p){var g=this._bounds,m=this.displayHeight,x=g.y+(m-this.height)/2,y=Math.max(x,x+g.height-m);return p<x?p=x:p>y&&(p=y),p},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(p){return p===void 0&&(p=0),this.rotation=n(p),this},setBackgroundColor:function(p){return p===void 0&&(p="rgba(0,0,0,0)"),this.backgroundColor=c(p),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(p,g,m,x,y){return y===void 0&&(y=!1),this._bounds.setTo(p,g,m,x),this.dirty=!0,this.useBounds=!0,y?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(p){p===void 0&&(p=new r);var g=this._bounds;return p.setTo(g.x,g.y,g.width,g.height),p},setName:function(p){return p===void 0&&(p=""),this.name=p,this},setPosition:function(p,g){return g===void 0&&(g=p),this.x=p,this.y=g,this},setRotation:function(p){return p===void 0&&(p=0),this.rotation=p,this},setRoundPixels:function(p){return this.roundPixels=p,this},setScene:function(p){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=p;var g=p.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(p,g){return g===void 0&&(g=p),this.scrollX=p,this.scrollY=g,this},setSize:function(p,g){return g===void 0&&(g=p),this.width=p,this.height=g,this},setViewport:function(p,g,m,x){return this.x=p,this.y=g,this.width=m,this.height=x,this},setZoom:function(p,g){return p===void 0&&(p=1),g===void 0&&(g=p),p===0&&(p=.001),g===0&&(g=.001),this.zoomX=p,this.zoomY=g,this},setMask:function(p,g){return g===void 0&&(g=!0),this.mask=p,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var p={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(p.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),p},update:function(){},updateSystem:function(){if(!!this.scaleManager){var p=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;p&&!this._customViewport?g.customViewports++:!p&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=p}},destroy:function(){this.emit(h.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(p){this._x=p,this.updateSystem()}},y:{get:function(){return this._y},set:function(p){this._y=p,this.updateSystem()}},width:{get:function(){return this._width},set:function(p){this._width=p,this.updateSystem()}},height:{get:function(){return this._height},set:function(p){this._height=p,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(p){this._scrollX=p,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(p){this._scrollY=p,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(p){this._zoomX=p,this._zoomY=p,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(p){this._zoomX=p,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(p){this._zoomY=p,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});e.exports=f},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(334),u=t(335),n=t(336),a=t(337),h=t(338),r=t(339),o=t(340),c=t(341),l=t(342),f=t(343),p=t(344),g=t(345);e.exports={Power0:o,Power1:c.Out,Power2:a.Out,Power3:l.Out,Power4:f.Out,Linear:o,Quad:c.Out,Cubic:a.Out,Quart:l.Out,Quint:f.Out,Sine:p.Out,Expo:r.Out,Circ:n.Out,Elastic:h.Out,Back:s.Out,Bounce:u.Out,Stepped:g,"Quad.easeIn":c.In,"Cubic.easeIn":a.In,"Quart.easeIn":l.In,"Quint.easeIn":f.In,"Sine.easeIn":p.In,"Expo.easeIn":r.In,"Circ.easeIn":n.In,"Elastic.easeIn":h.In,"Back.easeIn":s.In,"Bounce.easeIn":u.In,"Quad.easeOut":c.Out,"Cubic.easeOut":a.Out,"Quart.easeOut":l.Out,"Quint.easeOut":f.Out,"Sine.easeOut":p.Out,"Expo.easeOut":r.Out,"Circ.easeOut":n.Out,"Elastic.easeOut":h.Out,"Back.easeOut":s.Out,"Bounce.easeOut":u.Out,"Quad.easeInOut":c.InOut,"Cubic.easeInOut":a.InOut,"Quart.easeInOut":l.InOut,"Quint.easeInOut":f.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":r.InOut,"Circ.easeInOut":n.InOut,"Elastic.easeInOut":h.InOut,"Back.easeInOut":s.InOut,"Bounce.easeInOut":u.InOut}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return(u-s)*n+s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(105),u={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function n(){var a=navigator.userAgent;return/Edge\/\d+/.test(a)?u.edge=!0:/Chrome\/(\d+)/.test(a)&&!s.windowsPhone?(u.chrome=!0,u.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(a)?(u.firefox=!0,u.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(a)&&s.iOS?u.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(a)?(u.ie=!0,u.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(a)?u.opera=!0:/Safari/.test(a)&&!s.windowsPhone?u.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(a)&&(u.ie=!0,u.trident=!0,u.tridentVersion=parseInt(RegExp.$1,10),u.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(a)&&(u.silk=!0),u}e.exports=n()},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.random()*(u-s)+s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s>0&&(s&s-1)===0&&u>0&&(u&u-1)===0};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return n===void 0&&(n=0),u===0?s:(s-=n,s=u*Math.ceil(s/u),a?(n+s)/u:n+s)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,h,r,o){this.x=0,this.y=0,this.z=0,this.w=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=h||0,this.z=r||0,this.w=o||0)},clone:function(){return new u(this.x,this.y,this.z,this.w)},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this.w=n.w||0,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z&&this.w===n.w},set:function(n,a,h,r){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this.w=n.w||0):(this.x=n||0,this.y=a||0,this.z=h||0,this.w=r||0),this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this.w+=n.w||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this.w-=n.w||0,this},scale:function(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this},length:function(){var n=this.x,a=this.y,h=this.z,r=this.w;return Math.sqrt(n*n+a*a+h*h+r*r)},lengthSq:function(){var n=this.x,a=this.y,h=this.z,r=this.w;return n*n+a*a+h*h+r*r},normalize:function(){var n=this.x,a=this.y,h=this.z,r=this.w,o=n*n+a*a+h*h+r*r;return o>0&&(o=1/Math.sqrt(o),this.x=n*o,this.y=a*o,this.z=h*o,this.w=r*o),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w},lerp:function(n,a){a===void 0&&(a=0);var h=this.x,r=this.y,o=this.z,c=this.w;return this.x=h+a*(n.x-h),this.y=r+a*(n.y-r),this.z=o+a*(n.z-o),this.w=c+a*(n.w-c),this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this.w*=n.w||1,this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this.w/=n.w||1,this},distance:function(n){var a=n.x-this.x,h=n.y-this.y,r=n.z-this.z||0,o=n.w-this.w||0;return Math.sqrt(a*a+h*h+r*r+o*o)},distanceSq:function(n){var a=n.x-this.x,h=n.y-this.y,r=n.z-this.z||0,o=n.w-this.w||0;return a*a+h*h+r*r+o*o},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(n){var a=this.x,h=this.y,r=this.z,o=this.w,c=n.val;return this.x=c[0]*a+c[4]*h+c[8]*r+c[12]*o,this.y=c[1]*a+c[5]*h+c[9]*r+c[13]*o,this.z=c[2]*a+c[6]*h+c[10]*r+c[14]*o,this.w=c[3]*a+c[7]*h+c[11]*r+c[15]*o,this},transformQuat:function(n){var a=this.x,h=this.y,r=this.z,o=n.x,c=n.y,l=n.z,f=n.w,p=f*a+c*r-l*h,g=f*h+l*a-o*r,m=f*r+o*h-c*a,x=-o*a-c*h-l*r;return this.x=p*f+x*-o+g*-l-m*-c,this.y=g*f+x*-c+m*-o-p*-l,this.z=m*f+x*-l+p*-c-g*-o,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});u.prototype.sub=u.prototype.subtract,u.prototype.mul=u.prototype.multiply,u.prototype.div=u.prototype.divide,u.prototype.dist=u.prototype.distance,u.prototype.distSq=u.prototype.distanceSq,u.prototype.len=u.prototype.length,u.prototype.lenSq=u.prototype.lengthSq,e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(91),n=new s({initialize:function(h,r,o,c,l,f,p){c===void 0&&(c=1),l===void 0&&(l=0),f===void 0&&(f=!0),p===void 0&&(p=!1),this.renderer=h,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=c,this.minFilter=l,this.autoClear=f,this.autoResize=!1,this.resize(r,o),p&&this.setAutoResize(!0)},setAutoResize:function(a){return a&&!this.autoResize?(this.renderer.on(u.RESIZE,this.resize,this),this.autoResize=!0):!a&&this.autoResize&&(this.renderer.off(u.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(a,h){var r=a*this.scale,o=h*this.scale;if(r!==this.width||o!==this.height){var c=this.renderer;c.deleteFramebuffer(this.framebuffer),c.deleteTexture(this.texture),a*=this.scale,h*=this.scale,a=Math.round(a),h=Math.round(h),a<=0&&(a=1),h<=0&&(h=1),this.texture=c.createTextureFromSource(null,a,h,this.minFilter),this.framebuffer=c.createFramebuffer(a,h,this.texture,!1),this.width=a,this.height=h}return this},bind:function(a,h,r){if(a===void 0&&(a=!1),a&&this.renderer.flush(),h&&r&&this.resize(h,r),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),a&&this.adjustViewport(),this.autoClear){var o=this.renderer.gl;o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)}},adjustViewport:function(){var a=this.renderer.gl;a.viewport(0,0,this.width,this.height),a.disable(a.SCISSOR_TEST)},clear:function(){var a=this.renderer,h=a.gl;a.pushFramebuffer(this.framebuffer),h.disable(h.SCISSOR_TEST),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),a.popFramebuffer(),a.resetScissor()},unbind:function(a){a===void 0&&(a=!1);var h=this.renderer;return a&&h.flush(),h.popFramebuffer()},destroy:function(){var a=this.renderer;a.deleteFramebuffer(this.framebuffer),a.deleteTexture(this.texture),a.off(u.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n;if(u)typeof u=="string"?n=document.getElementById(u):typeof u=="object"&&u.nodeType===1&&(n=u);else if(s.parentElement||u===null)return s;return n||(n=document.body),n.appendChild(s),s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(77),n=t(9),a=t(70),h=t(22),r=t(1),o=t(207),c=t(428),l=new s({Extends:n,initialize:function(p){n.call(this),this.game=p,this.jsonCache=p.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,p.events.on(h.BLUR,this.onGameBlur,this),p.events.on(h.FOCUS,this.onGameFocus,this),p.events.on(h.PRE_STEP,this.update,this),p.events.once(h.DESTROY,this.destroy,this)},add:r,addAudioSprite:function(f,p){p===void 0&&(p={});var g=this.add(f,p);g.spritemap=this.jsonCache.get(f).spritemap;for(var m in g.spritemap)if(!!g.spritemap.hasOwnProperty(m)){var x=u(p),y=g.spritemap[m];x.loop=y.hasOwnProperty("loop")?y.loop:!1,g.addMarker({name:m,start:y.start,duration:y.end-y.start,config:x})}return g},get:function(f){return c(this.sounds,"key",f)},getAll:function(f){return o(this.sounds,"key",f)},play:function(f,p){var g=this.add(f);return g.once(a.COMPLETE,g.destroy,g),p?p.name?(g.addMarker(p),g.play(p.name)):g.play(p):g.play()},playAudioSprite:function(f,p,g){var m=this.addAudioSprite(f);return m.once(a.COMPLETE,m.destroy,m),m.play(p,g)},remove:function(f){var p=this.sounds.indexOf(f);return p!==-1?(f.destroy(),this.sounds.splice(p,1),!0):!1},removeAll:function(){this.sounds.forEach(function(f){f.destroy()}),this.sounds.length=0},removeByKey:function(f){for(var p=0,g=this.sounds.length-1;g>=0;g--){var m=this.sounds[g];m.key===f&&(m.destroy(),this.sounds.splice(g,1),p++)}return p},pauseAll:function(){this.forEachActiveSound(function(f){f.pause()}),this.emit(a.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(f){f.resume()}),this.emit(a.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(f){f.stop()}),this.emit(a.STOP_ALL,this)},stopByKey:function(f){var p=0;return this.getAll(f).forEach(function(g){g.stop()&&p++}),p},unlock:r,onBlur:r,onFocus:r,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(f,p){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(a.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(m){m.update(f,p)})},destroy:function(){this.game.events.off(h.BLUR,this.onGameBlur,this),this.game.events.off(h.FOCUS,this.onGameFocus,this),this.game.events.off(h.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(f,p){var g=this;this.sounds.forEach(function(m,x){m&&!m.pendingRemove&&f.call(p||g,m,x,g.sounds)})},setRate:function(f){return this.rate=f,this},rate:{get:function(){return this._rate},set:function(f){this._rate=f,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(a.GLOBAL_RATE,this,f)}},setDetune:function(f){return this.detune=f,this},detune:{get:function(){return this._detune},set:function(f){this._detune=f,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(a.GLOBAL_DETUNE,this,f)}}});e.exports=l},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(70),a=t(17),h=t(1),r=new s({Extends:u,initialize:function(c,l,f){u.call(this),this.manager=c,this.key=l,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=a(this.config,f),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(o){return!o||!o.name||typeof o.name!="string"?!1:this.markers[o.name]?(console.error("addMarker "+o.name+" already exists in Sound"),!1):(o=a(!0,{name:"",start:0,duration:this.totalDuration-(o.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},o),this.markers[o.name]=o,!0)},updateMarker:function(o){return!o||!o.name||typeof o.name!="string"?!1:this.markers[o.name]?(this.markers[o.name]=a(!0,this.markers[o.name],o),!0):(console.warn("Audio Marker: "+o.name+" missing in Sound: "+this.key),!1)},removeMarker:function(o){var c=this.markers[o];return c?(this.markers[o]=null,c):null},play:function(o,c){if(o===void 0&&(o=""),typeof o=="object"&&(c=o,o=""),typeof o!="string")return!1;if(!o)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[o])return console.warn("Marker: "+o+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[o],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=a(this.currentConfig,c),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:h,calculateRate:function(){var o=1.0005777895065548,c=this.currentConfig.detune+this.manager.detune,l=Math.pow(o,c);this.totalRate=this.currentConfig.rate*this.manager.rate*l},destroy:function(){this.pendingRemove||(this.emit(n.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(209),u=t(435),n=function(a,h){if(h===void 0&&(h=90),!s(a))return null;if(typeof h!="string"&&(h=(h%360+360)%360),h===90||h===-270||h==="rotateLeft")a=u(a),a.reverse();else if(h===-90||h===270||h==="rotateRight")a.reverse(),a=u(a);else if(Math.abs(h)===180||h==="rotate180"){for(var r=0;r<a.length;r++)a[r].reverse();a.reverse()}return a};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(18),n=t(11),a=t(15),h=t(1043),r=t(1044),o=t(212),c=t(10),l=t(1045),f=new s({Extends:a,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Texture,n.Tint,n.Transform,n.Visible,l],initialize:function(g,m,x,y,T,S,C){T===void 0&&(T=""),C===void 0&&(C=0),a.call(this,g,"BitmapText"),this.font=y;var E=this.scene.sys.cache.bitmapFont.get(y);E||console.warn("Invalid BitmapText key: "+y),this.fontData=E.data,this._text="",this._fontSize=S||this.fontData.size,this._letterSpacing=0,this._align=C,this._bounds=h(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(m,x),this.setOrigin(0,0),this.initPipeline(),this.setText(T)},setLeftAlign:function(){return this._align=f.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=f.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=f.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(p){return this._fontSize=p,this._dirty=!0,this},setLetterSpacing:function(p){return p===void 0&&(p=0),this._letterSpacing=p,this._dirty=!0,this},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this.text&&(this._text=p.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=.5),this.dropShadowX=p,this.dropShadowY=g,this.dropShadowColor=m,this.dropShadowAlpha=x,this},setCharacterTint:function(p,g,m,x,y,T,S){p===void 0&&(p=0),g===void 0&&(g=1),m===void 0&&(m=!1),x===void 0&&(x=-1),y===void 0&&(y=x,T=x,S=x);var C=this.text.length;g===-1&&(g=C),p<0&&(p=C+p),p=u(p,0,C-1);for(var E=u(p+g,p,C),P=this.charColors,M=p;M<E;M++){var O=P[M];if(x===-1)P[M]=null;else{var A=m?1:0;O?(O.tintEffect=A,O.tintTL=x,O.tintTR=y,O.tintBL=T,O.tintBR=S):P[M]={tintEffect:A,tintTL:x,tintTR:y,tintBL:T,tintBR:S}}}return this},setWordTint:function(p,g,m,x,y,T,S){g===void 0&&(g=1);for(var C=this.getTextBounds(),E=C.words,P=typeof p=="number",M=0,O=0;O<E.length;O++){var A=E[O];if((P&&O===p||!P&&A.word===p)&&(this.setCharacterTint(A.i,A.word.length,m,x,y,T,S),M++,M===g))return this}return this},getTextBounds:function(p){var g=this._bounds;return(this._dirty||p||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(h(this,p,!0,g),this._dirty=!1),g},getCharacterAt:function(p,g,m){for(var x=this.getLocalPoint(p,g,null,m),y=this.getTextBounds(),T=y.characters,S=new c,C=0;C<T.length;C++){var E=T[C];if(S.setTo(E.x,E.t,E.r-E.x,E.b),S.contains(x.x,x.y))return E}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(p,g,m){if(g===void 0&&(g=this._fontSize),m===void 0&&(m=this._align),p!==this.font){var x=this.scene.sys.cache.bitmapFont.get(p);x&&(this.font=p,this.fontData=x.data,this._fontSize=g,this._align=m,this.fromAtlas=x.fromAtlas===!0,this.setTexture(x.texture,x.frame),h(this,!1,!0,this._bounds))}return this},setMaxWidth:function(p,g){return this._maxWidth=p,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(p){this._align=p,this._dirty=!0},get:function(){return this._align}},text:{set:function(p){this.setText(p)},get:function(){return this._text}},fontSize:{set:function(p){this._fontSize=p,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(p){this._letterSpacing=p,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(p){this._maxWidth=p,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var p=n.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return p.data=g,p},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});f.ALIGN_LEFT=0,f.ALIGN_CENTER=1,f.ALIGN_RIGHT=2,f.ParseFromAtlas=r,f.ParseXMLBitmapFont=o,e.exports=f},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a){if(this.entries=[],Array.isArray(a))for(var h=0;h<a.length;h++)this.set(a[h])},set:function(n){return this.entries.indexOf(n)===-1&&this.entries.push(n),this},get:function(n,a){for(var h=0;h<this.entries.length;h++){var r=this.entries[h];if(r[n]===a)return r}},getArray:function(){return this.entries.slice(0)},delete:function(n){var a=this.entries.indexOf(n);return a>-1&&this.entries.splice(a,1),this},dump:function(){console.group("Set");for(var n=0;n<this.entries.length;n++){var a=this.entries[n];console.log(a)}console.groupEnd()},each:function(n,a){var h,r=this.entries.slice(),o=r.length;if(a)for(h=0;h<o&&n.call(a,r[h],h)!==!1;h++);else for(h=0;h<o&&n(r[h],h)!==!1;h++);return this},iterate:function(n,a){var h,r=this.entries.length;if(a)for(h=0;h<r&&n.call(a,this.entries[h],h)!==!1;h++);else for(h=0;h<r&&n(this.entries[h],h)!==!1;h++);return this},iterateLocal:function(n){var a,h=[];for(a=1;a<arguments.length;a++)h.push(arguments[a]);var r=this.entries.length;for(a=0;a<r;a++){var o=this.entries[a];o[n].apply(o,h)}return this},clear:function(){return this.entries.length=0,this},contains:function(n){return this.entries.indexOf(n)>-1},union:function(n){var a=new u;return n.entries.forEach(function(h){a.set(h)}),this.entries.forEach(function(h){a.set(h)}),a},intersect:function(n){var a=new u;return this.entries.forEach(function(h){n.contains(h)&&a.set(h)}),a},difference:function(n){var a=new u;return this.entries.forEach(function(h){n.contains(h)||a.set(h)}),a},size:{get:function(){return this.entries.length},set:function(n){return n<this.entries.length?this.entries.length=n:this.entries.length}}});e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(189),h=t(92),r=t(1182),o=new s({Extends:n,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Pipeline,u.ScrollFactor,u.Transform,u.Visible,r],initialize:function(l,f,p,g,m,x,y){g===void 0&&(g=16777215),m===void 0&&(m=128),x===void 0&&(x=1),y===void 0&&(y=.1),n.call(this,l,"PointLight"),this.initPipeline(h.POINTLIGHT_PIPELINE),this.setPosition(f,p),this.color=a(g),this.intensity=x,this.attenuation=y,this.width=m*2,this.height=m*2,this._radius=m},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this.width=c*2,this.height=c*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});e.exports=o},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=u.width/2,a=u.height/2,h=Math.abs(s.x-u.x-n),r=Math.abs(s.y-u.y-a),o=n+s.radius,c=a+s.radius;if(h>o||r>c)return!1;if(h<=n||r<=a)return!0;var l=h-n,f=r-a,p=l*l,g=f*f,m=s.radius*s.radius;return p+g<=m};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.width<=0||s.height<=0||u.width<=0||u.height<=0?!1:!(s.right<u.x||s.bottom<u.y||s.x>u.right||s.y>u.bottom)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u={},n={};n.register=function(a,h,r,o,c){u[a]={plugin:h,mapping:r,settingsKey:o,configKey:c}},n.getPlugin=function(a){return u[a]},n.install=function(a){var h=a.scene.sys,r=h.settings.input,o=h.game.config;for(var c in u){var l=u[c].plugin,f=u[c].mapping,p=u[c].settingsKey,g=u[c].configKey;s(r,p,o[g])&&(a[f]=new l(a))}},n.remove=function(a){u.hasOwnProperty(a)&&delete u[a]},e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ANY_KEY_DOWN:t(1323),ANY_KEY_UP:t(1324),COMBO_MATCH:t(1325),DOWN:t(1326),KEY_DOWN:t(1327),KEY_UP:t(1328),UP:t(1329)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.url?s.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?s.url:u+s.url:!1};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h,r){return s===void 0&&(s=""),u===void 0&&(u=!0),n===void 0&&(n=""),a===void 0&&(a=""),h===void 0&&(h=0),r===void 0&&(r=!1),{responseType:s,async:u,user:n,password:a,timeout:h,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:r}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(243),n=t(73),a=new s({Extends:n,Mixins:[u.Acceleration,u.Angular,u.Bounce,u.Debug,u.Drag,u.Enable,u.Friction,u.Gravity,u.Immovable,u.Mass,u.Pushable,u.Size,u.Velocity],initialize:function(r,o,c,l,f){n.call(this,r,o,c,l,f),this.body=null}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(119),u=function(n,a,h,r){if(h===void 0&&(h=!1),s(n,a,r)){var o=r.data[a][n]||null;return o?o.index===-1?h?o:null:o:null}else return null};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h=s.data,r=s.width,o=s.height,c=s.tilemapLayer,l=Math.max(0,u.left),f=Math.min(r,u.right),p=Math.max(0,u.top),g=Math.min(o,u.bottom),m,x,y;if(n===0)for(x=p;x<g;x++)for(m=l;h[x]&&m<f;m++)y=h[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);else if(n===1)for(x=p;x<g;x++)for(m=f;h[x]&&m>=l;m--)y=h[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);else if(n===2)for(x=g;x>=p;x--)for(m=l;h[x]&&m<f;m++)y=h[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);else if(n===3)for(x=g;x>=p;x--)for(m=f;h[x]&&m>=l;m--)y=h[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);return c.tilesDrawn=a.length,c.tilesTotal=r*o,a};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=n.collideIndexes.indexOf(s);u&&a===-1?n.collideIndexes.push(s):!u&&a!==-1&&n.collideIndexes.splice(a,1)};e.exports=t},function(e,d,t){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n,a,h){if(!a)return{i:0,layers:n.layers,name:"",opacity:1,visible:!0,x:0,y:0};var r=a.x+s(a,"startx",0)*n.tilewidth+s(a,"offsetx",0),o=a.y+s(a,"starty",0)*n.tileheight+s(a,"offsety",0);return{i:0,layers:a.layers,name:h.name+a.name+"/",opacity:h.opacity*a.opacity,visible:h.visible&&a.visible,x:h.x+r,y:h.y+o}};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a;if(s.hasOwnProperty(u)){var h=typeof s[u];h==="function"?a=function(r,o,c,l,f,p){return s[u](r,o,c,l,f,p)}:a=function(){return s[u]}}else typeof n=="function"?a=n:a=function(){return n};return a};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(265),u=t(13),n=t(99),a=t(80),h=t(162),r=t(583),o=t(263),c=t(6),l=t(264),f=t(266),p=t(268),g=function(m,x,y){y===void 0&&(y=s);for(var T=y.targets?y.targets:o(x),S=r(x),C=h(x,"delay",y.delay),E=h(x,"duration",y.duration),P=c(x,"easeParams",y.easeParams),M=a(c(x,"ease",y.ease),P),O=h(x,"hold",y.hold),A=h(x,"repeat",y.repeat),R=h(x,"repeatDelay",y.repeatDelay),F=n(x,"yoyo",y.yoyo),I=n(x,"flipX",y.flipX),B=n(x,"flipY",y.flipY),N=[],Y=0;Y<S.length;Y++)for(var X=S[Y].key,W=S[Y].value,w=0;w<T.length;w++){var L=l(X,W),D=p(T[w],w,X,L.getEnd,L.getStart,L.getActive,a(c(W,"ease",M),c(W,"easeParams",P)),h(W,"delay",C),h(W,"duration",E),n(W,"yoyo",F),h(W,"hold",O),h(W,"repeat",A),h(W,"repeatDelay",R),n(W,"flipX",I),n(W,"flipY",B));N.push(D)}var b=new f(m,N,T);b.offset=u(x,"offset",null),b.completeDelay=u(x,"completeDelay",0),b.loop=Math.round(u(x,"loop",0)),b.loopDelay=Math.round(u(x,"loopDelay",0)),b.paused=n(x,"paused",!1),b.useFrames=n(x,"useFrames",!1);for(var G=c(x,"callbackScope",b),z=[b,null],U=f.TYPES,H=0;H<U.length;H++){var $=U[H],K=c(x,$,!1);if(K){var Z=c(x,$+"Scope",G),k=c(x,$+"Params",[]);b.setCallback($,K,z.concat(k),Z)}}return b};e.exports=g},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(102),n=t(2),a=t(132),h=t(185),r=new s({initialize:function(c){this.parent=c,this.animationManager=c.scene.sys.anims,this.animationManager.on(a.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(o){var c=this.parent;if(o===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,c;Array.isArray(o)||(o=[o]);for(var l=0;l<o.length;l++){var f=o[l];this.nextAnim===null?this.nextAnim=f:this.nextAnimsQueue.push(f)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(o){this.isPlaying&&this.stop();var c=this.animationManager,l=typeof o=="string"?o:n(o,"key",null),f=this.exists(l)?this.get(l):c.get(l);if(!f)console.warn("Missing animation: "+l);else{this.currentAnim=f;var p=f.getTotalFrames(),g=n(o,"frameRate",f.frameRate),m=n(o,"duration",f.duration);f.calculateDuration(this,p,m,g),this.delay=n(o,"delay",f.delay),this.repeat=n(o,"repeat",f.repeat),this.repeatDelay=n(o,"repeatDelay",f.repeatDelay),this.yoyo=n(o,"yoyo",f.yoyo),this.showOnStart=n(o,"showOnStart",f.showOnStart),this.hideOnComplete=n(o,"hideOnComplete",f.hideOnComplete),this.skipMissedFrames=n(o,"skipMissedFrames",f.skipMissedFrames),this.timeScale=n(o,"timeScale",this.timeScale);var x=n(o,"startFrame",0);x>f.getTotalFrames()&&(x=0);var y=f.frames[x];x===0&&!this.forward&&(y=f.getLastFrame()),this.currentFrame=y}return this.parent},pause:function(o){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),o!==void 0&&this.setCurrentFrame(o),this.parent},resume:function(o){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),o!==void 0&&this.setCurrentFrame(o),this.parent},playAfterDelay:function(o,c){if(!this.isPlaying)this.delayCounter=c,this.play(o,!0);else{var l=this.nextAnim,f=this.nextAnimsQueue;l&&f.unshift(l),this.nextAnim=o,this._pendingStop=1,this._pendingStopValue=c}return this.parent},playAfterRepeat:function(o,c){if(c===void 0&&(c=1),!this.isPlaying)this.play(o);else{var l=this.nextAnim,f=this.nextAnimsQueue;l&&f.unshift(l),this.repeatCounter!==-1&&c>this.repeatCounter&&(c=this.repeatCounter),this.nextAnim=o,this._pendingStop=2,this._pendingStopValue=c}return this.parent},play:function(o,c){c===void 0&&(c=!1);var l=this.currentAnim,f=this.parent,p=typeof o=="string"?o:o.key;if(c&&this.isPlaying&&l.key===p)return f;if(l&&this.isPlaying){var g=this.animationManager.getMix(l.key,o);if(g>0)return this.playAfterDelay(o,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(o)},playReverse:function(o,c){c===void 0&&(c=!1);var l=typeof o=="string"?o:o.key;return c&&this.isPlaying&&this.currentAnim.key===l?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(o))},startAnimation:function(o){this.load(o);var c=this.currentAnim,l=this.parent;return c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,c.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),l},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(a.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(a.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(a.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(a.ANIMATION_COMPLETE,a.ANIMATION_COMPLETE_KEY)},emitEvents:function(o,c){var l=this.currentAnim,f=this.currentFrame,p=this.parent,g=f.textureFrame;p.emit(o,l,f,p,g),c&&p.emit(c+l.key,l,f,p,g)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var o=this.currentFrame;if(!o)return 0;var c=o.progress;return this.inReverse&&(c*=-1),c},setProgress:function(o){return this.forward||(o=1-o),this.setCurrentFrame(this.currentAnim.getFrameByProgress(o)),this.parent},setRepeat:function(o){return this.repeatCounter=o===-1?Number.MAX_VALUE:o,this.parent},globalRemove:function(o,c){c===void 0&&(c=this.currentAnim),this.isPlaying&&c.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(o,c){o===void 0&&(o=!1),c===void 0&&(c=!1);var l=this.currentAnim,f=this.parent;return l?(c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),l.getFirstTick(this),this.emitEvents(a.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!o,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(l.frames[0]),this.parent):f},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var o=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(o)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var o=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(o)}return this.parent},stopAfterDelay:function(o){return this._pendingStop=1,this._pendingStopValue=o,this.parent},stopAfterRepeat:function(o){return o===void 0&&(o=1),this.repeatCounter!==-1&&o>this.repeatCounter&&(o=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=o,this.parent},stopOnFrame:function(o){return this._pendingStop=3,this._pendingStopValue=o,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(o,c){var l=this.currentAnim;if(!(!this.isPlaying||!l||l.paused)){if(this.accumulator+=c*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=c,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?l.nextFrame(this):l.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var f=0;do this.forward?l.nextFrame(this):l.previousFrame(this),f++;while(this.isPlaying&&this.accumulator>this.nextTick&&f<60)}}},setCurrentFrame:function(o){var c=this.parent;return this.currentFrame=o,c.texture=o.frame.texture,c.frame=o.frame,c.isCropped&&c.frame.updateCropUVs(c._crop,c.flipX,c.flipY),o.setAlpha&&(c.alpha=o.alpha),c.setSizeToFrame(),c._originComponent&&(o.frame.customPivot?c.setOrigin(o.frame.pivotX,o.frame.pivotY):c.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(a.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===o&&this.stop()),c},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(o){return this.anims?this.anims.get(o):null},exists:function(o){return this.anims?this.anims.has(o):!1},create:function(o){var c=o.key,l=!1;return c&&(l=this.get(c),l||(l=new h(this,c,o),this.anims||(this.anims=new u),this.anims.set(c,l))),l},generateFrameNames:function(o,c){return this.animationManager.generateFrameNames(o,c)},generateFrameNumbers:function(o,c){return this.animationManager.generateFrameNumbers(o,c)},remove:function(o){var c=this.get(o);return c&&(this.currentAnim===c&&this.stop(),this.anims.delete(o)),c},destroy:function(){this.animationManager.off(a.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});e.exports=r},function(e,d,t){var s={};e.exports=s;var u=t(166);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(n,a){for(var h=a*a*a,r=0;r<n.length;r++){var o=n[r],c=o.speed*o.speed+o.angularSpeed*o.angularSpeed;if(o.force.x!==0||o.force.y!==0){s.set(o,!1);continue}var l=Math.min(o.motion,c),f=Math.max(o.motion,c);o.motion=s._minBias*l+(1-s._minBias)*f,o.sleepThreshold>0&&o.motion<s._motionSleepThreshold*h?(o.sleepCounter+=1,o.sleepCounter>=o.sleepThreshold&&s.set(o,!0)):o.sleepCounter>0&&(o.sleepCounter-=1)}},s.afterCollisions=function(n,a){for(var h=a*a*a,r=0;r<n.length;r++){var o=n[r];if(!!o.isActive){var c=o.collision,l=c.bodyA.parent,f=c.bodyB.parent;if(!(l.isSleeping&&f.isSleeping||l.isStatic||f.isStatic)&&(l.isSleeping||f.isSleeping)){var p=l.isSleeping&&!l.isStatic?l:f,g=p===l?f:l;!p.isStatic&&g.motion>s._motionWakeThreshold*h&&s.set(p,!1)}}}},s.set=function(n,a){var h=n.isSleeping;a?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,h||u.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,h&&u.trigger(n,"sleepEnd"))}})()},function(e,d,t){var s={};e.exports=s;var u=t(32);(function(){s.on=function(n,a,h){for(var r=a.split(" "),o,c=0;c<r.length;c++)o=r[c],n.events=n.events||{},n.events[o]=n.events[o]||[],n.events[o].push(h);return h},s.off=function(n,a,h){if(!a){n.events={};return}typeof a=="function"&&(h=a,a=u.keys(n.events).join(" "));for(var r=a.split(" "),o=0;o<r.length;o++){var c=n.events[r[o]],l=[];if(h&&c)for(var f=0;f<c.length;f++)c[f]!==h&&l.push(c[f]);n.events[r[o]]=l}},s.trigger=function(n,a,h){var r,o,c,l,f=n.events;if(f&&u.keys(f).length>0){h||(h={}),r=a.split(" ");for(var p=0;p<r.length;p++)if(o=r[p],c=f[o],c){l=u.clone(h,!1),l.name=o,l.source=n;for(var g=0;g<c.length;g++)c[g].apply(n,[l])}}}})()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(175),u=t(92),n=t(74),a={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(h){h===void 0&&(h=u.MULTI_PIPELINE);var r=this.scene.sys.renderer;if(!r)return!1;var o=r.pipelines;if(this.postPipelines=[],this.pipelineData={},o){var c=o.get(h);if(c)return this.defaultPipeline=c,this.pipeline=c,!0}return!1},setPipeline:function(h,r,o){var c=this.scene.sys.renderer;if(!c)return this;var l=c.pipelines;if(l){var f=l.get(h);f&&(this.pipeline=f),r&&(this.pipelineData=o?s(r):r)}return this},setPostPipeline:function(h,r,o){var c=this.scene.sys.renderer;if(!c)return this;var l=c.pipelines;if(l){Array.isArray(h)||(h=[h]);for(var f=0;f<h.length;f++){var p=l.getPostPipeline(h[f],this);p&&this.postPipelines.push(p)}r&&(this.pipelineData=o?s(r):r)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(h,r){var o=this.pipelineData;return r===void 0?delete o[h]:o[h]=r,this},getPostPipeline:function(h){for(var r=this.postPipelines,o=[],c=0;c<r.length;c++){var l=r[c];(typeof h=="string"&&l.name===h||l instanceof h)&&o.push(l)}return o.length===1?o[0]:o},resetPipeline:function(h,r){return h===void 0&&(h=!1),r===void 0&&(r=!1),this.pipeline=this.defaultPipeline,h&&(this.postPipelines=[],this.hasPostPipeline=!1),r&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(h){h===void 0&&(h=!1);for(var r=this.postPipelines,o=0;o<r.length;o++)r[o].destroy();this.postPipelines=[],this.hasPostPipeline=!1,h&&(this.pipelineData={})},removePostPipeline:function(h){for(var r=this.postPipelines,o=r.length-1;o>=0;o--){var c=r[o];(typeof h=="string"&&c.name===h||typeof h!="string"&&c instanceof h)&&(c.destroy(),n(r,o))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DEFAULT:0,LINEAR:0,NEAREST:1};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,h){return h===void 0&&(h=new s),h.x=n.x+n.radius*Math.cos(a),h.y=n.y+n.radius*Math.sin(a),h};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){a===void 0&&(a=new s);var h=2*Math.PI*Math.random(),r=Math.random()+Math.random(),o=r>1?2-r:r,c=o*Math.cos(h),l=o*Math.sin(h);return a.x=n.x+c*n.radius,a.y=n.y+l*n.radius,a};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(130),u=t(4),n=function(a,h,r){if(r===void 0&&(r=new u),h<=0||h>=1)return r.x=a.x,r.y=a.y,r;var o=s(a)*h;return h>.5?(o-=a.width+a.height,o<=a.width?(r.x=a.right-o,r.y=a.bottom):(r.x=a.x,r.y=a.bottom-(o-a.width))):o<=a.width?(r.x=a.x+o,r.y=a.y):(r.x=a.right,r.y=a.y+(o-a.width)),r};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=t(4),n=function(a,h,r,o){o===void 0&&(o=[]),!h&&r>0&&(h=s(a)/r);for(var c=a.x1,l=a.y1,f=a.x2,p=a.y2,g=0;g<h;g++){var m=g/h,x=c+(f-c)*m,y=l+(p-l)*m;o.push(new u(x,y))}return o};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){a===void 0&&(a=new s);var h=Math.random();return a.x=n.x1+h*(n.x2-n.x1),a.y=n.y1+h*(n.y2-n.y1),a};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){return a===void 0&&(a=new s),a.x=n.x+Math.random()*n.width,a.y=n.y+Math.random()*n.height,a};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u,n,a;if(typeof s!="object"||s===null)return s;u=Array.isArray(s)?[]:{};for(a in s)n=s[a],u[a]=t(n);return u};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u={name:s.name,type:s.type,x:s.x,y:s.y,depth:s.depth,scale:{x:s.scaleX,y:s.scaleY},origin:{x:s.originX,y:s.originY},flipX:s.flipX,flipY:s.flipY,rotation:s.rotation,alpha:s.alpha,visible:s.visible,blendMode:s.blendMode,textureKey:"",frameKey:"",data:{}};return s.texture&&(u.textureKey=s.texture.key,u.frameKey=s.frame.name),u};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,h,r,o,c,l,f){f===void 0&&(f=new s);var p=Math.sin(o),g=Math.cos(o),m=g*c,x=p*c,y=-p*l,T=g*l,S=1/(m*T+y*-x);return f.x=T*S*n+-y*S*a+(r*y-h*T)*S,f.y=m*S*a+-x*S*n+(-r*m+h*x)*S,f};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1);for(var n=null,a=0;a<u;a++)n=s.shift(),s.push(n);return n};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1);for(var n=null,a=0;a<u;a++)n=s.pop(),s.unshift(n);return n};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){a===void 0&&(a=new s);var h=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return a.x=n.x+r*Math.cos(h)*n.width/2,a.y=n.y+r*Math.sin(h)*n.height/2,a};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){a===void 0&&(a=new s);var h=n.x2-n.x1,r=n.y2-n.y1,o=n.x3-n.x1,c=n.y3-n.y1,l=Math.random(),f=Math.random();return l+f>=1&&(l=1-l,f=1-f),a.x=n.x1+(h*l+o*f),a.y=n.y1+(r*l+c*f),a};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h){var r=a+Math.atan2(s.y-n,s.x-u);return s.x=u+h*Math.cos(r),s.y=n+h*Math.sin(r),s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s=Math.max(0,Math.min(1,(s-u)/(n-u))),s*s*s*(s*(s*6-15)+10)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s<=u?0:s>=n?1:(s=(s-u)/(n-u),s*s*(3-2*s))};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(132),a=t(318),h=t(319),r=t(6),o=t(320),c=new u({initialize:function(f,p,g){this.manager=f,this.key=p,this.type="frame",this.frames=this.getFrames(f.textureManager,r(g,"frames",[]),r(g,"defaultTextureKey",null),r(g,"sortFrames",!0)),this.frameRate=r(g,"frameRate",null),this.duration=r(g,"duration",null),this.msPerFrame,this.skipMissedFrames=r(g,"skipMissedFrames",!0),this.delay=r(g,"delay",0),this.repeat=r(g,"repeat",0),this.repeatDelay=r(g,"repeatDelay",0),this.yoyo=r(g,"yoyo",!1),this.showOnStart=r(g,"showOnStart",!1),this.hideOnComplete=r(g,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(n.PAUSE_ALL,this.pause,this),this.manager.on(n.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(l,f,p,g){p===null&&g===null?(l.frameRate=24,l.duration=24/f*1e3):p&&g===null?(l.duration=p,l.frameRate=f/(p/1e3)):(l.frameRate=g,l.duration=f/g*1e3),l.msPerFrame=1e3/l.frameRate},addFrame:function(l){return this.addFrameAt(this.frames.length,l)},addFrameAt:function(l,f){var p=this.getFrames(this.manager.textureManager,f);if(p.length>0){if(l===0)this.frames=p.concat(this.frames);else if(l===this.frames.length)this.frames=this.frames.concat(p);else{var g=this.frames.slice(0,l),m=this.frames.slice(l);this.frames=g.concat(p,m)}this.updateFrameSequence()}return this},checkFrame:function(l){return l>=0&&l<this.frames.length},getFirstTick:function(l){l.accumulator=0,l.nextTick=l.msPerFrame+l.currentFrame.duration},getFrameAt:function(l){return this.frames[l]},getFrames:function(l,f,p,g){g===void 0&&(g=!0);var m=[],x,y,T=1,S,C;if(typeof f=="string"){C=f;var E=l.get(C),P=E.getFrameNames();g&&o(P),f=[],P.forEach(function(I){f.push({key:C,frame:I})})}if(!Array.isArray(f)||f.length===0)return m;for(S=0;S<f.length;S++){var M=f[S],O=r(M,"key",p);if(!!O){var A=r(M,"frame",0),R=l.getFrame(O,A);y=new h(O,A,T,R),y.duration=r(M,"duration",0),y.isFirst=!x,x&&(x.nextFrame=y,y.prevFrame=x),m.push(y),x=y,T++}}if(m.length>0){y.isLast=!0,y.nextFrame=m[0],m[0].prevFrame=y;var F=1/(m.length-1);for(S=0;S<m.length;S++)m[S].progress=S*F}return m},getNextTick:function(l){l.accumulator-=l.nextTick,l.nextTick=l.msPerFrame+l.currentFrame.duration},getFrameByProgress:function(l){return l=s(l,0,1),a(l,this.frames,"progress")},nextFrame:function(l){var f=l.currentFrame;f.isLast?l.yoyo?this.handleYoyoFrame(l,!1):l.repeatCounter>0?l.inReverse&&l.forward?l.forward=!1:this.repeatAnimation(l):l.complete():this.updateAndGetNextTick(l,f.nextFrame)},handleYoyoFrame:function(l,f){if(f||(f=!1),l.inReverse===!f&&l.repeatCounter>0){(l.repeatDelay===0||l.pendingRepeat)&&(l.forward=f),this.repeatAnimation(l);return}if(l.inReverse!==f&&l.repeatCounter===0){l.complete();return}l.forward=f;var p=f?l.currentFrame.nextFrame:l.currentFrame.prevFrame;this.updateAndGetNextTick(l,p)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(l){var f=l.currentFrame;f.isFirst?l.yoyo?this.handleYoyoFrame(l,!0):l.repeatCounter>0?l.inReverse&&!l.forward?this.repeatAnimation(l):(l.forward=!0,this.repeatAnimation(l)):l.complete():this.updateAndGetNextTick(l,f.prevFrame)},updateAndGetNextTick:function(l,f){l.setCurrentFrame(f),this.getNextTick(l)},removeFrame:function(l){var f=this.frames.indexOf(l);return f!==-1&&this.removeFrameAt(f),this},removeFrameAt:function(l){return this.frames.splice(l,1),this.updateFrameSequence(),this},repeatAnimation:function(l){if(l._pendingStop===2){if(l._pendingStopValue===0)return l.stop();l._pendingStopValue--}l.repeatDelay>0&&!l.pendingRepeat?(l.pendingRepeat=!0,l.accumulator-=l.nextTick,l.nextTick+=l.repeatDelay):(l.repeatCounter--,l.forward?l.setCurrentFrame(l.currentFrame.nextFrame):l.setCurrentFrame(l.currentFrame.prevFrame),l.isPlaying&&(this.getNextTick(l),l.handleRepeat()))},toJSON:function(){var l={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(f){l.frames.push(f.toJSON())}),l},updateFrameSequence:function(){for(var l=this.frames.length,f=1/(l-1),p,g=0;g<l;g++)p=this.frames[g],p.index=g+1,p.isFirst=!1,p.isLast=!1,p.progress=g*f,g===0?(p.isFirst=!0,l===1?(p.isLast=!0,p.nextFrame=p,p.prevFrame=p):(p.isLast=!1,p.prevFrame=this.frames[l-1],p.nextFrame=this.frames[g+1])):g===l-1&&l>1?(p.isLast=!0,p.prevFrame=this.frames[l-2],p.nextFrame=this.frames[0]):l>1&&(p.prevFrame=this.frames[g-1],p.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(n.PAUSE_ALL,this.pause,this),this.manager.off(n.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var l=0;l<this.frames.length;l++)this.frames[l].destroy();this.frames=[],this.manager=null}});e.exports=c},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u===void 0&&(u=0),n===void 0&&(n=" "),a===void 0&&(a=3),s=s.toString();var h=0;if(u+1>=s.length)switch(a){case 1:s=new Array(u+1-s.length).join(n)+s;break;case 3:var r=Math.ceil((h=u-s.length)/2),o=h-r;s=new Array(o+1).join(n)+s+new Array(r+1).join(n);break;default:s=s+new Array(u+1-s.length).join(n);break}return s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(327),u=t(189),n=t(331),a=t(332),h=function(r){var o=typeof r;switch(o){case"string":return r.substr(0,3).toLowerCase()==="rgb"?a(r):s(r);case"number":return u(r);case"object":return n(r)}};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(103);function u(a,h,r,o){var c=(a+h*6)%6,l=Math.min(c,4-c,1);return Math.round(255*(o-o*r*Math.max(0,l)))}var n=function(a,h,r,o){h===void 0&&(h=1),r===void 0&&(r=1);var c=u(5,a,h,r),l=u(3,a,h,r),f=u(1,a,h,r);return o?o.setTo?o.setTo(c,l,f,o.alpha,!1):(o.r=c,o.g=l,o.b=f,o.color=s(c,l,f),o):{r:c,g:l,b:f,color:s(c,l,f)}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=t(330),n=function(a){var h=u(a);return new s(h.r,h.g,h.b,h.a)};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x=u-s.width/2,s.y=n-s.height/2,s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(105),u=t(136),n=t(31),a={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function h(){var o=new ArrayBuffer(4),c=new Uint8Array(o),l=new Uint32Array(o);return c[0]=161,c[1]=178,c[2]=195,c[3]=212,l[0]===3569595041?!0:l[0]===2712847316?!1:null}function r(){if(typeof importScripts=="function")return a;a.canvas=!!window.CanvasRenderingContext2D;try{a.localStorage=!!localStorage.getItem}catch{a.localStorage=!1}a.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,a.fileSystem=!!window.requestFileSystem;var o=!1,c=function(){if(window.WebGLRenderingContext)try{var l=n.createWebGL(this),f=l.getContext("webgl")||l.getContext("experimental-webgl"),p=n.create2D(this),g=p.getContext("2d"),m=g.createImageData(1,1);return o=m.data instanceof Uint8ClampedArray,n.remove(l),n.remove(p),!!f}catch{return!1}return!1};return a.webGL=c(),a.worker=!!window.Worker,a.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,a.getUserMedia=a.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,u.firefox&&u.firefoxVersion<21&&(a.getUserMedia=!1),!s.iOS&&(u.ie||u.firefox||u.chrome)&&(a.canvasBitBltShift=!0),(u.safari||u.mobileSafari)&&(a.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(a.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(a.littleEndian=h()),a.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&a.littleEndian!==null&&o,a}e.exports=r()},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="",s=function(){var u=function(r){for(var o=["i","webkitI","msI","mozI","oI"],c=0;c<o.length;c++){var l=o[c]+"mageSmoothingEnabled";if(l in r)return l}return null},n=function(r){return t===""&&(t=u(r)),t&&(r[t]=!0),r},a=function(r){return t===""&&(t=u(r)),t&&(r[t]=!1),r},h=function(r){return t!==null?r[t]:null};return{disable:a,enable:n,getPrefix:u,isEnabled:h}};e.exports=s()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(17),n={Angle:t(812),Distance:t(821),Easing:t(826),Fuzzy:t(827),Interpolation:t(830),Pow2:t(835),Snap:t(837),RandomDataGenerator:t(839),Average:t(840),Bernstein:t(356),Between:t(195),CatmullRom:t(194),CeilTo:t(841),Clamp:t(18),DegToRad:t(36),Difference:t(842),Euler:t(843),Factorial:t(357),FloatBetween:t(137),FloorTo:t(844),FromPercent:t(98),GetSpeed:t(845),IsEven:t(846),IsEvenStrict:t(847),Linear:t(135),MaxAdd:t(848),Median:t(849),MinSub:t(850),Percent:t(851),RadToDeg:t(196),RandomXY:t(852),RandomXYZ:t(853),RandomXYZW:t(854),Rotate:t(362),RotateAround:t(308),RotateAroundDistance:t(182),RotateTo:t(855),RoundAwayFromZero:t(363),RoundTo:t(856),SinCosTableGenerator:t(857),SmootherStep:t(183),SmoothStep:t(184),ToXY:t(858),TransformXY:t(177),Within:t(859),Wrap:t(68),Vector2:t(3),Vector3:t(39),Vector4:t(140),Matrix3:t(364),Matrix4:t(69),Quaternion:t(365),RotateVec3:t(860)};n=u(!1,n,s),e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h){var r=(a-u)*.5,o=(h-n)*.5,c=s*s,l=s*c;return(2*n-2*a+r+o)*l+(-3*n+3*a-2*r-o)*c+r*s+n};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.floor(Math.random()*(u-s+1)+s)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=function(n){return n*s.RAD_TO_DEG};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};e.exports=s},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(n){return this._matrix=n,this._dirty=!0,this},reset:function(){var n=this._matrix;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=0,n[6]=1,n[7]=0,n[8]=0,n[9]=0,n[10]=0,n[11]=0,n[12]=1,n[13]=0,n[14]=0,n[15]=0,n[16]=0,n[17]=0,n[18]=1,n[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var n=new Float32Array(this._matrix);n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,this._data=n,this._dirty=!1}return this._data},brightness:function(n,a){n===void 0&&(n=0),a===void 0&&(a=!1);var h=n;return this.multiply([h,0,0,0,0,0,h,0,0,0,0,0,h,0,0,0,0,0,1,0],a)},saturate:function(n,a){n===void 0&&(n=0),a===void 0&&(a=!1);var h=n*2/3+1,r=(h-1)*-.5;return this.multiply([h,r,r,0,0,r,h,r,0,0,r,r,h,0,0,0,0,0,1,0],a)},desaturate:function(n){return n===void 0&&(n=!1),this.saturate(-1,n)},hue:function(n,a){n===void 0&&(n=0),a===void 0&&(a=!1),n=n/180*Math.PI;var h=Math.cos(n),r=Math.sin(n),o=.213,c=.715,l=.072;return this.multiply([o+h*(1-o)+r*-o,c+h*-c+r*-c,l+h*-l+r*(1-l),0,0,o+h*-o+r*.143,c+h*(1-c)+r*.14,l+h*-l+r*-.283,0,0,o+h*-o+r*-(1-o),c+h*-c+r*c,l+h*(1-l)+r*l,0,0,0,0,0,1,0],a)},grayscale:function(n,a){return n===void 0&&(n=1),a===void 0&&(a=!1),this.saturate(-n,a)},blackWhite:function(n){return n===void 0&&(n=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],n)},contrast:function(n,a){n===void 0&&(n=0),a===void 0&&(a=!1);var h=n+1,r=-.5*(h-1);return this.multiply([h,0,0,0,r,0,h,0,0,r,0,0,h,0,r,0,0,0,1,0],a)},negative:function(n){return n===void 0&&(n=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],n)},desaturateLuminance:function(n){return n===void 0&&(n=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],n)},sepia:function(n){return n===void 0&&(n=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],n)},night:function(n,a){return n===void 0&&(n=.1),a===void 0&&(a=!1),this.multiply([n*-2,-n,0,0,0,-n,0,n,0,0,0,n,n*2,0,0,0,0,0,1,0],a)},lsd:function(n){return n===void 0&&(n=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],n)},brown:function(n){return n===void 0&&(n=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],n)},vintagePinhole:function(n){return n===void 0&&(n=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],n)},kodachrome:function(n){return n===void 0&&(n=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],n)},technicolor:function(n){return n===void 0&&(n=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],n)},polaroid:function(n){return n===void 0&&(n=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],n)},shiftToBGR:function(n){return n===void 0&&(n=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],n)},multiply:function(n,a){a||this.reset();for(var h=this._matrix,r=[],o=0;o<20;o++)r[o]=h[o];return h[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],h[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],h[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],h[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],h[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],h[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],h[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],h[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],h[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],h[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],h[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],h[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],h[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],h[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],h[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],h[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],h[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],h[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],h[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],h[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],this._dirty=!0,this}});e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(14),n=function(a,h){if(h===void 0&&(h=new s),a.length===0)return h;for(var r=Number.MAX_VALUE,o=Number.MAX_VALUE,c=u.MIN_SAFE_INTEGER,l=u.MIN_SAFE_INTEGER,f,p,g,m=0;m<a.length;m++)f=a[m],Array.isArray(f)?(p=f[0],g=f[1]):(p=f.x,g=f.y),r=Math.min(r,p),o=Math.min(o,g),c=Math.max(c,p),l=Math.max(l,g);return h.x=r,h.y=o,h.width=c-r,h.height=l-o,h};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(1),n=new s({initialize:function(h,r,o){this._rgb=[0,0,0],this.onChangeCallback=u,this.dirty=!1,this.set(h,r,o)},set:function(a,h,r){return a===void 0&&(a=0),h===void 0&&(h=0),r===void 0&&(r=0),this._rgb=[a,h,r],this.onChange(),this},equals:function(a,h,r){var o=this._rgb;return o.r===a&&o.g===h&&o.b===r},onChange:function(){this.dirty=!0;var a=this._rgb;this.onChangeCallback.call(this,a[0],a[1],a[2])},r:{get:function(){return this._rgb[0]},set:function(a){this._rgb[0]=a,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(a){this._rgb[1]=a,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(a){this._rgb[2]=a,this.onChange()}},destroy:function(){this.onChangeCallback=null}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={CENTER:t(403),ORIENTATION:t(404),SCALE_MODE:t(405),ZOOM:t(406)};e.exports=s},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){s.parentNode&&s.parentNode.removeChild(s)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(144),n=t(197),a=t(20),h=t(419),r=t(420),o=t(33),c=t(1),l=t(421),f=new s({initialize:function(g,m){this.scene=g,this.game,this.renderer,this.config=m,this.settings=l.create(m),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=c},init:function(p){this.settings.status=u.INIT,this.sceneUpdate=c,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var g=p.plugins;this.plugins=g,g.addToScene(this,n.Global,[n.CoreScene,r(this),h(this)]),this.events.emit(a.BOOT,this),this.settings.isBooted=!0},step:function(p,g){var m=this.events;m.emit(a.PRE_UPDATE,p,g),m.emit(a.UPDATE,p,g),this.sceneUpdate.call(this.scene,p,g),m.emit(a.POST_UPDATE,p,g)},render:function(p){var g=this.displayList;g.depthSort(),this.events.emit(a.PRE_RENDER,p),this.cameras.render(p,g),this.events.emit(a.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var g=this.events,m=this.settings;return this.settings.active&&(m.status=u.PAUSED,m.active=!1,g.emit(a.PAUSE,this,p)),this},resume:function(p){var g=this.events,m=this.settings;return this.settings.active||(m.status=u.RUNNING,m.active=!0,g.emit(a.RESUME,this,p)),this},sleep:function(p){var g=this.events,m=this.settings;return m.status=u.SLEEPING,m.active=!1,m.visible=!1,g.emit(a.SLEEP,this,p),this},wake:function(p){var g=this.events,m=this.settings;return m.status=u.RUNNING,m.active=!0,m.visible=!0,g.emit(a.WAKE,this,p),m.isTransition&&g.emit(a.TRANSITION_WAKE,m.transitionFrom,m.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===u.SLEEPING},isActive:function(){return this.settings.status===u.RUNNING},isPaused:function(){return this.settings.status===u.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,g){return p?this.resume(g):this.pause(g)},start:function(p){var g=this.events,m=this.settings;p&&(m.data=p),m.status=u.START,m.active=!0,m.visible=!0,g.emit(a.START,this),g.emit(a.READY,this,p)},shutdown:function(p){var g=this.events,m=this.settings;g.off(a.TRANSITION_INIT),g.off(a.TRANSITION_START),g.off(a.TRANSITION_COMPLETE),g.off(a.TRANSITION_OUT),m.status=u.SHUTDOWN,m.active=!1,m.visible=!1,this.renderer===o.WEBGL&&this.renderer.resetTextures(!0),g.emit(a.SHUTDOWN,this,p)},destroy:function(){var p=this.events,g=this.settings;g.status=u.DESTROYED,g.active=!1,g.visible=!1,p.emit(a.DESTROY,this),p.removeAllListeners();for(var m=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],x=0;x<m.length;x++)this[m[x]]=null}});e.exports=f},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s&&s[0].toUpperCase()+s.slice(1)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(33),u=t(0),n=t(109),a=t(424),h="Texture.frame missing: ",r=new u({initialize:function(c,l,f,p,g){Array.isArray(f)||(f=[f]),this.manager=c,this.key=l,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var m=0;m<f.length;m++)this.source.push(new a(this,f[m],p,g))},add:function(o,c,l,f,p,g){if(this.has(o))return null;var m=new n(this,o,c,l,f,p,g);return this.frames[o]=m,this.firstFrame==="__BASE"&&(this.firstFrame=o),this.frameTotal++,m},remove:function(o){if(this.has(o)){var c=this.get(o);return c.destroy(),delete this.frames[o],!0}return!1},has:function(o){return this.frames[o]},get:function(o){o||(o=this.firstFrame);var c=this.frames[o];return c||(console.warn(h+o),c=this.frames[this.firstFrame]),c},getTextureSourceIndex:function(o){for(var c=0;c<this.source.length;c++)if(this.source[c]===o)return c;return-1},getFramesFromTextureSource:function(o,c){c===void 0&&(c=!1);var l=[];for(var f in this.frames)if(!(f==="__BASE"&&!c)){var p=this.frames[f];p.sourceIndex===o&&l.push(p)}return l},getFrameNames:function(o){o===void 0&&(o=!1);var c=Object.keys(this.frames);if(!o){var l=c.indexOf("__BASE");l!==-1&&c.splice(l,1)}return c},getSourceImage:function(o){(o==null||this.frameTotal===1)&&(o="__BASE");var c=this.frames[o];return c?c.source.image:(console.warn(h+o),this.frames.__BASE.source.image)},getDataSourceImage:function(o){(o==null||this.frameTotal===1)&&(o="__BASE");var c=this.frames[o],l;return c?l=c.sourceIndex:(console.warn(h+o),l=this.frames.__BASE.sourceIndex),this.dataSource[l].image},setDataSource:function(o){Array.isArray(o)||(o=[o]);for(var c=0;c<o.length;c++){var l=this.source[c];this.dataSource.push(new a(this,o[c],l.width,l.height))}},setFilter:function(o){var c;for(c=0;c<this.source.length;c++)this.source[c].setFilter(o);for(c=0;c<this.dataSource.length;c++)this.dataSource[c].setFilter(o)},destroy:function(){var o;for(o=0;o<this.source.length;o++)this.source[o].destroy();for(o=0;o<this.dataSource.length;o++)this.dataSource[o].destroy();for(var c in this.frames){var l=this.frames[c];l.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var f=this.manager.game.renderer;f&&f.type===s.WEBGL&&f.resetTextures(!0),this.manager=null}});e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,a,h,r,o){r===void 0&&(r=0),o===void 0&&(o=n.length);var c=[];if(s(n,r,o))for(var l=r;l<o;l++){var f=n[l];(!a||a&&h===void 0&&f.hasOwnProperty(a)||a&&h!==void 0&&f[a]===h)&&c.push(f)}return c};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Matrix:t(1013),Add:t(1021),AddAt:t(1022),BringToTop:t(1023),CountAllMatching:t(1024),Each:t(1025),EachInRange:t(1026),FindClosestInSorted:t(318),GetAll:t(207),GetFirst:t(428),GetRandom:t(210),MoveDown:t(1027),MoveTo:t(1028),MoveUp:t(1029),MoveAbove:t(1030),MoveBelow:t(1031),NumberArray:t(322),NumberArrayStep:t(1032),QuickSelect:t(436),Range:t(437),Remove:t(93),RemoveAt:t(1033),RemoveBetween:t(1034),RemoveRandomElement:t(1035),Replace:t(1036),RotateLeft:t(178),RotateRight:t(179),SafeRange:t(78),SendToBack:t(1037),SetAll:t(1038),Shuffle:t(131),SortByDigits:t(320),SpliceOne:t(74),StableSort:t(79),Swap:t(1039)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){if(!Array.isArray(s)||s.length<2||!Array.isArray(s[0]))return!1;for(var u=s[0].length,n=1;n<s.length;n++)if(s[n].length!==u)return!1;return!0};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=0),n===void 0&&(n=s.length);var a=u+Math.floor(Math.random()*n);return s[a]===void 0?null:s[a]};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(438),a=new s({Extends:u,initialize:function(){u.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(h){return this._pending.push(h),this._toProcess++,h},remove:function(h){return this._destroy.push(h),this._toProcess++,h},removeAll:function(){for(var h=this._active,r=this._destroy,o=h.length;o--;)r.push(h[o]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var h=this._destroy,r=this._active,o,c;for(o=0;o<h.length;o++){c=h[o];var l=r.indexOf(c);l!==-1&&(r.splice(l,1),this.emit(n.PROCESS_QUEUE_REMOVE,c))}for(h.length=0,h=this._pending,o=0;o<h.length;o++)c=h[o],(!this.checkQueue||this.checkQueue&&r.indexOf(c)===-1)&&(r.push(c),this.emit(n.PROCESS_QUEUE_ADD,c));return h.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(u,n){return parseInt(u.getAttribute(n),10)}var s=function(u,n,a,h,r){a===void 0&&(a=0),h===void 0&&(h=0);var o=n.cutX,c=n.cutY,l=n.source.width,f=n.source.height,p=n.sourceIndex,g={},m=u.getElementsByTagName("info")[0],x=u.getElementsByTagName("common")[0];g.font=m.getAttribute("face"),g.size=t(m,"size"),g.lineHeight=t(x,"lineHeight")+h,g.chars={};var y=u.getElementsByTagName("char"),T=n!==void 0&&n.trimmed;if(T)var S=n.height,C=n.width;for(var E=0;E<y.length;E++){var P=y[E],M=t(P,"id"),O=String.fromCharCode(M),A=t(P,"x"),R=t(P,"y"),F=t(P,"width"),I=t(P,"height");T&&(A<C&&(C=A),R<S&&(S=R)),T&&S!==0&&C!==0&&(A-=n.x,R-=n.y);var B=(o+A)/l,N=(c+R)/f,Y=(o+A+F)/l,X=(c+R+I)/f;if(g.chars[M]={x:A,y:R,width:F,height:I,centerX:Math.floor(F/2),centerY:Math.floor(I/2),xOffset:t(P,"xoffset"),yOffset:t(P,"yoffset"),xAdvance:t(P,"xadvance")+a,data:{},kerning:{},u0:B,v0:N,u1:Y,v1:X},r&&F!==0&&I!==0){var W=r.add(O,p,A,R,F,I);W&&W.setUVs(F,I,B,N,Y,X)}}var w=u.getElementsByTagName("kerning");for(E=0;E<w.length;E++){var L=w[E],D=t(L,"first"),b=t(L,"second"),G=t(L,"amount");g.chars[b].kerning[D]=G}return g};e.exports=s},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1049),u=t(440),n=t(0),a=t(11),h=t(109),r=t(15),o=t(110),c=new n({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.ScrollFactor,a.Size,a.Texture,a.Transform,a.Visible,s],initialize:function(f,p,g,m,x){r.call(this,f,"Blitter"),this.setTexture(m,x),this.setPosition(p,g),this.initPipeline(),this.children=new o,this.renderList=[],this.dirty=!1},create:function(l,f,p,g,m){g===void 0&&(g=!0),m===void 0&&(m=this.children.length),p===void 0?p=this.frame:p instanceof h||(p=this.texture.get(p));var x=new u(this,l,f,p,g);return this.children.addAt(x,m,!1),this.dirty=!0,x},createFromCallback:function(l,f,p,g){for(var m=this.createMultiple(f,p,g),x=0;x<m.length;x++){var y=m[x];l.call(this,y,x)}return m},createMultiple:function(l,f,p){f===void 0&&(f=this.frame.name),p===void 0&&(p=!0),Array.isArray(f)||(f=[f]);var g=[],m=this;return f.forEach(function(x){for(var y=0;y<l;y++)g.push(m.create(0,0,x,p))}),g},childCanRender:function(l){return l.visible&&l.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(208),u=t(35),n=t(0),a=t(11),h=t(75),r=t(15),o=t(10),c=t(1052),l=t(441),f=t(3),p=new n({Extends:r,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.Pipeline,a.Transform,a.Visible,c],initialize:function(m,x,y,T){r.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this.tempTransformMatrix=new a.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(x,y),this.clearAlpha(),this.setBlendMode(u.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new o),g.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),x=m.transformPoint(this.x,this.y);g.setTo(x.x,x.y,0,0)}if(this.list.length>0){var y=this.list,T=new o,S=!1;g.setEmpty();for(var C=0;C<y.length;C++){var E=y[C];E.getBounds&&(E.getBounds(T),S?l(T,g,g):(g.setTo(T.x,T.y,T.width,T.height),S=!0))}}return g},addHandler:function(g){g.once(h.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.removeFromDisplayList(),g.parentContainer=this)},removeHandler:function(g){g.off(h.DESTROY,this.remove),this.exclusive&&(g.parentContainer=null,g.addToDisplayList())},pointToContainer:function(g,m){m===void 0&&(m=new f),this.parentContainer?this.parentContainer.pointToContainer(g,m):m=new f(g.x,g.y);var x=this.tempTransformMatrix;return x.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),x.invert(),x.transformPoint(g.x,g.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(g){return s.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,m){return s.AddAt(this.list,g,m,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,m){return g?(m===void 0&&(m=function(x,y){return x[g]-y[g]}),s.StableSort(this.list,m),this):this},getByName:function(g){return s.GetFirst(this.list,"name",g)},getRandom:function(g,m){return s.GetRandom(this.list,g,m)},getFirst:function(g,m,x,y){return s.GetFirst(this.list,g,m,x,y)},getAll:function(g,m,x,y){return s.GetAll(this.list,g,m,x,y)},count:function(g,m,x,y){return s.CountAllMatching(this.list,g,m,x,y)},swap:function(g,m){return s.Swap(this.list,g,m),this},moveTo:function(g,m){return s.MoveTo(this.list,g,m),this},moveAbove:function(g,m){return s.MoveAbove(this.list,g,m),this},moveBelow:function(g,m){return s.MoveBelow(this.list,g,m),this},remove:function(g,m){var x=s.Remove(this.list,g,this.removeHandler,this);if(m&&x){Array.isArray(x)||(x=[x]);for(var y=0;y<x.length;y++)x[y].destroy()}return this},removeAt:function(g,m){var x=s.RemoveAt(this.list,g,this.removeHandler,this);return m&&x&&x.destroy(),this},removeBetween:function(g,m,x){var y=s.RemoveBetween(this.list,g,m,this.removeHandler,this);if(x)for(var T=0;T<y.length;T++)y[T].destroy();return this},removeAll:function(g){var m=s.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(g)for(var x=0;x<m.length;x++)m[x].destroy();return this},bringToTop:function(g){return s.BringToTop(this.list,g),this},sendToBack:function(g){return s.SendToBack(this.list,g),this},moveUp:function(g){return s.MoveUp(this.list,g),this},moveDown:function(g){return s.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(g,m,x){var y=s.Replace(this.list,g,m);return y&&(this.addHandler(m),this.removeHandler(g),x&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,m,x,y){return s.SetAll(this.list,g,m,x,y),this},each:function(g,m){var x=[null],y,T=this.list.slice(),S=T.length;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<S;y++)x[0]=T[y],g.apply(m,x);return this},iterate:function(g,m){var x=[null],y;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<this.list.length;y++)x[0]=this.list[y],g.apply(m,x);return this},setScrollFactor:function(g,m,x){return m===void 0&&(m=g),x===void 0&&(x=!1),this.scrollFactorX=g,this.scrollFactorY=m,x&&(s.SetAll(this.list,"scrollFactorX",g),s.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});e.exports=p},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(148),u=t(0),n=t(1057),a=new u({Extends:s,Mixins:[n],initialize:function(r,o,c,l,f,p,g){s.call(this,r,o,c,l,f,p,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(h,r){return this.cropWidth=h,this.cropHeight=r,this},setDisplayCallback:function(h){return this.displayCallback=h,this},setScrollX:function(h){return this.scrollX=h,this},setScrollY:function(h){return this.scrollY=h,this}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(133),u=t(0),n=t(217),a=t(303),h=t(304),r=t(305),o=t(309),c=t(167),l=t(312),f=t(313),p=t(314),g=t(111),m=t(15),x=t(2),y=t(6),T=t(14),S=t(1063),C=new u({Extends:m,Mixins:[a,h,r,o,c,f,p,l,S],initialize:function(P,M){var O=y(M,"x",0),A=y(M,"y",0);m.call(this,P,"Graphics"),this.setPosition(O,A),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(M)},setDefaultStyles:function(E){return y(E,"lineStyle",null)&&(this.defaultStrokeWidth=y(E,"lineStyle.width",1),this.defaultStrokeColor=y(E,"lineStyle.color",16777215),this.defaultStrokeAlpha=y(E,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),y(E,"fillStyle",null)&&(this.defaultFillColor=y(E,"fillStyle.color",16777215),this.defaultFillAlpha=y(E,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(E,P,M){return M===void 0&&(M=1),this.commandBuffer.push(n.LINE_STYLE,E,P,M),this._lineWidth=E,this},fillStyle:function(E,P){return P===void 0&&(P=1),this.commandBuffer.push(n.FILL_STYLE,E,P),this},fillGradientStyle:function(E,P,M,O,A,R,F,I){return A===void 0&&(A=1),R===void 0&&(R=A),F===void 0&&(F=A),I===void 0&&(I=A),this.commandBuffer.push(n.GRADIENT_FILL_STYLE,A,R,F,I,E,P,M,O),this},lineGradientStyle:function(E,P,M,O,A,R){return R===void 0&&(R=1),this.commandBuffer.push(n.GRADIENT_LINE_STYLE,E,R,P,M,O,A),this},beginPath:function(){return this.commandBuffer.push(n.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(n.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(n.FILL_PATH),this},fill:function(){return this.commandBuffer.push(n.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(n.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(n.STROKE_PATH),this},fillCircleShape:function(E){return this.fillCircle(E.x,E.y,E.radius)},strokeCircleShape:function(E){return this.strokeCircle(E.x,E.y,E.radius)},fillCircle:function(E,P,M){return this.beginPath(),this.arc(E,P,M,0,T.PI2),this.fillPath(),this},strokeCircle:function(E,P,M){return this.beginPath(),this.arc(E,P,M,0,T.PI2),this.strokePath(),this},fillRectShape:function(E){return this.fillRect(E.x,E.y,E.width,E.height)},strokeRectShape:function(E){return this.strokeRect(E.x,E.y,E.width,E.height)},fillRect:function(E,P,M,O){return this.commandBuffer.push(n.FILL_RECT,E,P,M,O),this},strokeRect:function(E,P,M,O){var A=this._lineWidth/2,R=E-A,F=E+A;return this.beginPath(),this.moveTo(E,P),this.lineTo(E,P+O),this.strokePath(),this.beginPath(),this.moveTo(E+M,P),this.lineTo(E+M,P+O),this.strokePath(),this.beginPath(),this.moveTo(R,P),this.lineTo(F+M,P),this.strokePath(),this.beginPath(),this.moveTo(R,P+O),this.lineTo(F+M,P+O),this.strokePath(),this},fillRoundedRect:function(E,P,M,O,A){A===void 0&&(A=20);var R=A,F=A,I=A,B=A;return typeof A!="number"&&(R=x(A,"tl",20),F=x(A,"tr",20),I=x(A,"bl",20),B=x(A,"br",20)),this.beginPath(),this.moveTo(E+R,P),this.lineTo(E+M-F,P),this.arc(E+M-F,P+F,F,-T.TAU,0),this.lineTo(E+M,P+O-B),this.arc(E+M-B,P+O-B,B,0,T.TAU),this.lineTo(E+I,P+O),this.arc(E+I,P+O-I,I,T.TAU,Math.PI),this.lineTo(E,P+R),this.arc(E+R,P+R,R,-Math.PI,-T.TAU),this.fillPath(),this},strokeRoundedRect:function(E,P,M,O,A){A===void 0&&(A=20);var R=A,F=A,I=A,B=A;return typeof A!="number"&&(R=x(A,"tl",20),F=x(A,"tr",20),I=x(A,"bl",20),B=x(A,"br",20)),this.beginPath(),this.moveTo(E+R,P),this.lineTo(E+M-F,P),this.moveTo(E+M-F,P),this.arc(E+M-F,P+F,F,-T.TAU,0),this.lineTo(E+M,P+O-B),this.moveTo(E+M,P+O-B),this.arc(E+M-B,P+O-B,B,0,T.TAU),this.lineTo(E+I,P+O),this.moveTo(E+I,P+O),this.arc(E+I,P+O-I,I,T.TAU,Math.PI),this.lineTo(E,P+R),this.moveTo(E,P+R),this.arc(E+R,P+R,R,-Math.PI,-T.TAU),this.strokePath(),this},fillPointShape:function(E,P){return this.fillPoint(E.x,E.y,P)},fillPoint:function(E,P,M){return!M||M<1?M=1:(E-=M/2,P-=M/2),this.commandBuffer.push(n.FILL_RECT,E,P,M,M),this},fillTriangleShape:function(E){return this.fillTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},strokeTriangleShape:function(E){return this.strokeTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},fillTriangle:function(E,P,M,O,A,R){return this.commandBuffer.push(n.FILL_TRIANGLE,E,P,M,O,A,R),this},strokeTriangle:function(E,P,M,O,A,R){return this.commandBuffer.push(n.STROKE_TRIANGLE,E,P,M,O,A,R),this},strokeLineShape:function(E){return this.lineBetween(E.x1,E.y1,E.x2,E.y2)},lineBetween:function(E,P,M,O){return this.beginPath(),this.moveTo(E,P),this.lineTo(M,O),this.strokePath(),this},lineTo:function(E,P){return this.commandBuffer.push(n.LINE_TO,E,P),this},moveTo:function(E,P){return this.commandBuffer.push(n.MOVE_TO,E,P),this},strokePoints:function(E,P,M,O){P===void 0&&(P=!1),M===void 0&&(M=!1),O===void 0&&(O=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var A=1;A<O;A++)this.lineTo(E[A].x,E[A].y);return P&&this.lineTo(E[0].x,E[0].y),M&&this.closePath(),this.strokePath(),this},fillPoints:function(E,P,M,O){P===void 0&&(P=!1),M===void 0&&(M=!1),O===void 0&&(O=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var A=1;A<O;A++)this.lineTo(E[A].x,E[A].y);return P&&this.lineTo(E[0].x,E[0].y),M&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(E,P){P===void 0&&(P=32);var M=E.getPoints(P);return this.strokePoints(M,!0)},strokeEllipse:function(E,P,M,O,A){A===void 0&&(A=32);var R=new g(E,P,M,O),F=R.getPoints(A);return this.strokePoints(F,!0)},fillEllipseShape:function(E,P){P===void 0&&(P=32);var M=E.getPoints(P);return this.fillPoints(M,!0)},fillEllipse:function(E,P,M,O,A){A===void 0&&(A=32);var R=new g(E,P,M,O),F=R.getPoints(A);return this.fillPoints(F,!0)},arc:function(E,P,M,O,A,R,F){return R===void 0&&(R=!1),F===void 0&&(F=0),this.commandBuffer.push(n.ARC,E,P,M,O,A,R,F),this},slice:function(E,P,M,O,A,R,F){return R===void 0&&(R=!1),F===void 0&&(F=0),this.commandBuffer.push(n.BEGIN_PATH),this.commandBuffer.push(n.MOVE_TO,E,P),this.commandBuffer.push(n.ARC,E,P,M,O,A,R,F),this.commandBuffer.push(n.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(n.SAVE),this},restore:function(){return this.commandBuffer.push(n.RESTORE),this},translateCanvas:function(E,P){return this.commandBuffer.push(n.TRANSLATE,E,P),this},scaleCanvas:function(E,P){return this.commandBuffer.push(n.SCALE,E,P),this},rotateCanvas:function(E){return this.commandBuffer.push(n.ROTATE,E),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(E,P,M){var O=this.scene.sys,A=O.game.renderer;P===void 0&&(P=O.scale.width),M===void 0&&(M=O.scale.height),C.TargetCamera.setScene(this.scene),C.TargetCamera.setViewport(0,0,P,M),C.TargetCamera.scrollX=this.x,C.TargetCamera.scrollY=this.y;var R,F;if(typeof E=="string")if(O.textures.exists(E)){R=O.textures.get(E);var I=R.getSourceImage();I instanceof HTMLCanvasElement&&(F=I.getContext("2d"))}else R=O.textures.createCanvas(E,P,M),F=R.getSourceImage().getContext("2d");else E instanceof HTMLCanvasElement&&(F=E.getContext("2d"));return F&&(this.renderCanvas(A,this,C.TargetCamera,null,F,!1),R&&R.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});C.TargetCamera=new s,e.exports=C},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,h){h===void 0&&(h=new s);var r=n.width/2,o=n.height/2;return h.x=n.x+r*Math.cos(a),h.y=n.y+o*Math.sin(a),h};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(0),n=t(11),a=t(176),h=t(101),r=t(9),o=t(75),c=t(110),l=t(1071),f=t(20),p=t(79),g=new u({Extends:c,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.Visible,r,l],initialize:function(x,y){c.call(this,x),r.call(this),this.scene=x,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=x.sys,this.events=x.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(s.SKIP_CHECK),y&&this.add(y),x.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(m,x){return this.data||(this.data=new h(this)),this.data.set(m,x),this},incData:function(m,x){return this.data||(this.data=new h(this)),this.data.inc(m,x),this},toggleData:function(m){return this.data||(this.data=new h(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new h(this)),this.data.get(m)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(m){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,x=this.parentContainer,y=[];x&&(y.unshift(x.getIndex(m)),m=x,x.parentContainer);)x=x.parentContainer;return y.unshift(this.displayList.getIndex(m)),y},addChildCallback:function(m){m.displayList&&m.displayList!==this&&m.removeFromDisplayList(),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(o.ADDED_TO_SCENE,m,this.scene),this.events.emit(f.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(o.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(f.REMOVED_FROM_SCENE,m,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,x){return m._depth-x._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(o.DESTROY,this);for(var m=this.list.length;m--;)this.list[m].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});e.exports=g},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(450),h=t(110),r=t(452),o=t(1075),c=new s({Extends:n,Mixins:[u.Depth,u.Mask,u.Pipeline,u.Transform,u.Visible,o],initialize:function(f,p,g,m){if(n.call(this,f,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],g!==null&&(typeof g=="object"||Array.isArray(g))&&(m=g,g=null),this.setTexture(p,g),this.initPipeline(),this.emitters=new h(this),this.wells=new h(this),m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this.createEmitter(m[x])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(l,f){return this.texture=this.scene.sys.textures.get(l),this.setFrame(f)},setFrame:function(l){this.frame=this.texture.get(l);var f=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),p=[];return f.forEach(function(g){p.push(g.name)}),this.frameNames=p,this.defaultFrame=this.frame,this},setEmitterFrames:function(l,f){Array.isArray(l)||(l=[l]);var p=f.frames;p.length=0;for(var g=0;g<l.length;g++){var m=l[g];this.frameNames.indexOf(m)!==-1&&p.push(this.texture.get(m))}return p.length>0?f.defaultFrame=p[0]:f.defaultFrame=this.defaultFrame,this},addEmitter:function(l){return this.emitters.add(l)},createEmitter:function(l){return this.addEmitter(new r(this,l))},removeEmitter:function(l){return this.emitters.remove(l,!0)},addGravityWell:function(l){return this.wells.add(l)},createGravityWell:function(l){return this.addGravityWell(new a(l))},emitParticle:function(l,f,p){for(var g=this.emitters.list,m=0;m<g.length;m++){var x=g[m];x.active&&x.emitParticle(l,f,p)}return this},emitParticleAt:function(l,f,p){return this.emitParticle(p,l,f)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(l,f){f*=this.timeScale;for(var p=this.emitters.list,g=0;g<p.length;g++){var m=p[g];m.active&&m.preUpdate(l,f)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(133),n=t(31),a=t(0),h=t(11),r=t(33),o=t(109),c=t(15),l=t(1),f=t(92),p=t(1079),g=t(141),m=t(12),x=t(222),y=new a({Extends:c,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,p],initialize:function(S,C,E,P,M,O,A){C===void 0&&(C=0),E===void 0&&(E=0),P===void 0&&(P=32),M===void 0&&(M=32),c.call(this,S,"RenderTexture"),this.renderer=S.sys.renderer,this.textureManager=S.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,O===void 0?(this.canvas=n.create2D(this,P,M),this.texture=S.sys.textures.addCanvas(x(),this.canvas),this.frame=this.texture.get()):(this.texture=S.sys.textures.get(O),this.frame=this.texture.get(A),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new u(0,0,P,M),this.renderTarget=null;var R=this.renderer;R?R.type===r.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new g(R,P,M,1,0,!1)):R.type===r.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=l,this.camera.setScene(S),this.setPosition(C,E),O===void 0&&this.setSize(P,M),this.setOrigin(0,0),this.initPipeline(f.SINGLE_PIPELINE)},setSize:function(T,S){return this.resize(T,S)},resize:function(T,S){S===void 0&&(S=T);var C=this.frame;if(T!==this.width||S!==this.height){if(C.name==="__BASE"){this.canvas.width=T,this.canvas.height=S,this.texture.width=T,this.texture.height=S;var E=this.renderTarget;E&&(E.resize(T,S),C.glTexture=E.texture,C.source.isRenderTexture=!0,C.source.isGLTexture=!0,C.source.glTexture=E.texture),this.camera.setSize(T,S),C.source.width=T,C.source.height=S,C.setSize(T,S),this.width=T,this.height=S}}else{var P=this.texture.getSourceImage();C.cutX+T>P.width&&(T=P.width-C.cutX),C.cutY+S>P.height&&(S=P.height-C.cutY),C.setSize(T,S,C.cutX,C.cutY)}this.updateDisplayOrigin();var M=this.input;return M&&!M.customHitArea&&(M.hitArea.width=T,M.hitArea.height=S),this},setGlobalTint:function(T){return this.globalTint=T,this},setGlobalAlpha:function(T){return this.globalAlpha=T,this},saveTexture:function(T){return this.textureManager.renameTexture(this.texture.key,T),this._saved=!0,this.texture},fill:function(T,S,C,E,P,M){var O=this.frame,A=this.camera,R=this.renderer;S===void 0&&(S=1),C===void 0&&(C=0),E===void 0&&(E=0),P===void 0&&(P=O.cutWidth),M===void 0&&(M=O.cutHeight);var F=(T>>16&255)/255,I=(T>>8&255)/255,B=(T&255)/255,N=this.renderTarget;if(A.preRender(),N){N.bind(!0);var Y=this.pipeline;Y.manager.set(Y);var X=N.width,W=N.height,w=R.width,L=R.height,D=w/X,b=L/W;Y.drawFillRect(C*D,E*b,P*D,M*b,m.getTintFromFloats(B,I,F,1),S),N.unbind(!0)}else{var G=this.context;R.setContext(G),G.fillStyle="rgba("+F+","+I+","+B+","+S+")",G.fillRect(C+O.cutX,E+O.cutY,P,M),R.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var T=this.renderTarget;if(T)T.clear();else{var S=this.context;S.save(),S.setTransform(1,0,0,1,0,0),S.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),S.restore()}this.dirty=!1}return this},erase:function(T,S,C){return this._eraseMode=!0,this.draw(T,S,C,1,16777215),this._eraseMode=!1,this},draw:function(T,S,C,E,P){return this.beginDraw(),this.batchDraw(T,S,C,E,P),this.endDraw(),this},drawFrame:function(T,S,C,E,P,M){return this.beginDraw(),this.batchDrawFrame(T,S,C,E,P,M),this.endDraw(),this},beginDraw:function(){var T=this.camera,S=this.renderer,C=this.renderTarget;return T.preRender(),C?S.beginCapture(C.width,C.height):S.setContext(this.context),this},batchDraw:function(T,S,C,E,P){return E===void 0&&(E=this.globalAlpha),P===void 0?P=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):P=(P>>16)+(P&65280)+((P&255)<<16),Array.isArray(T)||(T=[T]),this.batchList(T,S,C,E,P),this},batchDrawFrame:function(T,S,C,E,P,M){C===void 0&&(C=0),E===void 0&&(E=0),P===void 0&&(P=this.globalAlpha),M===void 0?M=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):M=(M>>16)+(M&65280)+((M&255)<<16);var O=this.textureManager.getFrame(T,S);return O&&(this.renderTarget?this.pipeline.batchTextureFrame(O,C,E,M,P,this.camera.matrix,null):this.batchTextureFrame(O,C+this.frame.cutX,E+this.frame.cutY,P,M)),this},endDraw:function(T){T===void 0&&(T=this._eraseMode);var S=this.renderer,C=this.renderTarget;if(C){var E=S.endCapture(),P=S.pipelines.setUtility();P.blitFrame(E,C,1,!1,!1,T),S.resetScissor(),S.resetViewport()}else S.setContext();return this.dirty=!0,this},batchList:function(T,S,C,E,P){for(var M=0;M<T.length;M++){var O=T[M];!O||O===this||(O.renderWebGL||O.renderCanvas?this.drawGameObject(O,S,C):O.isParent||O.list?this.batchGroup(O.getChildren(),S,C):typeof O=="string"?this.batchTextureFrameKey(O,null,S,C,E,P):O instanceof o?this.batchTextureFrame(O,S,C,E,P):Array.isArray(O)&&this.batchList(O,S,C,E,P))}},batchGroup:function(T,S,C){S===void 0&&(S=0),C===void 0&&(C=0),S+=this.frame.cutX,C+=this.frame.cutY;for(var E=0;E<T.length;E++){var P=T[E];if(P.willRender(this.camera)){var M=P.x+S,O=P.y+C;this.drawGameObject(P,M,O)}}},batchGameObjectWebGL:function(T,S,C){S===void 0&&(S=T.x),C===void 0&&(C=T.y);var E=T.x,P=T.y;T.setPosition(S+this.frame.cutX,C+this.frame.cutY),T.renderDirect?T.renderDirect(this.renderer,T,this.camera):T.renderWebGL(this.renderer,T,this.camera),T.setPosition(E,P)},batchGameObjectCanvas:function(T,S,C){S===void 0&&(S=T.x),C===void 0&&(C=T.y);var E=T.x,P=T.y;if(this._eraseMode){var M=T.blendMode;T.blendMode=s.ERASE}T.setPosition(S+this.frame.cutX,C+this.frame.cutY),T.renderCanvas(this.renderer,T,this.camera,null),T.setPosition(E,P),this._eraseMode&&(T.blendMode=M)},batchTextureFrameKey:function(T,S,C,E,P,M){var O=this.textureManager.getFrame(T,S);O&&this.batchTextureFrame(O,C,E,P,M)},batchTextureFrame:function(T,S,C,E,P){S===void 0&&(S=0),C===void 0&&(C=0),S+=this.frame.cutX,C+=this.frame.cutY;var M=this.renderTarget;if(M)this.pipeline.batchTextureFrame(T,S,C,P,E,this.camera.matrix,null);else{var O=this.context,A=T.canvasData,R=T.source.image,F=this.camera.matrix;O.save(),O.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",O.globalAlpha=E,F.setToContext(O),O.drawImage(R,A.x,A.y,A.width,A.height,S,C,A.width,A.height),O.restore()}},snapshotArea:function(T,S,C,E,P,M,O){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,P,!1,T,S,C,E,M,O):this.renderer.snapshotCanvas(this.canvas,P,!1,T,S,C,E,M,O),this},snapshot:function(T,S,C){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,0,0,this.width,this.height,S,C):this.renderer.snapshotCanvas(this.canvas,T,!1,0,0,this.width,this.height,S,C),this},snapshotPixel:function(T,S,C){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,C,!0,T,S):this.renderer.snapshotCanvas(this.canvas,C,!0,T,S),this},preDestroy:function(){this._saved||(n.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});e.exports=y},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var u=Math.random()*16|0,n=s==="x"?u:u&3|8;return n.toString(16)})};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(164),u=t(0),n=t(11),a=t(15),h=t(92),r=t(1085),o=t(3),c=new u({Extends:a,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Flip,n.Mask,n.Pipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,r],initialize:function(f,p,g,m,x,y,T,S,C){m===void 0&&(m="__DEFAULT"),y===void 0&&(y=2),T===void 0&&(T=!0),a.call(this,f,"Rope"),this.anims=new s(this),this.points=y,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=m==="__DEFAULT",this.dirty=!1,this.horizontal=T,this._flipX=!1,this._flipY=!1,this._perp=new o,this.debugCallback=null,this.debugGraphic=null,this.setTexture(m,x),this.setPosition(p,g),this.setSizeToFrame(),this.initPipeline(h.ROPE_PIPELINE),Array.isArray(y)&&this.resizeArrays(y.length),this.setPoints(y,S,C),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(l,f){var p=this.anims.currentFrame;this.anims.update(l,f),this.anims.currentFrame!==p&&(this.updateUVs(),this.updateVertices())},play:function(l,f,p){return this.anims.play(l,f,p),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(l,f,p){return l===void 0&&(l=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(l,f,p))},setVertical:function(l,f,p){return l===void 0&&(l=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(l,f,p)):this},setTintFill:function(l){return l===void 0&&(l=!1),this.tintFill=l,this},setAlphas:function(l,f){var p=this.points.length;if(p<1)return this;var g=this.alphas;l===void 0?l=[1]:!Array.isArray(l)&&f===void 0&&(l=[l]);var m,x=0;if(f!==void 0)for(m=0;m<p;m++)x=m*2,g[x]=l,g[x+1]=f;else if(l.length===p)for(m=0;m<p;m++)x=m*2,g[x]=l[m],g[x+1]=l[m];else{var y=l[0];for(m=0;m<p;m++)x=m*2,l.length>x&&(y=l[x]),g[x]=y,l.length>x+1&&(y=l[x+1]),g[x+1]=y}return this},setColors:function(l){var f=this.points.length;if(f<1)return this;var p=this.colors;l===void 0?l=[16777215]:Array.isArray(l)||(l=[l]);var g,m=0;if(l.length===f)for(g=0;g<f;g++)m=g*2,p[m]=l[g],p[m+1]=l[g];else{var x=l[0];for(g=0;g<f;g++)m=g*2,l.length>m&&(x=l[m]),p[m]=x,l.length>m+1&&(x=l[m+1]),p[m+1]=x}return this},setPoints:function(l,f,p){if(l===void 0&&(l=2),typeof l=="number"){var g=l;g<2&&(g=2),l=[];var m,x,y;if(this.horizontal)for(y=-this.frame.halfWidth,x=this.frame.width/(g-1),m=0;m<g;m++)l.push({x:y+m*x,y:0});else for(y=-this.frame.halfHeight,x=this.frame.height/(g-1),m=0;m<g;m++)l.push({x:0,y:y+m*x})}var T=l.length,S=this.points.length;return T<1?(console.warn("Rope: Not enough points given"),this):(T===1&&(l.unshift({x:0,y:0}),T++),S!==T&&this.resizeArrays(T),this.points=l,this.updateUVs(),f!=null&&this.setColors(f),p!=null&&this.setAlphas(p),this)},updateUVs:function(){for(var l=this.uv,f=this.points.length,p=this.frame.u0,g=this.frame.v0,m=this.frame.u1,x=this.frame.v1,y=(m-p)/(f-1),T=(x-g)/(f-1),S=0;S<f;S++){var C=S*4,E,P,M,O;this.horizontal?(this._flipX?(E=m-S*y,M=m-S*y):(E=p+S*y,M=p+S*y),this._flipY?(P=x,O=g):(P=g,O=x)):(this._flipX?(E=p,M=m):(E=m,M=p),this._flipY?(P=x-S*T,O=x-S*T):(P=g+S*T,O=g+S*T)),l[C+0]=E,l[C+1]=P,l[C+2]=M,l[C+3]=O}return this},resizeArrays:function(l){var f=this.colors,p=this.alphas;this.vertices=new Float32Array(l*4),this.uv=new Float32Array(l*4),f=new Uint32Array(l*2),p=new Float32Array(l*2);for(var g=0;g<l*2;g++)f[g]=16777215,p[g]=1;return this.colors=f,this.alphas=p,this.dirty=!0,this},updateVertices:function(){var l=this._perp,f=this.points,p=this.vertices,g=f.length;if(this.dirty=!1,!(g<1)){for(var m,x=f[0],y=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,T=0;T<g;T++){var S=f[T],C=T*4;T<g-1?m=f[T+1]:m=S,l.x=m.y-x.y,l.y=-(m.x-x.x);var E=l.length();l.x/=E,l.y/=E,l.x*=y,l.y*=y,p[C]=S.x+l.x,p[C+1]=S.y+l.y,p[C+2]=S.x-l.x,p[C+3]=S.y-l.y,x=S}return this}},setDebug:function(l,f){return this.debugGraphic=l,!l&&!f?this.debugCallback=null:f?this.debugCallback=f:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(l,f,p){var g=l.debugGraphic,m=p[0],x=p[1],y=p[2],T=p[3];g.lineBetween(m,x,y,T);for(var S=4;S<f;S+=4){var C=p[S+0],E=p[S+1],P=p[S+2],M=p[S+3];g.lineBetween(m,x,C,E),g.lineBetween(y,T,P,M),g.lineBetween(y,T,C,E),g.lineBetween(C,E,P,M),m=C,x=E,y=P,T=M}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(l){return this._flipX=l,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(l){return this._flipY=l,this.updateUVs()}}});e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(142),u=t(31),n=t(0),a=t(11),h=t(22),r=t(15),o=t(458),c=t(6),l=t(202),f=t(1088),p=t(459),g=new n({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,f],initialize:function(x,y,T,S,C){y===void 0&&(y=0),T===void 0&&(T=0),r.call(this,x,"Text"),this.renderer=x.sys.renderer,this.setPosition(y,T),this.setOrigin(0,0),this.initPipeline(),this.canvas=u.create(this),this.context=this.canvas.getContext("2d"),this.style=new p(this,C),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(S),C&&C.padding&&this.setPadding(C.padding),C&&C.lineSpacing&&this.setLineSpacing(C.lineSpacing),x.sys.game.events.on(h.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",s(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(m){var x=this.style;if(x.wordWrapCallback){var y=x.wordWrapCallback.call(x.wordWrapCallbackScope,m,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return x.wordWrapWidth?x.wordWrapUseAdvanced?this.advancedWordWrap(m,this.context,this.style.wordWrapWidth):this.basicWordWrap(m,this.context,this.style.wordWrapWidth):m},advancedWordWrap:function(m,x,y){for(var T="",S=m.replace(/ +/gi," ").split(this.splitRegExp),C=S.length,E=0;E<C;E++){var P=S[E],M="";P=P.replace(/^ *|\s*$/gi,"");var O=x.measureText(P).width;if(O<y){T+=P+`
`;continue}for(var A=y,R=P.split(" "),F=0;F<R.length;F++){var I=R[F],B=I+" ",N=x.measureText(B).width;if(N>A){if(F===0){for(var Y=B;Y.length&&(Y=Y.slice(0,-1),N=x.measureText(Y).width,!(N<=A)););if(!Y.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var X=I.substr(Y.length);R[F]=X,M+=Y}var W=R[F].length?F:F+1,w=R.slice(W).join(" ").replace(/[ \n]*$/gi,"");S[E+1]=w+" "+(S[E+1]||""),C=S.length;break}else M+=B,A-=N}T+=M.replace(/[ \n]*$/gi,"")+`
`}return T=T.replace(/[\s|\n]*$/gi,""),T},basicWordWrap:function(m,x,y){for(var T="",S=m.split(this.splitRegExp),C=S.length-1,E=x.measureText(" ").width,P=0;P<=C;P++){for(var M=y,O=S[P].split(" "),A=O.length-1,R=0;R<=A;R++){var F=O[R],I=x.measureText(F).width,B=I;R<A&&(B+=E),B>M&&R>0&&(T+=`
`,M=y),T+=F,R<A?(T+=" ",M-=B):M-=I}P<C&&(T+=`
`)}return T},getWrappedText:function(m){m===void 0&&(m=this._text),this.style.syncFont(this.canvas,this.context);var x=this.runWordWrap(m);return x.split(this.splitRegExp)},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this._text&&(this._text=m.toString(),this.updateText()),this},setStyle:function(m){return this.style.setStyle(m)},setFont:function(m){return this.style.setFont(m)},setFontFamily:function(m){return this.style.setFontFamily(m)},setFontSize:function(m){return this.style.setFontSize(m)},setFontStyle:function(m){return this.style.setFontStyle(m)},setFixedSize:function(m,x){return this.style.setFixedSize(m,x)},setBackgroundColor:function(m){return this.style.setBackgroundColor(m)},setFill:function(m){return this.style.setFill(m)},setColor:function(m){return this.style.setColor(m)},setStroke:function(m,x){return this.style.setStroke(m,x)},setShadow:function(m,x,y,T,S,C){return this.style.setShadow(m,x,y,T,S,C)},setShadowOffset:function(m,x){return this.style.setShadowOffset(m,x)},setShadowColor:function(m){return this.style.setShadowColor(m)},setShadowBlur:function(m){return this.style.setShadowBlur(m)},setShadowStroke:function(m){return this.style.setShadowStroke(m)},setShadowFill:function(m){return this.style.setShadowFill(m)},setWordWrapWidth:function(m,x){return this.style.setWordWrapWidth(m,x)},setWordWrapCallback:function(m,x){return this.style.setWordWrapCallback(m,x)},setAlign:function(m){return this.style.setAlign(m)},setResolution:function(m){return this.style.setResolution(m)},setLineSpacing:function(m){return this.lineSpacing=m,this.updateText()},setPadding:function(m,x,y,T){if(typeof m=="object"){var S=m,C=c(S,"x",null);C!==null?(m=C,y=C):(m=c(S,"left",0),y=c(S,"right",m));var E=c(S,"y",null);E!==null?(x=E,T=E):(x=c(S,"top",0),T=c(S,"bottom",x))}else m===void 0&&(m=0),x===void 0&&(x=m),y===void 0&&(y=m),T===void 0&&(T=x);return this.padding.left=m,this.padding.top=x,this.padding.right=y,this.padding.bottom=T,this.updateText()},setMaxLines:function(m){return this.style.setMaxLines(m)},updateText:function(){var m=this.canvas,x=this.context,y=this.style,T=y.resolution,S=y.metrics;y.syncFont(m,x);var C=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(C=this.runWordWrap(this._text));var E=C.split(this.splitRegExp),P=o(this,S,E),M=this.padding,O;y.fixedWidth===0?(this.width=P.width+M.left+M.right,O=P.width):(this.width=y.fixedWidth,O=this.width-M.left-M.right,O<P.width&&(O=P.width)),y.fixedHeight===0?this.height=P.height+M.top+M.bottom:this.height=y.fixedHeight;var A=this.width,R=this.height;this.updateDisplayOrigin(),A*=T,R*=T,A=Math.max(A,1),R=Math.max(R,1),m.width!==A||m.height!==R?(m.width=A,m.height=R,this.frame.setSize(A,R),y.syncFont(m,x)):x.clearRect(0,0,A,R),x.save(),x.scale(T,T),y.backgroundColor&&(x.fillStyle=y.backgroundColor,x.fillRect(0,0,A,R)),y.syncStyle(m,x),x.textBaseline="alphabetic",x.translate(M.left,M.top);for(var F,I,B=0;B<P.lines;B++){if(F=y.strokeThickness/2,I=y.strokeThickness/2+B*P.lineHeight+S.ascent,B>0&&(I+=P.lineSpacing*B),y.rtl)F=A-F;else if(y.align==="right")F+=O-P.lineWidths[B];else if(y.align==="center")F+=(O-P.lineWidths[B])/2;else if(y.align==="justify"){var N=.85;if(P.lineWidths[B]/P.width>=N){var Y=P.width-P.lineWidths[B],X=x.measureText(" ").width,W=E[B].trim(),w=W.split(" ");Y+=(E[B].length-W.length)*X;for(var L=Math.floor(Y/X),D=0;L>0;)w[D]+=" ",D=(D+1)%(w.length-1||1),--L;E[B]=w.join(" ")}}this.autoRound&&(F=Math.round(F),I=Math.round(I)),y.strokeThickness&&(this.style.syncShadow(x,y.shadowStroke),x.strokeText(E[B],F,I)),y.color&&(this.style.syncShadow(x,y.shadowFill),x.fillText(E[B],F,I))}x.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(m,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var b=this.input;return b&&!b.customHitArea&&(b.hitArea.width=this.width,b.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(m){this.setText(m)}},toJSON:function(){var m=a.ToJSON(this),x={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return m.data=x,m},preDestroy:function(){this.style.rtl&&l(this.canvas),u.remove(this.canvas),this.texture.destroy()}});e.exports=g},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(0),n=t(11),a=t(22),h=t(15),r=t(361),o=t(192),c=t(1091),l=t(3),f=8,p=new u({Extends:h,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Crop,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Tint,n.Transform,n.Visible,c],initialize:function(m,x,y,T,S,C,E){var P=m.sys.renderer;h.call(this,m,"TileSprite");var M=m.sys.textures.get(C),O=M.get(E);!T||!S?(T=O.width,S=O.height):(T=Math.floor(T),S=Math.floor(S)),this._tilePosition=new l,this._tileScale=new l(1,1),this.dirty=!1,this.renderer=P,this.canvas=s.create(this,T,S),this.context=this.canvas.getContext("2d"),this.displayTexture=M,this.displayFrame=O,this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=r(O.width),this.potHeight=r(O.height),this.fillCanvas=s.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(x,y),this.setSize(T,S),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),m.sys.game.events.on(a.CONTEXT_RESTORED,function(A){if(!!A){var R=A.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=A.createTexture2D(0,R.LINEAR,R.LINEAR,R.REPEAT,R.REPEAT,R.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(g,m){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(m)},setFrame:function(g){var m=this.displayTexture.get(g);return this.potWidth=r(m.width),this.potHeight=r(m.height),this.canvas.width=0,!m.cutWidth||!m.cutHeight?this.renderFlags&=~f:this.renderFlags|=f,this.displayFrame=m,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,m){return g!==void 0&&(this.tilePositionX=g),m!==void 0&&(this.tilePositionY=m),this},setTileScale:function(g,m){return g===void 0&&(g=this.tileScaleX),m===void 0&&(m=g),this.tileScaleX=g,this.tileScaleY=m,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var m=this.fillContext,x=this.fillCanvas,y=this.potWidth,T=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=g.cutWidth,T=g.cutHeight),m.clearRect(0,0,y,T),x.width=y,x.height=T,m.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,y,T),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(x,this.fillPattern):this.fillPattern=m.createPattern(x,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var m=this.context;this.scene.sys.game.config.antialias||o.disable(m);var x=this._tileScale.x,y=this._tileScale.y,T=this._tilePosition.x,S=this._tilePosition.y;m.clearRect(0,0,this.width,this.height),m.save(),m.scale(x,y),m.translate(-T,-S),m.fillStyle=this.fillPattern,m.fillRect(T,S,this.width/x,this.height/y),m.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),s.remove(this.canvas),s.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});e.exports=p},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(18),n=t(11),a=t(75),h=t(22),r=t(51),o=t(15),c=t(70),l=t(222),f=t(1094),p=t(14),g=new s({Extends:o,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,f],initialize:function(x,y,T,S){o.call(this,x,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=l(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=p.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(y,T),this.initPipeline(),S&&this.changeSource(S,!1);var C=x.sys.game.events;C.on(h.PAUSE,this.globalPause,this),C.on(h.RESUME,this.globalResume,this);var E=x.sys.sound;E&&E.on(c.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(m,x,y){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var T=this.video;if(!T)return console.warn("Video not loaded"),this;m===void 0&&(m=T.loop);var S=this.scene.sys.sound;S&&S.mute&&this.setMute(!0),isNaN(x)||(this._markerIn=x),!isNaN(y)&&y>x&&(this._markerOut=y),T.loop=m;var C=this._callbacks,E=T.play();return E!==void 0?E.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(T.addEventListener("playing",C.play,!0),T.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),T.addEventListener("ended",C.end,!0),T.addEventListener("timeupdate",C.time,!0),T.addEventListener("seeking",C.seeking,!0),T.addEventListener("seeked",C.seeked,!0),this},changeSource:function(m,x,y,T,S){x===void 0&&(x=!0);var C=this.video;C&&this.stop();var E=this.scene.sys.cache.video.get(m);return E?(this.video=E,this._cacheKey=m,this._codePaused=E.paused,this._codeMuted=E.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,E,E.videoWidth,E.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,E.videoWidth,E.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,E.videoWidth,E.videoHeight)):this.updateTexture(),E.currentTime=0,this._lastUpdate=0,x&&this.play(y,T,S)):this.video=null,this},addMarker:function(m,x,y){return!isNaN(x)&&x>=0&&!isNaN(y)&&(this.markers[m]=[x,y]),this},playMarker:function(m,x){var y=this.markers[m];return y&&this.play(x,y[0],y[1]),this},removeMarker:function(m){return delete this.markers[m],this},snapshot:function(m,x){return m===void 0&&(m=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,m,x)},snapshotArea:function(m,x,y,T,S,C){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.width),T===void 0&&(T=this.height),S===void 0&&(S=y),C===void 0&&(C=T);var E=this.video,P=this.snapshotTexture;return P?(P.setSize(S,C),E&&P.context.drawImage(E,m,x,y,T,0,0,S,C)):(P=this.scene.sys.textures.createCanvas(l(),S,C),this.snapshotTexture=P,E&&P.context.drawImage(E,m,x,y,T,0,0,S,C)),P.update()},saveSnapshotTexture:function(m){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,m):this.snapshotTexture=this.scene.sys.textures.createCanvas(m,this.width,this.height),this.snapshotTexture},loadURL:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");return T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0),T.src=m,T.load(),this.video=T,this},loadMediaStream:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0);try{T.srcObject=m}catch{T.src=window.URL.createObjectURL(m)}return T.load(),this.video=T,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(m){this.scene.sys.input.once(r.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(a.VIDEO_ERROR,this,m)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(m){this.stop(),this.emit(a.VIDEO_ERROR,this,m)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(a.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(a.VIDEO_PLAY,this)},completeHandler:function(){this.emit(a.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(a.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var m=this.video;if(m){var x=m.currentTime;x!==this._lastUpdate&&(this._lastUpdate=x,this.updateTexture(),x>=this._markerOut&&(m.loop?(m.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=x,this.emit(a.VIDEO_LOOP,this)):(this.emit(a.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(a.VIDEO_TIMEOUT,this))},updateTexture:function(){var m=this.video,x=m.videoWidth,y=m.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,m,x,y),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,x,y),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,x,y);else{var T=this.videoTextureSource;T.source!==m&&(T.source=m,T.width=x,T.height=y),T.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(m){var x=this.video;if(x){var y=x.duration;if(y!==1/0&&!isNaN(y)){var T=y*m;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(m){var x=this.video;if(x){if(typeof m=="string"){var y=m[0],T=parseFloat(m.substr(1));y==="+"?m=x.currentTime+T:y==="-"&&(m=x.currentTime-T)}x.currentTime=m,this._lastUpdate=m}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(a.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(a.VIDEO_SEEKED,this);var m=this.video;m&&this.updateTexture()},getProgress:function(){var m=this.video;if(m){var x=m.currentTime,y=m.duration;if(y!==1/0&&!isNaN(y))return x/y}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(m){m===void 0&&(m=!0),this._codeMuted=m;var x=this.video;return x&&(x.muted=this._systemMuted?!0:m),this},isMuted:function(){return this._codeMuted},globalMute:function(m,x){this._systemMuted=x;var y=this.video;y&&(y.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(m){m===void 0&&(m=!0);var x=this.video;return this._codePaused=m,x&&(m?x.paused||x.pause():m||x.paused&&!this._systemPaused&&x.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(m){return m===void 0&&(m=1),this.video&&(this.video.volume=u(m,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(m){return this.video&&(this.video.playbackRate=m),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(m){return m===void 0&&(m=!0),this.video&&(this.video.loop=m),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(m,x){return x===void 0&&(x=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,m),this._key=m,this.flipY=x,this.videoTextureSource&&this.videoTextureSource.setFlipY(x),this.videoTexture},stop:function(){var m=this.video;if(m){var x=this._callbacks;for(var y in x)m.removeEventListener(y,x[y],!0);m.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(a.VIDEO_STOP,this),this},removeVideoElement:function(){var m=this.video;if(!!m){for(m.parentNode&&m.parentNode.removeChild(m);m.hasChildNodes();)m.removeChild(m.firstChild);m.removeAttribute("autoplay"),m.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var m=this.scene.sys.game.events;m.off(h.PAUSE,this.globalPause,this),m.off(h.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(c.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});e.exports=g},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(228),n=t(470),a=t(56),h=new s({initialize:function(o){this.type=a.POLYGON,this.area=0,this.points=[],o&&this.setTo(o)},contains:function(r,o){return u(this,r,o)},setTo:function(r){if(this.area=0,this.points=[],typeof r=="string"&&(r=r.split(" ")),!Array.isArray(r))return this;for(var o,c=Number.MAX_VALUE,l=0;l<r.length;l++)o={x:0,y:0},typeof r[l]=="number"||typeof r[l]=="string"?(o.x=parseFloat(r[l]),o.y=parseFloat(r[l+1]),l++):Array.isArray(r[l])?(o.x=r[l][0],o.y=r[l][1]):(o.x=r[l].x,o.y=r[l].y),this.points.push(o),o.y<c&&(c=o.y);return this.calculateArea(c),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var r=0,o,c,l=0;l<this.points.length-1;l++)o=this.points[l],c=this.points[l+1],r+=(c.x-o.x)*(o.y+c.y);return o=this.points[0],c=this.points[this.points.length-1],r+=(o.x-c.x)*(c.y+o.y),this.area=-r*.5,this.area},getPoints:function(r,o,c){return n(this,r,o,c)}});e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var a=!1,h=-1,r=s.points.length-1;++h<s.points.length;r=h){var o=s.points[h].x,c=s.points[h].y,l=s.points[r].x,f=s.points[r].y;(c<=n&&n<f||f<=n&&n<c)&&u<(l-o)*(n-c)/(f-c)+o&&(a=!a)}return a};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(2),h=t(17),r=t(478),o=t(1176),c=t(25),l=new s({Extends:n,Mixins:[u.ComputedSize,u.Depth,u.GetBounds,u.Mask,u.Origin,u.ScrollFactor,u.Transform,u.Visible,o],initialize:function(p,g,m,x,y,T,S,C){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=128),T===void 0&&(T=128),n.call(this,p,"Shader"),this.blendMode=-1,this.shader;var E=p.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(m,x),this.setSize(y,T),this.setOrigin(.5,.5),this.setShader(g,S,C)},willRender:function(f){return this.renderToTexture?!0:!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&f.id)},setRenderToTexture:function(f,p){if(p===void 0&&(p=!1),!this.renderToTexture){var g=this.width,m=this.height,x=this.renderer;this.glTexture=x.createTextureFromSource(null,g,m,0),this.glTexture.flipY=p,this.framebuffer=x.createFramebuffer(g,m,this.glTexture,!1),this._rendererWidth=g,this._rendererHeight=m,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),f&&(this.texture=this.scene.sys.textures.addGLTexture(f,this.glTexture,g,m))}return this.shader&&(x.pipelines.clear(),this.load(),this.flush(),x.pipelines.rebind()),this},setShader:function(f,p,g){if(p===void 0&&(p=[]),typeof f=="string"){var m=this.scene.sys.cache.shader;if(!m.has(f))return console.warn("Shader missing: "+f),this;this.shader=m.get(f)}else this.shader=f;var x=this.gl,y=this.renderer;this.program&&x.deleteProgram(this.program);var T=y.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);x.uniformMatrix4fv(x.getUniformLocation(T,"uViewMatrix"),!1,this.viewMatrix),x.uniformMatrix4fv(x.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),x.uniform2f(x.getUniformLocation(T,"uResolution"),this.width,this.height),this.program=T;var S=new Date,C={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[S.getFullYear(),S.getMonth(),S.getDate(),S.getHours()*60*60+S.getMinutes()*60+S.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=h(!0,{},this.shader.uniforms,C):this.uniforms=C;for(var E=0;E<4;E++)p[E]&&this.setSampler2D("iChannel"+E,p[E],E,g);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(f){return this.pointer=f,this},projOrtho:function(f,p,g,m){var x=-1e3,y=1e3,T=1/(f-p),S=1/(g-m),C=1/(x-y),E=this.projectionMatrix;E[0]=-2*T,E[5]=-2*S,E[10]=2*C,E[12]=(f+p)*T,E[13]=(m+g)*S,E[14]=(y+x)*C;var P=this.program,M=this.gl,O=this.renderer;O.setProgram(P),M.uniformMatrix4fv(M.getUniformLocation(P,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=p,this._rendererHeight=g},initUniforms:function(){var f=this.gl,p=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var m in this.uniforms){var x=this.uniforms[m],y=x.type,T=p[y];x.uniformLocation=f.getUniformLocation(g,m),y!=="sampler2D"&&(x.glMatrix=T.matrix,x.glValueLength=T.length,x.glFunc=T.func)}},setSampler2DBuffer:function(f,p,g,m,x,y){x===void 0&&(x=0),y===void 0&&(y={});var T=this.uniforms[f];return T.value=p,y.width=g,y.height=m,T.textureData=y,this._textureCount=x,this.initSampler2D(T),this},setSampler2D:function(f,p,g,m){g===void 0&&(g=0);var x=this.scene.sys.textures;if(x.exists(p)){var y=x.getFrame(p);if(y.glTexture&&y.glTexture.isRenderTexture)return this.setSampler2DBuffer(f,y.glTexture,y.width,y.height,g,m);var T=this.uniforms[f],S=y.source;T.textureKey=p,T.source=S.image,T.value=y.glTexture,S.isGLTexture&&(m||(m={}),m.width=S.width,m.height=S.height),m&&(T.textureData=m),this._textureCount=g,this.initSampler2D(T)}return this},setUniform:function(f,p){return r(this.uniforms,f,p),this},getUniform:function(f){return a(this.uniforms,f,null)},setChannel0:function(f,p){return this.setSampler2D("iChannel0",f,0,p)},setChannel1:function(f,p){return this.setSampler2D("iChannel1",f,1,p)},setChannel2:function(f,p){return this.setSampler2D("iChannel2",f,2,p)},setChannel3:function(f,p){return this.setSampler2D("iChannel3",f,3,p)},initSampler2D:function(f){if(!!f.value){var p=this.gl;p.activeTexture(p.TEXTURE0+this._textureCount),p.bindTexture(p.TEXTURE_2D,f.value);var g=f.textureData;if(g&&!f.value.isRenderTexture){var m=p[a(g,"magFilter","linear").toUpperCase()],x=p[a(g,"minFilter","linear").toUpperCase()],y=p[a(g,"wrapS","repeat").toUpperCase()],T=p[a(g,"wrapT","repeat").toUpperCase()],S=p[a(g,"format","rgba").toUpperCase()];if(g.repeat&&(y=p.REPEAT,T=p.REPEAT),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,!!g.flipY),g.width){var C=a(g,"width",512),E=a(g,"height",2),P=a(g,"border",0);p.texImage2D(p.TEXTURE_2D,0,S,C,E,P,S,p.UNSIGNED_BYTE,null)}else p.texImage2D(p.TEXTURE_2D,0,S,p.RGBA,p.UNSIGNED_BYTE,f.source);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,m),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,x),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,y),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,T)}this.renderer.setProgram(this.program),p.uniform1i(f.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var f=this.gl,p=this.uniforms,g,m,x,y,T,S=0;for(var C in p)g=p[C],x=g.glFunc,m=g.glValueLength,y=g.uniformLocation,T=g.value,T!==null&&(m===1?g.glMatrix?x.call(f,y,g.transpose,T):x.call(f,y,T):m===2?x.call(f,y,T.x,T.y):m===3?x.call(f,y,T.x,T.y,T.z):m===4?x.call(f,y,T.x,T.y,T.z,T.w):g.type==="sampler2D"&&(f.activeTexture(f.TEXTURE0+S),f.bindTexture(f.TEXTURE_2D,T),f.uniform1i(y,S),S++))},load:function(f){var p=this.gl,g=this.width,m=this.height,x=this.renderer,y=this.program,T=this.viewMatrix;if(!this.renderToTexture){var S=-this._displayOriginX,C=-this._displayOriginY;T[0]=f[0],T[1]=f[1],T[4]=f[2],T[5]=f[3],T[8]=f[4],T[9]=f[5],T[12]=T[0]*S+T[4]*C,T[13]=T[1]*S+T[5]*C}p.useProgram(y),p.uniformMatrix4fv(p.getUniformLocation(y,"uViewMatrix"),!1,T),p.uniform2f(p.getUniformLocation(y,"uResolution"),this.width,this.height);var E=this.uniforms,P=E.resolution;P.value.x=g,P.value.y=m,E.time.value=x.game.loop.getDuration();var M=this.pointer;if(M){var O=E.mouse,A=M.x/g,R=1-M.y/m;O.value.x=A.toFixed(2),O.value.y=R.toFixed(2)}this.syncUniforms()},flush:function(){var f=this.width,p=this.height,g=this.program,m=this.gl,x=this.vertexBuffer,y=this.renderer,T=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(y.setFramebuffer(this.framebuffer),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT)),m.bindBuffer(m.ARRAY_BUFFER,x);var S=m.getAttribLocation(g,"inPosition");S!==-1&&(m.enableVertexAttribArray(S),m.vertexAttribPointer(S,2,m.FLOAT,!1,T,0));var C=this.vertexViewF32;C[3]=p,C[4]=f,C[5]=p,C[8]=f,C[9]=p,C[10]=f;var E=6;m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,E*T)),m.drawArrays(m.TRIANGLES,0,E),this.renderToTexture&&y.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var f=this.gl;f.deleteProgram(this.program),f.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});e.exports=l},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(36),a=t(116),h=t(15),r=t(479),o=t(480),c=t(19),l=t(69),f=t(1179),p=t(79),g=t(39),m=t(117),x=new s({Extends:h,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.Size,u.Texture,u.Transform,u.Visible,u.ScrollFactor,f],initialize:function(T,S,C,E,P,M,O,A,R,F,I,B){S===void 0&&(S=0),C===void 0&&(C=0),E===void 0&&(E="__WHITE"),h.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new l,this.viewPosition=new g,this.viewMatrix=new l,this.projectionMatrix=new l,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var N=T.sys.renderer;this.setPosition(S,C),this.setTexture(E,P),this.setSize(N.width,N.height),this.initPipeline(),this.setPerspective(N.width,N.height),M&&this.addVertices(M,O,A,R,F,I,B)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(y){return this.viewPosition.addScale(g.LEFT,y),this.dirtyCache[10]=1,this},panY:function(y){return this.viewPosition.y+=g.DOWN.y*y,this.dirtyCache[10]=1,this},panZ:function(y){return this.viewPosition.z+=y,this.dirtyCache[10]=1,this},setPerspective:function(y,T,S,C,E){return S===void 0&&(S=45),C===void 0&&(C=.01),E===void 0&&(E=1e3),this.projectionMatrix.perspective(n(S),y/T,C,E),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(y,T,S,C){return y===void 0&&(y=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),S===void 0&&(S=-1e3),C===void 0&&(C=1e3),this.projectionMatrix.ortho(-y,y,-T,T,S,C),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(y){y.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(y,T,S,C,E,P,M,O,A){var R=this.scene.sys.cache.obj.get(y);return R&&o(R,this,T,S,C,E,P,M,O,A),this},sortByDepth:function(y,T){return y.depth-T.depth},depthSort:function(){return p(this.faces,this.sortByDepth),this},addVertex:function(y,T,S,C,E,P,M){var O=new m(y,T,S,C,E,P,M);return this.vertices.push(O),O},addFace:function(y,T,S){var C=new a(y,T,S);return this.faces.push(C),this.dirtyCache[9]=-1,C},addVertices:function(y,T,S,C,E,P,M){var O=r(y,T,S,C,E,P,M);return O&&(this.faces=this.faces.concat(O.faces),this.vertices=this.vertices.concat(O.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(y){return this.faces[y]},getFaceAt:function(y,T,S){S===void 0&&(S=this.scene.sys.cameras.main);for(var C=c(this,S).calc,E=this.faces,P=[],M=0;M<E.length;M++){var O=E[M];O.contains(y,T,C)&&P.push(O)}return p(P,this.sortByDepth)},setDebug:function(y,T){return this.debugGraphic=y,!y&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var y=this.modelPosition,T=this.modelRotation,S=this.modelScale,C=this.dirtyCache,E=y.x,P=y.y,M=y.z,O=T.x,A=T.y,R=T.z,F=S.x,I=S.y,B=S.z,N=this.getFaceCount(),Y=C[0],X=C[1],W=C[2],w=C[3],L=C[4],D=C[5],b=C[6],G=C[7],z=C[8],U=C[9];return C[0]=E,C[1]=P,C[2]=M,C[3]=O,C[4]=A,C[5]=R,C[6]=F,C[7]=I,C[8]=B,C[9]=N,Y!==E||X!==P||W!==M||w!==O||L!==A||D!==R||b!==F||G!==I||z!==B||U!==N},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var y=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!y[10]&&!this.isDirty())){var T=this.width,S=this.height,C=this.viewMatrix,E=this.viewPosition;y[10]&&(C.identity(),C.translate(E),C.invert(),y[10]=0);var P=this.transformMatrix;P.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var M=E.z,O=this.faces,A=0;A<O.length;A++)O[A].transformCoordinatesLocal(P,T,S,M);this.depthSort()}},renderDebug:function(y,T){for(var S=y.debugGraphic,C=0;C<T.length;C++){var E=T[C],P=E.vertex1.tx,M=E.vertex1.ty,O=E.vertex2.tx,A=E.vertex2.ty,R=E.vertex3.tx,F=E.vertex3.ty;S.strokeTriangle(P,M,O,A,R,F)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});e.exports=x},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50),u=function(n,a){return s(n.x,n.y,a.x,a.y)<=n.radius+a.radius};e.exports=u},function(e,d,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(233),n=function(a,h,r){if(r===void 0&&(r=[]),u(a,h)){var o=a.x1,c=a.y1,l=a.x2,f=a.y2,p=h.x,g=h.y,m=h.radius,x=l-o,y=f-c,T=o-p,S=c-g,C=x*x+y*y,E=2*(x*T+y*S),P=T*T+S*S-m*m,M=E*E-4*C*P,O,A;if(M===0){var R=-E/(2*C);O=o+R*x,A=c+R*y,R>=0&&R<=1&&r.push(new s(O,A))}else if(M>0){var F=(-E-Math.sqrt(M))/(2*C);O=o+F*x,A=c+F*y,F>=0&&F<=1&&r.push(new s(O,A));var I=(-E+Math.sqrt(M))/(2*C);O=o+I*x,A=c+I*y,I>=0&&I<=1&&r.push(new s(O,A))}}return r};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66),u=t(4),n=new u,a=function(h,r,o){if(o===void 0&&(o=n),s(r,h.x1,h.y1))return o.x=h.x1,o.y=h.y1,!0;if(s(r,h.x2,h.y2))return o.x=h.x2,o.y=h.y2,!0;var c=h.x2-h.x1,l=h.y2-h.y1,f=r.x-h.x1,p=r.y-h.y1,g=c*c+l*l,m=c,x=l;if(g>0){var y=(f*c+p*l)/g;m*=y,x*=y}o.x=h.x1+m,o.y=h.y1+x;var T=m*m+x*x;return T<=g&&m*c+x*l>=0&&s(r,o.x,o.y)};e.exports=a},function(e,d,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(96),n=t(488),a=function(h,r,o){if(o===void 0&&(o=[]),n(h,r))for(var c=r.getLineA(),l=r.getLineB(),f=r.getLineC(),p=r.getLineD(),g=[new s,new s,new s,new s],m=[u(c,h,g[0]),u(l,h,g[1]),u(f,h,g[2]),u(p,h,g[3])],x=0;x<4;x++)m[x]&&o.push(g[x]);return o};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n===void 0&&(n=!1),a===void 0&&(a=[]);for(var h=s.x3-s.x1,r=s.y3-s.y1,o=s.x2-s.x1,c=s.y2-s.y1,l=h*h+r*r,f=h*o+r*c,p=o*o+c*c,g=l*p-f*f,m=g===0?0:1/g,x,y,T,S,C,E,P=s.x1,M=s.y1,O=0;O<u.length&&(T=u[O].x-P,S=u[O].y-M,C=h*T+r*S,E=o*T+c*S,x=(p*C-f*E)*m,y=(l*E-f*C)*m,!(x>=0&&y>=0&&x+y<1&&(a.push({x:u[O].x,y:u[O].y}),n)));O++);return a};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h=Math.cos(a),r=Math.sin(a),o=s.x1-u,c=s.y1-n;return s.x1=o*h-c*r+u,s.y1=o*r+c*h+n,o=s.x2-u,c=s.y2-n,s.x2=o*h-c*r+u,s.y2=o*r+c*h+n,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.height===0?NaN:s.width/s.height};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h=Math.cos(a),r=Math.sin(a),o=s.x1-u,c=s.y1-n;return s.x1=o*h-c*r+u,s.y1=o*r+c*h+n,o=s.x2-u,c=s.y2-n,s.x2=o*h-c*r+u,s.y2=o*r+c*h+n,o=s.x3-u,c=s.y3-n,s.x3=o*h-c*r+u,s.y3=o*r+c*h+n,s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BUTTON_DOWN:t(1310),BUTTON_UP:t(1311),CONNECTED:t(1312),DISCONNECTED:t(1313),GAMEPAD_BUTTON_DOWN:t(1314),GAMEPAD_BUTTON_UP:t(1315)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=t(156),n=function(a,h){var r=a===void 0?u():s({},a);if(h)for(var o in h)h[o]!==void 0&&(r[o]=h[o]);return r};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=t(408),c=new s({Extends:n,initialize:function(f,p,g,m){var x="xml";if(r(p)){var y=p;p=h(y,"key"),g=h(y,"url"),m=h(y,"xhrSettings"),x=h(y,"extension",x)}var T={type:"xml",cache:f.cacheManager.xml,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};n.call(this,f,T)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=o(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});a.register("xml",function(l,f,p){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new c(this,l[g]));else this.addFile(new c(this,l,f,p));return this}),e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=new s({Extends:n,initialize:function(l,f,p,g){var m="text",x="txt",y=l.cacheManager.text;if(r(f)){var T=f;f=h(T,"key"),p=h(T,"url"),g=h(T,"xhrSettings"),x=h(T,"extension",x),m=h(T,"type",m),y=h(T,"cache",y)}var S={type:m,cache:y,extension:x,responseType:"text",key:f,url:p,xhrSettings:g};n.call(this,l,S)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("text",function(c,l,f){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new o(this,c[p]));else this.addFile(new o(this,c,l,f));return this}),e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Acceleration:t(1368),Angular:t(1369),Bounce:t(1370),Debug:t(1371),Drag:t(1372),Enable:t(1373),Friction:t(1374),Gravity:t(1375),Immovable:t(1376),Mass:t(1377),OverlapCirc:t(523),OverlapRect:t(244),Pushable:t(1378),Size:t(1379),Velocity:t(1380)}},function(e,d){var t=function(s,u,n,a,h,r,o){r===void 0&&(r=!0),o===void 0&&(o=!1);var c=[],l=[],f=s.treeMinMax;if(f.minX=u,f.minY=n,f.maxX=u+a,f.maxY=n+h,o&&(l=s.staticTree.search(f)),r&&s.useTree)c=s.tree.search(f);else if(r){var p=s.bodies,g={position:{x:u,y:n},left:u,top:n,right:u+a,bottom:n+h,isCircle:!1},m=s.intersects;p.iterate(function(x){m(x,g)&&c.push(x)})}return l.concat(c)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COLLIDE:t(1381),OVERLAP:t(1382),PAUSE:t(1383),RESUME:t(1384),TILE_COLLIDE:t(1385),TILE_OVERLAP:t(1386),WORLD_BOUNDS:t(1387),WORLD_STEP:t(1388)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62),u=function(n,a,h,r){var o=0,c=n.deltaAbsX()+a.deltaAbsX()+r;return n._dx===0&&a._dx===0?(n.embedded=!0,a.embedded=!0):n._dx>a._dx?(o=n.right-a.x,o>c&&!h||n.checkCollision.right===!1||a.checkCollision.left===!1?o=0:(n.touching.none=!1,n.touching.right=!0,a.touching.none=!1,a.touching.left=!0,a.physicsType===s.STATIC_BODY&&!h&&(n.blocked.none=!1,n.blocked.right=!0),n.physicsType===s.STATIC_BODY&&!h&&(a.blocked.none=!1,a.blocked.left=!0))):n._dx<a._dx&&(o=n.x-a.width-a.x,-o>c&&!h||n.checkCollision.left===!1||a.checkCollision.right===!1?o=0:(n.touching.none=!1,n.touching.left=!0,a.touching.none=!1,a.touching.right=!0,a.physicsType===s.STATIC_BODY&&!h&&(n.blocked.none=!1,n.blocked.left=!0),n.physicsType===s.STATIC_BODY&&!h&&(a.blocked.none=!1,a.blocked.right=!0))),n.overlapX=o,a.overlapX=o,o};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62),u=function(n,a,h,r){var o=0,c=n.deltaAbsY()+a.deltaAbsY()+r;return n._dy===0&&a._dy===0?(n.embedded=!0,a.embedded=!0):n._dy>a._dy?(o=n.bottom-a.y,o>c&&!h||n.checkCollision.down===!1||a.checkCollision.up===!1?o=0:(n.touching.none=!1,n.touching.down=!0,a.touching.none=!1,a.touching.up=!0,a.physicsType===s.STATIC_BODY&&!h&&(n.blocked.none=!1,n.blocked.down=!0),n.physicsType===s.STATIC_BODY&&!h&&(a.blocked.none=!1,a.blocked.up=!0))):n._dy<a._dy&&(o=n.y-a.bottom,-o>c&&!h||n.checkCollision.up===!1||a.checkCollision.down===!1?o=0:(n.touching.none=!1,n.touching.up=!0,a.touching.none=!1,a.touching.down=!0,a.physicsType===s.STATIC_BODY&&!h&&(n.blocked.none=!1,n.blocked.up=!0),n.physicsType===s.STATIC_BODY&&!h&&(a.blocked.none=!1,a.blocked.down=!0))),n.overlapY=o,a.overlapY=o,o};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return!(u.right<=s.left||u.bottom<=s.top||u.position.x>=s.right||u.position.y>=s.bottom)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bounce:t(1495),Collision:t(1496),Force:t(1497),Friction:t(1498),Gravity:t(1499),Mass:t(1500),Sensor:t(1501),SetBody:t(1502),Sleep:t(1503),Static:t(1520),Transform:t(1521),Velocity:t(1522)}},function(e,d){var t={};e.exports=t,function(){t.create=function(s,u){var n=s.bodyA,a=s.bodyB,h={id:t.id(n,a),bodyA:n,bodyB:a,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:n.isSensor||a.isSensor,timeCreated:u,timeUpdated:u,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(h,s,u),h},t.update=function(s,u,n){if(s.collision=u,u.collided){var a=u.supports,h=s.activeContacts,r=u.parentA,o=u.parentB;s.inverseMass=r.inverseMass+o.inverseMass,s.friction=Math.min(r.friction,o.friction),s.frictionStatic=Math.max(r.frictionStatic,o.frictionStatic),s.restitution=Math.max(r.restitution,o.restitution),s.slop=Math.max(r.slop,o.slop);for(var c=0;c<a.length;c++)h[c]=a[c].contact;var l=a.length;l<h.length&&(h.length=l),s.separation=u.depth,t.setActive(s,!0,n)}else s.isActive===!0&&t.setActive(s,!1,n)},t.setActive=function(s,u,n){u?(s.isActive=!0,s.timeUpdated=n):(s.isActive=!1,s.activeContacts.length=0)},t.id=function(s,u){return s.id<u.id?"A"+s.id+"B"+u.id:"A"+u.id+"B"+s.id}}()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CalculateFacesAt:t(252),CalculateFacesWithin:t(63),CheckIsoBounds:t(541),Copy:t(1420),CreateFromTiles:t(1421),CullBounds:t(543),CullTiles:t(544),Fill:t(1422),FilterTiles:t(1423),FindByIndex:t(1424),FindTile:t(1425),ForEachTile:t(1426),GetCullTilesFunction:t(1427),GetTileAt:t(158),GetTileAtWorldXY:t(1428),GetTilesWithin:t(26),GetTilesWithinShape:t(1429),GetTilesWithinWorldXY:t(529),GetTileToWorldXFunction:t(1430),GetTileToWorldXYFunction:t(1431),GetTileToWorldYFunction:t(1432),GetWorldToTileXFunction:t(1433),GetWorldToTileXYFunction:t(1434),GetWorldToTileYFunction:t(1435),HasTileAt:t(562),HasTileAtWorldXY:t(1436),HexagonalCullBounds:t(546),HexagonalCullTiles:t(545),HexagonalTileToWorldXY:t(550),HexagonalTileToWorldY:t(554),HexagonalWorldToTileXY:t(556),HexagonalWorldToTileY:t(560),IsInLayerBounds:t(119),IsometricCullTiles:t(547),IsometricTileToWorldXY:t(551),IsometricWorldToTileXY:t(557),PutTileAt:t(257),PutTileAtWorldXY:t(1437),PutTilesAt:t(1438),Randomize:t(1439),RemoveTileAt:t(563),RemoveTileAtWorldXY:t(1440),RenderDebug:t(1441),ReplaceByIndex:t(542),RunCull:t(159),SetCollision:t(1442),SetCollisionBetween:t(1443),SetCollisionByExclusion:t(1444),SetCollisionByProperty:t(1445),SetCollisionFromCollisionGroup:t(1446),SetLayerCollisionIndex:t(160),SetTileCollision:t(72),SetTileIndexCallback:t(1447),SetTileLocationCallback:t(1448),Shuffle:t(1449),StaggeredCullBounds:t(549),StaggeredCullTiles:t(548),StaggeredTileToWorldXY:t(552),StaggeredTileToWorldY:t(555),StaggeredWorldToTileXY:t(558),StaggeredWorldToTileY:t(561),SwapByIndex:t(1450),TileToWorldX:t(253),TileToWorldXY:t(553),TileToWorldY:t(254),WeightedRandomize:t(1451),WorldToTileX:t(255),WorldToTileXY:t(559),WorldToTileY:t(256)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(158),u=function(n,a,h){var r=s(n,a,!0,h),o=s(n,a-1,!0,h),c=s(n,a+1,!0,h),l=s(n-1,a,!0,h),f=s(n+1,a,!0,h),p=r&&r.collides;return p&&(r.faceTop=!0,r.faceBottom=!0,r.faceLeft=!0,r.faceRight=!0),o&&o.collides&&(p&&(r.faceTop=!1),o.faceBottom=!p),c&&c.collides&&(p&&(r.faceBottom=!1),c.faceTop=!p),l&&l.collides&&(p&&(r.faceLeft=!1),l.faceRight=!p),f&&f.collides&&(p&&(r.faceRight=!1),f.faceLeft=!p),r&&!r.collides&&r.resetFaces(),r};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=n.baseTileWidth,h=n.tilemapLayer,r=0;return h&&(u||(u=h.scene.cameras.main),r=h.x+u.scrollX*(1-h.scrollFactorX),a*=h.scaleX),r+s*a};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=n.baseTileHeight,h=n.tilemapLayer,r=0;return h&&(u||(u=h.scene.cameras.main),r=h.y+u.scrollY*(1-h.scrollFactorY),a*=h.scaleY),r+s*a};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u===void 0&&(u=!0);var h=a.baseTileWidth,r=a.tilemapLayer;return r&&(n||(n=r.scene.cameras.main),s=s-(r.x+n.scrollX*(1-r.scrollFactorX)),h*=r.scaleX),u?Math.floor(s/h):s/h};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u===void 0&&(u=!0);var h=a.baseTileHeight,r=a.tilemapLayer;return r&&(n||(n=r.scene.cameras.main),s=s-(r.y+n.scrollY*(1-r.scrollFactorY)),h*=r.scaleY),u?Math.floor(s/h):s/h};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85),u=t(119),n=t(252),a=t(72),h=function(r,o,c,l,f){if(l===void 0&&(l=!0),!u(o,c,f))return null;var p=f.data[c][o],g=p&&p.collides;if(r instanceof s)f.data[c][o]===null&&(f.data[c][o]=new s(f,r.index,o,c,f.tileWidth,f.tileHeight)),f.data[c][o].copy(r);else{var m=r;f.data[c][o]===null?f.data[c][o]=new s(f,m,o,c,f.tileWidth,f.tileHeight):f.data[c][o].index=m}var x=f.data[c][o],y=f.collideIndexes.indexOf(x.index)!==-1;return a(x,y),l&&g!==x.collides&&n(o,c,f),x};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=function(n){return n=n.toLowerCase(),n==="isometric"?s.ISOMETRIC:n==="staggered"?s.STAGGERED:n==="hexagonal"?s.HEXAGONAL:s.ORTHOGONAL};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(120),n=t(121),a=t(85),h=function(r,o,c,l,f){for(var p=new u({tileWidth:c,tileHeight:l}),g=new n({name:r,tileWidth:c,tileHeight:l,format:s.ARRAY_2D,layers:[p]}),m=[],x=o.length,y=0,T=0;T<o.length;T++){m[T]=[];for(var S=o[T],C=0;C<S.length;C++){var E=parseInt(S[C],10);isNaN(E)||E===-1?m[T][C]=f?null:new a(p,-1,C,T,c,l):m[T][C]=new a(p,E,C,T,c,l)}y===0&&(y=S.length)}return g.width=p.width=y,g.height=p.height=x,g.widthInPixels=p.widthInPixels=y*c,g.heightInPixels=p.heightInPixels=x*l,p.data=m,g};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(571),u=t(261),n=function(r){return{x:r.x,y:r.y}},a=["id","name","type","rotation","properties","visible","x","y","width","height"],h=function(r,o,c){o===void 0&&(o=0),c===void 0&&(c=0);var l=s(r,a);if(l.x+=o,l.y+=c,r.gid){var f=u(r.gid);l.gid=f.gid,l.flippedHorizontal=f.flippedHorizontal,l.flippedVertical=f.flippedVertical,l.flippedAntiDiagonal=f.flippedAntiDiagonal}else r.polyline?l.polyline=r.polyline.map(n):r.polygon?l.polygon=r.polygon.map(n):r.ellipse?l.ellipse=r.ellipse:r.text?l.text=r.text:r.point?l.point=!0:l.rectangle=!0;return l};e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=2147483648,s=1073741824,u=536870912,n=function(a){var h=Boolean(a&t),r=Boolean(a&s),o=Boolean(a&u);a=a&~(t|s|u);var c=0,l=!1;return h&&r&&o?(c=Math.PI/2,l=!0):h&&r&&!o?(c=Math.PI,l=!1):h&&!r&&o?(c=Math.PI/2,l=!1):h&&!r&&!o?(c=0,l=!0):!h&&r&&o?(c=3*Math.PI/2,l=!1):!h&&r&&!o?(c=Math.PI,l=!0):!h&&!r&&o?(c=3*Math.PI/2,l=!0):!h&&!r&&!o&&(c=0,l=!1),{gid:a,flippedHorizontal:h,flippedVertical:r,flippedAntiDiagonal:o,rotation:c,flipped:l}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(121),n=t(564),a=t(580),h=function(r,o,c,l,f,p,g,m){c===void 0&&(c=32),l===void 0&&(l=32),f===void 0&&(f=10),p===void 0&&(p=10),m===void 0&&(m=!1);var x=null;if(Array.isArray(g)){var y=o!==void 0?o:"map";x=n(y,s.ARRAY_2D,g,c,l,m)}else if(o!==void 0){var T=r.cache.tilemap.get(o);T?x=n(o,T.format,T.data,c,l,m):console.warn("No map data found for key "+o)}return x===null&&(x=new u({tileWidth:c,tileHeight:l,width:f,height:p})),new a(r,x)};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=function(n){var a=s(n,"targets",null);return a===null||(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a])),a};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(h){return!!h.getActive&&typeof h.getActive=="function"}function s(h){return!!h.getStart&&typeof h.getStart=="function"}function u(h){return!!h.getEnd&&typeof h.getEnd=="function"}function n(h){return s(h)||u(h)||t(h)}var a=function(h,r){var o,c=function(E,P,M){return M},l=function(E,P,M){return M},f=null,p=typeof r;if(p==="number")c=function(){return r};else if(p==="string"){var g=r[0],m=parseFloat(r.substr(2));switch(g){case"+":c=function(E,P,M){return M+m};break;case"-":c=function(E,P,M){return M-m};break;case"*":c=function(E,P,M){return M*m};break;case"/":c=function(E,P,M){return M/m};break;default:c=function(){return parseFloat(r)}}}else if(p==="function")c=r;else if(p==="object")if(n(r))t(r)&&(f=r.getActive),u(r)&&(c=r.getEnd),s(r)&&(l=r.getStart);else if(r.hasOwnProperty("value"))o=a(h,r.value);else{var x=r.hasOwnProperty("to"),y=r.hasOwnProperty("from"),T=r.hasOwnProperty("start");if(x&&(y||T)){if(o=a(h,r.to),T){var S=a(h,r.start);o.getActive=S.getEnd}if(y){var C=a(h,r.from);o.getStart=C.getEnd}}}return o||(o={getActive:f,getEnd:c,getStart:l}),o};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(267),a=t(16),h=t(5),r=t(100),o=t(14),c=new s({Extends:u,initialize:function(f,p,g){u.call(this),this.parent=f,this.parentIsTimeline=f.hasOwnProperty("isTimeline"),this.data=p,this.totalData=p.length,this.targets=g,this.totalTargets=g.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=r.PENDING_ADD,this._pausedState=r.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(l){return l===void 0&&(l=0),this.data[l].current},setTimeScale:function(l){return this.timeScale=l,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===r.ACTIVE},isPaused:function(){return this.state===r.PAUSED},hasTarget:function(l){return this.targets.indexOf(l)!==-1},updateTo:function(l,f,p){p===void 0&&(p=!1);for(var g=0;g<this.totalData;g++){var m=this.data[g];m.key===l&&(m.end=f,p&&(m.start=m.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===r.ACTIVE?this.seek(0):this.state===r.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===r.PENDING_ADD?this:this.play()},calcDuration:function(){for(var l=0,f=o.MAX_SAFE_INTEGER,p=this.data,g=0;g<this.totalData;g++){var m=p[g];m.t1=m.duration+m.hold,m.yoyo&&(m.t1+=m.duration),m.t2=m.t1+m.repeatDelay,m.totalDuration=m.delay+m.t1,m.repeat===-1?m.totalDuration+=m.t2*999999999999:m.repeat>0&&(m.totalDuration+=m.t2*m.repeat),m.totalDuration>l&&(l=m.totalDuration),m.delay<f&&(f=m.delay)}this.duration=Math.max(l,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=f},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=r.PENDING_ADD,this._pausedState=r.INIT,!1;for(var l=this.data,f=this.totalTargets,p=0;p<this.totalData;p++){var g=l[p],m=g.target,x=g.gen,y=g.key,T=g.index;g.delay=x.delay(m,y,0,T,f,this),g.duration=Math.max(x.duration(m,y,0,T,f,this),.001),g.hold=x.hold(m,y,0,T,f,this),g.repeat=x.repeat(m,y,0,T,f,this),g.repeatDelay=x.repeatDelay(m,y,0,T,f,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=r.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(n.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=r.LOOP_DELAY):(this.state=r.ACTIVE,this.dispatchTweenEvent(n.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=r.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===r.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=r.PAUSED,this)},play:function(l){l===void 0&&(l=!1);var f=this.state;return f===r.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=r.ACTIVE,this):f===r.ACTIVE||f===r.PENDING_ADD&&this._pausedState===r.PENDING_ADD?this:!this.parentIsTimeline&&(f===r.PENDING_REMOVE||f===r.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(l),this.calculatedOffset===0?this.state=r.ACTIVE:(this.countdown=this.calculatedOffset,this.state=r.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(l),this.state=r.ACTIVE,this.makeActive()),this)},resetTweenData:function(l){for(var f=this.data,p=this.totalData,g=this.totalTargets,m=0;m<p;m++){var x=f[m],y=x.target,T=x.key,S=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,l?(x.start=x.getStartValue(y,T,x.start,S,g,this),x.end=x.getEndValue(y,T,x.end,S,g,this),x.current=x.start,x.state=r.PLAYING_FORWARD):x.state=r.PENDING_RENDER,x.delay>0&&(x.elapsed=x.delay,x.state=r.DELAY),x.getActiveValue&&(y[T]=x.getActiveValue(x.target,x.key,x.start))}},resume:function(){return this.state===r.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(l,f){f===void 0&&(f=16.6),this.state===r.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var p=this.data,g=this.totalTargets,m=0;m<this.totalData;m++){var x=p[m],y=x.target,T=x.gen,S=x.key,C=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,x.delay=T.delay(y,S,0,C,g,this),x.duration=Math.max(T.duration(y,S,0,C,g,this),.001),x.hold=T.hold(y,S,0,C,g,this),x.repeat=T.repeat(y,S,0,C,g,this),x.repeatDelay=T.repeatDelay(y,S,0,C,g,this),x.current=x.start,x.state=r.PLAYING_FORWARD,this.updateTweenData(this,x,0,C,g),x.delay>0&&(x.elapsed=x.delay,x.state=r.DELAY)}this.calcDuration();var E=!1;this.state===r.PAUSED&&(E=!0,this.state=r.ACTIVE),this.isSeeking=!0;do this.update(0,f);while(this.totalProgress<l);return this.isSeeking=!1,E&&(this.state=r.PAUSED),this},setCallback:function(l,f,p,g){return this.callbacks[l]={func:f,scope:g,params:p},this},complete:function(l){return l===void 0&&(l=0),l?(this.state=r.COMPLETE_DELAY,this.countdown=l):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(l){return this.state===r.ACTIVE&&l!==void 0&&this.seek(l),this.state!==r.REMOVED&&((this.state===r.PAUSED||this.state===r.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(n.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=r.PENDING_REMOVE),this},update:function(l,f){if(this.state===r.PAUSED)return!1;switch(this.useFrames&&(f=1*this.parent.timeScale),f*=this.timeScale,this.elapsed+=f,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=f,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case r.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=f,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(n.TWEEN_START,this.callbacks.onStart)));for(var p=!1,g=0;g<this.totalData;g++){var m=this.data[g];this.updateTweenData(this,m,f)&&(p=!0)}p||this.nextState();break;case r.LOOP_DELAY:this.countdown-=f,this.countdown<=0&&(this.state=r.ACTIVE,this.dispatchTweenEvent(n.TWEEN_LOOP,this.callbacks.onLoop));break;case r.OFFSET_DELAY:this.countdown-=f,this.countdown<=0&&(this.state=r.ACTIVE);break;case r.COMPLETE_DELAY:this.countdown-=f,this.countdown<=0&&(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===r.PENDING_REMOVE},dispatchTweenDataEvent:function(l,f,p){this.isSeeking||(this.emit(l,this,p.key,p.target,p.current,p.previous),f&&(f.params[1]=p.target,f.func.apply(f.scope,f.params)))},dispatchTweenEvent:function(l,f){this.isSeeking||(this.emit(l,this,this.targets),f&&(f.params[1]=this.targets,f.func.apply(f.scope,f.params)))},setStateFromEnd:function(l,f,p){return f.yoyo?(f.elapsed=p,f.progress=p/f.duration,f.flipX&&f.target.toggleFlipX(),f.flipY&&f.target.toggleFlipY(),this.dispatchTweenDataEvent(n.TWEEN_YOYO,l.callbacks.onYoyo,f),f.start=f.getStartValue(f.target,f.key,f.start,f.index,l.totalTargets,l),r.PLAYING_BACKWARD):f.repeatCounter>0?(f.repeatCounter--,f.elapsed=p,f.progress=p/f.duration,f.flipX&&f.target.toggleFlipX(),f.flipY&&f.target.toggleFlipY(),f.start=f.getStartValue(f.target,f.key,f.start,f.index,l.totalTargets,l),f.end=f.getEndValue(f.target,f.key,f.start,f.index,l.totalTargets,l),f.repeatDelay>0?(f.elapsed=f.repeatDelay-p,f.current=f.start,f.target[f.key]=f.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(n.TWEEN_REPEAT,l.callbacks.onRepeat,f),r.PLAYING_FORWARD)):r.COMPLETE},setStateFromStart:function(l,f,p){return f.repeatCounter>0?(f.repeatCounter--,f.elapsed=p,f.progress=p/f.duration,f.flipX&&f.target.toggleFlipX(),f.flipY&&f.target.toggleFlipY(),f.end=f.getEndValue(f.target,f.key,f.start,f.index,l.totalTargets,l),f.repeatDelay>0?(f.elapsed=f.repeatDelay-p,f.current=f.start,f.target[f.key]=f.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(n.TWEEN_REPEAT,l.callbacks.onRepeat,f),r.PLAYING_FORWARD)):r.COMPLETE},updateTweenData:function(l,f,p){var g=f.target;switch(f.state){case r.PLAYING_FORWARD:case r.PLAYING_BACKWARD:if(!g){f.state=r.COMPLETE;break}var m=f.elapsed,x=f.duration,y=0;m+=p,m>x&&(y=m-x,m=x);var T=f.state===r.PLAYING_FORWARD,S=m/x;if(f.elapsed=m,f.progress=S,f.previous=f.current,S===1)T?(f.current=f.end,g[f.key]=f.end,f.hold>0?(f.elapsed=f.hold-y,f.state=r.HOLD_DELAY):f.state=this.setStateFromEnd(l,f,y)):(f.current=f.start,g[f.key]=f.start,f.state=this.setStateFromStart(l,f,y));else{var C=T?f.ease(S):f.ease(1-S);f.current=f.start+(f.end-f.start)*C,g[f.key]=f.current}this.dispatchTweenDataEvent(n.TWEEN_UPDATE,l.callbacks.onUpdate,f);break;case r.DELAY:f.elapsed-=p,f.elapsed<=0&&(f.elapsed=Math.abs(f.elapsed),f.state=r.PENDING_RENDER);break;case r.REPEAT_DELAY:f.elapsed-=p,f.elapsed<=0&&(f.elapsed=Math.abs(f.elapsed),f.state=r.PLAYING_FORWARD,this.dispatchTweenDataEvent(n.TWEEN_REPEAT,l.callbacks.onRepeat,f));break;case r.HOLD_DELAY:f.elapsed-=p,f.elapsed<=0&&(f.state=this.setStateFromEnd(l,f,Math.abs(f.elapsed)));break;case r.PENDING_RENDER:g?(f.start=f.getStartValue(g,f.key,g[f.key],f.index,l.totalTargets,l),f.end=f.getEndValue(g,f.key,f.start,f.index,l.totalTargets,l),f.current=f.start,g[f.key]=f.start,f.state=r.PLAYING_FORWARD):f.state=r.COMPLETE;break}return f.state!==r.COMPLETE}});c.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],h.register("tween",function(l){return this.scene.sys.tweens.add(l)}),a.register("tween",function(l){return this.scene.sys.tweens.create(l)}),e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TIMELINE_COMPLETE:t(1466),TIMELINE_LOOP:t(1467),TIMELINE_PAUSE:t(1468),TIMELINE_RESUME:t(1469),TIMELINE_START:t(1470),TIMELINE_UPDATE:t(1471),TWEEN_ACTIVE:t(1472),TWEEN_COMPLETE:t(1473),TWEEN_LOOP:t(1474),TWEEN_REPEAT:t(1475),TWEEN_START:t(1476),TWEEN_STOP:t(1477),TWEEN_UPDATE:t(1478),TWEEN_YOYO:t(1479)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h,r,o,c,l,f,p,g,m,x,y){return{target:s,index:u,key:n,getActiveValue:r,getEndValue:a,getStartValue:h,ease:o,duration:0,totalDuration:0,delay:0,yoyo:f,hold:0,repeat:0,repeatDelay:0,flipX:x,flipY:y,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:c,duration:l,hold:p,repeat:g,repeatDelay:m},state:0}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68),u=function(n){return s(n,-Math.PI,Math.PI)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68),u=function(n){return s(n,-180,180)};e.exports=u},function(e,d,t){var s={};e.exports=s;var u=t(83),n=t(32);(function(){s.fromVertices=function(a){for(var h={},r=0;r<a.length;r++){var o=(r+1)%a.length,c=u.normalise({x:a[o].y-a[r].y,y:a[r].x-a[o].x}),l=c.y===0?1/0:c.x/c.y;l=l.toFixed(3).toString(),h[l]=c}return n.values(h)},s.rotate=function(a,h){if(h!==0)for(var r=Math.cos(h),o=Math.sin(h),c=0;c<a.length;c++){var l=a[c],f;f=l.x*r-l.y*o,l.y=l.x*o+l.y*r,l.x=f}}})()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_ADD:t(1504),AFTER_REMOVE:t(1505),AFTER_UPDATE:t(1506),BEFORE_ADD:t(1507),BEFORE_REMOVE:t(1508),BEFORE_UPDATE:t(1509),COLLISION_ACTIVE:t(1510),COLLISION_END:t(1511),COLLISION_START:t(1512),DRAG_END:t(1513),DRAG:t(1514),DRAG_START:t(1515),PAUSE:t(1516),RESUME:t(1517),SLEEP_END:t(1518),SLEEP_START:t(1519)}},function(e,d,t){var s={};e.exports=s;var u=t(274),n=t(250),a=t(84);(function(){s.collisions=function(h,r){for(var o=[],c=r.pairs.table,l=r.metrics,f=0;f<h.length;f++){var p=h[f][0],g=h[f][1];if(!((p.isStatic||p.isSleeping)&&(g.isStatic||g.isSleeping))&&!!s.canCollide(p.collisionFilter,g.collisionFilter)&&(l.midphaseTests+=1,a.overlaps(p.bounds,g.bounds)))for(var m=p.parts.length>1?1:0;m<p.parts.length;m++)for(var x=p.parts[m],y=g.parts.length>1?1:0;y<g.parts.length;y++){var T=g.parts[y];if(x===p&&T===g||a.overlaps(x.bounds,T.bounds)){var S=n.id(x,T),C=c[S],E;C&&C.isActive?E=C.collision:E=null;var P=u.collides(x,T,E);l.narrowphaseTests+=1,P.reused&&(l.narrowReuseCount+=1),P.collided&&(o.push(P),l.narrowDetections+=1)}}}return o},s.canCollide=function(h,r){return h.group===r.group&&h.group!==0?h.group>0:(h.mask&r.category)!==0&&(r.mask&h.category)!==0}})()},function(e,d,t){var s={};e.exports=s;var u=t(64),n=t(83);(function(){s.collides=function(a,h,r){var o,c,l,f,p=!1;if(r){var g=a.parent,m=h.parent,x=g.speed*g.speed+g.angularSpeed*g.angularSpeed+m.speed*m.speed+m.angularSpeed*m.angularSpeed;p=r&&r.collided&&x<.2,f=r}else f={collided:!1,bodyA:a,bodyB:h};if(r&&p){var y=f.axisBody,T=y===a?h:a,S=[y.axes[r.axisNumber]];if(l=s._overlapAxes(y.vertices,T.vertices,S),f.reused=!0,l.overlap<=0)return f.collided=!1,f}else{if(o=s._overlapAxes(a.vertices,h.vertices,a.axes),o.overlap<=0||(c=s._overlapAxes(h.vertices,a.vertices,h.axes),c.overlap<=0))return f.collided=!1,f;o.overlap<c.overlap?(l=o,f.axisBody=a):(l=c,f.axisBody=h),f.axisNumber=l.axisNumber}f.bodyA=a.id<h.id?a:h,f.bodyB=a.id<h.id?h:a,f.collided=!0,f.depth=l.overlap,f.parentA=f.bodyA.parent,f.parentB=f.bodyB.parent,a=f.bodyA,h=f.bodyB,n.dot(l.axis,n.sub(h.position,a.position))<0?f.normal={x:l.axis.x,y:l.axis.y}:f.normal={x:-l.axis.x,y:-l.axis.y},f.tangent=n.perp(f.normal),f.penetration=f.penetration||{},f.penetration.x=f.normal.x*f.depth,f.penetration.y=f.normal.y*f.depth;var C=s._findSupports(a,h,f.normal),E=[];if(u.contains(a.vertices,C[0])&&E.push(C[0]),u.contains(a.vertices,C[1])&&E.push(C[1]),E.length<2){var P=s._findSupports(h,a,n.neg(f.normal));u.contains(h.vertices,P[0])&&E.push(P[0]),E.length<2&&u.contains(h.vertices,P[1])&&E.push(P[1])}return E.length<1&&(E=[C[0]]),f.supports=E,f},s._overlapAxes=function(a,h,r){for(var o=n._temp[0],c=n._temp[1],l={overlap:Number.MAX_VALUE},f,p,g=0;g<r.length;g++){if(p=r[g],s._projectToAxis(o,a,p),s._projectToAxis(c,h,p),f=Math.min(o.max-c.min,c.max-o.min),f<=0)return l.overlap=f,l;f<l.overlap&&(l.overlap=f,l.axis=p,l.axisNumber=g)}return l},s._projectToAxis=function(a,h,r){for(var o=n.dot(h[0],r),c=o,l=1;l<h.length;l+=1){var f=n.dot(h[l],r);f>c?c=f:f<o&&(o=f)}a.min=o,a.max=c},s._findSupports=function(a,h,r){for(var o=Number.MAX_VALUE,c=n._temp[0],l=h.vertices,f=a.position,p,g,m,x,y=0;y<l.length;y++)g=l[y],c.x=g.x-f.x,c.y=g.y-f.y,p=-n.dot(r,c),p<o&&(o=p,m=g);var T=m.index-1>=0?m.index-1:l.length-1;g=l[T],c.x=g.x-f.x,c.y=g.y-f.y,o=-n.dot(r,c),x=g;var S=(m.index+1)%l.length;return g=l[S],c.x=g.x-f.x,c.y=g.y-f.y,p=-n.dot(r,c),p<o&&(x=g),[m,x]}})()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AlignTo:t(601),Angle:t(602),Call:t(603),GetFirst:t(604),GetLast:t(605),GridAlign:t(606),IncAlpha:t(678),IncX:t(679),IncXY:t(680),IncY:t(681),PlaceOnCircle:t(682),PlaceOnEllipse:t(683),PlaceOnLine:t(684),PlaceOnRectangle:t(685),PlaceOnTriangle:t(686),PlayAnimation:t(687),PropertyValueInc:t(46),PropertyValueSet:t(27),RandomCircle:t(688),RandomEllipse:t(689),RandomLine:t(690),RandomRectangle:t(691),RandomTriangle:t(692),Rotate:t(693),RotateAround:t(694),RotateAroundDistance:t(695),ScaleX:t(696),ScaleXY:t(697),ScaleY:t(698),SetAlpha:t(699),SetBlendMode:t(700),SetDepth:t(701),SetHitArea:t(702),SetOrigin:t(703),SetRotation:t(704),SetScale:t(705),SetScaleX:t(706),SetScaleY:t(707),SetScrollFactor:t(708),SetScrollFactorX:t(709),SetScrollFactorY:t(710),SetTint:t(711),SetVisible:t(712),SetX:t(713),SetXY:t(714),SetY:t(715),ShiftPosition:t(716),Shuffle:t(717),SmootherStep:t(718),SmoothStep:t(719),Spread:t(720),ToggleVisible:t(721),WrapInRectangle:t(722)}},function(e,d,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(123),u=[];u[s.BOTTOM_CENTER]=t(277),u[s.BOTTOM_LEFT]=t(278),u[s.BOTTOM_RIGHT]=t(279),u[s.LEFT_BOTTOM]=t(280),u[s.LEFT_CENTER]=t(281),u[s.LEFT_TOP]=t(282),u[s.RIGHT_BOTTOM]=t(283),u[s.RIGHT_CENTER]=t(284),u[s.RIGHT_TOP]=t(285),u[s.TOP_CENTER]=t(286),u[s.TOP_LEFT]=t(287),u[s.TOP_RIGHT]=t(288);var n=function(a,h,r,o,c){return u[r](a,h,o,c)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(87),n=t(88),a=t(52),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),n(r,u(o)+c),a(r,s(o)+l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(43),n=t(53),a=t(52),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),n(r,u(o)-c),a(r,s(o)+l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(44),n=t(54),a=t(52),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),n(r,u(o)+c),a(r,s(o)+l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(43),n=t(55),a=t(54),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),a(r,u(o)-c),n(r,s(o)+l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89),u=t(43),n=t(90),a=t(54),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),a(r,u(o)-c),n(r,s(o)+l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(43),u=t(45),n=t(54),a=t(52),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),n(r,s(o)-c),a(r,u(o)-l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(44),n=t(55),a=t(53),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),a(r,u(o)+c),n(r,s(o)+l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89),u=t(44),n=t(90),a=t(53),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),a(r,u(o)+c),n(r,s(o)+l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44),u=t(45),n=t(53),a=t(52),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),n(r,s(o)+c),a(r,u(o)-l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(87),u=t(45),n=t(55),a=t(88),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),a(r,s(o)+c),n(r,u(o)-l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(43),u=t(45),n=t(55),a=t(53),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),a(r,s(o)-c),n(r,u(o)-l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44),u=t(45),n=t(55),a=t(54),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),a(r,s(o)+c),n(r,u(o)-l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(123),u=[];u[s.BOTTOM_CENTER]=t(290),u[s.BOTTOM_LEFT]=t(291),u[s.BOTTOM_RIGHT]=t(292),u[s.CENTER]=t(293),u[s.LEFT_CENTER]=t(295),u[s.RIGHT_CENTER]=t(296),u[s.TOP_CENTER]=t(297),u[s.TOP_LEFT]=t(298),u[s.TOP_RIGHT]=t(299),u[s.LEFT_BOTTOM]=u[s.BOTTOM_LEFT],u[s.LEFT_TOP]=u[s.TOP_LEFT],u[s.RIGHT_BOTTOM]=u[s.BOTTOM_RIGHT],u[s.RIGHT_TOP]=u[s.TOP_RIGHT];var n=function(a,h,r,o,c){return u[r](a,h,o,c)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(87),n=t(55),a=t(88),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),a(r,u(o)+c),n(r,s(o)+l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(43),n=t(55),a=t(53),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),a(r,u(o)-c),n(r,s(o)+l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(44),n=t(55),a=t(54),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),a(r,u(o)+c),n(r,s(o)+l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(294),u=t(87),n=t(89),a=function(h,r,o,c){return o===void 0&&(o=0),c===void 0&&(c=0),s(h,u(r)+o,n(r)+c),h};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88),u=t(90),n=function(a,h,r){return s(a,h),u(a,r)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89),u=t(43),n=t(90),a=t(53),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),a(r,u(o)-c),n(r,s(o)+l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89),u=t(44),n=t(90),a=t(54),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),a(r,u(o)+c),n(r,s(o)+l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(87),u=t(45),n=t(88),a=t(52),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),n(r,s(o)+c),a(r,u(o)-l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(43),u=t(45),n=t(53),a=t(52),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),n(r,s(o)-c),a(r,u(o)-l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44),u=t(45),n=t(54),a=t(52),h=function(r,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),n(r,s(o)+c),a(r,u(o)-l),r};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(169),u=t(98),n=t(14),a=t(4),h=function(r,o,c){c===void 0&&(c=new a);var l=u(o,0,n.PI2);return s(r,l,c)};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(302),u=t(169),n=t(98),a=t(14),h=function(r,o,c,l){l===void 0&&(l=[]),!o&&c>0&&(o=s(r)/c);for(var f=0;f<o;f++){var p=n(f/o,0,a.PI2);l.push(u(r,p))}return l};e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 2*(Math.PI*s.radius)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=2,n={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a){return a===void 0&&(a=1),this.alpha=a,this},alpha:{get:function(){return this._alpha},set:function(a){var h=s(a,0,1);this._alpha=h,h===0?this.renderFlags&=~u:this.renderFlags|=u}}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u={_blendMode:s.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(n){typeof n=="string"&&(n=s[n]),n|=0,n>=-1&&(this._blendMode=n)}},setBlendMode:function(n){return this.blendMode=n,this}};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_depth:0,depth:{get:function(){return this._depth},set:function(s){this.displayList&&this.displayList.queueDepthSort(),this._depth=s}},setDepth:function(s){return s===void 0&&(s=0),this.depth=s,this}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(171),u=t(130),n=function(a,h,r,o){o===void 0&&(o=[]),!h&&r>0&&(h=u(a)/r);for(var c=0;c<h;c++){var l=c/h;o.push(s(a,l))}return o};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,h){return h===void 0&&(h=new s),h.x=n.x1+(n.x2-n.x1)*a,h.y=n.y1+(n.y2-n.y1)*a,h};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h=Math.cos(a),r=Math.sin(a),o=s.x-u,c=s.y-n;return s.x=o*h-c*r+u,s.y=o*r+c*h+n,s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(310),u=t(311),n={mask:null,setMask:function(a){return this.mask=a,this},clearMask:function(a){return a===void 0&&(a=!1),a&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(a){return a===void 0&&(this.texture||this.shader)&&(a=this),new s(this.scene,a)},createGeometryMask:function(a){return a===void 0&&this.type==="Graphics"&&(a=this),new u(this.scene,a)}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(22),n=t(91),a=new s({initialize:function(r,o){var c=r.sys.renderer;this.renderer=c,this.bitmapMask=o,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),r.sys.game.events.on(u.CONTEXT_RESTORED,this.createMask,this),c&&c.on(n.RESIZE,this.createMask,this)},createMask:function(){var h=this.renderer;if(!(!h||!h.gl)){this.mainTexture&&this.clearMask();var r=h.width,o=h.height,c=(r&r-1)===0&&(o&o-1)===0,l=h.gl,f=c?l.REPEAT:l.CLAMP_TO_EDGE,p=l.LINEAR;this.mainTexture=h.createTexture2D(0,p,p,f,f,l.RGBA,null,r,o),this.maskTexture=h.createTexture2D(0,p,p,f,f,l.RGBA,null,r,o),this.mainFramebuffer=h.createFramebuffer(r,o,this.mainTexture,!0),this.maskFramebuffer=h.createFramebuffer(r,o,this.maskTexture,!0)}},clearMask:function(){var h=this.renderer;!h||!h.gl||!this.mainTexture||(h.deleteTexture(this.mainTexture),h.deleteTexture(this.maskTexture),h.deleteFramebuffer(this.mainFramebuffer),h.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(h){this.bitmapMask=h},preRenderWebGL:function(h,r,o){h.pipelines.BITMAPMASK_PIPELINE.beginMask(this,r,o)},postRenderWebGL:function(h,r){h.pipelines.BITMAPMASK_PIPELINE.endMask(this,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(n.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,h){this.geometryMask=h,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(n){return this.geometryMask=n,this},setInvertAlpha:function(n){return n===void 0&&(n=!0),this.invertAlpha=n,this},preRenderWebGL:function(n,a,h){var r=n.gl;n.flush(),n.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),n.maskCount=0),n.currentCameraMask.mask!==this&&(n.currentMask.mask=this),n.maskStack.push({mask:this,camera:h}),this.applyStencil(n,h,!0),n.maskCount++},applyStencil:function(n,a,h){var r=n.gl,o=this.geometryMask,c=n.maskCount;r.colorMask(!1,!1,!1,!1),h?(r.stencilFunc(r.EQUAL,c,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,c+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),o.renderWebGL(n,o,a),n.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),h?this.invertAlpha?r.stencilFunc(r.NOTEQUAL,c+1,255):r.stencilFunc(r.EQUAL,c+1,255):this.invertAlpha?r.stencilFunc(r.NOTEQUAL,c,255):r.stencilFunc(r.EQUAL,c,255)},postRenderWebGL:function(n){var a=n.gl;n.maskStack.pop(),n.maskCount--,n.flush();var h=n.currentMask;if(n.maskStack.length===0)h.mask=null,a.disable(a.STENCIL_TEST);else{var r=n.maskStack[n.maskStack.length-1];r.mask.applyStencil(n,r.camera,!1),n.currentCameraMask.mask!==r.mask?(h.mask=r.mask,h.camera=r.camera):h.mask=null}},preRenderCanvas:function(n,a,h){var r=this.geometryMask;n.currentContext.save(),r.renderCanvas(n,r,h,null,null,!0),n.currentContext.clip()},postRenderCanvas:function(n){n.currentContext.restore()},destroy:function(){this.geometryMask=null}});e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(s,u){return u===void 0&&(u=s),this.scrollFactorX=s,this.scrollFactorY=u,this}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(25),n=t(177),a=t(269),h=t(270),r=t(3),o=4,c={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(l){this._scaleX=l,this._scaleY=l,l===0?this.renderFlags&=~o:this.renderFlags|=o}},scaleX:{get:function(){return this._scaleX},set:function(l){this._scaleX=l,l===0?this.renderFlags&=~o:this.renderFlags|=o}},scaleY:{get:function(){return this._scaleY},set:function(l){this._scaleY=l,l===0?this.renderFlags&=~o:this.renderFlags|=o}},angle:{get:function(){return h(this._rotation*s.RAD_TO_DEG)},set:function(l){this.rotation=h(l)*s.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(l){this._rotation=a(l)}},setPosition:function(l,f,p,g){return l===void 0&&(l=0),f===void 0&&(f=l),p===void 0&&(p=0),g===void 0&&(g=0),this.x=l,this.y=f,this.z=p,this.w=g,this},copyPosition:function(l){return l.x!==void 0&&(this.x=l.x),l.y!==void 0&&(this.y=l.y),l.z!==void 0&&(this.z=l.z),l.w!==void 0&&(this.w=l.w),this},setRandomPosition:function(l,f,p,g){return l===void 0&&(l=0),f===void 0&&(f=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=l+Math.random()*p,this.y=f+Math.random()*g,this},setRotation:function(l){return l===void 0&&(l=0),this.rotation=l,this},setAngle:function(l){return l===void 0&&(l=0),this.angle=l,this},setScale:function(l,f){return l===void 0&&(l=1),f===void 0&&(f=l),this.scaleX=l,this.scaleY=f,this},setX:function(l){return l===void 0&&(l=0),this.x=l,this},setY:function(l){return l===void 0&&(l=0),this.y=l,this},setZ:function(l){return l===void 0&&(l=0),this.z=l,this},setW:function(l){return l===void 0&&(l=0),this.w=l,this},getLocalTransformMatrix:function(l){return l===void 0&&(l=new u),l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(l,f){l===void 0&&(l=new u),f===void 0&&(f=new u);var p=this.parentContainer;if(!p)return this.getLocalTransformMatrix(l);for(l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);p;)f.applyITRS(p.x,p.y,p._rotation,p._scaleX,p._scaleY),f.multiply(l,l),p=p.parentContainer;return l},getLocalPoint:function(l,f,p,g){p||(p=new r),g||(g=this.scene.sys.cameras.main);var m=g.scrollX,x=g.scrollY,y=l+m*this.scrollFactorX-m,T=f+x*this.scrollFactorY-x;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(y,T,p):n(y,T,this.x,this.y,this.rotation,this.scaleX,this.scaleY,p),this._originComponent&&(p.x+=this._displayOriginX,p.y+=this._displayOriginY),p},getParentRotation:function(){for(var l=0,f=this.parentContainer;f;)l+=f.rotation,f=f.parentContainer;return l}};e.exports=c},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=1,s={_visible:!0,visible:{get:function(){return this._visible},set:function(u){u?(this._visible=!0,this.renderFlags|=t):(this._visible=!1,this.renderFlags&=~t)}},setVisible:function(u){return this.visible=u,this}};e.exports=s},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CHANGE_DATA:t(638),CHANGE_DATA_KEY:t(639),DESTROY:t(640),REMOVE_DATA:t(641),SET_DATA:t(642)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(130),u=t(4),n=function(a,h,r,o){if(o===void 0&&(o=[]),!h&&!r)return o;h?r=Math.round(s(a)/h):h=s(a)/r;for(var c=a.x,l=a.y,f=0,p=0;p<r;p++)switch(o.push(new u(c,l)),f){case 0:c+=h,c>=a.right&&(f=1,l+=c-a.right,c=a.right);break;case 1:l+=h,l>=a.bottom&&(f=2,c-=l-a.bottom,l=a.bottom);break;case 2:c-=h,c<=a.left&&(f=3,l-=a.left-c,c=a.left);break;case 3:l-=h,l<=a.top&&(f=0,l=a.top);break}return o};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=1),n===void 0&&(n=[]);var a=Math.round(s.x1),h=Math.round(s.y1),r=Math.round(s.x2),o=Math.round(s.y2),c=Math.abs(r-a),l=Math.abs(o-h),f=a<r?1:-1,p=h<o?1:-1,g=c-l;n.push({x:a,y:h});for(var m=1;!(a===r&&h===o);){var x=g<<1;x>-l&&(g-=l,a+=f),x<c&&(g+=c,h+=p),m%u===0&&n.push({x:a,y:h}),m++}return n};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u.length){if(u.length===1)return u[0]}else return NaN;var a=1,h,r;if(n){if(s<u[0][n])return u[0];for(;u[a][n]<s;)a++}else for(;u[a]<s;)a++;return a>u.length&&(a=u.length),n?(h=u[a-1][n],r=u[a][n],r-s<=s-h?u[a]:u[a-1]):(h=u[a-1],r=u[a],r-s<=s-h?r:h)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,h,r,o,c){c===void 0&&(c=!1),this.textureKey=a,this.textureFrame=h,this.index=r,this.frame=o,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=c},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=/\D/g;return s.sort(function(n,a){return parseInt(n.replace(u,""),10)-parseInt(a.replace(u,""),10)}),s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(185),u=t(0),n=t(102),a=t(9),h=t(132),r=t(22),o=t(2),c=t(6),l=t(186),f=t(322),p=new u({Extends:a,initialize:function(m){a.call(this),this.game=m,this.textureManager=null,this.globalTimeScale=1,this.anims=new n,this.mixes=new n,this.paused=!1,this.name="AnimationManager",m.events.once(r.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(r.DESTROY,this.destroy,this)},addMix:function(g,m,x){var y=this.anims,T=this.mixes,S=typeof g=="string"?g:g.key,C=typeof m=="string"?m:m.key;if(y.has(S)&&y.has(C)){var E=T.get(S);E||(E={}),E[C]=x,T.set(S,E)}return this},removeMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=x.get(y);if(T)if(m){var S=typeof m=="string"?m:m.key;T.hasOwnProperty(S)&&delete T[S]}else m||x.delete(y);return this},getMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=typeof m=="string"?m:m.key,S=x.get(y);return S&&S.hasOwnProperty(T)?S[T]:0},add:function(g,m){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(m.key=g,this.anims.set(g,m),this.emit(h.ADD_ANIMATION,g,m),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,m){var x=[],y=this.game.cache.json.get(g);if(!y)return x;var T=this,S=c(y,"meta",null),C=c(y,"frames",null);if(S&&C){var E=c(S,"frameTags",[]);E.forEach(function(P){var M=[],O=o(P,"name",null),A=o(P,"from",0),R=o(P,"to",0),F=o(P,"direction","forward");if(!!O&&(!m||m&&m.indexOf(O)>-1)){for(var I=[],B=Number.MAX_SAFE_INTEGER,N=A;N<=R;N++){var Y=N.toString(),X=C[Y];if(X){var W=o(X,"duration",Number.MAX_SAFE_INTEGER);W<B&&(B=W),I.push({frame:Y,duration:W})}}I.forEach(function(b){M.push({key:g,frame:b.frame,duration:B-b.duration})});var w=B*M.length;F==="reverse"&&(M=M.reverse());var L={key:O,frames:M,duration:w,yoyo:F==="pingpong"},D=T.create(L);D&&x.push(D)}})}return x},create:function(g){var m=g.key,x=!1;return m&&(x=this.get(m),x||(x=new s(this,m,g),this.anims.set(m,x),this.emit(h.ADD_ANIMATION,m,x))),x},fromJSON:function(g,m){m===void 0&&(m=!1),m&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var x=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var y=0;y<g.anims.length;y++)x.push(this.create(g.anims[y]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&x.push(this.create(g));return x},generateFrameNames:function(g,m){var x=c(m,"prefix",""),y=c(m,"start",0),T=c(m,"end",0),S=c(m,"suffix",""),C=c(m,"zeroPad",0),E=c(m,"outputArray",[]),P=c(m,"frames",!1),M=this.textureManager.get(g);if(!M)return E;var O;if(m)for(P||(P=f(y,T)),O=0;O<P.length;O++){var A=x+l(P[O],C,"0",1)+S;M.has(A)?E.push({key:g,frame:A}):console.warn("generateFrameNames: Frame missing: "+A+" from texture: "+g)}else for(P=M.getFrameNames(),O=0;O<P.length;O++)E.push({key:g,frame:P[O]});return E},generateFrameNumbers:function(g,m){var x=c(m,"start",0),y=c(m,"end",-1),T=c(m,"first",!1),S=c(m,"outputArray",[]),C=c(m,"frames",!1),E=this.textureManager.get(g);if(!E)return S;T&&E.has(T)&&S.push({key:g,frame:T}),C||(y===-1&&(y=E.frameTotal-2),C=f(x,y));for(var P=0;P<C.length;P++)E.has(C[P])?S.push({key:g,frame:C[P]}):console.warn("generateFrameNumbers: Frame "+P+" missing from texture: "+g);return S},get:function(g){return this.anims.get(g)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(h.PAUSE_ALL)),this},play:function(g,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)m[x].anims.play(g);return this},staggerPlay:function(g,m,x,y){x===void 0&&(x=0),y===void 0&&(y=!0),Array.isArray(m)||(m=[m]);var T=m.length;y||T--;for(var S=0;S<m.length;S++){var C=x<0?Math.abs(x)*(T-S):x*S;m[S].anims.playAfterDelay(g,C)}return this},remove:function(g){var m=this.get(g);return m&&(this.emit(h.REMOVE_ANIMATION,g,m),this.anims.delete(g),this.removeMix(g)),m},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(h.RESUME_ALL)),this},toJSON:function(g){var m={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?m.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(x,y){m.anims.push(y.toJSON())}),m},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});e.exports=p},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h=[],r,o=!1;if((n||a)&&(o=!0,n||(n=""),a||(a="")),u<s)for(r=s;r>=u;r--)o?h.push(n+r.toString()+a):h.push(r);else for(r=s;r<=u;r++)o?h.push(n+r.toString()+a):h.push(r);return h};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(102),n=t(9),a=t(324),h=new s({initialize:function(){this.entries=new u,this.events=new n},add:function(r,o){return this.entries.set(r,o),this.events.emit(a.ADD,this,r,o),this},has:function(r){return this.entries.has(r)},exists:function(r){return this.entries.has(r)},get:function(r){return this.entries.get(r)},remove:function(r){var o=this.get(r);return o&&(this.entries.delete(r),this.events.emit(a.REMOVE,this,r,o.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:t(736),REMOVE:t(737)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(323),u=t(0),n=t(22),a=new u({initialize:function(r){this.game=r,this.binary=new s,this.bitmapFont=new s,this.json=new s,this.physics=new s,this.shader=new s,this.audio=new s,this.video=new s,this.text=new s,this.html=new s,this.obj=new s,this.tilemap=new s,this.xml=new s,this.custom={},this.game.events.once(n.DESTROY,this.destroy,this)},addCustom:function(h){return this.custom.hasOwnProperty(h)||(this.custom[h]=new s),this.custom[h]},destroy:function(){for(var h=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<h.length;r++)this[h[r]].destroy(),this[h[r]]=null;for(var o in this.custom)this.custom[o].destroy();this.custom=null,this.game=null}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(133),u=t(190),n=t(18),a=t(0),h=t(11),r=t(333),o=t(37),c=t(135),l=t(10),f=t(3),p=new a({Extends:s,Mixins:[h.Flip,h.Tint,h.Pipeline],initialize:function(m,x,y,T){s.call(this,m,x,y,T),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new r.Fade(this),this.flashEffect=new r.Flash(this),this.shakeEffect=new r.Shake(this),this.panEffect=new r.Pan(this),this.rotateToEffect=new r.RotateTo(this),this.zoomEffect=new r.Zoom(this),this.lerp=new f(1,1),this.followOffset=new f,this.deadzone=null,this._follow=null},setDeadzone:function(g,m){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=m):this.deadzone=new l(0,0,g,m),this._follow){var x=this.width/2,y=this.height/2,T=this._follow.x-this.followOffset.x,S=this._follow.y-this.followOffset.y;this.midPoint.set(T,S),this.scrollX=T-x,this.scrollY=S-y}u(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,m,x,y,T,S){return this.fadeEffect.start(!1,g,m,x,y,!0,T,S)},fadeOut:function(g,m,x,y,T,S){return this.fadeEffect.start(!0,g,m,x,y,!0,T,S)},fadeFrom:function(g,m,x,y,T,S,C){return this.fadeEffect.start(!1,g,m,x,y,T,S,C)},fade:function(g,m,x,y,T,S,C){return this.fadeEffect.start(!0,g,m,x,y,T,S,C)},flash:function(g,m,x,y,T,S,C){return this.flashEffect.start(g,m,x,y,T,S,C)},shake:function(g,m,x,y,T){return this.shakeEffect.start(g,m,x,y,T)},pan:function(g,m,x,y,T,S,C){return this.panEffect.start(g,m,x,y,T,S,C)},rotateTo:function(g,m,x,y,T,S,C){return this.rotateToEffect.start(g,m,x,y,T,S,C)},zoomTo:function(g,m,x,y,T,S){return this.zoomEffect.start(g,m,x,y,T,S)},preRender:function(){this.renderList.length=0;var g=this.width,m=this.height,x=g*.5,y=m*.5,T=this.zoom,S=this.matrix,C=g*this.originX,E=m*this.originY,P=this._follow,M=this.deadzone,O=this.scrollX,A=this.scrollY;M&&u(M,this.midPoint.x,this.midPoint.y);var R=!1;if(P&&!this.panEffect.isRunning){var F=P.x-this.followOffset.x,I=P.y-this.followOffset.y;M?(F<M.x?O=c(O,O-(M.x-F),this.lerp.x):F>M.right&&(O=c(O,O+(F-M.right),this.lerp.x)),I<M.y?A=c(A,A-(M.y-I),this.lerp.y):I>M.bottom&&(A=c(A,A+(I-M.bottom),this.lerp.y))):(O=c(O,F-C,this.lerp.x),A=c(A,I-E,this.lerp.y)),R=!0}this.useBounds&&(O=this.clampX(O),A=this.clampY(A)),this.roundPixels&&(C=Math.round(C),E=Math.round(E),O=Math.round(O),A=Math.round(A)),this.scrollX=O,this.scrollY=A;var B=O+x,N=A+y;this.midPoint.set(B,N);var Y=g/T,X=m/T,W=B-Y/2,w=N-X/2;this.roundPixels&&(W=Math.round(W),w=Math.round(w)),this.worldView.setTo(W,w,Y,X),S.applyITRS(this.x+C,this.y+E,this.rotation,T,T),S.translate(-C,-E),this.shakeEffect.preRender(),R&&this.emit(o.FOLLOW_UPDATE,this,P)},setLerp:function(g,m){return g===void 0&&(g=1),m===void 0&&(m=g),this.lerp.set(g,m),this},setFollowOffset:function(g,m){return g===void 0&&(g=0),m===void 0&&(m=0),this.followOffset.set(g,m),this},startFollow:function(g,m,x,y,T,S){m===void 0&&(m=!1),x===void 0&&(x=1),y===void 0&&(y=x),T===void 0&&(T=0),S===void 0&&(S=T),this._follow=g,this.roundPixels=m,x=n(x,0,1),y=n(y,0,1),this.lerp.set(x,y),this.followOffset.set(T,S);var C=this.width/2,E=this.height/2,P=g.x-T,M=g.y-S;return this.midPoint.set(P,M),this.scrollX=P-C,this.scrollY=M-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,m){this.visible&&(this.rotateToEffect.update(g,m),this.panEffect.update(g,m),this.zoomEffect.update(g,m),this.shakeEffect.update(g,m),this.flashEffect.update(g,m),this.fadeEffect.update(g,m))},destroy:function(){this.resetFX(),s.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});e.exports=p},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=function(n){var a=new s;n=n.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(l,f,p,g){return f+f+p+p+g+g});var h=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(h){var r=parseInt(h[1],16),o=parseInt(h[2],16),c=parseInt(h[3],16);a.setTo(r,o,c)}return a};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return a<<24|s<<16|u<<8|n};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){a===void 0&&(a={h:0,s:0,v:0}),s/=255,u/=255,n/=255;var h=Math.min(s,u,n),r=Math.max(s,u,n),o=r-h,c=0,l=r===0?0:o/r,f=r;return r!==h&&(r===s?c=(u-n)/o+(u<n?6:0):r===u?c=(n-s)/o+2:r===n&&(c=(s-u)/o+4),c/=6),a.hasOwnProperty("_h")?(a._h=c,a._s=l,a._v=f):(a.h=c,a.s=l,a.v=f),a};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s>16777215?{a:s>>>24,r:s>>16&255,g:s>>8&255,b:s&255}:{a:255,r:s>>16&255,g:s>>8&255,b:s&255}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=function(n){return new s(n.r,n.g,n.b,n.a)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=function(n){var a=new s,h=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(n.toLowerCase());if(h){var r=parseInt(h[1],10),o=parseInt(h[2],10),c=parseInt(h[3],10),l=h[4]!==void 0?parseFloat(h[4]):1;a.setTo(r,o,c,l*255)}return a};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Fade:t(761),Flash:t(762),Pan:t(763),Shake:t(796),RotateTo:t(797),Zoom:t(798)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(764),Out:t(765),InOut:t(766)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(767),Out:t(768),InOut:t(769)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(770),Out:t(771),InOut:t(772)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(773),Out:t(774),InOut:t(775)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(776),Out:t(777),InOut:t(778)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(779),Out:t(780),InOut:t(781)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=t(782)},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(783),Out:t(784),InOut:t(785)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(786),Out:t(787),InOut:t(788)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(789),Out:t(790),InOut:t(791)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(792),Out:t(793),InOut:t(794)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=t(795)},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(33),n=t(347),a=t(2),h=t(6),r=t(7),o=t(193),c=t(1),l=t(197),f=t(187),p=new s({initialize:function(m){m===void 0&&(m={});var x=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],y="#ffffff";this.width=h(m,"width",1024),this.height=h(m,"height",768),this.zoom=h(m,"zoom",1),this.parent=h(m,"parent",void 0),this.scaleMode=h(m,"scaleMode",0),this.expandParent=h(m,"expandParent",!0),this.autoRound=h(m,"autoRound",!1),this.autoCenter=h(m,"autoCenter",0),this.resizeInterval=h(m,"resizeInterval",500),this.fullscreenTarget=h(m,"fullscreenTarget",null),this.minWidth=h(m,"minWidth",0),this.maxWidth=h(m,"maxWidth",0),this.minHeight=h(m,"minHeight",0),this.maxHeight=h(m,"maxHeight",0);var T=h(m,"scale",null);T&&(this.width=h(T,"width",this.width),this.height=h(T,"height",this.height),this.zoom=h(T,"zoom",this.zoom),this.parent=h(T,"parent",this.parent),this.scaleMode=h(T,"mode",this.scaleMode),this.expandParent=h(T,"expandParent",this.expandParent),this.autoRound=h(T,"autoRound",this.autoRound),this.autoCenter=h(T,"autoCenter",this.autoCenter),this.resizeInterval=h(T,"resizeInterval",this.resizeInterval),this.fullscreenTarget=h(T,"fullscreenTarget",this.fullscreenTarget),this.minWidth=h(T,"min.width",this.minWidth),this.maxWidth=h(T,"max.width",this.maxWidth),this.minHeight=h(T,"min.height",this.minHeight),this.maxHeight=h(T,"max.height",this.maxHeight)),this.renderType=h(m,"type",u.AUTO),this.canvas=h(m,"canvas",null),this.context=h(m,"context",null),this.canvasStyle=h(m,"canvasStyle",null),this.customEnvironment=h(m,"customEnvironment",!1),this.sceneConfig=h(m,"scene",null),this.seed=h(m,"seed",[(Date.now()*Math.random()).toString()]),o.RND=new o.RandomDataGenerator(this.seed),this.gameTitle=h(m,"title",""),this.gameURL=h(m,"url","https://phaser.io"),this.gameVersion=h(m,"version",""),this.autoFocus=h(m,"autoFocus",!0),this.domCreateContainer=h(m,"dom.createContainer",!1),this.domBehindCanvas=h(m,"dom.behindCanvas",!1),this.domPointerEvents=h(m,"dom.pointerEvents","none"),this.inputKeyboard=h(m,"input.keyboard",!0),this.inputKeyboardEventTarget=h(m,"input.keyboard.target",window),this.inputKeyboardCapture=h(m,"input.keyboard.capture",[]),this.inputMouse=h(m,"input.mouse",!0),this.inputMouseEventTarget=h(m,"input.mouse.target",null),this.inputMousePreventDefaultDown=h(m,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=h(m,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=h(m,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=h(m,"input.mouse.preventDefaultWheel",!0),this.inputTouch=h(m,"input.touch",n.input.touch),this.inputTouchEventTarget=h(m,"input.touch.target",null),this.inputTouchCapture=h(m,"input.touch.capture",!0),this.inputActivePointers=h(m,"input.activePointers",1),this.inputSmoothFactor=h(m,"input.smoothFactor",0),this.inputWindowEvents=h(m,"input.windowEvents",!0),this.inputGamepad=h(m,"input.gamepad",!1),this.inputGamepadEventTarget=h(m,"input.gamepad.target",window),this.disableContextMenu=h(m,"disableContextMenu",!1),this.audio=h(m,"audio",{}),this.hideBanner=h(m,"banner",null)===!1,this.hidePhaser=h(m,"banner.hidePhaser",!1),this.bannerTextColor=h(m,"banner.text",y),this.bannerBackgroundColor=h(m,"banner.background",x),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=h(m,"fps",null);var S=h(m,"render",m);this.pipeline=h(S,"pipeline",null),this.antialias=h(S,"antialias",!0),this.antialiasGL=h(S,"antialiasGL",!0),this.mipmapFilter=h(S,"mipmapFilter","LINEAR"),this.desynchronized=h(S,"desynchronized",!1),this.roundPixels=h(S,"roundPixels",!1),this.pixelArt=h(S,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=h(S,"transparent",!1),this.clearBeforeRender=h(S,"clearBeforeRender",!0),this.preserveDrawingBuffer=h(S,"preserveDrawingBuffer",!1),this.premultipliedAlpha=h(S,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=h(S,"failIfMajorPerformanceCaveat",!1),this.powerPreference=h(S,"powerPreference","default"),this.batchSize=h(S,"batchSize",4096),this.maxTextures=h(S,"maxTextures",-1),this.maxLights=h(S,"maxLights",10);var C=h(m,"backgroundColor",0);this.backgroundColor=f(C),this.transparent&&(this.backgroundColor=f(0),this.backgroundColor.alpha=0),this.preBoot=h(m,"callbacks.preBoot",c),this.postBoot=h(m,"callbacks.postBoot",c),this.physics=h(m,"physics",{}),this.defaultPhysicsSystem=h(this.physics,"default",!1),this.loaderBaseURL=h(m,"loader.baseURL",""),this.loaderPath=h(m,"loader.path","");var E=n.os.android?6:32;this.loaderMaxParallelDownloads=h(m,"loader.maxParallelDownloads",E),this.loaderCrossOrigin=h(m,"loader.crossOrigin",void 0),this.loaderResponseType=h(m,"loader.responseType",""),this.loaderAsync=h(m,"loader.async",!0),this.loaderUser=h(m,"loader.user",""),this.loaderPassword=h(m,"loader.password",""),this.loaderTimeout=h(m,"loader.timeout",0),this.loaderWithCredentials=h(m,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=h(m,"plugins",null),M=l.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:r(P)&&(this.installGlobalPlugins=a(P,"global",[]),this.installScenePlugins=a(P,"scene",[]),Array.isArray(P.default)?M=P.default:Array.isArray(P.defaultMerge)&&(M=M.concat(P.defaultMerge)))),this.defaultPlugins=M;var O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=h(m,"images.default",O+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=h(m,"images.missing",O+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=h(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=u.WEBGL:window.FORCE_CANVAS&&(this.renderType=u.CANVAS))}});e.exports=p},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={os:t(105),browser:t(136),features:t(191),input:t(808),audio:t(809),video:t(810),fullscreen:t(811),canvasFeatures:t(348)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u={supportInverseAlpha:!1,supportNewBlendModes:!1};function n(){var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",o="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image;return c.onload=function(){var l=new Image;l.onload=function(){var f=s.create(l,6,1),p=f.getContext("2d");if(p.globalCompositeOperation="multiply",p.drawImage(c,0,0),p.drawImage(l,2,0),!p.getImageData(2,0,1,1))return!1;var g=p.getImageData(2,0,1,1).data;s.remove(l),u.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},l.src=r+"/wCKxvRF"+o},c.src=r+"AP804Oa6"+o,!1}function a(){var r=s.create(this,2,1),o=r.getContext("2d");o.fillStyle="rgba(10, 20, 30, 0.5)",o.fillRect(0,0,1,1);var c=o.getImageData(0,0,1,1);if(c===null)return!1;o.putImageData(c,1,0);var l=o.getImageData(1,0,1,1);return l.data[0]===c.data[0]&&l.data[1]===c.data[1]&&l.data[2]===c.data[2]&&l.data[3]===c.data[3]}function h(){return typeof importScripts!="function"&&document!==void 0&&(u.supportNewBlendModes=n(),u.supportInverseAlpha=a()),u}e.exports=h()},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return Math.atan2(a-u,n-s)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.atan2(u.y-s.y,u.x-s.x)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s=s%(2*Math.PI),s>=0?s:s+2*Math.PI};e.exports=t},function(e,d){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x-u.x,a=s.y-u.y;return Math.sqrt(n*n+a*a)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h=s-n,r=u-a;return h*h+r*r};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n===void 0&&(n=1e-4),s>u-n};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n===void 0&&(n=1e-4),s<u+n};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(357),u=function(n,a){return s(n)/s(a)/s(n-a)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){if(s===0)return 1;for(var u=s;--s;)u*=s;return u};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(h,r){var o=1-h;return o*o*o*r}function s(h,r){var o=1-h;return 3*o*o*h*r}function u(h,r){return 3*(1-h)*h*h*r}function n(h,r){return h*h*h*r}var a=function(h,r,o,c,l){return t(h,r)+s(h,o)+u(h,c)+n(h,l)};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(a,h){var r=1-a;return r*r*h}function s(a,h){return 2*(1-a)*a*h}function u(a,h){return a*a*h}var n=function(a,h,r,o){return t(a,h)+s(a,r)+u(a,o)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(184),u=function(n,a,h){return a+(h-a)*s(n,0,1)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=Math.log(s)/.6931471805599453;return 1<<Math.ceil(u)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x,a=s.y;return s.x=n*Math.cos(u)-a*Math.sin(u),s.y=n*Math.sin(u)+a*Math.cos(u),s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s>0?Math.ceil(s):Math.floor(s)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a){this.val=new Float32Array(9),a?this.copy(a):this.identity()},clone:function(){return new u(this)},set:function(n){return this.copy(n)},copy:function(n){var a=this.val,h=n.val;return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[4]=h[4],a[5]=h[5],a[6]=h[6],a[7]=h[7],a[8]=h[8],this},fromMat4:function(n){var a=n.val,h=this.val;return h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[4],h[4]=a[5],h[5]=a[6],h[6]=a[8],h[7]=a[9],h[8]=a[10],this},fromArray:function(n){var a=this.val;return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],this},identity:function(){var n=this.val;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,this},transpose:function(){var n=this.val,a=n[1],h=n[2],r=n[5];return n[1]=n[3],n[2]=n[6],n[3]=a,n[5]=n[7],n[6]=h,n[7]=r,this},invert:function(){var n=this.val,a=n[0],h=n[1],r=n[2],o=n[3],c=n[4],l=n[5],f=n[6],p=n[7],g=n[8],m=g*c-l*p,x=-g*o+l*f,y=p*o-c*f,T=a*m+h*x+r*y;return T?(T=1/T,n[0]=m*T,n[1]=(-g*h+r*p)*T,n[2]=(l*h-r*c)*T,n[3]=x*T,n[4]=(g*a-r*f)*T,n[5]=(-l*a+r*o)*T,n[6]=y*T,n[7]=(-p*a+h*f)*T,n[8]=(c*a-h*o)*T,this):null},adjoint:function(){var n=this.val,a=n[0],h=n[1],r=n[2],o=n[3],c=n[4],l=n[5],f=n[6],p=n[7],g=n[8];return n[0]=c*g-l*p,n[1]=r*p-h*g,n[2]=h*l-r*c,n[3]=l*f-o*g,n[4]=a*g-r*f,n[5]=r*o-a*l,n[6]=o*p-c*f,n[7]=h*f-a*p,n[8]=a*c-h*o,this},determinant:function(){var n=this.val,a=n[0],h=n[1],r=n[2],o=n[3],c=n[4],l=n[5],f=n[6],p=n[7],g=n[8];return a*(g*c-l*p)+h*(-g*o+l*f)+r*(p*o-c*f)},multiply:function(n){var a=this.val,h=a[0],r=a[1],o=a[2],c=a[3],l=a[4],f=a[5],p=a[6],g=a[7],m=a[8],x=n.val,y=x[0],T=x[1],S=x[2],C=x[3],E=x[4],P=x[5],M=x[6],O=x[7],A=x[8];return a[0]=y*h+T*c+S*p,a[1]=y*r+T*l+S*g,a[2]=y*o+T*f+S*m,a[3]=C*h+E*c+P*p,a[4]=C*r+E*l+P*g,a[5]=C*o+E*f+P*m,a[6]=M*h+O*c+A*p,a[7]=M*r+O*l+A*g,a[8]=M*o+O*f+A*m,this},translate:function(n){var a=this.val,h=n.x,r=n.y;return a[6]=h*a[0]+r*a[3]+a[6],a[7]=h*a[1]+r*a[4]+a[7],a[8]=h*a[2]+r*a[5]+a[8],this},rotate:function(n){var a=this.val,h=a[0],r=a[1],o=a[2],c=a[3],l=a[4],f=a[5],p=Math.sin(n),g=Math.cos(n);return a[0]=g*h+p*c,a[1]=g*r+p*l,a[2]=g*o+p*f,a[3]=g*c-p*h,a[4]=g*l-p*r,a[5]=g*f-p*o,this},scale:function(n){var a=this.val,h=n.x,r=n.y;return a[0]=h*a[0],a[1]=h*a[1],a[2]=h*a[2],a[3]=r*a[3],a[4]=r*a[4],a[5]=r*a[5],this},fromQuat:function(n){var a=n.x,h=n.y,r=n.z,o=n.w,c=a+a,l=h+h,f=r+r,p=a*c,g=a*l,m=a*f,x=h*l,y=h*f,T=r*f,S=o*c,C=o*l,E=o*f,P=this.val;return P[0]=1-(x+T),P[3]=g+E,P[6]=m-C,P[1]=g-E,P[4]=1-(p+T),P[7]=y+S,P[2]=m+C,P[5]=y-S,P[8]=1-(p+x),this},normalFromMat4:function(n){var a=n.val,h=this.val,r=a[0],o=a[1],c=a[2],l=a[3],f=a[4],p=a[5],g=a[6],m=a[7],x=a[8],y=a[9],T=a[10],S=a[11],C=a[12],E=a[13],P=a[14],M=a[15],O=r*p-o*f,A=r*g-c*f,R=r*m-l*f,F=o*g-c*p,I=o*m-l*p,B=c*m-l*g,N=x*E-y*C,Y=x*P-T*C,X=x*M-S*C,W=y*P-T*E,w=y*M-S*E,L=T*M-S*P,D=O*L-A*w+R*W+F*X-I*Y+B*N;return D?(D=1/D,h[0]=(p*L-g*w+m*W)*D,h[1]=(g*X-f*L-m*Y)*D,h[2]=(f*w-p*X+m*N)*D,h[3]=(c*w-o*L-l*W)*D,h[4]=(r*L-c*X+l*Y)*D,h[5]=(o*X-r*w-l*N)*D,h[6]=(E*B-P*I+M*F)*D,h[7]=(P*R-C*B-M*A)*D,h[8]=(C*I-E*R+M*O)*D,this):null}});e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(364),n=t(1),a=t(39),h=1e-6,r=new Int8Array([1,2,0]),o=new Float32Array([0,0,0]),c=new a(1,0,0),l=new a(0,1,0),f=new a,p=new u,g=new s({initialize:function(x,y,T,S){this.onChangeCallback=n,this.set(x,y,T,S)},x:{get:function(){return this._x},set:function(m){this._x=m,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(m){this._y=m,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(m){this._z=m,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(m){this._w=m,this.onChangeCallback(this)}},copy:function(m){return this.set(m)},set:function(m,x,y,T,S){return S===void 0&&(S=!0),typeof m=="object"?(this._x=m.x||0,this._y=m.y||0,this._z=m.z||0,this._w=m.w||0):(this._x=m||0,this._y=x||0,this._z=y||0,this._w=T||0),S&&this.onChangeCallback(this),this},add:function(m){return this._x+=m.x,this._y+=m.y,this._z+=m.z,this._w+=m.w,this.onChangeCallback(this),this},subtract:function(m){return this._x-=m.x,this._y-=m.y,this._z-=m.z,this._w-=m.w,this.onChangeCallback(this),this},scale:function(m){return this._x*=m,this._y*=m,this._z*=m,this._w*=m,this.onChangeCallback(this),this},length:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return Math.sqrt(m*m+x*x+y*y+T*T)},lengthSq:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return m*m+x*x+y*y+T*T},normalize:function(){var m=this.x,x=this.y,y=this.z,T=this.w,S=m*m+x*x+y*y+T*T;return S>0&&(S=1/Math.sqrt(S),this._x=m*S,this._y=x*S,this._z=y*S,this._w=T*S),this.onChangeCallback(this),this},dot:function(m){return this.x*m.x+this.y*m.y+this.z*m.z+this.w*m.w},lerp:function(m,x){x===void 0&&(x=0);var y=this.x,T=this.y,S=this.z,C=this.w;return this.set(y+x*(m.x-y),T+x*(m.y-T),S+x*(m.z-S),C+x*(m.w-C))},rotationTo:function(m,x){var y=m.x*x.x+m.y*x.y+m.z*x.z;return y<-.999999?(f.copy(c).cross(m).length()<h&&f.copy(l).cross(m),f.normalize(),this.setAxisAngle(f,Math.PI)):y>.999999?this.set(0,0,0,1):(f.copy(m).cross(x),this._x=f.x,this._y=f.y,this._z=f.z,this._w=1+y,this.normalize())},setAxes:function(m,x,y){var T=p.val;return T[0]=x.x,T[3]=x.y,T[6]=x.z,T[1]=y.x,T[4]=y.y,T[7]=y.z,T[2]=-m.x,T[5]=-m.y,T[8]=-m.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(m,x){x=x*.5;var y=Math.sin(x);return this.set(y*m.x,y*m.y,y*m.z,Math.cos(x))},multiply:function(m){var x=this.x,y=this.y,T=this.z,S=this.w,C=m.x,E=m.y,P=m.z,M=m.w;return this.set(x*M+S*C+y*P-T*E,y*M+S*E+T*C-x*P,T*M+S*P+x*E-y*C,S*M-x*C-y*E-T*P)},slerp:function(m,x){var y=this.x,T=this.y,S=this.z,C=this.w,E=m.x,P=m.y,M=m.z,O=m.w,A=y*E+T*P+S*M+C*O;A<0&&(A=-A,E=-E,P=-P,M=-M,O=-O);var R=1-x,F=x;if(1-A>h){var I=Math.acos(A),B=Math.sin(I);R=Math.sin((1-x)*I)/B,F=Math.sin(x*I)/B}return this.set(R*y+F*E,R*T+F*P,R*S+F*M,R*C+F*O)},invert:function(){var m=this.x,x=this.y,y=this.z,T=this.w,S=m*m+x*x+y*y+T*T,C=S?1/S:0;return this.set(-m*C,-x*C,-y*C,T*C)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,S=this.w,C=Math.sin(m),E=Math.cos(m);return this.set(x*E+S*C,y*E+T*C,T*E-y*C,S*E-x*C)},rotateY:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,S=this.w,C=Math.sin(m),E=Math.cos(m);return this.set(x*E-T*C,y*E+S*C,T*E+x*C,S*E-y*C)},rotateZ:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,S=this.w,C=Math.sin(m),E=Math.cos(m);return this.set(x*E+y*C,y*E-x*C,T*E+S*C,S*E-T*C)},calculateW:function(){var m=this.x,x=this.y,y=this.z;return this.w=-Math.sqrt(1-m*m-x*x-y*y),this},setFromEuler:function(m,x){var y=m.x/2,T=m.y/2,S=m.z/2,C=Math.cos(y),E=Math.cos(T),P=Math.cos(S),M=Math.sin(y),O=Math.sin(T),A=Math.sin(S);switch(m.order){case"XYZ":{this.set(M*E*P+C*O*A,C*O*P-M*E*A,C*E*A+M*O*P,C*E*P-M*O*A,x);break}case"YXZ":{this.set(M*E*P+C*O*A,C*O*P-M*E*A,C*E*A-M*O*P,C*E*P+M*O*A,x);break}case"ZXY":{this.set(M*E*P-C*O*A,C*O*P+M*E*A,C*E*A+M*O*P,C*E*P-M*O*A,x);break}case"ZYX":{this.set(M*E*P-C*O*A,C*O*P+M*E*A,C*E*A-M*O*P,C*E*P+M*O*A,x);break}case"YZX":{this.set(M*E*P+C*O*A,C*O*P+M*E*A,C*E*A-M*O*P,C*E*P-M*O*A,x);break}case"XZY":{this.set(M*E*P-C*O*A,C*O*P-M*E*A,C*E*A+M*O*P,C*E*P+M*O*A,x);break}}return this},setFromRotationMatrix:function(m){var x=m.val,y=x[0],T=x[4],S=x[8],C=x[1],E=x[5],P=x[9],M=x[2],O=x[6],A=x[10],R=y+E+A,F;return R>0?(F=.5/Math.sqrt(R+1),this.set((O-P)*F,(S-M)*F,(C-T)*F,.25/F)):y>E&&y>A?(F=2*Math.sqrt(1+y-E-A),this.set(.25*F,(T+C)/F,(S+M)/F,(O-P)/F)):E>A?(F=2*Math.sqrt(1+E-y-A),this.set((T+C)/F,.25*F,(P+O)/F,(S-M)/F)):(F=2*Math.sqrt(1+A-y-E),this.set((S+M)/F,(P+O)/F,.25*F,(C-T)/F)),this},fromMat3:function(m){var x=m.val,y=x[0]+x[4]+x[8],T;if(y>0)T=Math.sqrt(y+1),this.w=.5*T,T=.5/T,this._x=(x[7]-x[5])*T,this._y=(x[2]-x[6])*T,this._z=(x[3]-x[1])*T;else{var S=0;x[4]>x[0]&&(S=1),x[8]>x[S*3+S]&&(S=2);var C=r[S],E=r[C];T=Math.sqrt(x[S*3+S]-x[C*3+C]-x[E*3+E]+1),o[S]=.5*T,T=.5/T,o[C]=(x[C*3+S]+x[S*3+C])*T,o[E]=(x[E*3+S]+x[S*3+E])*T,this._x=o[0],this._y=o[1],this._z=o[2],this._w=(x[E*3+C]-x[C*3+E])*T}return this.onChangeCallback(this),this}});e.exports=g},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(367),u=t(31),n=t(33),a=t(191),h=function(r){var o=r.config;if((o.customEnvironment||o.canvas)&&o.renderType===n.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!o.customEnvironment&&!o.canvas&&o.renderType!==n.HEADLESS)if(o.renderType===n.CANVAS||o.renderType!==n.CANVAS&&!a.webGL)if(a.canvas)o.renderType=n.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else o.renderType=n.WEBGL;o.antialias||u.disableSmoothing();var c=r.scale.baseSize,l=c.width,f=c.height;if(o.canvas?(r.canvas=o.canvas,r.canvas.width=l,r.canvas.height=f):r.canvas=u.create(r,l,f,o.renderType),o.canvasStyle&&(r.canvas.style=o.canvasStyle),o.antialias||s.setCrisp(r.canvas),o.renderType!==n.HEADLESS){var p,g;p=t(368),g=t(371),o.renderType===n.WEBGL?r.renderer=new g(r):(r.renderer=new p(r),r.context=r.renderer.gameContext)}};e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCrisp:function(s){var u=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return u.forEach(function(n){s.style["image-rendering"]=n}),s.style.msInterpolationMode="nearest-neighbor",s},setBicubic:function(s){return s.style["image-rendering"]="auto",s.style.msInterpolationMode="bicubic",s}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(37),u=t(369),n=t(0),a=t(33),h=t(9),r=t(91),o=t(370),c=t(104),l=t(106),f=t(25),p=new n({Extends:h,initialize:function(m){h.call(this);var x=m.config;this.config={clearBeforeRender:x.clearBeforeRender,backgroundColor:x.backgroundColor,antialias:x.antialias,roundPixels:x.roundPixels},this.game=m,this.type=a.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var y={alpha:m.config.transparent,desynchronized:m.config.desynchronized};this.gameContext=x.context?x.context:this.gameCanvas.getContext("2d",y),this.currentContext=this.gameContext,this.antialias=m.config.antialias,this.blendModes=o(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(l.READY,this.boot,this)},boot:function(){var g=this.game,m=g.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,g.scale.on(c.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(g,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(g,m){this.width=g,this.height=m,this.emit(r.RESIZE,g,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,m=this.config,x=this.width,y=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),m.clearBeforeRender&&(g.clearRect(0,0,x,y),m.transparent||(g.fillStyle=m.backgroundColor.rgba,g.fillRect(0,0,x,y))),g.save(),this.drawCount=0,this.emit(r.PRE_RENDER)},render:function(g,m,x){var y=m.length;this.emit(r.RENDER,g,x);var T=x.x,S=x.y,C=x.width,E=x.height,P=x.renderToTexture?x.context:g.sys.context;P.save(),this.game.scene.customViewports&&(P.beginPath(),P.rect(T,S,C,E),P.clip()),this.currentContext=P;var M=x.mask;M&&M.preRenderCanvas(this,null,x._maskCamera),x.transparent||(P.fillStyle=x.backgroundColor.rgba,P.fillRect(T,S,C,E)),P.globalAlpha=x.alpha,P.globalCompositeOperation="source-over",this.drawCount+=y,x.renderToTexture&&x.emit(s.PRE_RENDER,x),x.matrix.copyToContext(P);for(var O=0;O<y;O++){var A=m[O];A.mask&&A.mask.preRenderCanvas(this,A,x),A.renderCanvas(this,A,x),A.mask&&A.mask.postRenderCanvas(this,A,x)}P.setTransform(1,0,0,1,0,0),P.globalCompositeOperation="source-over",P.globalAlpha=1,x.flashEffect.postRenderCanvas(P),x.fadeEffect.postRenderCanvas(P),x.dirty=!1,M&&M.postRenderCanvas(this),P.restore(),x.renderToTexture&&(x.emit(s.POST_RENDER,x),x.renderToGame&&g.sys.context.drawImage(x.canvas,T,S))},postRender:function(){var g=this.gameContext;g.restore(),this.emit(r.POST_RENDER);var m=this.snapshotState;m.callback&&(u(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(g,m,x,y,T,S,C,E,P){x===void 0&&(x=!1),this.snapshotArea(y,T,S,C,m,E,P);var M=this.snapshotState;return M.getPixel=x,u(this.canvas,M),M.callback=null,this},snapshot:function(g,m,x){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,m,x)},snapshotArea:function(g,m,x,y,T,S,C){var E=this.snapshotState;return E.callback=T,E.type=S,E.encoder=C,E.getPixel=!1,E.x=g,E.y=m,E.width=Math.min(x,this.gameCanvas.width),E.height=Math.min(y,this.gameCanvas.height),this},snapshotPixel:function(g,m,x){return this.snapshotArea(g,m,1,1,x),this.snapshotState.getPixel=!0,this},batchSprite:function(g,m,x,y){var T=x.alpha*g.alpha;if(T!==0){var S=this.currentContext,C=this._tempMatrix1,E=this._tempMatrix2,P=m.canvasData,M=P.x,O=P.y,A=m.cutWidth,R=m.cutHeight,F=m.customPivot,I=m.source.resolution,B=g.displayOriginX,N=g.displayOriginY,Y=-B+m.x,X=-N+m.y;if(g.isCropped){var W=g._crop;(W.flipX!==g.flipX||W.flipY!==g.flipY)&&m.updateCropUVs(W,g.flipX,g.flipY),A=W.cw,R=W.ch,M=W.cx,O=W.cy,Y=-B+W.x,X=-N+W.y,g.flipX&&(Y>=0?Y=-(Y+A):Y<0&&(Y=Math.abs(Y)-A)),g.flipY&&(X>=0?X=-(X+R):X<0&&(X=Math.abs(X)-R))}var w=1,L=1;g.flipX&&(F||(Y+=-m.realWidth+B*2),w=-1),g.flipY&&(F||(X+=-m.realHeight+N*2),L=-1),E.applyITRS(g.x,g.y,g.rotation,g.scaleX*w,g.scaleY*L),C.copyFrom(x.matrix),y?(C.multiplyWithOffset(y,-x.scrollX*g.scrollFactorX,-x.scrollY*g.scrollFactorY),E.e=g.x,E.f=g.y):(E.e-=x.scrollX*g.scrollFactorX,E.f-=x.scrollY*g.scrollFactorY),C.multiply(E),S.save(),C.setToContext(S),S.globalCompositeOperation=this.blendModes[g.blendMode],S.globalAlpha=T,S.imageSmoothingEnabled=!(!this.antialias||m.source.scaleMode),g.mask&&g.mask.preRenderCanvas(this,g,x),S.drawImage(m.source.image,M,O,A,R,Y,X,A/I,R/I),g.mask&&g.mask.postRenderCanvas(this,g,x),S.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});e.exports=p},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(38),n=t(2),a=function(h,r){var o=n(r,"callback"),c=n(r,"type","image/png"),l=n(r,"encoder",.92),f=Math.abs(Math.round(n(r,"x",0))),p=Math.abs(Math.round(n(r,"y",0))),g=n(r,"width",h.width),m=n(r,"height",h.height),x=n(r,"getPixel",!1);if(x){var y=h.getContext("2d"),T=y.getImageData(f,p,1,1),S=T.data;o.call(null,new u(S[0],S[1],S[2],S[3]/255))}else if(f!==0||p!==0||g!==h.width||m!==h.height){var C=s.createWebGL(this,g,m),E=C.getContext("2d");E.drawImage(h,f,p,g,m,0,0,g,m);var P=new Image;P.onerror=function(){o.call(null),s.remove(C)},P.onload=function(){o.call(null,P),s.remove(C)},P.src=C.toDataURL(c,l)}else{var M=new Image;M.onerror=function(){o.call(null)},M.onload=function(){o.call(null,M)},M.src=h.toDataURL(c,l)}};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(348),n=function(){var a=[],h=u.supportNewBlendModes,r="source-over";return a[s.NORMAL]=r,a[s.ADD]="lighter",a[s.MULTIPLY]=h?"multiply":r,a[s.SCREEN]=h?"screen":r,a[s.OVERLAY]=h?"overlay":r,a[s.DARKEN]=h?"darken":r,a[s.LIGHTEN]=h?"lighten":r,a[s.COLOR_DODGE]=h?"color-dodge":r,a[s.COLOR_BURN]=h?"color-burn":r,a[s.HARD_LIGHT]=h?"hard-light":r,a[s.SOFT_LIGHT]=h?"soft-light":r,a[s.DIFFERENCE]=h?"difference":r,a[s.EXCLUSION]=h?"exclusion":r,a[s.HUE]=h?"hue":r,a[s.SATURATION]=h?"saturation":r,a[s.COLOR]=h?"color":r,a[s.LUMINOSITY]=h?"luminosity":r,a[s.ERASE]="destination-out",a[s.SOURCE_IN]="source-in",a[s.SOURCE_OUT]="source-out",a[s.SOURCE_ATOP]="source-atop",a[s.DESTINATION_OVER]="destination-over",a[s.DESTINATION_IN]="destination-in",a[s.DESTINATION_OUT]="destination-out",a[s.DESTINATION_ATOP]="destination-atop",a[s.LIGHTER]="lighter",a[s.COPY]="copy",a[s.XOR]="xor",a};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93),u=t(37),n=t(0),a=t(33),h=t(9),r=t(91),o=t(22),c=t(138),l=t(69),f=t(1),p=t(372),g=t(141),m=t(104),x=t(106),y=t(12),T=t(383),S=new n({Extends:h,initialize:function(E){h.call(this);var P=E.config,M={alpha:P.transparent,desynchronized:P.desynchronized,depth:!1,antialias:P.antialiasGL,premultipliedAlpha:P.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:P.failIfMajorPerformanceCaveat,powerPreference:P.powerPreference,preserveDrawingBuffer:P.preserveDrawingBuffer};this.config={clearBeforeRender:P.clearBeforeRender,antialias:P.antialias,backgroundColor:P.backgroundColor,contextCreation:M,roundPixels:P.roundPixels,maxTextures:P.maxTextures,maxTextureSize:P.maxTextureSize,batchSize:P.batchSize,maxLights:P.maxLights,mipmapFilter:P.mipmapFilter},this.game=E,this.type=a.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=E.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=f,this.contextRestoredHandler=f,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(C){var E,P=this.game,M=this.canvas,O=C.backgroundColor;if(P.config.context?E=P.config.context:E=M.getContext("webgl",C.contextCreation)||M.getContext("experimental-webgl",C.contextCreation),!E||E.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=E;var A=this;this.contextLostHandler=function(D){A.contextLost=!0,A.game.events.emit(o.CONTEXT_LOST,A),D.preventDefault()},this.contextRestoredHandler=function(){A.contextLost=!1,A.init(A.config),A.game.events.emit(o.CONTEXT_RESTORED,A)},M.addEventListener("webglcontextlost",this.contextLostHandler,!1),M.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),P.context=E;for(var R=0;R<=27;R++)this.blendModes.push({func:[E.ONE,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_ADD});this.blendModes[1].func=[E.ONE,E.DST_ALPHA],this.blendModes[2].func=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[E.ONE,E.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[E.ZERO,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=E.BYTE,this.glFormats[1]=E.SHORT,this.glFormats[2]=E.UNSIGNED_BYTE,this.glFormats[3]=E.UNSIGNED_SHORT,this.glFormats[4]=E.FLOAT,this.glFuncMap={mat2:{func:E.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:E.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:E.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:E.uniform1f,length:1},"1fv":{func:E.uniform1fv,length:1},"1i":{func:E.uniform1i,length:1},"1iv":{func:E.uniform1iv,length:1},"2f":{func:E.uniform2f,length:2},"2fv":{func:E.uniform2fv,length:1},"2i":{func:E.uniform2i,length:2},"2iv":{func:E.uniform2iv,length:1},"3f":{func:E.uniform3f,length:3},"3fv":{func:E.uniform3fv,length:1},"3i":{func:E.uniform3i,length:3},"3iv":{func:E.uniform3iv,length:1},"4f":{func:E.uniform4f,length:4},"4fv":{func:E.uniform4fv,length:1},"4i":{func:E.uniform4i,length:4},"4iv":{func:E.uniform4iv,length:1}};var F=E.getSupportedExtensions();(!C.maxTextures||C.maxTextures===-1)&&(C.maxTextures=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS)),C.maxTextureSize||(C.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE));var I="WEBGL_compressed_texture_",B="WEBKIT_"+I;this.compression.ETC1=E.getExtension(I+"etc1")||E.getExtension(B+"etc1"),this.compression.PVRTC=E.getExtension(I+"pvrtc")||E.getExtension(B+"pvrtc"),this.compression.S3TC=E.getExtension(I+"s3tc")||E.getExtension(B+"s3tc"),this.supportedExtensions=F;var N="ANGLE_instanced_arrays";this.instancedArraysExtension=F.indexOf(N)>-1?E.getExtension(N):null;var Y="OES_vertex_array_object";this.vaoExtension=F.indexOf(Y)>-1?E.getExtension(Y):null,E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.clearColor(O.redGL,O.greenGL,O.blueGL,O.alphaGL),this.mipmapFilter=E[C.mipmapFilter],this.maxTextures=y.checkShaderMax(E,C.maxTextures),this.textureIndexes=[];var X=this.tempTextures;if(Array.isArray(X))for(var W=0;R<this.maxTextures;W++)E.deleteTexture(X[W]);else X=new Array(this.maxTextures);for(var w=0;w<this.maxTextures;w++){var L=E.createTexture();E.activeTexture(E.TEXTURE0+w),E.bindTexture(E.TEXTURE_2D,L),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),X[w]=L,this.textureIndexes.push(w)}return this.tempTextures=X,this.currentActiveTexture=1,this.startActiveTexture++,E.activeTexture(E.TEXTURE1),this.pipelines=new p(this),this.setBlendMode(a.BlendModes.NORMAL),this.projectionMatrix=new l().identity(),P.textures.once(x.READY,this.boot,this),this},boot:function(){var C=this.game,E=this.pipelines,P=C.scale.baseSize;this.width=P.width,this.height=P.height,this.isBooted=!0,this.renderTarget=new g(this,this.width,this.height,1,0,!0,!0),E.boot(C.config.pipeline),this.blankTexture=C.textures.getFrame("__DEFAULT"),this.whiteTexture=C.textures.getFrame("__WHITE");var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,null),M.enable(M.SCISSOR_TEST),C.scale.on(m.RESIZE,this.onResize,this),this.resize(P.width,P.height)},onResize:function(C,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},beginCapture:function(C,E){C===void 0&&(C=this.width),E===void 0&&(E=this.height),this.renderTarget.bind(!0,C,E),this.setProjectionMatrix(C,E),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(C,E){var P=this.gl;return this.width=C,this.height=E,this.setProjectionMatrix(C,E),P.viewport(0,0,C,E),this.drawingBufferHeight=P.drawingBufferHeight,P.scissor(0,P.drawingBufferHeight-E,C,E),this.defaultScissor[2]=C,this.defaultScissor[3]=E,this.emit(r.RESIZE,C,E),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(C,E){return(C!==this.projectionWidth||E!==this.projectionHeight)&&(this.projectionWidth=C,this.projectionHeight=E,this.projectionMatrix.ortho(0,C,E,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(C){return this.supportedExtensions?this.supportedExtensions.indexOf(C):!1},getExtension:function(C){return this.hasExtension(C)?(C in this.extensions||(this.extensions[C]=this.gl.getExtension(C)),this.extensions[C]):null},flush:function(){this.pipelines.flush()},pushScissor:function(C,E,P,M,O){O===void 0&&(O=this.drawingBufferHeight);var A=this.scissorStack,R=[C,E,P,M];return A.push(R),this.setScissor(C,E,P,M,O),this.currentScissor=R,R},setScissor:function(C,E,P,M,O){O===void 0&&(O=this.drawingBufferHeight);var A=this.gl,R=this.currentScissor,F=P>0&&M>0;if(R&&F){var I=R[0],B=R[1],N=R[2],Y=R[3];F=I!==C||B!==E||N!==P||Y!==M}F&&(this.flush(),A.scissor(C,O-E-M,P,M))},resetScissor:function(){var C=this.gl;C.enable(C.SCISSOR_TEST);var E=this.currentScissor;if(E){var P=E[0],M=E[1],O=E[2],A=E[3];O>0&&A>0&&C.scissor(P,this.drawingBufferHeight-M-A,O,A)}},popScissor:function(){var C=this.scissorStack;C.pop();var E=C[C.length-1];E&&this.setScissor(E[0],E[1],E[2],E[3]),this.currentScissor=E},hasActiveStencilMask:function(){var C=this.currentMask.mask,E=this.currentCameraMask.mask;return C&&C.isStencil||E&&E.isStencil},resetViewport:function(){var C=this.gl;C.viewport(0,0,this.width,this.height),this.drawingBufferHeight=C.drawingBufferHeight},setBlendMode:function(C,E){E===void 0&&(E=!1);var P=this.gl,M=this.blendModes[C];return E||C!==a.BlendModes.SKIP_CHECK&&this.currentBlendMode!==C?(this.flush(),P.enable(P.BLEND),P.blendEquation(M.equation),M.func.length>2?P.blendFuncSeparate(M.func[0],M.func[1],M.func[2],M.func[3]):P.blendFunc(M.func[0],M.func[1]),this.currentBlendMode=C,!0):!1},addBlendMode:function(C,E){var P=this.blendModes.push({func:C,equation:E});return P-1},updateBlendMode:function(C,E,P){return this.blendModes[C]&&(this.blendModes[C].func=E,P&&(this.blendModes[C].equation=P)),this},removeBlendMode:function(C){return C>17&&this.blendModes[C]&&this.blendModes.splice(C,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(C){if(this.pipelines.forceZero())return this.setTextureZero(C.glTexture,!0),0;var E=this.gl,P=this.currentActiveTexture;return C.glIndexCounter<this.startActiveTexture&&(C.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(C.glIndex=P,E.activeTexture(E.TEXTURE0+P),E.bindTexture(E.TEXTURE_2D,C.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,C.glIndexCounter=this.startActiveTexture,C.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,C.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,C.glIndex},isNewNormalMap:function(C,E){return this.textureZero!==C||this.normalTexture!==E},setTextureZero:function(C,E){if(this.textureZero!==C){E&&this.flush();var P=this.gl;P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,C),this.textureZero=C}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(C){if(this.normalTexture!==C){var E=this.gl;E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,C),this.normalTexture=C,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var C=this.gl,E=this.tempTextures,P=0;P<E.length;P++)C.activeTexture(C.TEXTURE0+P),C.bindTexture(C.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(C){if(C===void 0&&(C=!1),!this.isTextureClean){this.flush();var E=this.gl,P=this.tempTextures;if(C){for(var M=0;M<P.length;M++)E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,P[M]);E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,P[1]),this.isTextureClean=!0}else E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,P[0]),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,P[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(C){if(this.pipelines.forceZero())return this.setTextureZero(C,!0),0;var E=this.gl,P=this.currentActiveTexture;return C.glIndexCounter<this.startActiveTexture&&(C.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(C.glIndex=P,E.activeTexture(E.TEXTURE0+P),E.bindTexture(E.TEXTURE_2D,C),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,C.glIndexCounter=this.startActiveTexture,C.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,C),this.currentActiveTexture=2)),this.isTextureClean=!1,C.glIndex},pushFramebuffer:function(C,E,P,M){return C===this.currentFramebuffer?this:(this.fboStack.push(C),this.setFramebuffer(C,E,P,M))},setFramebuffer:function(C,E,P,M){if(E===void 0&&(E=!1),P===void 0&&(P=!1),M===void 0&&(M=!0),C===this.currentFramebuffer)return this;var O=this.gl,A=this.width,R=this.height;return C&&C.renderTexture&&M?(A=C.renderTexture.width,R=C.renderTexture.height):this.flush(),O.bindFramebuffer(O.FRAMEBUFFER,C),M&&O.viewport(0,0,A,R),E&&(C?(this.drawingBufferHeight=R,this.pushScissor(0,0,A,R)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=C,P&&this.resetTextures(),this},popFramebuffer:function(C,E,P){C===void 0&&(C=!1),E===void 0&&(E=!1),P===void 0&&(P=!0);var M=this.fboStack;M.pop();var O=M[M.length-1];return O||(O=null),this.setFramebuffer(O,C,E,P),O},setProgram:function(C){return C!==this.currentProgram?(this.flush(),this.gl.useProgram(C),this.currentProgram=C,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(C,E,P,M){var O=this.gl,A=O.NEAREST,R=O.NEAREST,F=O.CLAMP_TO_EDGE,I=null;E=C?C.width:E,P=C?C.height:P;var B=c(E,P);return B&&(F=O.REPEAT),M===a.ScaleModes.LINEAR&&this.config.antialias&&(A=B?this.mipmapFilter:O.LINEAR,R=O.LINEAR),!C&&typeof E=="number"&&typeof P=="number"?I=this.createTexture2D(0,A,R,F,F,O.RGBA,null,E,P):I=this.createTexture2D(0,A,R,F,F,O.RGBA,C),I},createTexture2D:function(C,E,P,M,O,A,R,F,I,B,N,Y){B=B==null?!0:B,N===void 0&&(N=!1),Y===void 0&&(Y=!1);var X=this.gl,W=X.createTexture();X.activeTexture(X.TEXTURE0);var w=X.getParameter(X.TEXTURE_BINDING_2D);return X.bindTexture(X.TEXTURE_2D,W),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,E),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,P),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,O),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,M),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,Y),R==null?X.texImage2D(X.TEXTURE_2D,C,A,F,I,0,A,X.UNSIGNED_BYTE,null):(N||(F=R.width,I=R.height),X.texImage2D(X.TEXTURE_2D,C,A,A,X.UNSIGNED_BYTE,R)),c(F,I)&&X.generateMipmap(X.TEXTURE_2D),w&&X.bindTexture(X.TEXTURE_2D,w),W.isAlphaPremultiplied=B,W.isRenderTexture=!1,W.width=F,W.height=I,W.glIndex=0,W.glIndexCounter=-1,W},createFramebuffer:function(C,E,P,M){var O=this.gl,A=O.createFramebuffer(),R=0;if(this.setFramebuffer(A),M){var F=O.createRenderbuffer();O.bindRenderbuffer(O.RENDERBUFFER,F),O.renderbufferStorage(O.RENDERBUFFER,O.DEPTH_STENCIL,C,E),O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_STENCIL_ATTACHMENT,O.RENDERBUFFER,F)}if(P.isRenderTexture=!0,P.isAlphaPremultiplied=!1,O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,P,0),R=O.checkFramebufferStatus(O.FRAMEBUFFER),R!==O.FRAMEBUFFER_COMPLETE){var I={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+I[R])}return A.renderTexture=P,this.setFramebuffer(null),this.resetTextures(),A},createProgram:function(C,E){var P=this.gl,M=P.createProgram(),O=P.createShader(P.VERTEX_SHADER),A=P.createShader(P.FRAGMENT_SHADER);if(P.shaderSource(O,C),P.shaderSource(A,E),P.compileShader(O),P.compileShader(A),!P.getShaderParameter(O,P.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+P.getShaderInfoLog(O));if(!P.getShaderParameter(A,P.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+P.getShaderInfoLog(A));if(P.attachShader(M,O),P.attachShader(M,A),P.linkProgram(M),!P.getProgramParameter(M,P.LINK_STATUS))throw new Error(`Link Program failed:
`+P.getProgramInfoLog(M));return P.useProgram(M),M},createVertexBuffer:function(C,E){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ARRAY_BUFFER,M),P.bufferData(P.ARRAY_BUFFER,C,E),P.bindBuffer(P.ARRAY_BUFFER,null),M},createIndexBuffer:function(C,E){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,M),P.bufferData(P.ELEMENT_ARRAY_BUFFER,C,E),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,null),M},deleteTexture:function(C,E){return E&&this.resetTextures(!0),C&&this.gl.deleteTexture(C),this},deleteFramebuffer:function(C){return C&&(this.gl.deleteFramebuffer(C),s(this.fboStack,C),this.currentFramebuffer===C&&(this.currentFramebuffer=null)),this},deleteProgram:function(C){return C&&this.gl.deleteProgram(C),this},deleteBuffer:function(C){return this.gl.deleteBuffer(C),this},preRenderCamera:function(C){var E=C.x,P=C.y,M=C.width,O=C.height,A=C.backgroundColor;if(C.emit(u.PRE_RENDER,C),this.pipelines.preBatchCamera(C),this.pushScissor(E,P,M,O),C.mask&&(this.currentCameraMask.mask=C.mask,this.currentCameraMask.camera=C._maskCamera,C.mask.preRenderWebGL(this,C,C._maskCamera)),A.alphaGL>0){var R=this.pipelines.setMulti();R.drawFillRect(E,P,M,O,y.getTintFromFloats(A.blueGL,A.greenGL,A.redGL,1),A.alphaGL)}},getCurrentStencilMask:function(){var C=null,E=this.maskStack,P=this.currentCameraMask;return E.length>0?C=E[E.length-1]:P.mask&&P.mask.isStencil&&(C=P),C},postRenderCamera:function(C){var E=C.flashEffect,P=C.fadeEffect;if(E.isRunning||P.isRunning||P.isComplete){var M=this.pipelines.setMulti();E.postRenderWebGL(M,y.getTintFromFloats),P.postRenderWebGL(M,y.getTintFromFloats)}C.dirty=!1,this.popScissor(),C.mask&&(this.currentCameraMask.mask=null,C.mask.postRenderWebGL(this,C._maskCamera)),this.pipelines.postBatchCamera(C),C.emit(u.POST_RENDER,C)},preRender:function(){if(!this.contextLost){var C=this.gl;if(C.bindFramebuffer(C.FRAMEBUFFER,null),this.config.clearBeforeRender){var E=this.config.backgroundColor;C.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT|C.STENCIL_BUFFER_BIT)}C.enable(C.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&C.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(r.PRE_RENDER)}},render:function(C,E,P){if(!this.contextLost){var M=E.length;if(this.emit(r.RENDER,C,P),this.preRenderCamera(P),M===0){this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(P);return}this.currentType="";for(var O=this.currentMask,A=0;A<M;A++){this.finalType=A===M-1;var R=E[A],F=R.mask;O=this.currentMask,O.mask&&O.mask!==F&&O.mask.postRenderWebGL(this,O.camera),F&&O.mask!==F&&F.preRenderWebGL(this,R,P),R.blendMode!==this.currentBlendMode&&this.setBlendMode(R.blendMode);var I=R.type;I!==this.currentType&&(this.newType=!0,this.currentType=I),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=E[A+1].type===this.currentType,R.renderWebGL(this,R,P),this.newType=!1}O=this.currentMask,O.mask&&O.mask.postRenderWebGL(this,O.camera),this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(P)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(r.POST_RENDER);var C=this.snapshotState;C.callback&&(T(this.canvas,C),C.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(C,E,P){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,C,E,P)},snapshotArea:function(C,E,P,M,O,A,R){var F=this.snapshotState;return F.callback=O,F.type=A,F.encoder=R,F.getPixel=!1,F.x=C,F.y=E,F.width=Math.min(P,this.gl.drawingBufferWidth),F.height=Math.min(M,this.gl.drawingBufferHeight),this},snapshotPixel:function(C,E,P){return this.snapshotArea(C,E,1,1,P),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(C,E,P,M,O,A,R,F,I,B,N){O===void 0&&(O=!1),A===void 0&&(A=0),R===void 0&&(R=0),F===void 0&&(F=E),I===void 0&&(I=P);var Y=this.currentFramebuffer;this.snapshotArea(A,R,F,I,M,B,N);var X=this.snapshotState;return X.getPixel=O,X.isFramebuffer=!0,X.bufferWidth=E,X.bufferHeight=P,this.setFramebuffer(C),T(this.canvas,X),this.setFramebuffer(Y),X.callback=null,X.isFramebuffer=!1,this},canvasToTexture:function(C,E,P,M){return P===void 0&&(P=!1),M===void 0&&(M=!1),E?this.updateCanvasTexture(C,E,M):this.createCanvasTexture(C,P,M)},createCanvasTexture:function(C,E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);var M=this.gl,O=M.NEAREST,A=M.NEAREST,R=C.width,F=C.height,I=M.CLAMP_TO_EDGE,B=c(R,F);return!E&&B&&(I=M.REPEAT),this.config.antialias&&(O=B?this.mipmapFilter:M.LINEAR,A=M.LINEAR),this.createTexture2D(0,O,A,I,I,M.RGBA,C,R,F,!0,!1,P)},updateCanvasTexture:function(C,E,P){P===void 0&&(P=!1);var M=this.gl,O=C.width,A=C.height;if(O>0&&A>0){M.activeTexture(M.TEXTURE0);var R=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,E),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,C),E.width=O,E.height=A,R&&M.bindTexture(M.TEXTURE_2D,R)}return E},createVideoTexture:function(C,E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);var M=this.gl,O=M.NEAREST,A=M.NEAREST,R=C.videoWidth,F=C.videoHeight,I=M.CLAMP_TO_EDGE,B=c(R,F);return!E&&B&&(I=M.REPEAT),this.config.antialias&&(O=B?this.mipmapFilter:M.LINEAR,A=M.LINEAR),this.createTexture2D(0,O,A,I,I,M.RGBA,C,R,F,!0,!0,P)},updateVideoTexture:function(C,E,P){P===void 0&&(P=!1);var M=this.gl,O=C.videoWidth,A=C.videoHeight;if(O>0&&A>0){M.activeTexture(M.TEXTURE0);var R=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,E),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,C),E.width=O,E.height=A,R&&M.bindTexture(M.TEXTURE_2D,R)}return E},setTextureFilter:function(C,E){var P=this.gl,M=[P.LINEAR,P.NEAREST][E];P.activeTexture(P.TEXTURE0);var O=P.getParameter(P.TEXTURE_BINDING_2D);return P.bindTexture(P.TEXTURE_2D,C),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,M),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,M),O&&P.bindTexture(P.TEXTURE_2D,O),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var C=this.gl,E=this.tempTextures,P=0;P<E.length;P++)C.deleteTexture(E[P]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});e.exports=S},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(92),n=t(102),a=t(373),h=t(376),r=t(377),o=t(108),c=t(378),l=t(379),f=t(380),p=t(381),g=new s({initialize:function(x){this.game=x.game,this.renderer=x,this.classes=new n([[u.UTILITY_PIPELINE,p],[u.MULTI_PIPELINE,o],[u.BITMAPMASK_PIPELINE,a],[u.SINGLE_PIPELINE,f],[u.ROPE_PIPELINE,l],[u.LIGHT_PIPELINE,r],[u.POINTLIGHT_PIPELINE,c],[u.GRAPHICS_PIPELINE,h]]),this.postPipelineClasses=new n,this.pipelines=new n,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(m){var x,y,T=this,S=this.game;if(this.classes.each(function(E,P){x=T.add(E,new P({game:S})),E===u.UTILITY_PIPELINE&&(T.UTILITY_PIPELINE=x,T.fullFrame1=x.fullFrame1,T.fullFrame2=x.fullFrame2,T.halfFrame1=x.halfFrame1,T.halfFrame2=x.halfFrame2)}),this.MULTI_PIPELINE=this.get(u.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(u.BITMAPMASK_PIPELINE),m)for(y in m){var C=m[y];x=new C(S),x.isPostFX?this.postPipelineClasses.set(y,C):this.has(y)||(this.classes.set(y,C),this.add(y,x))}},add:function(m,x){if(x.isPostFX){console.warn(m+" is a Post Pipeline. Use `addPostPipeline` instead");return}var y=this.pipelines,T=this.renderer;return y.has(m)?console.warn("Pipeline exists: "+m):(x.name=m,x.manager=this,y.set(m,x)),x.hasBooted||x.boot(),T.width!==0&&T.height!==0&&x.resize(T.width,T.height),x},addPostPipeline:function(m,x){this.postPipelineClasses.has(m)||this.postPipelineClasses.set(m,x)},flush:function(){this.current&&this.current.flush()},has:function(m){var x=this.pipelines;return typeof m=="string"?x.has(m):!!x.contains(m)},get:function(m){var x=this.pipelines;if(typeof m=="string")return x.get(m);if(x.contains(m))return m},getPostPipeline:function(m,x){var y=this.postPipelineClasses,T;if(typeof m=="string"?T=y.get(m):typeof m=="function"?y.contains(m)&&(T=m):typeof m=="object"&&(T=y.get(m.name)),T){var S=new T(this.game);return x&&(S.gameObject=x),S}},remove:function(m,x,y){x===void 0&&(x=!0),y===void 0&&(y=!0),this.pipelines.delete(m),x&&this.classes.delete(m),y&&this.postPipelineClasses.delete(m)},set:function(m,x,y){if(!m.isPostFX)return this.isCurrent(m,y)||(this.flush(),this.current&&this.current.unbind(),this.current=m,m.bind(y)),m.updateProjectionMatrix(),m.onBind(x),m},preBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},preBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},isCurrent:function(m,x){var y=this.renderer,T=this.current;return T&&!x&&(x=T.currentShader),!(T!==m||x.program!==y.currentProgram)},copyFrame:function(m,x,y,T,S){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(m,x,y,T,S),this},copyToGame:function(m){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(m),this},drawFrame:function(m,x,y,T){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(m,x,y,T),this},blendFrames:function(m,x,y,T,S){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(m,x,y,T,S),this},blendFramesAdditive:function(m,x,y,T,S){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(m,x,y,T,S),this},clearFrame:function(m,x){return this.UTILITY_PIPELINE.clearFrame(m,x),this},blitFrame:function(m,x,y,T,S,C){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(m,x,y,T,S,C),this},copyFrameRect:function(m,x,y,T,S,C,E,P){return this.UTILITY_PIPELINE.copyFrameRect(m,x,y,T,S,C,E,P),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(m){return this.UTILITY_PIPELINE.bind(m)},rebind:function(m){m===void 0&&this.previous&&(m=this.previous);var x=this.renderer,y=x.gl;y.disable(y.DEPTH_TEST),y.disable(y.CULL_FACE),x.hasActiveStencilMask()?y.clear(y.DEPTH_BUFFER_BIT):(y.disable(y.STENCIL_TEST),y.clear(y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)),y.viewport(0,0,x.width,x.height),x.currentProgram=null,x.setBlendMode(0,!0);var T=this.pipelines.entries;for(var S in T)T[S].glReset=!0;m&&(this.current=m,m.rebind()),x.resetTextures()},clear:function(){var m=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,m.currentProgram=null,m.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});e.exports=g},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(866),a=t(867),h=t(107),r=t(58),o=new s({Extends:r,initialize:function(l){l.fragShader=u(l,"fragShader",n),l.vertShader=u(l,"vertShader",a),l.batchSize=u(l,"batchSize",1),l.vertices=u(l,"vertices",[-1,1,-1,-7,7,1]),l.attributes=u(l,"attributes",[{name:"inPosition",size:2,type:h.FLOAT}]),r.call(this,l)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(c,l){r.prototype.resize.call(this,c,l),this.set2f("uResolution",c,l)},beginMask:function(c,l,f){var p=this.gl;if(c.bitmapMask&&p){var g=this.renderer;g.flush(),g.pushFramebuffer(c.mainFramebuffer),p.disable(p.STENCIL_TEST),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),g.currentCameraMask.mask!==c&&(g.currentMask.mask=c,g.currentMask.camera=f)}},endMask:function(c,l){var f=this.gl,p=this.renderer,g=c.bitmapMask;if(g&&f){p.flush(),p.pushFramebuffer(c.maskFramebuffer),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT),p.setBlendMode(0,!0),g.renderWebGL(p,g,l),p.flush(),p.popFramebuffer(),p.popFramebuffer();var m=p.getCurrentStencilMask();m?(f.enable(f.STENCIL_TEST),m.mask.applyStencil(p,m.camera,!0)):p.currentMask.mask=null,p.pipelines.set(this),f.activeTexture(f.TEXTURE1),f.bindTexture(f.TEXTURE_2D,c.maskTexture),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,c.mainTexture),this.set1i("uInvertMaskAlpha",c.invertAlpha),f.drawArrays(this.topology,0,3),p.resetTextures()}}});e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_FLUSH:t(868),BEFORE_FLUSH:t(869),BIND:t(870),BOOT:t(871),DESTROY:t(872),REBIND:t(873),RESIZE:t(874)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(107),a=new s({initialize:function(r,o,c,l,f){this.pipeline=r,this.name=o,this.renderer=r.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(c,l),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(f),this.createUniforms()},createAttributes:function(h){var r=0,o=0,c=[];this.vertexComponentCount=0;for(var l=0;l<h.length;l++){var f=h[l],p=f.name,g=u(f,"size",1),m=u(f,"type",n.FLOAT),x=m.enum,y=m.size,T=!!f.normalized;c.push({name:p,size:g,type:x,normalized:T,offset:o,enabled:!1,location:-1}),y===4?r+=g:r++,o+=g*y}this.vertexSize=o,this.vertexComponentCount=r,this.attributes=c},bind:function(h,r){return h===void 0&&(h=!1),r===void 0&&(r=!1),r&&this.pipeline.flush(),this.renderer.setProgram(this.program),h&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(h){h===void 0&&(h=!1);for(var r=this.gl,o=this.vertexSize,c=this.attributes,l=this.program,f=0;f<c.length;f++){var p=c[f],g=p.size,m=p.type,x=p.offset,y=p.enabled,T=p.location,S=!!p.normalized;if(h){var C=r.getAttribLocation(l,p.name);C>=0?(r.enableVertexAttribArray(C),r.vertexAttribPointer(C,g,m,S,o,x),p.enabled=!0,p.location=C):C!==-1&&r.disableVertexAttribArray(C)}else y?r.vertexAttribPointer(T,g,m,S,o,x):!y&&T>-1&&(r.disableVertexAttribArray(T),p.location=-1)}return this},createUniforms:function(){var h=this.gl,r=this.program,o=this.uniforms,c,l,f,p=h.getProgramParameter(r,h.ACTIVE_UNIFORMS);for(c=0;c<p;c++){var g=h.getActiveUniform(r,c);if(g){l=g.name,f=h.getUniformLocation(r,l),f!==null&&(o[l]={name:l,location:f,value1:null,value2:null,value3:null,value4:null});var m=l.indexOf("[");m>0&&(l=l.substr(0,m),o.hasOwnProperty(l)||(f=h.getUniformLocation(r,l),f!==null&&(o[l]={name:l,location:f,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(h){return this.uniforms.hasOwnProperty(h)},resetUniform:function(h){var r=this.uniforms[h];return r&&(r.value1=null,r.value2=null,r.value3=null,r.value4=null),this},setUniform1:function(h,r,o,c){var l=this.uniforms[r];return l?((c||l.value1!==o)&&(l.value1=o,this.renderer.setProgram(this.program),h.call(this.gl,l.location,o),this.pipeline.currentShader=this),this):this},setUniform2:function(h,r,o,c,l){var f=this.uniforms[r];return f?((l||f.value1!==o||f.value2!==c)&&(f.value1=o,f.value2=c,this.renderer.setProgram(this.program),h.call(this.gl,f.location,o,c),this.pipeline.currentShader=this),this):this},setUniform3:function(h,r,o,c,l,f){var p=this.uniforms[r];return p?((f||p.value1!==o||p.value2!==c||p.value3!==l)&&(p.value1=o,p.value2=c,p.value3=l,this.renderer.setProgram(this.program),h.call(this.gl,p.location,o,c,l),this.pipeline.currentShader=this),this):this},setUniform4:function(h,r,o,c,l,f,p){var g=this.uniforms[r];return g?((p||g.value1!==o||g.value2!==c||g.value3!==l||g.value4!==f)&&(g.value1=o,g.value2=c,g.value3=l,g.value4=f,this.renderer.setProgram(this.program),h.call(this.gl,g.location,o,c,l,f),this.pipeline.currentShader=this),this):this},set1f:function(h,r){return this.setUniform1(this.gl.uniform1f,h,r)},set2f:function(h,r,o){return this.setUniform2(this.gl.uniform2f,h,r,o)},set3f:function(h,r,o,c){return this.setUniform3(this.gl.uniform3f,h,r,o,c)},set4f:function(h,r,o,c,l){return this.setUniform4(this.gl.uniform4f,h,r,o,c,l)},set1fv:function(h,r){return this.setUniform1(this.gl.uniform1fv,h,r,!0)},set2fv:function(h,r){return this.setUniform1(this.gl.uniform2fv,h,r,!0)},set3fv:function(h,r){return this.setUniform1(this.gl.uniform3fv,h,r,!0)},set4fv:function(h,r){return this.setUniform1(this.gl.uniform4fv,h,r,!0)},set1iv:function(h,r){return this.setUniform1(this.gl.uniform1iv,h,r,!0)},set2iv:function(h,r){return this.setUniform1(this.gl.uniform2iv,h,r,!0)},set3iv:function(h,r){return this.setUniform1(this.gl.uniform3iv,h,r,!0)},set4iv:function(h,r){return this.setUniform1(this.gl.uniform4iv,h,r,!0)},set1i:function(h,r){return this.setUniform1(this.gl.uniform1i,h,r)},set2i:function(h,r,o){return this.setUniform2(this.gl.uniform2i,h,r,o)},set3i:function(h,r,o,c){return this.setUniform3(this.gl.uniform3i,h,r,o,c)},set4i:function(h,r,o,c,l){return this.setUniform4(this.gl.uniform4i,h,r,o,c,l)},setMatrix2fv:function(h,r,o){return this.setUniform2(this.gl.uniformMatrix2fv,h,r,o,!0)},setMatrix3fv:function(h,r,o){return this.setUniform2(this.gl.uniformMatrix3fv,h,r,o,!0)},setMatrix4fv:function(h,r,o){return this.setUniform2(this.gl.uniformMatrix4fv,h,r,o,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(59),n=t(2),a=t(875),h=t(876),r=t(25),o=t(107),c=t(58),l=new s({Extends:c,initialize:function(p){p.fragShader=n(p,"fragShader",a),p.vertShader=n(p,"vertShader",h),p.attributes=n(p,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:o.UNSIGNED_BYTE,normalized:!0}]),c.call(this,p),this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(f,p,g,m,x,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(x,T);var S=f+g,C=p+m,E=T.getX(f,p),P=T.getY(f,p),M=T.getX(f,C),O=T.getY(f,C),A=T.getX(S,C),R=T.getY(S,C),F=T.getX(S,p),I=T.getY(S,p),B=this.fillTint;this.batchQuad(E,P,M,O,A,R,F,I,B.TL,B.TR,B.BL,B.BR)},batchFillTriangle:function(f,p,g,m,x,y,T,S){this.renderer.pipelines.set(this);var C=this.calcMatrix;S&&S.multiply(T,C);var E=C.getX(f,p),P=C.getY(f,p),M=C.getX(g,m),O=C.getY(g,m),A=C.getX(x,y),R=C.getY(x,y),F=this.fillTint;this.batchTri(E,P,M,O,A,R,F.TL,F.TR,F.BL)},batchStrokeTriangle:function(f,p,g,m,x,y,T,S,C){var E=this.tempTriangle;E[0].x=f,E[0].y=p,E[0].width=T,E[1].x=g,E[1].y=m,E[1].width=T,E[2].x=x,E[2].y=y,E[2].width=T,E[3].x=f,E[3].y=p,E[3].width=T,this.batchStrokePath(E,T,!1,S,C)},batchFillPath:function(f,p,g){this.renderer.pipelines.set(this);var m=this.calcMatrix;g&&g.multiply(p,m);for(var x=f.length,y=this.polygonCache,T,S,C=this.fillTint.TL,E=this.fillTint.TR,P=this.fillTint.BL,M=0;M<x;++M)S=f[M],y.push(S.x,S.y);T=u(y),x=T.length;for(var O=0;O<x;O+=3){var A=T[O+0]*2,R=T[O+1]*2,F=T[O+2]*2,I=y[A+0],B=y[A+1],N=y[R+0],Y=y[R+1],X=y[F+0],W=y[F+1],w=m.getX(I,B),L=m.getY(I,B),D=m.getX(N,Y),b=m.getY(N,Y),G=m.getX(X,W),z=m.getY(X,W);this.batchTri(w,L,D,b,G,z,C,E,P)}y.length=0},batchStrokePath:function(f,p,g,m,x){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=f.length-1,T=0;T<y;T++){var S=f[T],C=f[T+1];this.batchLine(S.x,S.y,C.x,C.y,S.width/2,C.width/2,p,T,!g&&T===y-1,m,x)}},batchLine:function(f,p,g,m,x,y,T,S,C,E,P){this.renderer.pipelines.set(this);var M=this.calcMatrix;P&&P.multiply(E,M);var O=g-f,A=m-p,R=Math.sqrt(O*O+A*A),F=x*(m-p)/R,I=x*(f-g)/R,B=y*(m-p)/R,N=y*(f-g)/R,Y=g-B,X=m-N,W=f-F,w=p-I,L=g+B,D=m+N,b=f+F,G=p+I,z=M.getX(Y,X),U=M.getY(Y,X),H=M.getX(W,w),$=M.getY(W,w),K=M.getX(L,D),Z=M.getY(L,D),k=M.getX(b,G),J=M.getY(b,G),q=this.strokeTint,Q=q.TL,_=q.TR,at=q.BL,st=q.BR;if(this.batchQuad(k,J,H,$,z,U,K,Z,Q,_,at,st),!(T<=2)){var tt=this.prevQuad,j=this.firstQuad;S>0&&tt[4]?this.batchQuad(k,J,H,$,tt[0],tt[1],tt[2],tt[3],Q,_,at,st):(j[0]=k,j[1]=J,j[2]=H,j[3]=$,j[4]=1),C&&j[4]?this.batchQuad(z,U,K,Z,j[0],j[1],j[2],j[3],Q,_,at,st):(tt[0]=z,tt[1]=U,tt[2]=K,tt[3]=Z,tt[4]=1)}},batchVert:function(f,p,g){var m=this.vertexViewF32,x=this.vertexViewU32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;m[++y]=f,m[++y]=p,x[++y]=g,this.vertexCount++},batchQuad:function(f,p,g,m,x,y,T,S,C,E,P,M){var O=!1;return this.shouldFlush(6)&&(this.flush(),O=!0),this.batchVert(f,p,C),this.batchVert(g,m,P),this.batchVert(x,y,M),this.batchVert(f,p,C),this.batchVert(x,y,M),this.batchVert(T,S,E),O},batchTri:function(f,p,g,m,x,y,T,S,C){var E=!1;return this.shouldFlush(3)&&(this.flush(),E=!0),this.batchVert(f,p,T),this.batchVert(g,m,S),this.batchVert(x,y,C),E},destroy:function(){return c.prototype.destroy.call(this),this.polygonCache=null,this}});e.exports=l},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(877),a=t(108),h=t(3),r=t(58),o=10,c=new h,l=new s({Extends:a,initialize:function(p){o=p.game.renderer.config.maxLights;for(var g=u(p,"fragShader",n),m=[],x=1;x<=o;x++)m.push({name:"lights"+x,fragShader:g.replace("%LIGHT_COUNT%",x.toString())});p.shaders=m,a.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){r.prototype.boot.call(this);var f=this.gl,p=f.createTexture();f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,p),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,1,1,0,f.RGBA,f.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:p};for(var g=0;g<this.shaders.length;g++)this["lightShader"+(g+1)]=this.shaders[g]},onRender:function(f,p){var g=f.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var m=g.getLights(p),x=m.length;if(x!==0){this.lightsActive=!0,this.setShader(this["lightShader"+x],!0);var y,T=this.renderer,S=T.height,C=p.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),y=0;y<x;y++){var E=m[y].light,P=E.color,M="uLights["+y+"].";C.transformPoint(E.x,E.y,c),this.set2f(M+"position",c.x-p.scrollX*E.scrollFactorX*p.zoom,S-(c.y-p.scrollY*E.scrollFactorY*p.zoom)),this.set3f(M+"color",P.r,P.g,P.b),this.set1f(M+"intensity",E.intensity),this.set1f(M+"radius",E.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(f){if(f!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(f){var g=-f,m=Math.cos(g),x=Math.sin(g);p[1]=x,p[3]=-x,p[0]=p[4]=m}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=f}},setTexture2D:function(f,p){var g=this.renderer;f===void 0&&(f=g.tempTextures[0]);var m=this.getNormalMap(p);g.isNewNormalMap(f,m)&&(this.flush(),g.setTextureZero(f),g.setNormalMap(m));var x=p?p.rotation:0;return this.setNormalMapRotation(x),this.currentUnit=0,0},setGameObject:function(f,p){p===void 0&&(p=f.frame);var g=this.renderer,m=p.glTexture,x=this.getNormalMap(f);return g.isNewNormalMap()&&(this.flush(),g.setTextureZero(m),g.setNormalMap(x)),this.setNormalMapRotation(f.rotation),this.currentUnit=0,0},getNormalMap:function(f){var p;return f?f.displayTexture?p=f.displayTexture.dataSource[f.displayFrame.sourceIndex]:f.texture?p=f.texture.dataSource[f.frame.sourceIndex]:f.tileset&&(Array.isArray(f.tileset)?p=f.tileset[0].image.dataSource[0]:p=f.tileset.image.dataSource[0]):p=this.defaultNormalMap,p||(p=this.defaultNormalMap),p.glTexture},batchSprite:function(f,p,g){this.lightsActive&&a.prototype.batchSprite.call(this,f,p,g)},batchTexture:function(f,p,g,m,x,y,T,S,C,E,P,M,O,A,R,F,I,B,N,Y,X,W,w,L,D,b,G,z,U,H,$,K){this.lightsActive&&a.prototype.batchTexture.call(this,f,p,g,m,x,y,T,S,C,E,P,M,O,A,R,F,I,B,N,Y,X,W,w,L,D,b,G,z,U,H,$,K)},batchTextureFrame:function(f,p,g,m,x,y,T){this.lightsActive&&a.prototype.batchTextureFrame.call(this,f,p,g,m,x,y,T)}});l.LIGHT_COUNT=o,e.exports=l},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(880),a=t(881),h=t(58),r=new s({Extends:h,initialize:function(c){c.vertShader=u(c,"vertShader",a),c.fragShader=u(c,"fragShader",n),c.attributes=u(c,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),h.call(this,c)},onRender:function(o,c){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",c.zoom)},batchPointLight:function(o,c,l,f,p,g,m,x,y,T,S,C){var E=o.color,P=o.intensity,M=o.radius,O=o.attenuation,A=E.r*P,R=E.g*P,F=E.b*P,I=c.alpha*o.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(l,f,S,C,M,O,A,R,F,I),this.batchLightVert(p,g,S,C,M,O,A,R,F,I),this.batchLightVert(m,x,S,C,M,O,A,R,F,I),this.batchLightVert(l,f,S,C,M,O,A,R,F,I),this.batchLightVert(m,x,S,C,M,O,A,R,F,I),this.batchLightVert(y,T,S,C,M,O,A,R,F,I)},batchLightVert:function(o,c,l,f,p,g,m,x,y,T){var S=this.vertexViewF32,C=this.vertexCount*this.currentShader.vertexComponentCount-1;S[++C]=o,S[++C]=c,S[++C]=l,S[++C]=f,S[++C]=p,S[++C]=g,S[++C]=m,S[++C]=x,S[++C]=y,S[++C]=T,this.vertexCount++}});e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(108),a=new s({Extends:n,initialize:function(r){r.topology=5,r.batchSize=u(r,"batchSize",256),n.call(this,r)}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(108),a=t(882),h=t(883),r=t(58),o=new s({Extends:n,initialize:function(l){l.fragShader=u(l,"fragShader",a),l.vertShader=u(l,"vertShader",h),l.forceZero=!0,n.call(this,l)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0)}});e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(884),u=t(35),n=t(0),a=t(198),h=t(885),r=t(886),o=t(2),c=t(887),l=t(382),f=t(58),p=new n({Extends:f,initialize:function(m){m.renderTarget=o(m,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),m.vertShader=o(m,"vertShader",l),m.shaders=o(m,"shaders",[{name:"Copy",fragShader:r},{name:"AddBlend",fragShader:s},{name:"LinearBlend",fragShader:c},{name:"ColorMatrix",fragShader:h}]),m.attributes=o(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),m.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],m.batchSize=1,f.call(this,m),this.colorMatrix=new a,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){f.prototype.boot.call(this);var g=this.shaders,m=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=m[0],this.fullFrame2=m[1],this.halfFrame1=m[2],this.halfFrame2=m[3]},copyFrame:function(g,m,x,y,T){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0);var S=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),m?(S.viewport(0,0,m.width,m.height),S.bindFramebuffer(S.FRAMEBUFFER,m.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m.texture,0)):S.viewport(0,0,g.width,g.height),y&&(T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blitFrame:function(g,m,x,y,T,S){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0),S===void 0&&(S=!1);var C=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture),g.height>m.height)C.viewport(0,0,g.width,g.height),this.setTargetUVs(g,m);else{var E=m.height-g.height;C.viewport(0,E,g.width,g.height)}if(C.bindFramebuffer(C.FRAMEBUFFER,m.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,m.texture,0),y&&(T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),S){var P=this.renderer.currentBlendMode;this.renderer.setBlendMode(u.ERASE)}C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),S&&this.renderer.setBlendMode(P),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,m,x,y,T,S,C,E){C===void 0&&(C=!0),E===void 0&&(E=!0);var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,g.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,g.texture,0),C&&(E?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,m.texture),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,x,y,T,S),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},copyToGame:function(g){var m=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,g.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(g,m,x,y){x===void 0&&(x=!0),y===void 0&&(y=this.colorMatrix);var T=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",y.getData()),this.set1f("uAlpha",y.alpha),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,g.texture),m?(T.viewport(0,0,m.width,m.height),T.bindFramebuffer(T.FRAMEBUFFER,m.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,m.texture,0)):T.viewport(0,0,g.width,g.height),x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFrames:function(g,m,x,y,T,S){y===void 0&&(y=1),T===void 0&&(T=!0),S===void 0&&(S=this.linearShader);var C=this.gl;this.setShader(S),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",y),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture),C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,m.texture),x?(C.bindFramebuffer(C.FRAMEBUFFER,x.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,x.texture,0),C.viewport(0,0,x.width,x.height)):C.viewport(0,0,g.width,g.height),T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blendFramesAdditive:function(g,m,x,y,T){this.blendFrames(g,m,x,y,T,this.addShader)},clearFrame:function(g,m){m===void 0&&(m=!0);var x=this.gl;x.viewport(0,0,g.width,g.height),x.bindFramebuffer(x.FRAMEBUFFER,g.framebuffer),m?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT);var y=this.renderer.currentFramebuffer;x.bindFramebuffer(x.FRAMEBUFFER,y)},setUVs:function(g,m,x,y,T,S,C,E){var P=this.vertexViewF32;P[2]=g,P[3]=m,P[6]=x,P[7]=y,P[10]=T,P[11]=S,P[14]=g,P[15]=m,P[18]=T,P[19]=S,P[22]=C,P[23]=E},setTargetUVs:function(g,m){var x=m.height/g.height;x>.5?x=.5-(x-.5):x=.5+(.5-x),this.setUVs(0,x,0,1+x,1,1+x,1,x)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});e.exports=p},function(e,d){e.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(38),n=t(2),a=function(h,r){var o=h.getContext("experimental-webgl"),c=n(r,"callback"),l=n(r,"type","image/png"),f=n(r,"encoder",.92),p=n(r,"x",0),g=n(r,"y",0),m=n(r,"getPixel",!1),x=n(r,"isFramebuffer",!1),y=x?n(r,"bufferWidth",1):o.drawingBufferWidth,T=x?n(r,"bufferHeight",1):o.drawingBufferHeight;if(m){var S=new Uint8Array(4),C=x?g:T-g;o.readPixels(p,C,1,1,o.RGBA,o.UNSIGNED_BYTE,S),c.call(null,new u(S[0],S[1],S[2],S[3]/255))}else{var E=n(r,"width",y),P=n(r,"height",T),M=E*P*4,O=new Uint8Array(M);o.readPixels(p,T-g-P,E,P,o.RGBA,o.UNSIGNED_BYTE,O);for(var A=s.createWebGL(this,E,P),R=A.getContext("2d"),F=R.getImageData(0,0,E,P),I=F.data,B=0;B<P;B++)for(var N=0;N<E;N++){var Y=((P-B-1)*E+N)*4,X=(B*E+N)*4;I[X+0]=O[Y+0],I[X+1]=O[Y+1],I[X+2]=O[Y+2],I[X+3]=O[Y+3]}R.putImageData(F,0,0);var W=new Image;W.onerror=function(){c.call(null),s.remove(A)},W.onload=function(){c.call(null,W),s.remove(A)},W.src=A.toDataURL(l,f)}};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(33),u=function(n){var a=n.config;if(!a.hideBanner){var h="WebGL";a.renderType===s.CANVAS?h="Canvas":a.renderType===s.HEADLESS&&(h="Headless");var r=a.audio,o=n.device.audio,c;if(o.webAudio&&!r.disableWebAudio?c="Web Audio":r.noAudio||!o.webAudio&&!o.audioData?c="No Audio":c="HTML5 Audio",n.device.browser.ie)window.console&&console.log("Phaser v"+s.VERSION+" / https://phaser.io");else{var l="",f=[l];if(Array.isArray(a.bannerBackgroundColor)){var p;a.bannerBackgroundColor.forEach(function(m){l=l.concat("%c "),f.push("background: "+m),p=m}),f[f.length-1]="color: "+a.bannerTextColor+"; background: "+p}else l=l.concat("%c "),f.push("color: "+a.bannerTextColor+"; background: "+a.bannerBackgroundColor);f.push("background: transparent"),a.gameTitle&&(l=l.concat(a.gameTitle),a.gameVersion&&(l=l.concat(" v"+a.gameVersion)),a.hidePhaser||(l=l.concat(" / ")));var g="";a.hidePhaser||(l=l.concat("Phaser v"+s.VERSION+g+" ("+h+" | "+c+")")),l=l.concat(" %c "+a.gameURL),f[0]=l,console.log.apply(console,f)}}};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(6),n=t(1),a=t(386),h=new s({initialize:function(o,c){this.game=o,this.raf=new a,this.started=!1,this.running=!1,this.minFps=u(c,"min",5),this.targetFps=u(c,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=n,this.forceSetTimeOut=u(c,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=u(c,"deltaHistory",10),this.panicMax=u(c,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=u(c,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var r=window.performance.now();this.time=r,this.lastTime=r,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=Math.min(this._target,this.deltaHistory[o]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(r){if(this.started)return this;this.started=!0,this.running=!0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=r,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var r=window.performance.now();this.now=r;var o=r-this.lastTime;o<0&&(o=0),this.rawDelta=o;var c=this.deltaIndex,l=this.deltaHistory,f=this.deltaSmoothingMax,p=o,g=o;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,p=Math.min(p,this._target)),p>this._min&&(p=l[c],p=Math.min(p,this._min)),l[c]=p,this.deltaIndex++,this.deltaIndex>f&&(this.deltaIndex=0),g=0;for(var m=0;m<f;m++)g+=l[m];g/=f}this.delta=g,this.time+=this.rawDelta,r>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0),this.framesThisSecond++;var x=g/this._target;this.callback(r,g,x),this.lastTime=r,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(r){this.running||(r&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=n,this.raf=null,this.game=null}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(1),n=new s({initialize:function(){this.isRunning=!1,this.callback=u,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var h=this;this.step=function r(){var o=window.performance.now();h.lastTime=h.tick,h.tick=o,h.callback(o),h.timeOutID=window.requestAnimationFrame(r)},this.stepTimeout=function r(){var o=Date.now(),c=Math.min(Math.max(h.target*2+h.tick-o,0),h.target);h.lastTime=h.tick,h.tick=o,h.callback(o),h.timeOutID=window.setTimeout(r,c)}},start:function(a,h,r){this.isRunning||(this.callback=a,this.isSetTimeOut=h,this.target=r,this.isRunning=!0,this.timeOutID=h?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=u}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(22),u=function(n){var a,h=n.events;if(document.hidden!==void 0)a="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(c){document[c+"Hidden"]!==void 0&&(document.hidden=function(){return document[c+"Hidden"]},a=c+"visibilitychange")})}var o=function(c){document.hidden||c.type==="pause"?h.emit(s.HIDDEN):h.emit(s.VISIBLE)};a&&document.addEventListener(a,o,!1),window.onblur=function(){h.emit(s.BLUR)},window.onfocus=function(){h.emit(s.FOCUS)},window.focus&&n.config.autoFocus&&window.focus()};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(389),u=t(31),n=t(6),a=function(h){var r=n(h,"data",[]),o=n(h,"canvas",null),c=n(h,"palette",s),l=n(h,"pixelWidth",1),f=n(h,"pixelHeight",l),p=n(h,"resizeCanvas",!0),g=n(h,"clearCanvas",!0),m=n(h,"preRender",null),x=n(h,"postRender",null),y=Math.floor(Math.abs(r[0].length*l)),T=Math.floor(Math.abs(r.length*f));o||(o=u.create2D(this,y,T),p=!1,g=!1),p&&(o.width=y,o.height=T);var S=o.getContext("2d");g&&S.clearRect(0,0,y,T),m&&m(o,S);for(var C=0;C<r.length;C++)for(var E=r[C],P=0;P<E.length;P++){var M=E[P];M!=="."&&M!==" "&&(S.fillStyle=c[M],S.fillRect(P*l,C*f,l,f))}return x&&x(o,S),o};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(358),n=t(94),a=t(3),h=new s({Extends:n,initialize:function(o,c,l,f){n.call(this,"CubicBezierCurve"),Array.isArray(o)&&(f=new a(o[6],o[7]),l=new a(o[4],o[5]),c=new a(o[2],o[3]),o=new a(o[0],o[1])),this.p0=o,this.p1=c,this.p2=l,this.p3=f},getStartPoint:function(r){return r===void 0&&(r=new a),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,o){o===void 0&&(o=new a);var c=this.p0,l=this.p1,f=this.p2,p=this.p3;return o.set(u(r,c.x,l.x,f.x,p.x),u(r,c.y,l.y,f.y,p.y))},draw:function(r,o){o===void 0&&(o=32);var c=this.getPoints(o);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var l=1;l<c.length;l++)r.lineTo(c[l].x,c[l].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});h.fromJSON=function(r){var o=r.points,c=new a(o[0],o[1]),l=new a(o[2],o[3]),f=new a(o[4],o[5]),p=new a(o[6],o[7]);return new h(c,l,f,p)},e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(94),n=t(36),a=t(6),h=t(196),r=t(3),o=new s({Extends:u,initialize:function(l,f,p,g,m,x,y,T){if(typeof l=="object"){var S=l;l=a(S,"x",0),f=a(S,"y",0),p=a(S,"xRadius",0),g=a(S,"yRadius",p),m=a(S,"startAngle",0),x=a(S,"endAngle",360),y=a(S,"clockwise",!1),T=a(S,"rotation",0)}else g===void 0&&(g=p),m===void 0&&(m=0),x===void 0&&(x=360),y===void 0&&(y=!1),T===void 0&&(T=0);u.call(this,"EllipseCurve"),this.p0=new r(l,f),this._xRadius=p,this._yRadius=g,this._startAngle=n(m),this._endAngle=n(x),this._clockwise=y,this._rotation=n(T)},getStartPoint:function(c){return c===void 0&&(c=new r),this.getPoint(0,c)},getResolution:function(c){return c*2},getPoint:function(c,l){l===void 0&&(l=new r);for(var f=Math.PI*2,p=this._endAngle-this._startAngle,g=Math.abs(p)<Number.EPSILON;p<0;)p+=f;for(;p>f;)p-=f;p<Number.EPSILON&&(g?p=0:p=f),this._clockwise&&!g&&(p===f?p=-f:p=p-f);var m=this._startAngle+c*p,x=this.p0.x+this._xRadius*Math.cos(m),y=this.p0.y+this._yRadius*Math.sin(m);if(this._rotation!==0){var T=Math.cos(this._rotation),S=Math.sin(this._rotation),C=x-this.p0.x,E=y-this.p0.y;x=C*T-E*S+this.p0.x,y=C*S+E*T+this.p0.y}return l.set(x,y)},setXRadius:function(c){return this.xRadius=c,this},setYRadius:function(c){return this.yRadius=c,this},setWidth:function(c){return this.xRadius=c/2,this},setHeight:function(c){return this.yRadius=c/2,this},setStartAngle:function(c){return this.startAngle=c,this},setEndAngle:function(c){return this.endAngle=c,this},setClockwise:function(c){return this.clockwise=c,this},setRotation:function(c){return this.rotation=c,this},x:{get:function(){return this.p0.x},set:function(c){this.p0.x=c}},y:{get:function(){return this.p0.y},set:function(c){this.p0.y=c}},xRadius:{get:function(){return this._xRadius},set:function(c){this._xRadius=c}},yRadius:{get:function(){return this._yRadius},set:function(c){this._yRadius=c}},startAngle:{get:function(){return h(this._startAngle)},set:function(c){this._startAngle=n(c)}},endAngle:{get:function(){return h(this._endAngle)},set:function(c){this._endAngle=n(c)}},clockwise:{get:function(){return this._clockwise},set:function(c){this._clockwise=c}},angle:{get:function(){return h(this._rotation)},set:function(c){this._rotation=n(c)}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:h(this._startAngle),endAngle:h(this._endAngle),clockwise:this._clockwise,rotation:h(this._rotation)}}});o.fromJSON=function(c){return new o(c)},e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(94),n=t(199),a=t(10),h=t(3),r=new s({Extends:u,initialize:function(c,l){u.call(this,"LineCurve"),Array.isArray(c)&&(l=new h(c[2],c[3]),c=new h(c[0],c[1])),this.p0=c,this.p1=l,this.arcLengthDivisions=1},getBounds:function(o){return o===void 0&&(o=new a),n([this.p0,this.p1],o)},getStartPoint:function(o){return o===void 0&&(o=new h),o.copy(this.p0)},getResolution:function(o){return o===void 0&&(o=1),o},getPoint:function(o,c){return c===void 0&&(c=new h),o===1?c.copy(this.p1):(c.copy(this.p1).subtract(this.p0).scale(o).add(this.p0),c)},getPointAt:function(o,c){return this.getPoint(o,c)},getTangent:function(o,c){return c===void 0&&(c=new h),c.copy(this.p1).subtract(this.p0).normalize(),c},getUtoTmapping:function(o,c,l){var f;if(c){var p=this.getLengths(l),g=p[p.length-1],m=Math.min(c,g);f=m/g}else f=o;return f},draw:function(o){return o.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),o},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});r.fromJSON=function(o){var c=o.points,l=new h(c[0],c[1]),f=new h(c[2],c[3]);return new r(l,f)},e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(3),n=new s({initialize:function(h,r){this.active=!1,this.p0=new u(h,r)},getPoint:function(a,h){return h===void 0&&(h=new u),h.copy(this.p0)},getPointAt:function(a,h){return this.getPoint(a,h)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(94),n=t(359),a=t(3),h=new s({Extends:u,initialize:function(o,c,l){u.call(this,"QuadraticBezier"),Array.isArray(o)&&(l=new a(o[4],o[5]),c=new a(o[2],o[3]),o=new a(o[0],o[1])),this.p0=o,this.p1=c,this.p2=l},getStartPoint:function(r){return r===void 0&&(r=new a),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,o){o===void 0&&(o=new a);var c=this.p0,l=this.p1,f=this.p2;return o.set(n(r,c.x,l.x,f.x),n(r,c.y,l.y,f.y))},draw:function(r,o){o===void 0&&(o=32);var c=this.getPoints(o);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var l=1;l<c.length;l++)r.lineTo(c[l].x,c[l].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});h.fromJSON=function(r){var o=r.points,c=new a(o[0],o[1]),l=new a(o[2],o[3]),f=new a(o[4],o[5]);return new h(c,l,f)},e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(194),u=t(0),n=t(94),a=t(3),h=new u({Extends:n,initialize:function(o){o===void 0&&(o=[]),n.call(this,"SplineCurve"),this.points=[],this.addPoints(o)},addPoints:function(r){for(var o=0;o<r.length;o++){var c=new a;typeof r[o]=="number"?(c.x=r[o],c.y=r[o+1],o++):Array.isArray(r[o])?(c.x=r[o][0],c.y=r[o][1]):(c.x=r[o].x,c.y=r[o].y),this.points.push(c)}return this},addPoint:function(r,o){var c=new a(r,o);return this.points.push(c),c},getStartPoint:function(r){return r===void 0&&(r=new a),r.copy(this.points[0])},getResolution:function(r){return r*this.points.length},getPoint:function(r,o){o===void 0&&(o=new a);var c=this.points,l=(c.length-1)*r,f=Math.floor(l),p=l-f,g=c[f===0?f:f-1],m=c[f],x=c[f>c.length-2?c.length-1:f+1],y=c[f>c.length-3?c.length-1:f+2];return o.set(s(p,g.x,m.x,x.x,y.x),s(p,g.y,m.y,x.y,y.y))},toJSON:function(){for(var r=[],o=0;o<this.points.length;o++)r.push(this.points[o].x),r.push(this.points[o].y);return{type:this.type,points:r}}});h.fromJSON=function(r){return new h(r.points)},e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,h,r,o){(!h||h==="")&&(h=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!r||r==="")&&(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),o===void 0&&(o=null),this.key=a,this.fragmentSrc=h,this.vertexSrc=r,this.uniforms=o}});e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38);s.ColorSpectrum=t(909),s.ColorToRGBA=t(910),s.ComponentToHex=t(398),s.GetColor=t(103),s.GetColor32=t(328),s.HexStringToColor=t(327),s.HSLToColor=t(911),s.HSVColorWheel=t(912),s.HSVToRGB=t(188),s.HueToComponent=t(399),s.IntegerToColor=t(189),s.IntegerToRGB=t(330),s.Interpolate=t(913),s.ObjectToColor=t(331),s.RandomRGB=t(914),s.RGBStringToColor=t(332),s.RGBToHSV=t(329),s.RGBToString=t(915),s.ValueToColor=t(187),e.exports=s},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=s.toString(16);return u.length===1?"0"+u:u};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n<0&&(n+=1),n>1&&(n-=1),n<.16666666666666666?s+(u-s)*6*n:n<.5?u:n<.6666666666666666?s+(u-s)*(.6666666666666666-n)*6:s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(105),u=function(n){if(document.readyState==="complete"||document.readyState==="interactive"){n();return}var a=function(){document.removeEventListener("deviceready",a,!0),document.removeEventListener("DOMContentLoaded",a,!0),window.removeEventListener("load",a,!0),n()};document.body?s.cordova?document.addEventListener("deviceready",a,!1):(document.addEventListener("DOMContentLoaded",a,!0),window.addEventListener("load",a,!0)):window.setTimeout(a,20)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){if(!s)return window.innerHeight;var u=Math.abs(window.orientation),n={w:0,h:0},a=document.createElement("div");return a.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(a),n.w=u===90?a.offsetHeight:window.innerWidth,n.h=u===90?window.innerWidth:a.offsetHeight,document.documentElement.removeChild(a),a=null,Math.abs(window.orientation)!==90?n.h:n.w};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(201),u=function(n,a){var h=window.screen,r=h?h.orientation||h.mozOrientation||h.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return s.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return s.ORIENTATION.LANDSCAPE}else return a>n?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u;return s!==""&&(typeof s=="string"?u=document.getElementById(s):s&&s.nodeType===1&&(u=s)),u||(u=document.body),u};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u="";try{if(window.DOMParser){var n=new DOMParser;u=n.parseFromString(s,"text/xml")}else u=new ActiveXObject("Microsoft.XMLDOM"),u.loadXML(s)}catch{u=null}return!u||!u.documentElement||u.getElementsByTagName("parsererror").length?null:u};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(203),n=t(9),a=t(51),h=t(22),r=t(410),o=t(411),c=t(412),l=t(413),f=t(25),p=t(177),g=new s({initialize:function(x,y){this.game=x,this.scaleManager,this.canvas,this.config=y,this.enabled=!0,this.events=new n,this.isOver=!0,this.defaultCursor="",this.keyboard=y.inputKeyboard?new r(this):null,this.mouse=y.inputMouse?new o(this):null,this.touch=y.inputTouch?new l(this):null,this.pointers=[],this.pointersTotal=y.inputActivePointers,y.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var T=0;T<=this.pointersTotal;T++){var S=new c(this,T);S.smoothFactor=y.inputSmoothFactor,this.pointers.push(S)}this.mousePointer=y.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new f,this._tempMatrix2=new f,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],x.events.once(h.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(a.MANAGER_BOOT),this.game.events.on(h.PRE_RENDER,this.preRender,this),this.game.events.once(h.DESTROY,this.destroy,this)},setCanvasOver:function(m){this.isOver=!0,this.events.emit(a.GAME_OVER,m)},setCanvasOut:function(m){this.isOver=!1,this.events.emit(a.GAME_OUT,m)},preRender:function(){var m=this.game.loop.now,x=this.game.loop.delta,y=this.game.scene.getScenes(!0,!0);this.time=m,this.events.emit(a.MANAGER_UPDATE);for(var T=0;T<y.length;T++){var S=y[T];if(S.sys.input&&S.sys.input.updatePoll(m,x)&&this.globalTopOnly)return}},setDefaultCursor:function(m){this.defaultCursor=m,this.canvas.style.cursor!==m&&(this.canvas.style.cursor=m)},setCursor:function(m){m.cursor&&(this.canvas.style.cursor=m.cursor)},resetCursor:function(m){m.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(m){m===void 0&&(m=1);var x=[];this.pointersTotal+m>10&&(m=10-this.pointersTotal);for(var y=0;y<m;y++){var T=this.pointers.length,S=new c(this,T);S.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(S),this.pointersTotal++,x.push(S)}return x},updateInputPlugins:function(m,x){var y=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var T=0;T<y.length;T++){var S=y[T];if(S.sys.input){var C=S.sys.input.update(m,x);if(C&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var S=m.changedTouches[T],C=1;C<this.pointersTotal;C++){var E=x[C];if(!E.active){E.touchstart(S,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(u.TOUCH_START,y)},onTouchMove:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var S=m.changedTouches[T],C=1;C<this.pointersTotal;C++){var E=x[C];if(E.active&&E.identifier===S.identifier){E.touchmove(S,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(u.TOUCH_MOVE,y)},onTouchEnd:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var S=m.changedTouches[T],C=1;C<this.pointersTotal;C++){var E=x[C];if(E.active&&E.identifier===S.identifier){E.touchend(S,m),y.push(E);break}}this.updateInputPlugins(u.TOUCH_END,y)},onTouchCancel:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var S=m.changedTouches[T],C=1;C<this.pointersTotal;C++){var E=x[C];if(E.active&&E.identifier===S.identifier){E.touchcancel(S,m),y.push(E);break}}this.updateInputPlugins(u.TOUCH_CANCEL,y)},onMouseDown:function(m){var x=this.mousePointer;x.down(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(u.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(m){var x=this.mousePointer;x.move(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(u.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(m){var x=this.mousePointer;x.up(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(u.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(m){var x=this.mousePointer;x.wheel(m),this.activePointer=x,this.updateInputPlugins(u.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(m){var x=this.mouse.locked;this.mousePointer.locked=x,this.events.emit(a.POINTERLOCK_CHANGE,m,x)},inputCandidate:function(m,x){var y=m.input;if(!y||!y.enabled||!y.alwaysEnabled&&!m.willRender(x))return!1;var T=!0,S=m.parentContainer;if(S)do{if(!S.willRender(x)){T=!1;break}S=S.parentContainer}while(S);return T},hitTest:function(m,x,y,T){T===void 0&&(T=this._tempHitTest);var S=this._tempPoint,C=y.scrollX,E=y.scrollY;T.length=0;var P=m.x,M=m.y;y.getWorldPoint(P,M,S),m.worldX=S.x,m.worldY=S.y;for(var O={x:0,y:0},A=this._tempMatrix,R=this._tempMatrix2,F=0;F<x.length;F++){var I=x[F];if(!!this.inputCandidate(I,y)){var B=S.x+C*I.scrollFactorX-C,N=S.y+E*I.scrollFactorY-E;I.parentContainer?(I.getWorldTransformMatrix(A,R),A.applyInverse(B,N,O)):p(B,N,I.x,I.y,I.rotation,I.scaleX,I.scaleY,O),this.pointWithinHitArea(I,O.x,O.y)&&T.push(I)}}return T},pointWithinHitArea:function(m,x,y){x+=m.displayOriginX,y+=m.displayOriginY;var T=m.input;return T&&T.hitAreaCallback(T.hitArea,x,y,m)?(T.localX=x,T.localY=y,!0):!1},pointWithinInteractiveObject:function(m,x,y){return m.hitArea?(x+=m.gameObject.displayOriginX,y+=m.gameObject.displayOriginY,m.localX=x,m.localY=y,m.hitAreaCallback(m.hitArea,x,y,m)):!1},transformPointer:function(m,x,y,T){var S=m.position,C=m.prevPosition;C.x=S.x,C.y=S.y;var E=this.scaleManager.transformX(x),P=this.scaleManager.transformY(y),M=m.smoothFactor;!T||M===0?(S.x=E,S.y=P):(S.x=E*M+C.x*(1-M),S.y=P*M+C.y*(1-M))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(h.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var m=0;m<this.pointers.length;m++)this.pointers[m].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});e.exports=g},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93),u=t(0),n=t(22),a=t(51),h=t(143),r=t(1),o=new u({initialize:function(l){this.manager=l,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=r,this.onKeyUp=r,l.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var c=this.manager.config;this.enabled=c.inputKeyboard,this.target=c.inputKeyboardEventTarget,this.addCapture(c.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(n.POST_STEP,this.postUpdate,this)},startListeners:function(){var c=this;this.onKeyDown=function(f){if(!(f.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(f),c.manager.events.emit(a.MANAGER_PROCESS);var p=f.altKey||f.ctrlKey||f.shiftKey||f.metaKey;c.preventDefault&&!p&&c.captures.indexOf(f.keyCode)>-1&&f.preventDefault()}},this.onKeyUp=function(f){if(!(f.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(f),c.manager.events.emit(a.MANAGER_PROCESS);var p=f.altKey||f.ctrlKey||f.shiftKey||f.metaKey;c.preventDefault&&!p&&c.captures.indexOf(f.keyCode)>-1&&f.preventDefault()}};var l=this.target;l&&(l.addEventListener("keydown",this.onKeyDown,!1),l.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var c=this.target;c.removeEventListener("keydown",this.onKeyDown,!1),c.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var l=this.captures,f=0;f<c.length;f++){var p=c[f];typeof p=="string"&&(p=h[p.trim().toUpperCase()]),l.indexOf(p)===-1&&l.push(p)}this.preventDefault=l.length>0},removeCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var l=this.captures,f=0;f<c.length;f++){var p=c[f];typeof p=="string"&&(p=h[p.toUpperCase()]),s(l,p)}this.preventDefault=l.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(n.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(191),n=t(51),a=t(1),h=new s({initialize:function(o){this.manager=o,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=a,this.onMouseDown=a,this.onMouseUp=a,this.onMouseDownWindow=a,this.onMouseUpWindow=a,this.onMouseOver=a,this.onMouseOut=a,this.onMouseWheel=a,this.pointerLockChange=a,this.isTop=!0,o.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputMouse,this.target=r.inputMouseEventTarget,this.passive=r.inputMousePassive,this.preventDefaultDown=r.inputMousePreventDefaultDown,this.preventDefaultUp=r.inputMousePreventDefaultUp,this.preventDefaultMove=r.inputMousePreventDefaultMove,this.preventDefaultWheel=r.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},requestPointerLock:function(){if(u.pointerLock){var r=this.target;r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock()}},releasePointerLock:function(){u.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var r=this.target;if(!!r){var o=this,c=this.manager,l=c.canvas,f=window&&window.focus&&c.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&o.enabled&&c&&c.enabled&&(c.onMouseMove(g),o.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){f&&window.focus(),!g.defaultPrevented&&o.enabled&&c&&c.enabled&&(c.onMouseDown(g),o.preventDefaultDown&&g.target===l&&g.preventDefault())},this.onMouseDownWindow=function(g){!g.defaultPrevented&&o.enabled&&c&&c.enabled&&g.target!==l&&c.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&o.enabled&&c&&c.enabled&&(c.onMouseUp(g),o.preventDefaultUp&&g.target===l&&g.preventDefault())},this.onMouseUpWindow=function(g){!g.defaultPrevented&&o.enabled&&c&&c.enabled&&g.target!==l&&c.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&o.enabled&&c&&c.enabled&&c.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&o.enabled&&c&&c.enabled&&c.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&o.enabled&&c&&c.enabled&&c.onMouseWheel(g),o.preventDefaultWheel&&g.target===l&&g.preventDefault()};var p={passive:!0};if(r.addEventListener("mousemove",this.onMouseMove),r.addEventListener("mousedown",this.onMouseDown),r.addEventListener("mouseup",this.onMouseUp),r.addEventListener("mouseover",this.onMouseOver,p),r.addEventListener("mouseout",this.onMouseOut,p),this.preventDefaultWheel?r.addEventListener("wheel",this.onMouseWheel,{passive:!1}):r.addEventListener("wheel",this.onMouseWheel,p),window&&c.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,p),window.top.addEventListener("mouseup",this.onMouseUpWindow,p)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,p),window.addEventListener("mouseup",this.onMouseUpWindow,p),this.isTop=!1}u.pointerLock&&(this.pointerLockChange=function(g){var m=o.target;o.locked=document.pointerLockElement===m||document.mozPointerLockElement===m||document.webkitPointerLockElement===m,c.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseover",this.onMouseOver),r.removeEventListener("mouseout",this.onMouseOut),window&&(r=this.isTop?window.top:window,r.removeEventListener("mousedown",this.onMouseDownWindow),r.removeEventListener("mouseup",this.onMouseUpWindow)),u.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(349),u=t(0),n=t(50),a=t(124),h=t(360),r=t(3),o=t(105),c=new u({initialize:function(f,p){this.manager=f,this.id=p,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new r,this.prevPosition=new r,this.midPoint=new r(-1,-1),this.velocity=new r,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=p===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(l){var f=l.getWorldPoint(this.x,this.y);return this.worldX=f.x,this.worldY=f.y,this},positionToCamera:function(l,f){return l.getWorldPoint(this.x,this.y,f)},updateMotion:function(){var l=this.position.x,f=this.position.y,p=this.midPoint.x,g=this.midPoint.y;if(!(l===p&&f===g)){var m=h(this.motionFactor,p,l),x=h(this.motionFactor,g,f);a(m,l,.1)&&(m=l),a(x,f,.1)&&(x=f),this.midPoint.set(m,x);var y=l-m,T=f-x;this.velocity.set(y,T),this.angle=s(m,x,l,f),this.distance=Math.sqrt(y*y+T*T)}},up:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=l.timeStamp,this.wasTouch=!1)},down:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),o.macOS&&l.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=l.timeStamp),this.wasTouch=!1},move:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.locked&&(this.movementX=l.movementX||l.mozMovementX||l.webkitMovementX||0,this.movementY=l.movementY||l.mozMovementY||l.webkitMovementY||0),this.moveTime=l.timeStamp,this.wasTouch=!1},wheel:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.deltaX=l.deltaX,this.deltaY=l.deltaY,this.deltaZ=l.deltaZ,this.wasTouch=!1},touchstart:function(l,f){l.pointerId&&(this.pointerId=l.pointerId),this.identifier=l.identifier,this.target=l.target,this.active=!0,this.buttons=1,this.event=f,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=f.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(l,f){this.event=f,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.moveTime=f.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(l,f){this.buttons=0,this.event=f,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=f.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(l,f){this.buttons=0,this.event=f,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=f.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(l,f){l===void 0&&(l=10),f===void 0&&(f=[]);for(var p=this.prevPosition.x,g=this.prevPosition.y,m=this.position.x,x=this.position.y,y=0;y<l;y++){var T=1/l*y;f[y]={x:h(T,p,m),y:h(T,g,x)}}return f},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(l){this.position.x=l}},y:{get:function(){return this.position.y},set:function(l){this.position.y=l}},time:{get:function(){return this.event?this.event.timeStamp:0}}});e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(51),n=t(1),a=new s({initialize:function(r){this.manager=r,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=n,this.onTouchStartWindow=n,this.onTouchMove=n,this.onTouchEnd=n,this.onTouchEndWindow=n,this.onTouchCancel=n,this.onTouchCancelWindow=n,this.onTouchOver=n,this.onTouchOut=n,r.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputTouch,this.target=h.inputTouchEventTarget,this.capture=h.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),h.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),this},startListeners:function(){var h=this,r=this.manager.canvas,o=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(p){o&&window.focus(),!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchStart(p),h.capture&&p.cancelable&&p.target===r&&p.preventDefault())},this.onTouchStartWindow=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&p.target!==r&&h.manager.onTouchStart(p)},this.onTouchMove=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchMove(p),h.capture&&p.cancelable&&p.preventDefault())},this.onTouchEnd=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchEnd(p),h.capture&&p.cancelable&&p.target===r&&p.preventDefault())},this.onTouchEndWindow=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&p.target!==r&&h.manager.onTouchEnd(p)},this.onTouchCancel=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchCancel(p),h.capture&&p.preventDefault())},this.onTouchCancelWindow=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&h.manager.onTouchCancel(p)},this.onTouchOver=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&h.manager.setCanvasOver(p)},this.onTouchOut=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&h.manager.setCanvasOut(p)};var c=this.target;if(!!c){var l={passive:!0},f={passive:!1};c.addEventListener("touchstart",this.onTouchStart,this.capture?f:l),c.addEventListener("touchmove",this.onTouchMove,this.capture?f:l),c.addEventListener("touchend",this.onTouchEnd,this.capture?f:l),c.addEventListener("touchcancel",this.onTouchCancel,this.capture?f:l),c.addEventListener("touchover",this.onTouchOver,this.capture?f:l),c.addEventListener("touchout",this.onTouchOut,this.capture?f:l),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,f),window.addEventListener("touchend",this.onTouchEndWindow,f),window.addEventListener("touchcancel",this.onTouchCancelWindow,f)),this.enabled=!0}},stopListeners:function(){var h=this.target;h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd),h.removeEventListener("touchcancel",this.onTouchCancel),h.removeEventListener("touchover",this.onTouchOver),h.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(22),n=t(9),a=t(8),h=t(16),r=t(5),o=t(2),c=t(24),l=t(93),f=new s({Extends:n,initialize:function(g){n.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(u.BOOT,this.boot,this)},boot:function(){var p,g,m,x,y,T,S,C=this.game.config,E=C.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),p=0;p<E.length;p++)g=E[p],m=o(g,"key",null),x=o(g,"plugin",null),y=o(g,"start",!1),T=o(g,"mapping",null),S=o(g,"data",null),m&&(x?this.install(m,x,y,T,S):console.warn("Missing `plugin` for key: "+m));for(E=C.installScenePlugins,E=E.concat(this._pendingScene),p=0;p<E.length;p++)g=E[p],m=o(g,"key",null),x=o(g,"plugin",null),T=o(g,"mapping",null),m&&(x?this.installScenePlugin(m,x,T):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(u.DESTROY,this.destroy,this)},addToScene:function(p,g,m){var x,y,T,S=this.game,C=p.scene,E=p.settings.map,P=p.settings.isBooted;for(x=0;x<g.length;x++)y=g[x],S[y]?(p[y]=S[y],E.hasOwnProperty(y)&&(C[E[y]]=p[y])):y==="game"&&E.hasOwnProperty(y)&&(C[E[y]]=S);for(var M=0;M<m.length;M++)for(T=m[M],x=0;x<T.length;x++)if(y=T[x],!!c.hasCore(y)){var O=c.getCore(y),A=O.mapping,R=new O.plugin(C,this,A);p[A]=R,O.custom?C[A]=R:E.hasOwnProperty(A)&&(C[E[A]]=R),P&&R.boot()}for(T=this.plugins,x=0;x<T.length;x++){var F=T[x];F.mapping&&(C[F.mapping]=F.plugin)}},getDefaultScenePlugins:function(){var p=this.game.config.defaultPlugins;return p=p.concat(this.scenePlugins),p},installScenePlugin:function(p,g,m,x,y){if(y===void 0&&(y=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+p);return}if(!c.hasCore(p))c.register(p,g,m,!0),this.scenePlugins.push(p);else if(!y&&c.hasCore(p)){console.warn("Scene Plugin key in use: "+p);return}if(x){var T=new g(x,this,p);x.sys[p]=T,m&&m!==""&&(x[m]=T),T.boot()}},install:function(p,g,m,x,y){if(m===void 0&&(m=!1),x===void 0&&(x=null),y===void 0&&(y=null),typeof g!="function")return console.warn("Invalid Plugin: "+p),null;if(c.hasCustom(p))return console.warn("Plugin key in use: "+p),null;if(x!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:p,plugin:g,start:m,mapping:x,data:y});else if(c.registerCustom(p,g,x,y),m)return this.start(p);return null},getIndex:function(p){for(var g=this.plugins,m=0;m<g.length;m++){var x=g[m];if(x.key===p)return m}return-1},getEntry:function(p){var g=this.getIndex(p);if(g!==-1)return this.plugins[g]},isActive:function(p){var g=this.getEntry(p);return g&&g.active},start:function(p,g){g===void 0&&(g=p);var m=this.getEntry(g);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(p,g)),m?m.plugin:null},createEntry:function(p,g){var m=c.getCustom(p);if(m){var x=new m.plugin(this);m={key:g,plugin:x,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),x.init(m.data),x.start()}return m},stop:function(p){var g=this.getEntry(p);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(p,g){g===void 0&&(g=!0);var m=this.getEntry(p);if(m)return m.plugin;var x=this.getClass(p);return x&&g?(m=this.createEntry(p,p),m?m.plugin:null):x||null},getClass:function(p){return c.getCustomClass(p)},removeGlobalPlugin:function(p){var g=this.getEntry(p);g&&l(this.plugins,g),c.removeCustom(p)},removeScenePlugin:function(p){l(this.scenePlugins,p),c.remove(p)},registerGameObject:function(p,g,m){return g&&r.register(p,g),m&&h.register(p,m),this},removeGameObject:function(p,g,m){return g===void 0&&(g=!0),m===void 0&&(m=!0),g&&r.remove(p),m&&h.remove(p),this},registerFileType:function(p,g,m){a.register(p,g),m&&m.sys.load&&(m.sys.load[p]=g)},destroy:function(){for(var p=0;p<this.plugins.length;p++)this.plugins[p].plugin.destroy();c.destroyCustomPlugins(),this.game.noReturn&&c.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});e.exports=f},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(201),u=t(0),n=t(9),a=t(104),h=t(22),r=t(401),o=t(407),c=t(402),l=t(1),f=t(10),p=t(416),g=t(76),m=t(3),x=new u({Extends:n,initialize:function(T){n.call(this),this.game=T,this.canvas,this.canvasBounds=new f,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=s.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=s.CENTER.NO_CENTER,this.orientation=s.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:l,windowResize:l,fullScreenChange:l,fullScreenError:l}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(h.BOOT,this.boot,this)},boot:function(){var y=this.game;this.canvas=y.canvas,this.fullscreen=y.device.fullscreen,this.scaleMode!==s.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===s.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),y.events.on(h.PRE_STEP,this.step,this),y.events.once(h.READY,this.refresh,this),y.events.once(h.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(y){this.getParent(y),this.getParentBounds();var T=y.width,S=y.height,C=y.scaleMode,E=y.zoom,P=y.autoRound;if(typeof T=="string"){var M=this.parentSize.width;M===0&&(M=window.innerWidth);var O=parseInt(T,10)/100;T=Math.floor(M*O)}if(typeof S=="string"){var A=this.parentSize.height;A===0&&(A=window.innerHeight);var R=parseInt(S,10)/100;S=Math.floor(A*R)}this.scaleMode=C,this.autoRound=P,this.autoCenter=y.autoCenter,this.resizeInterval=y.resizeInterval,P&&(T=Math.floor(T),S=Math.floor(S)),this.gameSize.setSize(T,S),E===s.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,S),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),y.minWidth>0&&this.displaySize.setMin(y.minWidth*E,y.minHeight*E),y.maxWidth>0&&this.displaySize.setMax(y.maxWidth*E,y.maxHeight*E),this.displaySize.setSize(T,S),this.orientation=c(T,S)},getParent:function(y){var T=y.parent;if(T!==null){if(this.parent=o(T),this.parentIsWindow=this.parent===document.body,y.expandParent&&y.scaleMode!==s.SCALE_MODE.NONE){var S=this.parent.getBoundingClientRect();(this.parentIsWindow||S.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",S=this.parent.getBoundingClientRect(),!this.parentIsWindow&&S.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}y.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=o(y.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var y=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=r(!0));var S=T.width,C=T.height;return y.width!==S||y.height!==C?(y.setSize(S,C),!0):!1},lockOrientation:function(y){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,y):!1},setParentSize:function(y,T){return this.parentSize.setSize(y,T),this.refresh()},setGameSize:function(y,T){var S=this.autoRound;S&&(y=Math.floor(y),T=Math.floor(T));var C=this.width,E=this.height;return this.gameSize.resize(y,T),this.baseSize.resize(y,T),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(y/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(C,E)},resize:function(y,T){var S=this.zoom,C=this.autoRound;C&&(y=Math.floor(y),T=Math.floor(T));var E=this.width,P=this.height;this.gameSize.resize(y,T),this.baseSize.resize(y,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(y*S,T*S),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var M=this.canvas.style,O=y*S,A=T*S;return C&&(O=Math.floor(O),A=Math.floor(A)),(O!==y||A!==T)&&(M.width=O+"px",M.height=A+"px"),this.refresh(E,P)},setZoom:function(y){return this.zoom=y,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(y,T){y===void 0&&(y=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var S=this.game.domContainer;if(S){this.baseSize.setCSS(S);var C=this.canvas.style,E=S.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=C.marginLeft,E.marginTop=C.marginTop}return this.emit(a.RESIZE,this.gameSize,this.baseSize,this.displaySize,y,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var y=c(this.width,this.height);y!==this.orientation&&(this.orientation=y,this.emit(a.ORIENTATION_CHANGE,y))}},updateScale:function(){var y=this.canvas.style,T=this.gameSize.width,S=this.gameSize.height,C,E,P=this.zoom,M=this.autoRound;this.scaleMode===s.SCALE_MODE.NONE?(this.displaySize.setSize(T*P,S*P),C=this.displaySize.width,E=this.displaySize.height,M&&(C=Math.floor(C),E=Math.floor(E)),this._resetZoom&&(y.width=C+"px",y.height=E+"px",this._resetZoom=!1)):this.scaleMode===s.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),C=this.displaySize.width,E=this.displaySize.height,M&&(C=Math.floor(C),E=Math.floor(E)),this.canvas.width=C,this.canvas.height=E):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),C=this.displaySize.width,E=this.displaySize.height,M&&(C=Math.floor(C),E=Math.floor(E)),y.width=C+"px",y.height=E+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var y=g(this.parentSize.width,this.gameSize.width,0,!0),T=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(y,T),1)},updateCenter:function(){var y=this.autoCenter;if(y!==s.CENTER.NO_CENTER){var T=this.canvas,S=T.style,C=T.getBoundingClientRect(),E=C.width,P=C.height,M=Math.floor((this.parentSize.width-E)/2),O=Math.floor((this.parentSize.height-P)/2);y===s.CENTER.CENTER_HORIZONTALLY?O=0:y===s.CENTER.CENTER_VERTICALLY&&(M=0),S.marginLeft=M+"px",S.marginTop=O+"px"}},updateBounds:function(){var y=this.canvasBounds,T=this.canvas.getBoundingClientRect();y.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),y.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),y.width=T.width,y.height=T.height},transformX:function(y){return(y-this.canvasBounds.left)*this.displayScale.x},transformY:function(y){return(y-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(y){y===void 0&&(y={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(a.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var S=this.getFullscreenTarget();T.keyboard?S[T.request](Element.ALLOW_KEYBOARD_INPUT):S[T.request](y)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(a.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(y){this.removeFullscreenTarget(),this.emit(a.FULLSCREEN_FAILED,y)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var y=document.createElement("div");y.style.margin="0",y.style.padding="0",y.style.width="100%",y.style.height="100%",this.fullscreenTarget=y,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var y=this.fullscreenTarget;if(y&&y.parentNode){var T=y.parentNode;T.insertBefore(this.canvas,y),T.removeChild(y)}}},stopFullscreen:function(){var y=this.fullscreen;if(!y.available)return this.emit(a.FULLSCREEN_UNSUPPORTED),!1;y.active&&document[y.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(a.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(y){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(y)},startListeners:function(){var y=this,T=this.listeners;if(T.orientationChange=function(){y.updateBounds(),y._checkOrientation=!0,y.dirty=!0},T.windowResize=function(){y.updateBounds(),y.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(C){return y.onFullScreenChange(C)},T.fullScreenError=function(C){return y.onFullScreenError(C)};var S=["webkit","moz",""];S.forEach(function(C){document.addEventListener(C+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(C+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(y,T){!this.parent||(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var y=this.listeners;window.removeEventListener("orientationchange",y.orientationChange,!1),window.removeEventListener("resize",y.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(S){document.removeEventListener(S+"fullscreenchange",y.fullScreenChange,!1),document.removeEventListener(S+"fullscreenerror",y.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",y.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===s.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===s.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});e.exports=x},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(76),a=t(3),h=new u({initialize:function(o,c,l,f){o===void 0&&(o=0),c===void 0&&(c=o),l===void 0&&(l=0),f===void 0&&(f=null),this._width=o,this._height=c,this._parent=f,this.aspectMode=l,this.aspectRatio=c===0?1:o/c,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new a},setAspectMode:function(r){return r===void 0&&(r=0),this.aspectMode=r,this.setSize(this._width,this._height)},setSnap:function(r,o){return r===void 0&&(r=0),o===void 0&&(o=r),this.snapTo.set(r,o),this.setSize(this._width,this._height)},setParent:function(r){return this._parent=r,this.setSize(this._width,this._height)},setMin:function(r,o){return r===void 0&&(r=0),o===void 0&&(o=r),this.minWidth=s(r,0,this.maxWidth),this.minHeight=s(o,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(r,o){return r===void 0&&(r=Number.MAX_VALUE),o===void 0&&(o=r),this.maxWidth=s(r,this.minWidth,Number.MAX_VALUE),this.maxHeight=s(o,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(r,o){switch(r===void 0&&(r=0),o===void 0&&(o=r),this.aspectMode){case h.NONE:this._width=this.getNewWidth(n(r,this.snapTo.x)),this._height=this.getNewHeight(n(o,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case h.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(n(r,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case h.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(n(o,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case h.FIT:this.constrain(r,o,!0);break;case h.ENVELOP:this.constrain(r,o,!1);break}return this},setAspectRatio:function(r){return this.aspectRatio=r,this.setSize(this._width,this._height)},resize:function(r,o){return this._width=this.getNewWidth(n(r,this.snapTo.x)),this._height=this.getNewHeight(n(o,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(r,o){return o===void 0&&(o=!0),r=s(r,this.minWidth,this.maxWidth),o&&this._parent&&r>this._parent.width&&(r=Math.max(this.minWidth,this._parent.width)),r},getNewHeight:function(r,o){return o===void 0&&(o=!0),r=s(r,this.minHeight,this.maxHeight),o&&this._parent&&r>this._parent.height&&(r=Math.max(this.minHeight,this._parent.height)),r},constrain:function(r,o,c){r===void 0&&(r=0),o===void 0&&(o=r),c===void 0&&(c=!0),r=this.getNewWidth(r),o=this.getNewHeight(o);var l=this.snapTo,f=o===0?1:r/o;return c&&this.aspectRatio>f||!c&&this.aspectRatio<f?(r=n(r,l.x),o=r/this.aspectRatio,l.y>0&&(o=n(o,l.y),r=o*this.aspectRatio)):(c&&this.aspectRatio<f||!c&&this.aspectRatio>f)&&(o=n(o,l.y),r=o*this.aspectRatio,l.x>0&&(r=n(r,l.x),o=r*(1/this.aspectRatio))),this._width=r,this._height=o,this},fitTo:function(r,o){return this.constrain(r,o,!0)},envelop:function(r,o){return this.constrain(r,o,!1)},setWidth:function(r){return this.setSize(r,this._height)},setHeight:function(r){return this.setSize(this._width,r)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(r){r&&r.style&&(r.style.width=this._width+"px",r.style.height=this._height+"px")},copy:function(r){return r.setAspectMode(this.aspectMode),r.aspectRatio=this.aspectRatio,r.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(r){this.setSize(r,this._height)}},height:{get:function(){return this._height},set:function(r){this.setSize(this._width,r)}}});h.NONE=0,h.WIDTH_CONTROLS_HEIGHT=1,h.HEIGHT_CONTROLS_WIDTH=2,h.FIT=3,h.ENVELOP=4,e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(144),n=t(20),a=t(22),h=t(6),r=t(95),o=t(1),c=t(418),l=t(204),f=new s({initialize:function(g,m){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this._pending.push({key:"default",scene:m[x],autoStart:x===0,data:{}})}g.events.once(a.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var p,g,m,x;for(p=0;p<this._pending.length;p++){g=this._pending[p],m=g.key,x=g.scene;var y;x instanceof c?y=this.createSceneFromInstance(m,x):typeof x=="object"?y=this.createSceneFromObject(m,x):typeof x=="function"&&(y=this.createSceneFromFunction(m,x)),m=y.sys.settings.key,this.keys[m]=y,this.scenes.push(y),this._data[m]&&(y.sys.settings.data=this._data[m].data,this._data[m].autoStart&&(g.autoStart=!0)),(g.autoStart||y.sys.settings.active)&&this._start.push(m)}for(this._pending.length=0,this._data={},this.isBooted=!0,p=0;p<this._start.length;p++)g=this._start[p],this.start(g);this._start.length=0}},processQueue:function(){var p=this._pending.length,g=this._queue.length;if(!(p===0&&g===0)){var m,x;if(p){for(m=0;m<p;m++)x=this._pending[m],this.add(x.key,x.scene,x.autoStart,x.data);for(m=0;m<this._start.length;m++)x=this._start[m],this.start(x);this._start.length=0,this._pending.length=0;return}for(m=0;m<this._queue.length;m++)x=this._queue[m],this[x.op](x.keyA,x.keyB);this._queue.length=0}},add:function(p,g,m,x){if(m===void 0&&(m=!1),x===void 0&&(x={}),this.isProcessing||!this.isBooted)return this._pending.push({key:p,scene:g,autoStart:m,data:x}),this.isBooted||(this._data[p]={data:x}),null;p=this.getKey(p,g);var y;return g instanceof c?y=this.createSceneFromInstance(p,g):typeof g=="object"?(g.key=p,y=this.createSceneFromObject(p,g)):typeof g=="function"&&(y=this.createSceneFromFunction(p,g)),y.sys.settings.data=x,p=y.sys.settings.key,this.keys[p]=y,this.scenes.push(y),(m||y.sys.settings.active)&&(this._pending.length?this._start.push(p):this.start(p)),y},remove:function(p){if(this.isProcessing)this._queue.push({op:"remove",keyA:p,keyB:null});else{var g=this.getScene(p);if(!g||g.sys.isTransitioning())return this;var m=this.scenes.indexOf(g),x=g.sys.settings.key;m>-1&&(delete this.keys[x],this.scenes.splice(m,1),this._start.indexOf(x)>-1&&(m=this._start.indexOf(x),this._start.splice(m,1)),g.sys.destroy())}return this},bootScene:function(p){var g=p.sys,m=g.settings;g.sceneUpdate=o,p.init&&(p.init.call(p,m.data),m.status=u.INIT,m.isTransition&&g.events.emit(n.TRANSITION_INIT,m.transitionFrom,m.transitionDuration));var x;g.load&&(x=g.load,x.reset()),x&&p.preload?(p.preload.call(p),x.list.size===0?this.create(p):(m.status=u.LOADING,x.once(r.COMPLETE,this.loadComplete,this),x.start())):this.create(p)},loadComplete:function(p){this.create(p.scene)},payloadComplete:function(p){this.bootScene(p.scene)},update:function(p,g){this.processQueue(),this.isProcessing=!0;for(var m=this.scenes.length-1;m>=0;m--){var x=this.scenes[m].sys;x.settings.status>u.START&&x.settings.status<=u.RUNNING&&x.step(p,g)}},render:function(p){for(var g=0;g<this.scenes.length;g++){var m=this.scenes[g].sys;m.settings.visible&&m.settings.status>=u.LOADING&&m.settings.status<u.SLEEPING&&m.render(p)}this.isProcessing=!1},create:function(p){var g=p.sys,m=g.settings;p.create&&(m.status=u.CREATING,p.create.call(p,m.data),m.status===u.DESTROYED)||(m.isTransition&&g.events.emit(n.TRANSITION_START,m.transitionFrom,m.transitionDuration),p.update&&(g.sceneUpdate=p.update),m.status=u.RUNNING,g.events.emit(n.CREATE,p))},createSceneFromFunction:function(p,g){var m=new g;if(m instanceof c){var x=m.sys.settings.key;if(x!==""&&(p=x),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return this.createSceneFromInstance(p,m)}else return m.sys=new l(m),m.sys.settings.key=p,m.sys.init(this.game),m},createSceneFromInstance:function(p,g){var m=g.sys.settings.key;return m===""&&(g.sys.settings.key=p),g.sys.init(this.game),g},createSceneFromObject:function(p,g){var m=new c(g),x=m.sys.settings.key;x!==""?p=x:m.sys.settings.key=p,m.sys.init(this.game);for(var y=["init","preload","create","update","render"],T=0;T<y.length;T++){var S=h(g,y[T],null);S&&(m[y[T]]=S)}if(g.hasOwnProperty("extend")){for(var C in g.extend)if(!!g.extend.hasOwnProperty(C)){var E=g.extend[C];C==="data"&&m.hasOwnProperty("data")&&typeof E=="object"?m.data.merge(E):C!=="sys"&&(m[C]=E)}}return m},getKey:function(p,g){if(p||(p="default"),typeof g=="function")return p;if(g instanceof c?p=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(p=g.key),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return p},getScenes:function(p,g){p===void 0&&(p=!0),g===void 0&&(g=!1);for(var m=[],x=this.scenes,y=0;y<x.length;y++){var T=x[y];T&&(!p||p&&T.sys.isActive())&&m.push(T)}return g?m.reverse():m},getScene:function(p){if(typeof p=="string"){if(this.keys[p])return this.keys[p]}else for(var g=0;g<this.scenes.length;g++)if(p===this.scenes[g])return p;return null},isActive:function(p){var g=this.getScene(p);return g?g.sys.isActive():null},isPaused:function(p){var g=this.getScene(p);return g?g.sys.isPaused():null},isVisible:function(p){var g=this.getScene(p);return g?g.sys.isVisible():null},isSleeping:function(p){var g=this.getScene(p);return g?g.sys.isSleeping():null},pause:function(p,g){var m=this.getScene(p);return m&&m.sys.pause(g),this},resume:function(p,g){var m=this.getScene(p);return m&&m.sys.resume(g),this},sleep:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.sleep(g),this},wake:function(p,g){var m=this.getScene(p);return m&&m.sys.wake(g),this},run:function(p,g){var m=this.getScene(p);if(!m){for(var x=0;x<this._pending.length;x++)if(this._pending[x].key===p){this.queueOp("start",p,g);break}return this}m.sys.isSleeping()?m.sys.wake(g):m.sys.isPaused()?m.sys.resume(g):this.start(p,g)},start:function(p,g){if(!this.isBooted)return this._data[p]={autoStart:!0,data:g},this;var m=this.getScene(p);if(m){var x=m.sys;if(x.isActive()||x.isPaused())x.shutdown(),x.sceneUpdate=o,x.start(g);else{x.sceneUpdate=o,x.start(g);var y;if(x.load&&(y=x.load),y&&x.settings.hasOwnProperty("pack")&&(y.reset(),y.addPack({payload:x.settings.pack})))return x.settings.status=u.LOADING,y.once(r.COMPLETE,this.payloadComplete,this),y.start(),this}this.bootScene(m)}return this},stop:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.shutdown(g),this},switch:function(p,g){var m=this.getScene(p),x=this.getScene(g);return m&&x&&m!==x&&(this.sleep(p),this.isSleeping(g)?this.wake(g):this.start(g)),this},getAt:function(p){return this.scenes[p]},getIndex:function(p){var g=this.getScene(p);return this.scenes.indexOf(g)},bringToTop:function(p){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g<this.scenes.length){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.push(m)}}return this},sendToBack:function(p){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g>0){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.unshift(m)}}return this},moveDown:function(p){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g>0){var m=g-1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveUp:function(p){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g<this.scenes.length-1){var m=g+1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveAbove:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),this.scenes.splice(m+1,0,y)}}return this},moveBelow:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),m===0?this.scenes.unshift(y):this.scenes.splice(m,0,y)}}return this},queueOp:function(p,g,m){return this._queue.push({op:p,keyA:g,keyB:m}),this},swapPosition:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==x&&m!==-1&&x!==-1){var y=this.getAt(m);this.scenes[m]=this.scenes[x],this.scenes[x]=y}}return this},dump:function(){for(var p=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],m=0;m<this.scenes.length;m++){var x=this.scenes[m].sys,y=x.settings.visible&&(x.settings.status===u.RUNNING||x.settings.status===u.PAUSED)?"[*] ":"[-] ";y+=x.settings.key+" ("+g[x.settings.status]+")",p.push(y)}console.log(p.join(`
`))},destroy:function(){for(var p=0;p<this.scenes.length;p++){var g=this.scenes[p].sys;g.destroy()}this.update=o,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});e.exports=f},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(204),n=new s({initialize:function(h){this.sys=new u(this,h),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=t(205),n=function(a){var h=a.game.config.defaultPhysicsSystem,r=s(a.settings,"physics",!1);if(!(!h&&!r)){var o=[];if(h&&o.push(u(h+"Physics")),r)for(var c in r)c=u(c.concat("Physics")),o.indexOf(c)===-1&&o.push(c);return o}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n){var a=n.plugins.getDefaultScenePlugins(),h=s(n.settings,"plugins",!1);return Array.isArray(h)?h:a||[]};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(144),u=t(6),n=t(127),a=t(978),h={create:function(r){return typeof r=="string"?r={key:r}:r===void 0&&(r={}),{status:s.PENDING,key:u(r,"key",""),active:u(r,"active",!1),visible:u(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:u(r,"pack",!1),cameras:u(r,"cameras",null),map:u(r,"map",n(a,u(r,"mapAdd",{}))),physics:u(r,"physics",{}),loader:u(r,"loader",{}),plugins:u(r,"plugins",!1),input:u(r,"input",{})}}};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(423),n=t(0),a=t(38),h=t(33),r=t(9),o=t(106),c=t(22),l=t(388),f=t(6),p=t(425),g=t(206),m=new n({Extends:r,initialize:function(y){r.call(this),this.game=y,this.name="TextureManager",this.list={},this._tempCanvas=s.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,y.events.once(c.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(o.LOAD,this.updatePending,this),this.on(o.ERROR,this.updatePending,this);var x=this.game.config;this.addBase64("__DEFAULT",x.defaultImage),this.addBase64("__MISSING",x.missingImage),this.addBase64("__WHITE",x.whiteImage),this.game.events.once(c.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(o.LOAD),this.off(o.ERROR),this.emit(o.READY))},checkKey:function(x){return this.exists(x)?(console.error("Texture key already in use: "+x),!1):!0},remove:function(x){if(typeof x=="string")if(this.exists(x))x=this.get(x);else return console.warn("No texture found matching key: "+x),this;return this.list.hasOwnProperty(x.key)&&(x.destroy(),this.emit(o.REMOVE,x.key)),this},removeKey:function(x){return this.list.hasOwnProperty(x)&&delete this.list[x],this},addBase64:function(x,y){if(this.checkKey(x)){var T=this,S=new Image;S.onerror=function(){T.emit(o.ERROR,x)},S.onload=function(){var C=T.create(x,S);p.Image(C,0),T.emit(o.ADD,x,C),T.emit(o.LOAD,x,C)},S.src=y}return this},getBase64:function(x,y,T,S){T===void 0&&(T="image/png"),S===void 0&&(S=.92);var C="",E=this.getFrame(x,y);if(E&&(E.source.isRenderTexture||E.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(E){var P=E.canvasData,M=s.create2D(this,P.width,P.height),O=M.getContext("2d");O.drawImage(E.source.image,P.x,P.y,P.width,P.height,0,0,P.width,P.height),C=M.toDataURL(T,S),s.remove(M)}return C},addImage:function(x,y,T){var S=null;return this.checkKey(x)&&(S=this.create(x,y),p.Image(S,0),T&&S.setDataSource(T),this.emit(o.ADD,x,S)),S},addGLTexture:function(x,y,T,S){var C=null;return this.checkKey(x)&&(T===void 0&&(T=y.width),S===void 0&&(S=y.height),C=this.create(x,y,T,S),C.add("__BASE",0,0,0,T,S),this.emit(o.ADD,x,C)),C},addRenderTexture:function(x,y){var T=null;return this.checkKey(x)&&(T=this.create(x,y),T.add("__BASE",0,0,0,y.width,y.height),this.emit(o.ADD,x,T)),T},generate:function(x,y){if(this.checkKey(x)){var T=s.create(this,1,1);return y.canvas=T,l(y),this.addCanvas(x,T)}else return null},createCanvas:function(x,y,T){if(y===void 0&&(y=256),T===void 0&&(T=256),this.checkKey(x)){var S=s.create(this,y,T,h.CANVAS,!0);return this.addCanvas(x,S)}return null},addCanvas:function(x,y,T){T===void 0&&(T=!1);var S=null;return T?S=new u(this,x,y,y.width,y.height):this.checkKey(x)&&(S=new u(this,x,y,y.width,y.height),this.list[x]=S,this.emit(o.ADD,x,S)),S},addAtlas:function(x,y,T,S){return Array.isArray(T.textures)||Array.isArray(T.frames)?this.addAtlasJSONArray(x,y,T,S):this.addAtlasJSONHash(x,y,T,S)},addAtlasJSONArray:function(x,y,T,S){var C=null;if(this.checkKey(x)){if(C=this.create(x,y),Array.isArray(T))for(var E=T.length===1,P=0;P<C.source.length;P++){var M=E?T[0]:T[P];p.JSONArray(C,P,M)}else p.JSONArray(C,0,T);S&&C.setDataSource(S),this.emit(o.ADD,x,C)}return C},addAtlasJSONHash:function(x,y,T,S){var C=null;if(this.checkKey(x)){if(C=this.create(x,y),Array.isArray(T))for(var E=0;E<T.length;E++)p.JSONHash(C,E,T[E]);else p.JSONHash(C,0,T);S&&C.setDataSource(S),this.emit(o.ADD,x,C)}return C},addAtlasXML:function(x,y,T,S){var C=null;return this.checkKey(x)&&(C=this.create(x,y),p.AtlasXML(C,0,T),S&&C.setDataSource(S),this.emit(o.ADD,x,C)),C},addUnityAtlas:function(x,y,T,S){var C=null;return this.checkKey(x)&&(C=this.create(x,y),p.UnityYAML(C,0,T),S&&C.setDataSource(S),this.emit(o.ADD,x,C)),C},addSpriteSheet:function(x,y,T){var S=null;if(this.checkKey(x)){S=this.create(x,y);var C=S.source[0].width,E=S.source[0].height;p.SpriteSheet(S,0,0,0,C,E,T),this.emit(o.ADD,x,S)}return S},addSpriteSheetFromAtlas:function(x,y){if(!this.checkKey(x))return null;var T=f(y,"atlas",null),S=f(y,"frame",null);if(!(!T||!S)){var C=this.get(T),E=C.get(S);if(E){var P=this.create(x,E.source.image);return E.trimmed?p.SpriteSheetFromAtlas(P,E,y):p.SpriteSheet(P,0,E.cutX,E.cutY,E.cutWidth,E.cutHeight,y),this.emit(o.ADD,x,P),P}}},create:function(x,y,T,S){var C=null;return this.checkKey(x)&&(C=new g(this,x,y,T,S),this.list[x]=C),C},exists:function(x){return this.list.hasOwnProperty(x)},get:function(x){return x===void 0&&(x="__DEFAULT"),this.list[x]?this.list[x]:x instanceof g?x:this.list.__MISSING},cloneFrame:function(x,y){if(this.list[x])return this.list[x].get(y).clone()},getFrame:function(x,y){if(this.list[x])return this.list[x].get(y)},getTextureKeys:function(){var x=[];for(var y in this.list)y!=="__DEFAULT"&&y!=="__MISSING"&&x.push(y);return x},getPixel:function(x,y,T,S){var C=this.getFrame(T,S);if(C){x-=C.x,y-=C.y;var E=C.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(C.source.image,x,y,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return new a(M.data[0],M.data[1],M.data[2],M.data[3])}}return null},getPixelAlpha:function(x,y,T,S){var C=this.getFrame(T,S);if(C){x-=C.x,y-=C.y;var E=C.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(C.source.image,x,y,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return M.data[3]}}return null},setTexture:function(x,y,T){return this.list[y]&&(x.texture=this.list[y],x.frame=x.texture.get(T)),x},renameTexture:function(x,y){var T=this.get(x);return T&&x!==y?(T.key=y,this.list[y]=T,delete this.list[x],!0):!1},each:function(x,y){for(var T=[null],S=1;S<arguments.length;S++)T.push(arguments[S]);for(var C in this.list)T[0]=this.list[C],x.apply(y,T)},destroy:function(){for(var x in this.list)this.list[x].destroy();this.list={},this.game=null,s.remove(this._tempCanvas)}});e.exports=m},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(18),n=t(38),a=t(33),h=t(138),r=t(206),o=new s({Extends:r,initialize:function(l,f,p,g,m){r.call(this,l,f,p,g,m),this.add("__BASE",0,0,0,g,m),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=g,this.height=m,this.imageData=this.context.getImageData(0,0,g,m),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===a.WEBGL&&this.refresh(),this},draw:function(c,l,f){return this.context.drawImage(f,c,l),this.update()},drawFrame:function(c,l,f,p){f===void 0&&(f=0),p===void 0&&(p=0);var g=this.manager.getFrame(c,l);if(g){var m=g.canvasData,x=g.cutWidth,y=g.cutHeight,T=g.source.resolution;return this.context.drawImage(g.source.image,m.x,m.y,x,y,f,p,x/T,y/T),this.update()}else return this},setPixel:function(c,l,f,p,g,m){m===void 0&&(m=255),c=Math.abs(Math.floor(c)),l=Math.abs(Math.floor(l));var x=this.getIndex(c,l);if(x>-1){var y=this.context.getImageData(c,l,1,1);y.data[0]=f,y.data[1]=p,y.data[2]=g,y.data[3]=m,this.context.putImageData(y,c,l)}return this},putData:function(c,l,f,p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=c.width),x===void 0&&(x=c.height),this.context.putImageData(c,l,f,p,g,m,x),this},getData:function(c,l,f,p){c=u(Math.floor(c),0,this.width-1),l=u(Math.floor(l),0,this.height-1),f=u(f,1,this.width-c),p=u(p,1,this.height-l);var g=this.context.getImageData(c,l,f,p);return g},getPixel:function(c,l,f){f||(f=new n);var p=this.getIndex(c,l);if(p>-1){var g=this.data,m=g[p+0],x=g[p+1],y=g[p+2],T=g[p+3];f.setTo(m,x,y,T)}return f},getPixels:function(c,l,f,p){c===void 0&&(c=0),l===void 0&&(l=0),f===void 0&&(f=this.width),p===void 0&&(p=f),c=Math.abs(Math.round(c)),l=Math.abs(Math.round(l));for(var g=u(c,0,this.width),m=u(c+f,0,this.width),x=u(l,0,this.height),y=u(l+p,0,this.height),T=new n,S=[],C=x;C<y;C++){for(var E=[],P=g;P<m;P++)T=this.getPixel(P,C,T),E.push({x:P,y:C,color:T.color,alpha:T.alphaGL});S.push(E)}return S},getIndex:function(c,l){return c=Math.abs(Math.round(c)),l=Math.abs(Math.round(l)),c<this.width&&l<this.height?(c+l*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(c,l,f,p){return c===void 0&&(c=0),l===void 0&&(l=0),f===void 0&&(f=this.width),p===void 0&&(p=this.height),this.context.clearRect(c,l,f,p),this.update()},setSize:function(c,l){return l===void 0&&(l=c),(c!==this.width||l!==this.height)&&(this.canvas.width=c,this.canvas.height=l,this._source.width=c,this._source.height=l,this._source.isPowerOf2=h(c,l),this.frames.__BASE.setSize(c,l,0,0),this.width=c,this.height=l,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(0),n=t(138),a=t(168),h=new u({initialize:function(o,c,l,f,p){p===void 0&&(p=!1);var g=o.manager.game;this.renderer=g.renderer,this.texture=o,this.source=c,this.image=c,this.compressionAlgorithm=null,this.resolution=1,this.width=l||c.naturalWidth||c.videoWidth||c.width||0,this.height=f||c.naturalHeight||c.videoHeight||c.height||0,this.scaleMode=a.DEFAULT,this.isCanvas=c instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&c instanceof HTMLVideoElement,this.isRenderTexture=c.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&c instanceof WebGLTexture,this.isPowerOf2=n(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=p,this.init(g)},init:function(r){var o=this.renderer;o&&(o.gl?this.isCanvas?this.glTexture=o.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=o.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=o.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=o.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),r.config.antialias||this.setFilter(1)},setFilter:function(r){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,r),this.scaleMode=r},setFlipY:function(r){return r===void 0&&(r=!0),this.flipY=r,this},update:function(){var r=this.renderer.gl;r&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):r&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&s.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AtlasXML:t(979),Canvas:t(980),Image:t(981),JSONArray:t(982),JSONHash:t(983),SpriteSheet:t(984),SpriteSheetFromAtlas:t(985),UnityYAML:t(986)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(427),u=t(430),n=t(432),a={create:function(h){var r=h.config.audio,o=h.device.audio;return r.noAudio||!o.webAudio&&!o.audioData?new u(h):o.webAudio&&!r.disableWebAudio?new n(h):new s(h)}};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(145),u=t(0),n=t(70),a=t(429),h=new u({Extends:s,initialize:function(o){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,s.call(this,o)},add:function(r,o){var c=new a(this,r,o);return this.sounds.push(c),c},unlock:function(){this.locked=!1;var r=this;if(this.game.cache.audio.entries.each(function(f,p){for(var g=0;g<p.length;g++)if(p[g].dataset.locked==="true")return r.locked=!0,!1;return!0}),!!this.locked){var o=!1,c=function(){o=!0},l=function(){if(o){o=!1;return}document.body.removeEventListener("touchmove",c),document.body.removeEventListener("touchend",l);var f=[];if(r.game.cache.audio.entries.each(function(g,m){for(var x=0;x<m.length;x++){var y=m[x];y.dataset.locked==="true"&&f.push(y)}return!0}),f.length!==0){var p=f[f.length-1];p.oncanplaythrough=function(){p.oncanplaythrough=null,f.forEach(function(g){g.dataset.locked="false"}),r.unlocked=!0},f.forEach(function(g){g.load()})}};this.once(n.UNLOCKED,function(){for(this.forEachActiveSound(function(p){p.currentMarker===null&&p.duration===0&&(p.duration=p.tags[0].duration),p.totalDuration=p.tags[0].duration});this.lockedActionsQueue.length;){var f=this.lockedActionsQueue.shift();f.sound[f.prop].apply?f.sound[f.prop].apply(f.sound,f.value||[]):f.sound[f.prop]=f.value}},this),document.body.addEventListener("touchmove",c,!1),document.body.addEventListener("touchend",l,!1)}},onBlur:function(){this.forEachActiveSound(function(r){r.isPlaying&&(this.onBlurPausedSounds.push(r),r.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(r){r.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){s.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(r,o,c){return r.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:r,prop:o,value:c}),!0):!1},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this._mute},set:function(r){this._mute=r,this.forEachActiveSound(function(o){o.updateMute()}),this.emit(n.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this._volume},set:function(r){this._volume=r,this.forEachActiveSound(function(o){o.updateVolume()}),this.emit(n.GLOBAL_VOLUME,this,r)}}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,a,h,r,o){if(r===void 0&&(r=0),o===void 0&&(o=n.length),s(n,r,o))for(var c=r;c<o;c++){var l=n[c];if(!a||a&&h===void 0&&l.hasOwnProperty(a)||a&&h!==void 0&&l[a]===h)return l}return null};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(146),u=t(0),n=t(70),a=t(18),h=new u({Extends:s,initialize:function(o,c,l){if(l===void 0&&(l={}),this.tags=o.game.cache.audio.get(c),!this.tags)throw new Error('There is no audio asset with key "'+c+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,s.call(this,o,c,l)},play:function(r,o){return this.manager.isLocked(this,"play",[r,o])||!s.prototype.play.call(this,r,o)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!s.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!s.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(n.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var r=this.currentConfig.seek,o=this.currentConfig.delay,c=(this.currentMarker?this.currentMarker.start:0)+r;return this.previousTime=c,this.audio.currentTime=c,this.applyConfig(),o===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+o*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var r=0;r<this.tags.length;r++){var o=this.tags[r];if(o.dataset.used==="false")return o.dataset.used="true",this.audio=o,!0}if(!this.manager.override)return!1;var c=[];this.manager.forEachActiveSound(function(f){f.key===this.key&&f.audio&&c.push(f)},this),c.sort(function(f,p){return f.loop===p.loop?p.seek/p.duration-f.seek/f.duration:f.loop?1:-1});var l=c[0];return this.audio=l.audio,l.reset(),l.audio=null,l.startTime=0,l.previousTime=0,!0},playCatchPromise:function(){var r=this.audio.play();r&&r.catch(function(o){console.warn(o)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){s.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(r){if(!!this.isPlaying){if(this.startTime>0){this.startTime<r-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,r-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var o=this.currentMarker?this.currentMarker.start:0,c=o+this.duration,l=this.audio.currentTime;if(this.currentConfig.loop)l>=c-this.manager.loopEndOffset?(this.audio.currentTime=o+Math.max(0,l-c),l=this.audio.currentTime):l<o&&(this.audio.currentTime+=o,l=this.audio.currentTime),l<this.previousTime&&this.emit(n.LOOPED,this);else if(l>=c){this.reset(),this.stopAndReleaseAudioTag(),this.emit(n.COMPLETE,this);return}this.previousTime=l}},destroy:function(){s.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=a(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){s.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(r){this.currentConfig.mute=r,!this.manager.isLocked(this,"mute",r)&&(this.updateMute(),this.emit(n.MUTE,this,r))}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.currentConfig.volume},set:function(r){this.currentConfig.volume=r,!this.manager.isLocked(this,"volume",r)&&(this.updateVolume(),this.emit(n.VOLUME,this,r))}},setVolume:function(r){return this.volume=r,this},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,!this.manager.isLocked(this,n.RATE,r)&&(this.calculateRate(),this.emit(n.RATE,this,r))}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,!this.manager.isLocked(this,n.DETUNE,r)&&(this.calculateRate(),this.emit(n.DETUNE,this,r))}},setDetune:function(r){return this.detune=r,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.isLocked(this,"seek",r)||this.startTime>0||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.isPlaying?(this.previousTime=r,this.audio.currentTime=r):this.isPaused&&(this.currentConfig.seek=r),this.emit(n.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,!this.manager.isLocked(this,"loop",r)&&(this.audio&&(this.audio.loop=r),this.emit(n.LOOP,this,r))}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.currentConfig.pan},set:function(r){this.currentConfig.pan=r,this.emit(n.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(145),u=t(0),n=t(9),a=t(431),h=t(1),r=new u({Extends:n,initialize:function(c){n.call(this),this.game=c,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(o,c){var l=new a(this,o,c);return this.sounds.push(l),l},addAudioSprite:function(o,c){var l=this.add(o,c);return l.spritemap={},l},play:function(o,c){return!1},playAudioSprite:function(o,c,l){return!1},remove:function(o){return s.prototype.remove.call(this,o)},removeByKey:function(o){return s.prototype.removeByKey.call(this,o)},pauseAll:h,resumeAll:h,stopAll:h,update:h,setRate:h,setDetune:h,setMute:h,setVolume:h,forEachActiveSound:function(o,c){s.prototype.forEachActiveSound.call(this,o,c)},destroy:function(){s.prototype.destroy.call(this)}});e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(146),u=t(0),n=t(9),a=t(17),h=function(){return!1},r=function(){return null},o=function(){return this},c=new u({Extends:n,initialize:function(f,p,g){g===void 0&&(g={}),n.call(this),this.manager=f,this.key=p,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=a({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:h,updateMarker:h,removeMarker:r,play:h,pause:h,resume:h,stop:h,destroy:function(){s.prototype.destroy.call(this)},setMute:o,setVolume:o,setRate:o,setDetune:o,setSeek:o,setLoop:o,setPan:o});e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(433),u=t(145),n=t(0),a=t(70),h=t(22),r=t(434),o=new n({Extends:u,initialize:function(l){this.context=this.createAudioContext(l),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),u.call(this,l),this.locked&&l.isBooted?this.unlock():l.events.once(h.BOOT,this.unlock,this)},createAudioContext:function(c){var l=c.config.audio;if(l.context)return l.context.resume(),l.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(c){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=c,this.masterMuteNode=c.createGain(),this.masterVolumeNode=c.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(c.destination),this.destination=this.masterMuteNode,this},add:function(c,l){var f=new r(this,c,l);return this.sounds.push(f),f},decodeAudio:function(c,l){var f;Array.isArray(c)?f=c:f=[{key:c,data:l}];for(var p=this.game.cache.audio,g=f.length,m=0;m<f.length;m++){var x=f[m],y=x.key,T=x.data;typeof T=="string"&&(T=s(T));var S=function(E,P){p.add(E,P),this.emit(a.DECODED,E),g--,g===0&&this.emit(a.DECODED_ALL)}.bind(this,y),C=function(E,P){console.error("Error decoding audio: "+E+" - ",P?P.message:""),g--,g===0&&this.emit(a.DECODED_ALL)}.bind(this,y);this.context.decodeAudioData(T,S,C)}},unlock:function(){var c=this,l=document.body,f=function p(){if(c.context&&l){var g=l.removeEventListener;c.context.resume().then(function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p),c.unlocked=!0},function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p)})}};l&&(l.addEventListener("touchstart",f,!1),l.addEventListener("touchend",f,!1),l.addEventListener("click",f,!1),l.addEventListener("keydown",f,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var c=this.context;(c.state==="suspended"||c.state==="interrupted")&&!this.locked&&c.resume()},update:function(c,l){u.prototype.update.call(this,c,l);var f=this.context;f&&f.state==="interrupted"&&f.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var c=this;this.context.close().then(function(){c.context=null})}u.prototype.destroy.call(this)},setMute:function(c){return this.mute=c,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(c){this.masterMuteNode.gain.setValueAtTime(c?0:1,0),this.emit(a.GLOBAL_MUTE,this,c)}},setVolume:function(c){return this.volume=c,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(c){this.masterVolumeNode.gain.setValueAtTime(c,0),this.emit(a.GLOBAL_VOLUME,this,c)}}});e.exports=o},function(e,d){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(256),u=0;u<t.length;u++)s[t.charCodeAt(u)]=u;var n=function(a){a=a.substr(a.indexOf(",")+1);var h=a.length,r=h*.75,o=0,c,l,f,p;a[h-1]==="="&&(r--,a[h-2]==="="&&r--);for(var g=new ArrayBuffer(r),m=new Uint8Array(g),x=0;x<h;x+=4)c=s[a.charCodeAt(x)],l=s[a.charCodeAt(x+1)],f=s[a.charCodeAt(x+2)],p=s[a.charCodeAt(x+3)],m[o++]=c<<2|l>>4,m[o++]=(l&15)<<4|f>>2,m[o++]=(f&3)<<6|p&63;return g};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(146),u=t(0),n=t(70),a=new u({Extends:s,initialize:function(r,o,c){if(c===void 0&&(c={}),this.audioBuffer=r.game.cache.audio.get(o),!this.audioBuffer)throw new Error('Audio key "'+o+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=r.context.createGain(),this.volumeNode=r.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),r.context.createStereoPanner?(this.pannerNode=r.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(r.destination)):this.volumeNode.connect(r.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,s.call(this,r,o,c)},play:function(h,r){return s.prototype.play.call(this,h,r)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(n.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(n.RESUME,this),!0)},stop:function(){return s.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(n.STOP,this),!0):!1},createAndStartBufferSource:function(){var h=this.currentConfig.seek,r=this.currentConfig.delay,o=this.manager.context.currentTime+r,c=(this.currentMarker?this.currentMarker.start:0)+h,l=this.duration-h;this.playTime=o-h,this.startTime=o,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,o),Math.max(0,c),Math.max(0,l)),this.resetConfig()},createAndStartLoopBufferSource:function(){var h=this.getLoopTime(),r=this.currentMarker?this.currentMarker.start:0,o=this.duration;this.loopTime=h,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,h),Math.max(0,r),Math.max(0,o))},createBufferSource:function(){var h=this,r=this.manager.context.createBufferSource();return r.buffer=this.audioBuffer,r.connect(this.muteNode),r.onended=function(o){o.target===h.source&&(h.currentConfig.loop?h.hasLooped=!0:h.hasEnded=!0)},r},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),s.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,s.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(n.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(n.LOOPED,this))},destroy:function(){s.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){s.prototype.calculateRate.call(this);var h=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,h),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,h)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var h=0,r=0;r<this.rateUpdates.length;r++){var o=0;r<this.rateUpdates.length-1?o=this.rateUpdates[r+1].time:o=this.manager.context.currentTime-this.playTime,h+=(o-this.rateUpdates[r].time)*this.rateUpdates[r].rate}return h},getLoopTime:function(){for(var h=0,r=0;r<this.rateUpdates.length-1;r++)h+=(this.rateUpdates[r+1].time-this.rateUpdates[r].time)*this.rateUpdates[r].rate;var o=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+o.time+(this.duration-h)/o.rate},rate:{get:function(){return this.currentConfig.rate},set:function(h){this.currentConfig.rate=h,this.calculateRate(),this.emit(n.RATE,this,h)}},setRate:function(h){return this.rate=h,this},detune:{get:function(){return this.currentConfig.detune},set:function(h){this.currentConfig.detune=h,this.calculateRate(),this.emit(n.DETUNE,this,h)}},setDetune:function(h){return this.detune=h,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(h){this.currentConfig.mute=h,this.muteNode.gain.setValueAtTime(h?0:1,0),this.emit(n.MUTE,this,h)}},setMute:function(h){return this.mute=h,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(h){this.currentConfig.volume=h,this.volumeNode.gain.setValueAtTime(h,0),this.emit(n.VOLUME,this,h)}},setVolume:function(h){return this.volume=h,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(h){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(h=Math.min(Math.max(0,h),this.duration),this.currentConfig.seek=h,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(n.SEEK,this,h))}},setSeek:function(h){return this.seek=h,this},loop:{get:function(){return this.currentConfig.loop},set:function(h){this.currentConfig.loop=h,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),h&&this.createAndStartLoopBufferSource()),this.emit(n.LOOP,this,h)}},setLoop:function(h){return this.loop=h,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(h){this.currentConfig.pan=h,this.pannerNode&&this.pannerNode.pan.setValueAtTime(h,this.manager.context.currentTime),this.emit(n.PAN,this,h)}},setPan:function(h){return this.pan=h,this}});e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=s.length,n=s[0].length,a=new Array(n),h=0;h<n;h++){a[h]=new Array(u);for(var r=u-1;r>-1;r--)a[h][r]=s[r][h]}return a};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(n,a,h){var r=n[a];n[a]=n[h],n[h]=r}function s(n,a){return n<a?-1:n>a?1:0}var u=function(n,a,h,r,o){for(h===void 0&&(h=0),r===void 0&&(r=n.length-1),o===void 0&&(o=s);r>h;){if(r-h>600){var c=r-h+1,l=a-h+1,f=Math.log(c),p=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*p*(c-p)/c)*(l-c/2<0?-1:1),m=Math.max(h,Math.floor(a-l*p/c+g)),x=Math.min(r,Math.floor(a+(c-l)*p/c+g));u(n,a,m,x,o)}var y=n[a],T=h,S=r;for(t(n,h,a),o(n[r],y)>0&&t(n,h,r);T<S;){for(t(n,T,S),T++,S--;o(n[T],y)<0;)T++;for(;o(n[S],y)>0;)S--}o(n[h],y)===0?t(n,h,S):(S++,t(n,S,r)),S<=a&&(h=S+1),a<=S&&(r=S-1)}};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=t(131),n=function(h,r,o){for(var c=[],l=0;l<h.length;l++)for(var f=0;f<r.length;f++)for(var p=0;p<o;p++)c.push({a:h[l],b:r[f]});return c},a=function(h,r,o){var c=s(o,"max",0),l=s(o,"qty",1),f=s(o,"random",!1),p=s(o,"randomB",!1),g=s(o,"repeat",0),m=s(o,"yoyo",!1),x=[];if(p&&u(r),g===-1)if(c===0)g=0;else{var y=h.length*r.length*l;m&&(y*=2),g=Math.ceil(c/y)}for(var T=0;T<=g;T++){var S=n(h,r,l);f&&u(S),x=x.concat(S),m&&(S.reverse(),x=x.concat(S))}return c&&x.splice(c),x};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={PROCESS_QUEUE_ADD:t(1041),PROCESS_QUEUE_REMOVE:t(1042)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(13),u=function(n,a){var h=s(a,"anims",null);if(h===null)return n;if(typeof h=="string")n.anims.play(h);else if(typeof h=="object"){var r=n.anims,o=s(h,"key",void 0);if(o){var c=s(h,"startFrame",void 0),l=s(h,"delay",0),f=s(h,"repeat",0),p=s(h,"repeatDelay",0),g=s(h,"yoyo",!1),m=s(h,"play",!1),x=s(h,"delayedPlay",0),y={key:o,delay:l,repeat:f,repeatDelay:p,yoyo:g,startFrame:c};m?r.play(y):x>0?r.playAfterDelay(y,x):r.load(y)}}return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(109),n=new s({initialize:function(h,r,o,c,l){this.parent=h,this.x=r,this.y=o,this.frame=c,this.data={},this.tint=16777215,this._visible=l,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(a){return a===void 0?this.frame=this.parent.frame:a instanceof u&&a.texture===this.parent.texture?this.frame=a:this.frame=this.parent.texture.get(a),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(a,h,r){return this.x=a,this.y=h,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(a,h){return this.x=a,this.y=h,this},setFlipX:function(a){return this.flipX=a,this},setFlipY:function(a){return this.flipY=a,this},setFlip:function(a,h){return this.flipX=a,this.flipY=h,this},setVisible:function(a){return this.visible=a,this},setAlpha:function(a){return this.alpha=a,this},setTint:function(a){return this.tint=a,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(a){this.parent.dirty|=this._visible!==a,this._visible=a}},alpha:{get:function(){return this._alpha},set:function(a){this.parent.dirty|=this._alpha>0!=a>0,this._alpha=a}}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,a,h){h===void 0&&(h=new s);var r=Math.min(n.x,a.x),o=Math.min(n.y,a.y),c=Math.max(n.right,a.right)-r,l=Math.max(n.bottom,a.bottom)-o;return h.setTo(r,o,c,l)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(1055),a=t(15),h=t(7),r=t(202),o=t(20),c=t(140),l=new s({Extends:a,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Origin,u.ScrollFactor,u.Transform,u.Visible,n],initialize:function(p,g,m,x,y,T){a.call(this,p,"DOMElement"),this.parent=p.sys.game.domContainer,this.cache=p.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,m),typeof x=="string"?x[0]==="#"?this.setElement(x.substr(1),y,T):this.createElement(x,y,T):x&&this.setElement(x,y,T),p.sys.events.on(o.SLEEP,this.handleSceneEvent,this),p.sys.events.on(o.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(f){var p=this.node,g=p.style;p&&(g.display=f.settings.visible?"block":"none")},setSkew:function(f,p){return f===void 0&&(f=0),p===void 0&&(p=f),this.skewX=f,this.skewY=p,this},setPerspective:function(f){return this.parent.style.perspective=f+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(f){this.parent.style.perspective=f+"px"}},addListener:function(f){if(this.node){f=f.split(" ");for(var p=0;p<f.length;p++)this.node.addEventListener(f[p],this.handler,!1)}return this},removeListener:function(f){if(this.node){f=f.split(" ");for(var p=0;p<f.length;p++)this.node.removeEventListener(f[p],this.handler)}return this},dispatchNativeEvent:function(f){this.emit(f.type,f)},createElement:function(f,p,g){return this.setElement(document.createElement(f),p,g)},setElement:function(f,p,g){this.removeElement();var m;if(typeof f=="string"?(f[0]==="#"&&(f=f.substr(1)),m=document.getElementById(f)):typeof f=="object"&&f.nodeType===1&&(m=f),!m)return this;if(this.node=m,p&&h(p))for(var x in p)m.style[x]=p[x];else typeof p=="string"&&(m.style=p);return m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),g&&(m.innerText=g),this.updateSize()},createFromCache:function(f,p){var g=this.cache.get(f);return g&&this.createFromHTML(g,p),this},createFromHTML:function(f,p){p===void 0&&(p="div"),this.removeElement();var g=document.createElement(p);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=f,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var f=this.node,p=f.getBoundingClientRect();return this.width=f.clientWidth,this.height=f.clientHeight,this.displayWidth=p.width||0,this.displayHeight=p.height||0,this},getChildByProperty:function(f,p){if(this.node){for(var g=this.node.querySelectorAll("*"),m=0;m<g.length;m++)if(g[m][f]===p)return g[m]}return null},getChildByID:function(f){return this.getChildByProperty("id",f)},getChildByName:function(f){return this.getChildByProperty("name",f)},setClassName:function(f){return this.node&&(this.node.className=f,this.updateSize()),this},setText:function(f){return this.node&&(this.node.innerText=f,this.updateSize()),this},setHTML:function(f){return this.node&&(this.node.innerHTML=f,this.updateSize()),this},preUpdate:function(){var f=this.parentContainer,p=this.node;p&&f&&!f.willRender()&&(p.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(o.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(o.WAKE,this.handleSceneEvent,this)}});e.exports=l},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1056),u=t(15),n=t(25),a=new n,h=new n,r=new n,o=function(c,l,f,p){if(!!l.node){var g=l.node.style,m=l.scene.sys.settings;if(!g||!m.visible||u.RENDER_MASK!==l.renderFlags||l.cameraFilter!==0&&l.cameraFilter&f.id||l.parentContainer&&!l.parentContainer.willRender()){g.display="none";return}var x=l.parentContainer,y=f.alpha*l.alpha;x&&(y*=x.alpha);var T=a,S=h,C=r,E=0,P=0,M="0%",O="0%";p?(E=l.width*l.scaleX*l.originX,P=l.height*l.scaleY*l.originY,S.applyITRS(l.x-E,l.y-P,l.rotation,l.scaleX,l.scaleY),T.copyFrom(f.matrix),T.multiplyWithOffset(p,-f.scrollX*l.scrollFactorX,-f.scrollY*l.scrollFactorY),S.e=l.x-E,S.f=l.y-P,T.multiply(S,C)):(E=l.width*l.originX,P=l.height*l.originY,S.applyITRS(l.x-E,l.y-P,l.rotation,l.scaleX,l.scaleY),T.copyFrom(f.matrix),M=100*l.originX+"%",O=100*l.originY+"%",S.e-=f.scrollX*l.scrollFactorX,S.f-=f.scrollY*l.scrollFactorY,T.multiply(S,C)),l.transformOnly||(g.display="block",g.opacity=y,g.zIndex=l._depth,g.pointerEvents=l.pointerEvents,g.mixBlendMode=s[l._blendMode]),g.transform=C.getCSSMatrix()+" skew("+l.skewX+"rad, "+l.skewY+"rad) rotate3d("+l.rotate3d.x+","+l.rotate3d.y+","+l.rotate3d.z+","+l.rotate3d.w+l.rotate3dAngle+")",g.transformOrigin=M+" "+O}};e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(1060),h=new s({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.Origin,u.ScrollFactor,u.Size,u.Texture,u.Tint,u.Transform,u.Visible,a],initialize:function(o){n.call(this,o,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(218),u=t(98),n=t(14),a=t(4),h=function(r,o,c){c===void 0&&(c=new a);var l=u(o,0,n.PI2);return s(r,l,c)};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(447),u=t(218),n=t(98),a=t(14),h=function(r,o,c,l){l===void 0&&(l=[]),!o&&c>0&&(o=s(r)/c);for(var f=0;f<o;f++){var p=n(f/o,0,a.PI2);l.push(u(r,p))}return l};e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=s.width/2,n=s.height/2,a=Math.pow(u-n,2)/Math.pow(u+n,2);return Math.PI*(u+n)*(1+3*a/(10+Math.sqrt(4-3*a)))};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(217),u=t(30),n=function(a,h,r,o,c,l){var f=h.commandBuffer,p=f.length,g=c||a.currentContext;if(!(p===0||!u(a,g,h,r,o))){r.addToRenderList(h);var m=1,x=1,y=0,T=0,S=1,C=0,E=0,P=0;g.beginPath();for(var M=0;M<p;++M){var O=f[M];switch(O){case s.ARC:g.arc(f[M+1],f[M+2],f[M+3],f[M+4],f[M+5],f[M+6]),M+=7;break;case s.LINE_STYLE:S=f[M+1],y=f[M+2],m=f[M+3],C=(y&16711680)>>>16,E=(y&65280)>>>8,P=y&255,g.strokeStyle="rgba("+C+","+E+","+P+","+m+")",g.lineWidth=S,M+=3;break;case s.FILL_STYLE:T=f[M+1],x=f[M+2],C=(T&16711680)>>>16,E=(T&65280)>>>8,P=T&255,g.fillStyle="rgba("+C+","+E+","+P+","+x+")",M+=2;break;case s.BEGIN_PATH:g.beginPath();break;case s.CLOSE_PATH:g.closePath();break;case s.FILL_PATH:l||g.fill();break;case s.STROKE_PATH:l||g.stroke();break;case s.FILL_RECT:l?g.rect(f[M+1],f[M+2],f[M+3],f[M+4]):g.fillRect(f[M+1],f[M+2],f[M+3],f[M+4]),M+=4;break;case s.FILL_TRIANGLE:g.beginPath(),g.moveTo(f[M+1],f[M+2]),g.lineTo(f[M+3],f[M+4]),g.lineTo(f[M+5],f[M+6]),g.closePath(),l||g.fill(),M+=6;break;case s.STROKE_TRIANGLE:g.beginPath(),g.moveTo(f[M+1],f[M+2]),g.lineTo(f[M+3],f[M+4]),g.lineTo(f[M+5],f[M+6]),g.closePath(),l||g.stroke(),M+=6;break;case s.LINE_TO:g.lineTo(f[M+1],f[M+2]),M+=2;break;case s.MOVE_TO:g.moveTo(f[M+1],f[M+2]),M+=2;break;case s.LINE_FX_TO:g.lineTo(f[M+1],f[M+2]),M+=5;break;case s.MOVE_FX_TO:g.moveTo(f[M+1],f[M+2]),M+=5;break;case s.SAVE:g.save();break;case s.RESTORE:g.restore();break;case s.TRANSLATE:g.translate(f[M+1],f[M+2]),M+=2;break;case s.SCALE:g.scale(f[M+1],f[M+2]),M+=2;break;case s.ROTATE:g.rotate(f[M+1]),M+=1;break;case s.GRADIENT_FILL_STYLE:M+=5;break;case s.GRADIENT_LINE_STYLE:M+=6;break}}g.restore()}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(137),n=t(80),a=t(2),h=t(68),r=new s({initialize:function(c,l,f,p){p===void 0&&(p=!1),this.propertyKey=l,this.propertyValue=f,this.defaultValue=f,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=p,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(c)},loadConfig:function(o,c){o===void 0&&(o={}),c&&(this.propertyKey=c),this.propertyValue=a(o,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(o){return this.propertyValue=o,this.setMethods()},setMethods:function(){var o=this.propertyValue,c=typeof o;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,c==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(o))this.onEmit=this.randomStaticValueEmit;else if(c==="function")this.emitOnly?this.onEmit=o:this.onUpdate=o;else if(c==="object"&&this.hasBoth(o,"start","end")){this.start=o.start,this.end=o.end;var l=this.has(o,"random");if(l&&(this.onEmit=this.randomRangedValueEmit),this.has(o,"steps"))this.steps=o.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var f=this.has(o,"ease")?o.ease:"Linear";this.ease=n(f,o.easeParams),l||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(c==="object"&&this.hasBoth(o,"min","max"))this.start=o.min,this.end=o.max,this.onEmit=this.randomRangedValueEmit;else if(c==="object"&&this.has(o,"random")){var p=o.random;Array.isArray(p)&&(this.start=p[0],this.end=p[1]),this.onEmit=this.randomRangedValueEmit}else c==="object"&&this.hasEither(o,"onEmit","onUpdate")&&(this.has(o,"onEmit")&&(this.onEmit=o.onEmit),this.has(o,"onUpdate")&&(this.onUpdate=o.onUpdate));return this},has:function(o,c){return o.hasOwnProperty(c)},hasBoth:function(o,c,l){return o.hasOwnProperty(c)&&o.hasOwnProperty(l)},hasEither:function(o,c,l){return o.hasOwnProperty(c)||o.hasOwnProperty(l)},defaultEmit:function(o,c,l){return l},defaultUpdate:function(o,c,l,f){return f},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var o=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[o]},randomRangedValueEmit:function(o,c){var l=u(this.start,this.end);return o&&o.data[c]&&(o.data[c].min=l),l},steppedEmit:function(){var o=this.counter,c=this.counter+(this.end-this.start)/this.steps;return this.counter=h(c,this.start,this.end),o},easedValueEmit:function(o,c){if(o&&o.data[c]){var l=o.data[c];l.min=this.start,l.max=this.end}return this.start},easeValueUpdate:function(o,c,l){var f=o.data[c];return(f.max-f.min)*this.ease(l)+f.min}});e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=new s({initialize:function(h,r,o,c,l){if(typeof h=="object"){var f=h;h=u(f,"x",0),r=u(f,"y",0),o=u(f,"power",0),c=u(f,"epsilon",100),l=u(f,"gravity",50)}else h===void 0&&(h=0),r===void 0&&(r=0),o===void 0&&(o=0),c===void 0&&(c=100),l===void 0&&(l=50);this.x=h,this.y=r,this.active=!0,this._gravity=l,this._power=0,this._epsilon=0,this.power=o,this.epsilon=c},update:function(a,h){var r=this.x-a.x,o=this.y-a.y,c=r*r+o*o;if(c!==0){var l=Math.sqrt(c);c<this._epsilon&&(c=this._epsilon);var f=this._power*h/(c*l)*100;a.velocityX+=r*f,a.velocityY+=o*f}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(a){this._epsilon=a*a}},power:{get:function(){return this._power/this._gravity},set:function(a){this._power=a*this._gravity}},gravity:{get:function(){return this._gravity},set:function(a){var h=this.power;this._gravity=a,this.power=h}}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(36),n=t(50),a=new s({initialize:function(r){this.emitter=r,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(h,r){var o=this.emitter;this.frame=o.getFrame(),o.emitZone&&o.emitZone.getPoint(this),h===void 0?this.x+=o.x.onEmit(this,"x"):this.x+=h,r===void 0?this.y+=o.y.onEmit(this,"y"):this.y+=r,this.life=o.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var c=o.speedX.onEmit(this,"speedX"),l=o.speedY?o.speedY.onEmit(this,"speedY"):c;if(o.radial){var f=u(o.angle.onEmit(this,"angle"));this.velocityX=Math.cos(f)*Math.abs(c),this.velocityY=Math.sin(f)*Math.abs(l)}else if(o.moveTo){var p=o.moveToX.onEmit(this,"moveToX"),g=o.moveToY?o.moveToY.onEmit(this,"moveToY"):p,m=Math.atan2(g-this.y,p-this.x),x=n(this.x,this.y,p,g)/(this.life/1e3);this.velocityX=Math.cos(m)*x,this.velocityY=Math.sin(m)*x}else this.velocityX=c,this.velocityY=l;o.acceleration&&(this.accelerationX=o.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=o.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=o.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=o.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=o.delay.onEmit(this,"delay"),this.scaleX=o.scaleX.onEmit(this,"scaleX"),this.scaleY=o.scaleY?o.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=o.rotate.onEmit(this,"rotate"),this.rotation=u(this.angle),this.bounce=o.bounce.onEmit(this,"bounce"),this.alpha=o.alpha.onEmit(this,"alpha"),this.tint=o.tint.onEmit(this,"tint")},computeVelocity:function(h,r,o,c){var l=this.velocityX,f=this.velocityY,p=this.accelerationX,g=this.accelerationY,m=this.maxVelocityX,x=this.maxVelocityY;l+=h.gravityX*o,f+=h.gravityY*o,p&&(l+=p*o),g&&(f+=g*o),l>m?l=m:l<-m&&(l=-m),f>x?f=x:f<-x&&(f=-x),this.velocityX=l,this.velocityY=f;for(var y=0;y<c.length;y++)c[y].update(this,r,o)},checkBounds:function(h){var r=h.bounds,o=-this.bounce;this.x<r.x&&h.collideLeft?(this.x=r.x,this.velocityX*=o):this.x>r.right&&h.collideRight&&(this.x=r.right,this.velocityX*=o),this.y<r.y&&h.collideTop?(this.y=r.y,this.velocityY*=o):this.y>r.bottom&&h.collideBottom&&(this.y=r.bottom,this.velocityY*=o)},update:function(h,r,o){if(this.delayCurrent>0)return this.delayCurrent-=h,!1;var c=this.emitter,l=1-this.lifeCurrent/this.life;return this.lifeT=l,this.computeVelocity(c,h,r,o),this.x+=this.velocityX*r,this.y+=this.velocityY*r,c.bounds&&this.checkBounds(c),c.deathZone&&c.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=c.scaleX.onUpdate(this,"scaleX",l,this.scaleX),c.scaleY?this.scaleY=c.scaleY.onUpdate(this,"scaleY",l,this.scaleY):this.scaleY=this.scaleX,this.angle=c.rotate.onUpdate(this,"rotate",l,this.angle),this.rotation=u(this.angle),this.alpha=c.alpha.onUpdate(this,"alpha",l,this.alpha),this.tint=c.tint.onUpdate(this,"tint",l,this.tint),this.lifeCurrent-=h,this.lifeCurrent<=0)}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(0),n=t(11),a=t(453),h=t(454),r=t(449),o=t(2),c=t(210),l=t(455),f=t(126),p=t(451),g=t(456),m=t(10),x=t(79),y=t(3),T=t(68),S=new u({Mixins:[n.BlendMode,n.Mask,n.ScrollFactor,n.Visible],initialize:function(E,P){this.manager=E,this.texture=E.texture,this.frames=[E.defaultFrame],this.defaultFrame=E.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=p,this.x=new r(P,"x",0,!0),this.y=new r(P,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new r(P,"accelerationX",0,!0),this.accelerationY=new r(P,"accelerationY",0,!0),this.maxVelocityX=new r(P,"maxVelocityX",1e4,!0),this.maxVelocityY=new r(P,"maxVelocityY",1e4,!0),this.speedX=new r(P,"speedX",0,!0),this.speedY=new r(P,"speedY",0,!0),this.moveTo=!1,this.moveToX=new r(P,"moveToX",0,!0),this.moveToY=new r(P,"moveToY",0,!0),this.bounce=new r(P,"bounce",0,!0),this.scaleX=new r(P,"scaleX",1),this.scaleY=new r(P,"scaleY",1),this.tint=new r(P,"tint",16777215),this.alpha=new r(P,"alpha",1),this.lifespan=new r(P,"lifespan",1e3,!0),this.angle=new r(P,"angle",{min:0,max:360},!0),this.rotate=new r(P,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new r(P,"quantity",1,!0),this.delay=new r(P,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=s.NORMAL,this.follow=null,this.followOffset=new y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,P&&this.fromJSON(P)},fromJSON:function(C){if(!C)return this;var E=0,P="";for(E=0;E<this.configFastMap.length;E++)P=this.configFastMap[E],f(C,P)&&(this[P]=o(C,P));for(E=0;E<this.configOpMap.length;E++)P=this.configOpMap[E],f(C,P)&&this[P].loadConfig(C);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,f(C,"speed")&&(this.speedX.loadConfig(C,"speed"),this.speedY=null),(l(C,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),f(C,"scale")&&(this.scaleX.loadConfig(C,"scale"),this.scaleY=null),f(C,"callbackScope")){var M=o(C,"callbackScope",null);this.emitCallbackScope=M,this.deathCallbackScope=M}return f(C,"emitZone")&&this.setEmitZone(C.emitZone),f(C,"deathZone")&&this.setDeathZone(C.deathZone),f(C,"bounds")&&this.setBounds(C.bounds),f(C,"followOffset")&&this.followOffset.setFromObject(o(C,"followOffset",0)),f(C,"frame")&&this.setFrame(C.frame),f(C,"reserve")&&this.reserve(C.reserve),this},toJSON:function(C){C===void 0&&(C={});var E=0,P="";for(E=0;E<this.configFastMap.length;E++)P=this.configFastMap[E],C[P]=this[P];for(E=0;E<this.configOpMap.length;E++)P=this.configOpMap[E],this[P]&&(C[P]=this[P].toJSON());return this.speedY||(delete C.speedX,C.speed=this.speedX.toJSON()),this.scaleY||(delete C.scaleX,C.scale=this.scaleX.toJSON()),C},startFollow:function(C,E,P,M){return E===void 0&&(E=0),P===void 0&&(P=0),M===void 0&&(M=!1),this.follow=C,this.followOffset.set(E,P),this.trackVisible=M,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return c(this.frames);var C=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=T(this.currentFrame+1,0,this._frameLength)),C},setFrame:function(C,E,P){E===void 0&&(E=!0),P===void 0&&(P=1),this.randomFrame=E,this.frameQuantity=P,this.currentFrame=0,this._frameCounter=0;var M=typeof C;if(Array.isArray(C)||M==="string"||M==="number")this.manager.setEmitterFrames(C,this);else if(M==="object"){var O=C;C=o(O,"frames",null),C&&this.manager.setEmitterFrames(C,this);var A=o(O,"cycle",!1);this.randomFrame=!A,this.frameQuantity=o(O,"quantity",P)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(C){return C===void 0&&(C=!0),this.radial=C,this},setPosition:function(C,E){return this.x.onChange(C),this.y.onChange(E),this},setBounds:function(C,E,P,M){if(typeof C=="object"){var O=C;C=O.x,E=O.y,P=f(O,"w")?O.w:O.width,M=f(O,"h")?O.h:O.height}return this.bounds?this.bounds.setTo(C,E,P,M):this.bounds=new m(C,E,P,M),this},setSpeedX:function(C){return this.speedX.onChange(C),this.radial=!1,this},setSpeedY:function(C){return this.speedY&&(this.speedY.onChange(C),this.radial=!1),this},setSpeed:function(C){return this.speedX.onChange(C),this.speedY=null,this.radial=!0,this},setScaleX:function(C){return this.scaleX.onChange(C),this},setScaleY:function(C){return this.scaleY.onChange(C),this},setScale:function(C){return this.scaleX.onChange(C),this.scaleY=null,this},setGravityX:function(C){return this.gravityX=C,this},setGravityY:function(C){return this.gravityY=C,this},setGravity:function(C,E){return this.gravityX=C,this.gravityY=E,this},setAlpha:function(C){return this.alpha.onChange(C),this},setTint:function(C){return this.tint.onChange(C),this},setEmitterAngle:function(C){return this.angle.onChange(C),this},setAngle:function(C){return this.angle.onChange(C),this},setLifespan:function(C){return this.lifespan.onChange(C),this},setQuantity:function(C){return this.quantity.onChange(C),this},setFrequency:function(C,E){return this.frequency=C,this._counter=0,E&&this.quantity.onChange(E),this},setEmitZone:function(C){if(C===void 0)this.emitZone=null;else{var E=o(C,"type","random"),P=o(C,"source",null);switch(E){case"random":this.emitZone=new g(P);break;case"edge":var M=o(C,"quantity",1),O=o(C,"stepRate",0),A=o(C,"yoyo",!1),R=o(C,"seamless",!0);this.emitZone=new h(P,M,O,A,R);break}}return this},setDeathZone:function(C){if(C===void 0)this.deathZone=null;else{var E=o(C,"type","onEnter"),P=o(C,"source",null);if(P&&typeof P.contains=="function"){var M=E==="onEnter";this.deathZone=new a(P,M)}}return this},reserve:function(C){for(var E=this.dead,P=0;P<C;P++)E.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(C,E){return C===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof C=="function"&&(this.emitCallback=C,E&&(this.emitCallbackScope=E)),this},onParticleDeath:function(C,E){return C===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof C=="function"&&(this.deathCallback=C,E&&(this.deathCallbackScope=E)),this},killAll:function(){for(var C=this.dead,E=this.alive;E.length>0;)C.push(E.pop());return this},forEachAlive:function(C,E){for(var P=this.alive,M=P.length,O=0;O<M;++O)C.call(E,P[O],this);return this},forEachDead:function(C,E){for(var P=this.dead,M=P.length,O=0;O<M;++O)C.call(E,P[O],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return x(this.alive,this.depthSortCallback),this},flow:function(C,E){return E===void 0&&(E=1),this.frequency=C,this.quantity.onChange(E),this.start()},explode:function(C,E,P){return this.frequency=-1,this.emitParticle(C,E,P)},emitParticleAt:function(C,E,P){return this.emitParticle(P,C,E)},emitParticle:function(C,E,P){if(!this.atLimit()){C===void 0&&(C=this.quantity.onEmit());for(var M=this.dead,O=this.follow?this.follow.x+this.followOffset.x:E,A=this.follow?this.follow.y+this.followOffset.y:P,R=0;R<C;R++){var F=M.pop();if(F||(F=new this.particleClass(this)),F.fire(O,A),this.particleBringToTop?this.alive.push(F):this.alive.unshift(F),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,F,this),this.atLimit())break}return F}},preUpdate:function(C,E){E*=this.timeScale;var P=E/1e3;this.trackVisible&&(this.visible=this.follow.visible);var M=this.manager.getProcessors(),O=this.alive,A=this.dead,R=0,F=[],I=O.length;for(R=0;R<I;R++){var B=O[R];B.update(E,P,M)&&F.push({index:R,particle:B})}if(I=F.length,I>0){var N=this.deathCallback,Y=this.deathCallbackScope;for(R=I-1;R>=0;R--){var X=F[R];O.splice(X.index,1),A.push(X.particle),N&&N.call(Y,X.particle),X.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=E,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(C,E){return C.y-E.y}});e.exports=S},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,h){this.source=a,this.killOnEnter=h},willKill:function(n){var a=this.source.contains(n.x,n.y);return a&&this.killOnEnter||!a&&!this.killOnEnter}});e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,h,r,o,c){o===void 0&&(o=!1),c===void 0&&(c=!0),this.source=a,this.points=[],this.quantity=h,this.stepRate=r,this.yoyo=o,this.counter=-1,this.seamless=c,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var n=this.points[0],a=this.points[this.points.length-1];n.x===a.x&&n.y===a.y&&this.points.pop()}var h=this._length;return this._length=this.points.length,this._length<h&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(n){return this.source=n,this.updateSource()},getPoint:function(n){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var a=this.points[this.counter];a&&(n.x=a.x,n.y=a.y)}});e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){for(var n=0;n<u.length;n++)if(s.hasOwnProperty(u[n]))return!0;return!1};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(3),n=new s({initialize:function(h){this.source=h,this._tempVec=new u},getPoint:function(a){var h=this._tempVec;this.source.getRandomPoint(h),a.x=h.x,a.y=h.y}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(73),a=new s({Extends:n,Mixins:[u.PathFollower],initialize:function(r,o,c,l,f,p){n.call(this,r,c,l,f,p),this.path=o},preUpdate:function(h,r){this.anims.update(h,r),this.pathUpdate(h)}});e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=s.canvas,h=s.context,r=s.style,o=[],c=0,l=n.length;r.maxLines>0&&r.maxLines<n.length&&(l=r.maxLines),r.syncFont(a,h);for(var f=0;f<l;f++){var p=r.strokeThickness;p+=h.measureText(n[f]).width,r.wordWrap&&(p-=h.measureText(" ").width),o[f]=Math.ceil(p),c=Math.max(c,o[f])}var g=u.fontSize+r.strokeThickness,m=g*l,x=s.lineSpacing;return l>1&&(m+=x*(l-1)),{width:c,height:m,lines:l,lineWidths:o,lineSpacing:x,lineHeight:g}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(13),n=t(6),a=t(460),h={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},r=new s({initialize:function(c,l){this.parent=c,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(l,!1,!0);var f=n(l,"metrics",!1);f?this.metrics={ascent:n(f,"ascent",0),descent:n(f,"descent",0),fontSize:n(f,"fontSize",0)}:this.metrics=a(this)},setStyle:function(o,c,l){c===void 0&&(c=!0),l===void 0&&(l=!1),o&&o.hasOwnProperty("fontSize")&&typeof o.fontSize=="number"&&(o.fontSize=o.fontSize.toString()+"px");for(var f in h){var p=l?h[f][1]:this[f];f==="wordWrapCallback"||f==="wordWrapCallbackScope"?this[f]=n(o,h[f][0],p):this[f]=u(o,h[f][0],p)}var g=n(o,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var m=n(o,"fill",null);return m!==null&&(this.color=m),c?this.update(!0):this.parent},syncFont:function(o,c){c.font=this._font},syncStyle:function(o,c){c.textBaseline="alphabetic",c.fillStyle=this.color,c.strokeStyle=this.stroke,c.lineWidth=this.strokeThickness,c.lineCap="round",c.lineJoin="round"},syncShadow:function(o,c){c?(o.shadowOffsetX=this.shadowOffsetX,o.shadowOffsetY=this.shadowOffsetY,o.shadowColor=this.shadowColor,o.shadowBlur=this.shadowBlur):(o.shadowOffsetX=0,o.shadowOffsetY=0,o.shadowColor=0,o.shadowBlur=0)},update:function(o){return o&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=a(this)),this.parent.updateText()},setFont:function(o,c){c===void 0&&(c=!0);var l=o,f="",p="";if(typeof o!="string")l=n(o,"fontFamily","Courier"),f=n(o,"fontSize","16px"),p=n(o,"fontStyle","");else{var g=o.split(" "),m=0;p=g.length>2?g[m++]:"",f=g[m++]||"16px",l=g[m++]||"Courier"}return(l!==this.fontFamily||f!==this.fontSize||p!==this.fontStyle)&&(this.fontFamily=l,this.fontSize=f,this.fontStyle=p,c&&this.update(!0)),this.parent},setFontFamily:function(o){return this.fontFamily!==o&&(this.fontFamily=o,this.update(!0)),this.parent},setFontStyle:function(o){return this.fontStyle!==o&&(this.fontStyle=o,this.update(!0)),this.parent},setFontSize:function(o){return typeof o=="number"&&(o=o.toString()+"px"),this.fontSize!==o&&(this.fontSize=o,this.update(!0)),this.parent},setTestString:function(o){return this.testString=o,this.update(!0)},setFixedSize:function(o,c){return this.fixedWidth=o,this.fixedHeight=c,o&&(this.parent.width=o),c&&(this.parent.height=c),this.update(!1)},setBackgroundColor:function(o){return this.backgroundColor=o,this.update(!1)},setFill:function(o){return this.color=o,this.update(!1)},setColor:function(o){return this.color=o,this.update(!1)},setResolution:function(o){return this.resolution=o,this.update(!1)},setStroke:function(o,c){return c===void 0&&(c=this.strokeThickness),o===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==o||this.strokeThickness!==c)&&(this.stroke=o,this.strokeThickness=c,this.update(!0)),this.parent},setShadow:function(o,c,l,f,p,g){return o===void 0&&(o=0),c===void 0&&(c=0),l===void 0&&(l="#000"),f===void 0&&(f=0),p===void 0&&(p=!1),g===void 0&&(g=!0),this.shadowOffsetX=o,this.shadowOffsetY=c,this.shadowColor=l,this.shadowBlur=f,this.shadowStroke=p,this.shadowFill=g,this.update(!1)},setShadowOffset:function(o,c){return o===void 0&&(o=0),c===void 0&&(c=o),this.shadowOffsetX=o,this.shadowOffsetY=c,this.update(!1)},setShadowColor:function(o){return o===void 0&&(o="#000"),this.shadowColor=o,this.update(!1)},setShadowBlur:function(o){return o===void 0&&(o=0),this.shadowBlur=o,this.update(!1)},setShadowStroke:function(o){return this.shadowStroke=o,this.update(!1)},setShadowFill:function(o){return this.shadowFill=o,this.update(!1)},setWordWrapWidth:function(o,c){return c===void 0&&(c=!1),this.wordWrapWidth=o,this.wordWrapUseAdvanced=c,this.update(!1)},setWordWrapCallback:function(o,c){return c===void 0&&(c=null),this.wordWrapCallback=o,this.wordWrapCallbackScope=c,this.update(!1)},setAlign:function(o){return o===void 0&&(o="left"),this.align=o,this.update(!1)},setMaxLines:function(o){return o===void 0&&(o=0),this.maxLines=o,this.update(!1)},getTextMetrics:function(){var o=this.metrics;return{ascent:o.ascent,descent:o.descent,fontSize:o.fontSize}},toJSON:function(){var o={};for(var c in h)o[c]=this[c];return o.metrics=this.getTextMetrics(),o},destroy:function(){this.parent=void 0}});e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=function(n){var a=s.create(this),h=a.getContext("2d");n.syncFont(a,h);var r=h.measureText(n.testString);if("actualBoundingBoxAscent"in r){var o=r.actualBoundingBoxAscent,c=r.actualBoundingBoxDescent;return s.remove(a),{ascent:o,descent:c,fontSize:o+c}}var l=Math.ceil(r.width*n.baselineX),f=l,p=2*f;f=f*n.baselineY|0,a.width=l,a.height=p,h.fillStyle="#f00",h.fillRect(0,0,l,p),h.font=n._font,h.textBaseline="alphabetic",h.fillStyle="#000",h.fillText(n.testString,0,f);var g={ascent:0,descent:0,fontSize:0},m=h.getImageData(0,0,l,p);if(!m)return g.ascent=f,g.descent=f+6,g.fontSize=g.ascent+g.descent,s.remove(a),g;var x=m.data,y=x.length,T=l*4,S,C,E=0,P=!1;for(S=0;S<f;S++){for(C=0;C<T;C+=4)if(x[E+C]!==255){P=!0;break}if(!P)E+=T;else break}for(g.ascent=f-S,E=y-T,P=!1,S=p;S>f;S--){for(C=0;C<T;C+=4)if(x[E+C]!==255){P=!0;break}if(!P)E-=T;else break}return g.descent=S-f,g.fontSize=g.ascent+g.descent,s.remove(a),g};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1097),u=t(0),n=t(36),a=t(59),h=t(65),r=t(14),o=t(34),c=new u({Extends:o,Mixins:[s],initialize:function(f,p,g,m,x,y,T,S,C){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=0),y===void 0&&(y=360),T===void 0&&(T=!1),o.call(this,f,"Arc",new h(0,0,m)),this._startAngle=x,this._endAngle=y,this._anticlockwise=T,this._iterations=.01,this.setPosition(p,g);var E=this.geom.radius*2;this.setSize(E,E),S!==void 0&&this.setFillStyle(S,C),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(l){this._iterations=l,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(l){this.geom.radius=l;var f=l*2;this.setSize(f,f),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(l){this._startAngle=l,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(l){this._endAngle=l,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(l){this._anticlockwise=l,this.updateData()}},setRadius:function(l){return this.radius=l,this},setIterations:function(l){return l===void 0&&(l=.01),this.iterations=l,this},setStartAngle:function(l,f){return this._startAngle=l,f!==void 0&&(this._anticlockwise=f),this.updateData()},setEndAngle:function(l,f){return this._endAngle=l,f!==void 0&&(this._anticlockwise=f),this.updateData()},updateData:function(){var l=this._iterations,f=l,p=this.geom.radius,g=n(this._startAngle),m=n(this._endAngle),x=this._anticlockwise,y=p,T=p;m-=g,x?m<-r.PI2?m=-r.PI2:m>0&&(m=-r.PI2+m%r.PI2):m>r.PI2?m=r.PI2:m<0&&(m=r.PI2+m%r.PI2);for(var S=[y+Math.cos(g)*p,T+Math.sin(g)*p],C;f<1;)C=m*f+g,S.push(y+Math.cos(C)*p,T+Math.sin(C)*p),f+=l;return C=m+g,S.push(y+Math.cos(C)*p,T+Math.sin(C)*p),S.push(y+Math.cos(g)*p,T+Math.sin(g)*p),this.pathIndexes=a(S),this.pathData=S,this}});e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(1100),n=t(59),a=t(10),h=t(34),r=new s({Extends:h,Mixins:[u],initialize:function(c,l,f,p,g,m){l===void 0&&(l=0),f===void 0&&(f=0),h.call(this,c,"Curve",p),this._smoothness=32,this._curveBounds=new a,this.closePath=!1,this.setPosition(l,f),g!==void 0&&this.setFillStyle(g,m),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){var o=this._curveBounds,c=this._smoothness;this.geom.getBounds(o,c),this.setSize(o.width,o.height),this.updateDisplayOrigin();for(var l=[],f=this.geom.getPoints(c),p=0;p<f.length;p++)l.push(f[p].x,f[p].y);return l.push(f[0].x,f[0].y),this.pathIndexes=n(l),this.pathData=l,this}});e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(59),n=t(1103),a=t(111),h=t(34),r=new s({Extends:h,Mixins:[n],initialize:function(c,l,f,p,g,m,x){l===void 0&&(l=0),f===void 0&&(f=0),p===void 0&&(p=128),g===void 0&&(g=128),h.call(this,c,"Ellipse",new a(p/2,g/2,p,g)),this._smoothness=64,this.setPosition(l,f),this.width=p,this.height=g,m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSize:function(o,c){return this.width=o,this.height=c,this.geom.setPosition(o/2,c/2),this.geom.setSize(o,c),this.updateData()},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){for(var o=[],c=this.geom.getPoints(this._smoothness),l=0;l<c.length;l++)o.push(c[l].x,c[l].y);return o.push(c[0].x,c[0].y),this.pathIndexes=u(o),this.pathData=o,this}});e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(34),n=t(1106),a=new s({Extends:u,Mixins:[n],initialize:function(r,o,c,l,f,p,g,m,x,y,T){o===void 0&&(o=0),c===void 0&&(c=0),l===void 0&&(l=128),f===void 0&&(f=128),p===void 0&&(p=32),g===void 0&&(g=32),u.call(this,r,"Grid",null),this.cellWidth=p,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(o,c),this.setSize(l,f),this.setFillStyle(m,x),y!==void 0&&this.setOutlineStyle(y,T),this.updateDisplayOrigin()},setFillStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showCells=!1:(this.fillColor=h,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showAltCells=!1:(this.altFillColor=h,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showOutline=!1:(this.outlineFillColor=h,this.outlineFillAlpha=r,this.showOutline=!0),this}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1109),u=t(0),n=t(34),a=new u({Extends:n,Mixins:[s],initialize:function(r,o,c,l,f,p,g,m){o===void 0&&(o=0),c===void 0&&(c=0),l===void 0&&(l=48),f===void 0&&(f=32),p===void 0&&(p=15658734),g===void 0&&(g=10066329),m===void 0&&(m=13421772),n.call(this,r,"IsoBox",null),this.projection=4,this.fillTop=p,this.fillLeft=g,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(o,c),this.setSize(l,f),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setFaces:function(h,r,o){return h===void 0&&(h=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),this.showTop=h,this.showLeft=r,this.showRight=o,this},setFillStyle:function(h,r,o){return this.fillTop=h,this.fillLeft=r,this.fillRight=o,this.isFilled=!0,this}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(1112),n=t(34),a=new s({Extends:n,Mixins:[u],initialize:function(r,o,c,l,f,p,g,m,x){o===void 0&&(o=0),c===void 0&&(c=0),l===void 0&&(l=48),f===void 0&&(f=32),p===void 0&&(p=!1),g===void 0&&(g=15658734),m===void 0&&(m=10066329),x===void 0&&(x=13421772),n.call(this,r,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=m,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=p,this.isFilled=!0,this.setPosition(o,c),this.setSize(l,f),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setReversed:function(h){return this.isReversed=h,this},setFaces:function(h,r,o){return h===void 0&&(h=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),this.showTop=h,this.showLeft=r,this.showRight=o,this},setFillStyle:function(h,r,o){return this.fillTop=h,this.fillLeft=r,this.fillRight=o,this.isFilled=!0,this}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(34),n=t(47),a=t(1115),h=new s({Extends:u,Mixins:[a],initialize:function(o,c,l,f,p,g,m,x,y){c===void 0&&(c=0),l===void 0&&(l=0),f===void 0&&(f=0),p===void 0&&(p=0),g===void 0&&(g=128),m===void 0&&(m=0),u.call(this,o,"Line",new n(f,p,g,m));var T=Math.max(1,this.geom.right-this.geom.left),S=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(c,l),this.setSize(T,S),x!==void 0&&this.setStrokeStyle(1,x,y),this.updateDisplayOrigin()},setLineWidth:function(r,o){return o===void 0&&(o=r),this._startWidth=r,this._endWidth=o,this.lineWidth=r,this},setTo:function(r,o,c,l){return this.geom.setTo(r,o,c,l),this}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1118),u=t(0),n=t(59),a=t(469),h=t(227),r=t(34),o=t(472),c=new u({Extends:r,Mixins:[s],initialize:function(f,p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),r.call(this,f,"Polygon",new h(m));var T=a(this.geom);this.setPosition(p,g),this.setSize(T.width,T.height),x!==void 0&&this.setFillStyle(x,y),this.updateDisplayOrigin(),this.updateData()},smooth:function(l){l===void 0&&(l=1);for(var f=0;f<l;f++)o(this.geom);return this.updateData()},updateData:function(){for(var l=[],f=this.geom.points,p=0;p<f.length;p++)l.push(f[p].x,f[p].y);return l.push(f[0].x,f[0].y),this.pathIndexes=n(l),this.pathData=l,this}});e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,a){a===void 0&&(a=new s);for(var h=1/0,r=1/0,o=-h,c=-r,l,f=0;f<n.points.length;f++)l=n.points[f],h=Math.min(h,l.x),r=Math.min(r,l.y),o=Math.max(o,l.x),c=Math.max(c,l.y);return a.x=h,a.y=r,a.width=o-h,a.height=c-r,a};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=t(47),n=t(471),a=function(h,r,o,c){c===void 0&&(c=[]);var l=h.points,f=n(h);!r&&o>0&&(r=f/o);for(var p=0;p<r;p++)for(var g=f*(p/r),m=0,x=0;x<l.length;x++){var y=l[x],T=l[(x+1)%l.length],S=new u(y.x,y.y,T.x,T.y),C=s(S);if(g<m||g>m+C){m+=C;continue}var E=S.getPoint((g-m)/C);c.push(E);break}return c};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=t(47),n=function(a){for(var h=a.points,r=0,o=0;o<h.length;o++){var c=h[o],l=h[(o+1)%h.length],f=new u(c.x,c.y,l.x,l.y);r+=s(f)}return r};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(u,n){return u[0]=n[0],u[1]=n[1],u},s=function(u){var n,a=[],h=u.points;for(n=0;n<h.length;n++)a.push([h[n].x,h[n].y]);var r=[];for(a.length>0&&r.push(t([0,0],a[0])),n=0;n<a.length-1;n++){var o=a[n],c=a[n+1],l=o[0],f=o[1],p=c[0],g=c[1];r.push([.85*l+.15*p,.85*f+.15*g]),r.push([.15*l+.85*p,.15*f+.85*g])}return a.length>1&&r.push(t([0,0],a[a.length-1])),u.setTo(r)};e.exports=s},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(10),n=t(34),a=t(1121),h=new s({Extends:n,Mixins:[a],initialize:function(o,c,l,f,p,g,m){c===void 0&&(c=0),l===void 0&&(l=0),f===void 0&&(f=128),p===void 0&&(p=128),n.call(this,o,"Rectangle",new u(0,0,f,p)),this.setPosition(c,l),this.setSize(f,p),g!==void 0&&this.setFillStyle(g,m),this.updateDisplayOrigin(),this.updateData()},setSize:function(r,o){return this.width=r,this.height=o,this.geom.setSize(r,o),this.updateData(),this},updateData:function(){var r=[],o=this.geom,c=this._tempLine;return o.getLineA(c),r.push(c.x1,c.y1,c.x2,c.y2),o.getLineB(c),r.push(c.x2,c.y2),o.getLineC(c),r.push(c.x2,c.y2),o.getLineD(c),r.push(c.x2,c.y2),this.pathData=r,this}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1124),u=t(0),n=t(59),a=t(34),h=new u({Extends:a,Mixins:[s],initialize:function(o,c,l,f,p,g,m,x){c===void 0&&(c=0),l===void 0&&(l=0),f===void 0&&(f=5),p===void 0&&(p=32),g===void 0&&(g=64),a.call(this,o,"Star",null),this._points=f,this._innerRadius=p,this._outerRadius=g,this.setPosition(c,l),this.setSize(g*2,g*2),m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},setPoints:function(r){return this._points=r,this.updateData()},setInnerRadius:function(r){return this._innerRadius=r,this.updateData()},setOuterRadius:function(r){return this._outerRadius=r,this.updateData()},points:{get:function(){return this._points},set:function(r){this._points=r,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(r){this._innerRadius=r,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(r){this._outerRadius=r,this.updateData()}},updateData:function(){var r=[],o=this._points,c=this._innerRadius,l=this._outerRadius,f=Math.PI/2*3,p=Math.PI/o,g=l,m=l;r.push(g,m+-l);for(var x=0;x<o;x++)r.push(g+Math.cos(f)*l,m+Math.sin(f)*l),f+=p,r.push(g+Math.cos(f)*c,m+Math.sin(f)*c),f+=p;return r.push(g,m+-l),this.pathIndexes=n(r),this.pathData=r,this}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(34),n=t(82),a=t(1127),h=new s({Extends:u,Mixins:[a],initialize:function(o,c,l,f,p,g,m,x,y,T,S){c===void 0&&(c=0),l===void 0&&(l=0),f===void 0&&(f=0),p===void 0&&(p=128),g===void 0&&(g=64),m===void 0&&(m=0),x===void 0&&(x=128),y===void 0&&(y=128),u.call(this,o,"Triangle",new n(f,p,g,m,x,y));var C=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(c,l),this.setSize(C,E),T!==void 0&&this.setFillStyle(T,S),this.updateDisplayOrigin(),this.updateData()},setTo:function(r,o,c,l,f,p){return this.geom.setTo(r,o,c,l,f,p),this.updateData()},updateData:function(){var r=[],o=this.geom,c=this._tempLine;return o.getLineA(c),r.push(c.x1,c.y1,c.x2,c.y2),o.getLineB(c),r.push(c.x2,c.y2),o.getLineC(c),r.push(c.x2,c.y2),this.pathData=r,this}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(67),n=function(a,h,r){r===void 0&&(r=new s);var o=a.getLineA(),c=a.getLineB(),l=a.getLineC();if(h<=0||h>=1)return r.x=o.x1,r.y=o.y1,r;var f=u(o),p=u(c),g=u(l),m=f+p+g,x=m*h,y=0;return x<f?(y=x/f,r.x=o.x1+(o.x2-o.x1)*y,r.y=o.y1+(o.y2-o.y1)*y):x>f+p?(x-=f+p,y=x/g,r.x=l.x1+(l.x2-l.x1)*y,r.y=l.y1+(l.y2-l.y1)*y):(x-=f,y=x/p,r.x=c.x1+(c.x2-c.x1)*y,r.y=c.y1+(c.y2-c.y1)*y),r};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=t(4),n=function(a,h,r,o){o===void 0&&(o=[]);var c=a.getLineA(),l=a.getLineB(),f=a.getLineC(),p=s(c),g=s(l),m=s(f),x=p+g+m;!h&&r>0&&(h=x/r);for(var y=0;y<h;y++){var T=x*(y/h),S=0,C=new u;T<p?(S=T/p,C.x=c.x1+(c.x2-c.x1)*S,C.y=c.y1+(c.y2-c.y1)*S):T>p+g?(T-=p+g,S=T/m,C.x=f.x1+(f.x2-f.x1)*S,C.y=f.y1+(f.y2-f.y1)*S):(T-=p,S=T/g,C.x=l.x1+(l.x2-l.x1)*S,C.y=l.y1+(l.y2-l.y1)*S),o.push(C)}return o};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(!s||typeof s=="number")return!1;if(s.hasOwnProperty(u))return s[u]=n,!0;if(u.indexOf(".")!==-1){for(var a=u.split("."),h=s,r=s,o=0;o<a.length;o++)if(h.hasOwnProperty(a[o]))r=h,h=h[a[o]];else return!1;return r[a[a.length-1]]=n,!0}return!1};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(116),u=t(117),n=function(a,h,r,o,c,l,f){if(o===void 0&&(o=!1),l===void 0&&(l=16777215),f===void 0&&(f=1),a.length!==h.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var p={faces:[],vertices:[]},g,m,x,y,T,S,C,E,P,M,O,A=o?3:2,R=Array.isArray(l),F=Array.isArray(f);if(Array.isArray(r)&&r.length>0)for(g=0;g<r.length;g++){var I=r[g],B=r[g]*2,N=r[g]*A;m=a[N],x=a[N+1],y=o?a[N+2]:0,T=h[B],S=h[B+1],C=R?l[I]:l,E=F?f[I]:f,P=0,M=0,O=0,c&&(P=c[N],M=c[N+1],O=o?c[N+2]:0),p.vertices.push(new u(m,x,y,T,S,C,E,P,M,O))}else{var Y=0,X=0;for(g=0;g<a.length;g+=A)m=a[g],x=a[g+1],y=o?a[g+2]:0,T=h[Y],S=h[Y+1],C=R?l[X]:l,E=F?f[X]:f,P=0,M=0,O=0,c&&(P=c[g],M=c[g+1],O=o?c[g+2]:0),p.vertices.push(new u(m,x,y,T,S,C,E,P,M,O)),Y+=2,X++}for(g=0;g<p.vertices.length;g+=3){var W=p.vertices[g],w=p.vertices[g+1],L=p.vertices[g+2];p.faces.push(new s(W,w,L))}return p};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(116),u=t(69),n=t(39),a=t(117),h=new n,r=new n,o=new u,c=function(l,f,p,g,m,x,y,T,S,C){p===void 0&&(p=1),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=0),S===void 0&&(S=0),C===void 0&&(C=!0);var E={faces:[],verts:[]},P=l.materials;h.set(g,m,x),r.set(y,T,S),o.fromRotationXYTranslation(r,h,C);for(var M=0;M<l.models.length;M++)for(var O=l.models[M],A=O.vertices,R=O.textureCoords,F=O.faces,I=0;I<F.length;I++){var B=F[I],N=B.vertices[0],Y=B.vertices[1],X=B.vertices[2],W=A[N.vertexIndex],w=A[Y.vertexIndex],L=A[X.vertexIndex],D=N.textureCoordsIndex,b=Y.textureCoordsIndex,G=X.textureCoordsIndex,z=D===-1?{u:0,v:1}:R[D],U=b===-1?{u:0,v:0}:R[b],H=G===-1?{u:1,v:1}:R[G],$=16777215;B.material!==""&&P[B.material]&&($=P[B.material]);var K=new a(W.x*p,W.y*p,W.z*p,z.u,z.v,$).transformMat4(o),Z=new a(w.x*p,w.y*p,w.z*p,U.u,U.v,$).transformMat4(o),k=new a(L.x*p,L.y*p,L.z*p,H.u,H.v,$).transformMat4(o);E.verts.push(K,Z,k),E.faces.push(new s(K,Z,k))}return f&&(f.faces=f.faces.concat(E.faces),f.vertices=f.vertices.concat(E.verts)),E};e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65),u=t(0),n=t(11),a=t(200),h=t(12),r=new u({Extends:s,Mixins:[n.ScrollFactor,n.Visible],initialize:function(c,l,f,p,g,m,x){s.call(this,c,l,f),this.color=new a(p,g,m),this.intensity=x,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(o){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&o.id)},setColor:function(o){var c=h.getFloatsFromUintRGB(o);return this.color.set(c[0],c[1],c[2]),this},setIntensity:function(o){return this.intensity=o,this},setRadius:function(o){return this.radius=o,this}});r.RENDER_MASK=15,e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(151),u=t(0),n=t(50),a=t(481),h=t(150),r=t(200),o=t(74),c=t(79),l=t(12),f=new u({initialize:function(){this.lights=[],this.ambientColor=new r(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(p,g,m,x,y,T){return this.systems.displayList.add(new h(this.scene,p,g,m,x,y,T))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(p){for(var g=this.lights,m=p.worldView,x=[],y=0;y<g.length;y++){var T=g[y];T.willRender(p)&&s(T,m)&&x.push({light:T,distance:n(T.x,T.y,m.centerX,m.centerY)})}return x.length>this.maxLights&&(c(x,this.sortByDistance),x=x.slice(0,this.maxLights)),this.visibleLights=x.length,x},sortByDistance:function(p,g){return p.distance>=g.distance},setAmbientColor:function(p){var g=l.getFloatsFromUintRGB(p);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=16777215),y===void 0&&(y=1);var T=l.getFloatsFromUintRGB(x),S=new a(p,g,m,T[0],T[1],T[2],y);return this.lights.push(S),S},removeLight:function(p){var g=this.lights.indexOf(p);return g>=0&&o(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});e.exports=f},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56),u=t(17),n={Circle:t(1191),Ellipse:t(1201),Intersects:t(484),Line:t(1221),Mesh:t(1243),Point:t(1246),Polygon:t(1260),Rectangle:t(502),Triangle:t(1293)};n=u(!1,n,s),e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CircleToCircle:t(231),CircleToRectangle:t(151),GetCircleToCircle:t(1211),GetCircleToRectangle:t(1212),GetLineToCircle:t(232),GetLineToLine:t(485),GetLineToPoints:t(486),GetLineToPolygon:t(487),GetLineToRectangle:t(234),GetRaysFromPointToPolygon:t(1213),GetRectangleIntersection:t(1214),GetRectangleToRectangle:t(1215),GetRectangleToTriangle:t(1216),GetTriangleToCircle:t(1217),GetTriangleToLine:t(492),GetTriangleToTriangle:t(1218),LineToCircle:t(233),LineToLine:t(96),LineToRectangle:t(488),PointToLine:t(496),PointToLineSegment:t(1219),RectangleToRectangle:t(152),RectangleToTriangle:t(489),RectangleToValues:t(1220),TriangleToCircle:t(491),TriangleToLine:t(493),TriangleToTriangle:t(494)}},function(e,d,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39),u=function(n,a,h){var r=n.x1,o=n.y1,c=n.x2,l=n.y2,f=a.x1,p=a.y1,g=a.x2,m=a.y2,x=c-r,y=l-o,T=g-f,S=m-p,C=S*x-T*y;if(x===0||C===0)return!1;var E=(x*(p-o)+y*(r-f))/(T*y-S*x),P=(f+T*E-r)/x;return P<0||E<0||E>1?null:(h===void 0&&(h=new s),h.set(r+x*P,o+y*P,P))};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39),u=t(485),n=t(47),a=new n,h=new s,r=function(o,c,l){l===void 0&&(l=new s);var f=!1;l.set(),h.set();for(var p=c[0],g=1;g<c.length;g++){var m=c[g];a.setTo(p.x,p.y,m.x,m.y),p=m,u(o,a,h)&&(!f||h.z<l.z)&&(l.copy(h),f=!0)}return f?l:null};e.exports=r},function(e,d,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39),u=t(140),n=t(486),a=new s,h=function(r,o,c){c===void 0&&(c=new u),Array.isArray(o)||(o=[o]);var l=!1;c.set(),a.set();for(var f=0;f<o.length;f++)n(r,o[f].points,a)&&(!l||a.z<c.z)&&(c.set(a.x,a.y,a.z,f),l=!0);return l?c:null};e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x1,a=s.y1,h=s.x2,r=s.y2,o=u.x,c=u.y,l=u.right,f=u.bottom,p=0;if(n>=o&&n<=l&&a>=c&&a<=f||h>=o&&h<=l&&r>=c&&r<=f)return!0;if(n<o&&h>=o){if(p=a+(r-a)*(o-n)/(h-n),p>c&&p<=f)return!0}else if(n>l&&h<=l&&(p=a+(r-a)*(l-n)/(h-n),p>=c&&p<=f))return!0;if(a<c&&r>=c){if(p=n+(h-n)*(c-a)/(r-a),p>=o&&p<=l)return!0}else if(a>f&&r<=f&&(p=n+(h-n)*(f-a)/(r-a),p>=o&&p<=l))return!0;return!1};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(96),u=t(57),n=t(235),a=t(490),h=function(r,o){if(o.left>r.right||o.right<r.left||o.top>r.bottom||o.bottom<r.top)return!1;var c=o.getLineA(),l=o.getLineB(),f=o.getLineC();if(u(r,c.x1,c.y1)||u(r,c.x2,c.y2)||u(r,l.x1,l.y1)||u(r,l.x2,l.y2)||u(r,f.x1,f.y1)||u(r,f.x2,f.y2))return!0;var p=r.getLineA(),g=r.getLineB(),m=r.getLineC(),x=r.getLineD();if(s(c,p)||s(c,g)||s(c,m)||s(c,x)||s(l,p)||s(l,g)||s(l,m)||s(l,x)||s(f,p)||s(f,g)||s(f,m)||s(f,x))return!0;var y=a(r),T=n(o,y,!0);return T.length>0};e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=[]),u.push({x:s.x,y:s.y}),u.push({x:s.right,y:s.y}),u.push({x:s.right,y:s.bottom}),u.push({x:s.x,y:s.bottom}),u};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(233),u=t(115),n=function(a,h){return a.left>h.right||a.right<h.left||a.top>h.bottom||a.bottom<h.top?!1:!!(u(a,h.x,h.y)||s(a.getLineA(),h)||s(a.getLineB(),h)||s(a.getLineC(),h))};e.exports=n},function(e,d,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(493),n=t(96),a=function(h,r,o){if(o===void 0&&(o=[]),u(h,r))for(var c=h.getLineA(),l=h.getLineB(),f=h.getLineC(),p=[new s,new s,new s],g=[n(c,r,p[0]),n(l,r,p[1]),n(f,r,p[2])],m=0;m<3;m++)g[m]&&o.push(p[m]);return o};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(96),u=function(n,a){return!!(n.contains(a.x1,a.y1)||n.contains(a.x2,a.y2)||s(n.getLineA(),a)||s(n.getLineB(),a)||s(n.getLineC(),a))};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(235),u=t(495),n=t(96),a=function(h,r){if(h.left>r.right||h.right<r.left||h.top>r.bottom||h.bottom<r.top)return!1;var o=h.getLineA(),c=h.getLineB(),l=h.getLineC(),f=r.getLineA(),p=r.getLineB(),g=r.getLineC();if(n(o,f)||n(o,p)||n(o,g)||n(c,f)||n(c,p)||n(c,g)||n(l,f)||n(l,p)||n(l,g))return!0;var m=u(h),x=s(r,m,!0);return x.length>0||(m=u(r),x=s(h,m,!0),x.length>0)};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=[]),u.push({x:s.x1,y:s.y1}),u.push({x:s.x2,y:s.y2}),u.push({x:s.x3,y:s.y3}),u};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){n===void 0&&(n=1);var a=u.x1,h=u.y1,r=u.x2,o=u.y2,c=s.x,l=s.y,f=(r-a)*(r-a)+(o-h)*(o-h);if(f===0)return!1;var p=((c-a)*(r-a)+(l-h)*(o-h))/f;if(p<0)return Math.sqrt((a-c)*(a-c)+(h-l)*(h-l))<=n;if(p>=0&&p<=1){var g=((h-l)*(r-a)-(a-c)*(o-h))/f;return Math.abs(g)*Math.sqrt(f)<=n}else return Math.sqrt((r-c)*(r-c)+(o-l)*(o-l))<=n};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(68),n=t(97),a=function(h){var r=n(h)-s.TAU;return u(r,-Math.PI,Math.PI)};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=!0,s="untitled",u="",n="";function a(y){var T=y.indexOf("#");return T>-1?y.substring(0,T):y}function h(y){return y.models.length===0&&y.models.push({faces:[],name:s,textureCoords:[],vertexNormals:[],vertices:[]}),u="",y.models[y.models.length-1]}function r(y,T){var S=y.length>=2?y[1]:s;T.models.push({faces:[],name:S,textureCoords:[],vertexNormals:[],vertices:[]}),u=""}function o(y){y.length===2&&(u=y[1])}function c(y,T){var S=y.length,C=S>=2?parseFloat(y[1]):0,E=S>=3?parseFloat(y[2]):0,P=S>=4?parseFloat(y[3]):0;h(T).vertices.push({x:C,y:E,z:P})}function l(y,T){var S=y.length,C=S>=2?parseFloat(y[1]):0,E=S>=3?parseFloat(y[2]):0,P=S>=4?parseFloat(y[3]):0;isNaN(C)&&(C=0),isNaN(E)&&(E=0),isNaN(P)&&(P=0),t&&(E=1-E),h(T).textureCoords.push({u:C,v:E,w:P})}function f(y,T){var S=y.length,C=S>=2?parseFloat(y[1]):0,E=S>=3?parseFloat(y[2]):0,P=S>=4?parseFloat(y[3]):0;h(T).vertexNormals.push({x:C,y:E,z:P})}function p(y,T){var S=y.length-1;if(!(S<3)){for(var C={group:u,material:n,vertices:[]},E=0;E<S;E++){var P=y[E+1],M=P.split("/"),O=M.length;if(!(O<1||O>3)){var A=0,R=0,F=0;A=parseInt(M[0],10),O>1&&M[1]!==""&&(R=parseInt(M[1],10)),O>2&&(F=parseInt(M[2],10)),A!==0&&(A<0&&(A=h(T).vertices.length+1+A),R-=1,A-=1,F-=1,C.vertices.push({textureCoordsIndex:R,vertexIndex:A,vertexNormalIndex:F}))}}h(T).faces.push(C)}}function g(y,T){y.length>=2&&T.materialLibraries.push(y[1])}function m(y){y.length>=2&&(n=y[1])}var x=function(y,T){T===void 0&&(T=!0),t=T;var S={materials:{},materialLibraries:[],models:[]};u="",n="";for(var C=y.split(`
`),E=0;E<C.length;E++){var P=a(C[E]),M=P.replace(/\s\s+/g," ").trim().split(" ");switch(M[0].toLowerCase()){case"o":r(M,S);break;case"g":o(M);break;case"v":c(M,S);break;case"vt":l(M,S);break;case"vn":f(M,S);break;case"f":p(M,S);break;case"mtllib":g(M,S);break;case"usemtl":m(M);break}}return S};e.exports=x},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(103),u=function(n){for(var a={},h=n.split(`
`),r="",o=0;o<h.length;o++){var c=h[o].trim();if(!(c.indexOf("#")===0||c==="")){var l=c.replace(/\s\s+/g," ").trim().split(" ");switch(l[0].toLowerCase()){case"newmtl":{r=l[1];break}case"kd":{var f=Math.floor(l[1]*255),p=l.length>=2?Math.floor(l[2]*255):f,g=l.length>=3?Math.floor(l[3]*255):f;a[r]=s(f,p,g);break}}}}return a};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x*s.x+s.y*s.y};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10);s.Area=t(1267),s.Ceil=t(1268),s.CeilAll=t(1269),s.CenterOn=t(190),s.Clone=t(1270),s.Contains=t(57),s.ContainsPoint=t(1271),s.ContainsRect=t(503),s.CopyFrom=t(1272),s.Decompose=t(490),s.Equals=t(1273),s.FitInside=t(1274),s.FitOutside=t(1275),s.Floor=t(1276),s.FloorAll=t(1277),s.FromPoints=t(199),s.FromXY=t(1278),s.GetAspectRatio=t(237),s.GetCenter=t(1279),s.GetPoint=t(171),s.GetPoints=t(306),s.GetSize=t(1280),s.Inflate=t(1281),s.Intersection=t(1282),s.MarchingAnts=t(316),s.MergePoints=t(1283),s.MergeRect=t(1284),s.MergeXY=t(1285),s.Offset=t(1286),s.OffsetPoint=t(1287),s.Overlaps=t(1288),s.Perimeter=t(130),s.PerimeterPoint=t(1289),s.Random=t(174),s.RandomOutside=t(1290),s.SameDimensions=t(1291),s.Scale=t(1292),s.Union=t(441),e.exports=s},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.width*u.height>s.width*s.height?!1:u.x>s.x&&u.x<s.right&&u.right>s.x&&u.right<s.right&&u.y>s.y&&u.y<s.bottom&&u.bottom>s.y&&u.bottom<s.bottom};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){return a===void 0&&(a=new s),a.x=(n.x1+n.x2+n.x3)/3,a.y=(n.y1+n.y2+n.y3)/3,a};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x1+=u,s.y1+=n,s.x2+=u,s.y2+=n,s.x3+=u,s.y3+=n,s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4);function u(a,h,r,o){var c=a-r,l=h-o,f=c*c+l*l;return Math.sqrt(f)}var n=function(a,h){h===void 0&&(h=new s);var r=a.x1,o=a.y1,c=a.x2,l=a.y2,f=a.x3,p=a.y3,g=u(f,p,c,l),m=u(r,o,f,p),x=u(c,l,r,o),y=g+m+x;return h.x=(r*g+c*m+f*x)/y,h.y=(o*g+l*m+p*x)/y,h};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return function(n,a,h,r){var o=s.getPixelAlpha(a,h,r.texture.key,r.frame.name);return o&&o>=u}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return{gameObject:s,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:u,hitAreaCallback:n,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,h){this.pad=a,this.events=a.events,this.index=h,this.value=0,this.threshold=.1},update:function(n){this.value=n},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(239),n=new s({initialize:function(h,r){this.pad=h,this.events=h.manager,this.index=r,this.value=0,this.threshold=1,this.pressed=!1},update:function(a){this.value=a;var h=this.pad,r=this.index;a>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(u.BUTTON_DOWN,h,this,a),this.pad.emit(u.GAMEPAD_BUTTON_DOWN,r,a,this)):this.pressed&&(this.pressed=!1,this.events.emit(u.BUTTON_UP,h,this,a),this.pad.emit(u.GAMEPAD_BUTTON_UP,r,a,this))},destroy:function(){this.pad=null,this.events=null}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(509),u=t(510),n=t(0),a=t(9),h=t(3),r=new n({Extends:a,initialize:function(c,l){a.call(this),this.manager=c,this.pad=l,this.id=l.id,this.index=l.index;for(var f=[],p=0;p<l.buttons.length;p++)f.push(new u(this,p));this.buttons=f;var g=[];for(p=0;p<l.axes.length;p++)g.push(new s(this,p));this.axes=g,this.vibration=l.vibrationActuator;var m={value:0,pressed:!1};this._LCLeft=f[14]?f[14]:m,this._LCRight=f[15]?f[15]:m,this._LCTop=f[12]?f[12]:m,this._LCBottom=f[13]?f[13]:m,this._RCLeft=f[2]?f[2]:m,this._RCRight=f[1]?f[1]:m,this._RCTop=f[3]?f[3]:m,this._RCBottom=f[0]?f[0]:m,this._FBLeftTop=f[4]?f[4]:m,this._FBLeftBottom=f[6]?f[6]:m,this._FBRightTop=f[5]?f[5]:m,this._FBRightBottom=f[7]?f[7]:m;var x={value:0};this._HAxisLeft=g[0]?g[0]:x,this._VAxisLeft=g[1]?g[1]:x,this._HAxisRight=g[2]?g[2]:x,this._VAxisRight=g[3]?g[3]:x,this.leftStick=new h,this.rightStick=new h,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(o){return this.axes[o].getValue()},setAxisThreshold:function(o){for(var c=0;c<this.axes.length;c++)this.axes[c].threshold=o},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(o){return this.buttons[o].value},isButtonDown:function(o){return this.buttons[o].pressed},update:function(o){if(!(o.timestamp<this._created)){var c,l=this.buttons,f=o.buttons,p=l.length;for(c=0;c<p;c++)l[c].update(f[c].value);var g=this.axes,m=o.axes;for(p=g.length,c=0;c<p;c++)g[c].update(m[c]);p>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),p>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var o;for(o=0;o<this.buttons.length;o++)this.buttons[o].destroy();for(o=0;o<this.axes.length;o++)this.axes[o].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(154),a=new s({Extends:u,initialize:function(r,o){u.call(this),this.plugin=r,this.keyCode=o,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(h){return this.emitOnRepeat=h,this},onDown:function(h){this.originalEvent=h,this.enabled&&(this.altKey=h.altKey,this.ctrlKey=h.ctrlKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.location=h.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(n.DOWN,this,h):(this.isDown=!0,this.isUp=!1,this.timeDown=h.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(n.DOWN,this,h)))},onUp:function(h){this.originalEvent=h,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=h.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(n.UP,this,h))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(154),n=t(2),a=t(514),h=t(516),r=new s({initialize:function(c,l,f){if(f===void 0&&(f={}),l.length<2)return!1;this.manager=c,this.enabled=!0,this.keyCodes=[];for(var p=0;p<l.length;p++){var g=l[p];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=n(f,"resetOnWrongKey",!0),this.maxKeyDelay=n(f,"maxKeyDelay",0),this.resetOnMatch=n(f,"resetOnMatch",!1),this.deleteOnMatch=n(f,"deleteOnMatch",!1);var m=this,x=function(y){if(!(m.matched||!m.enabled)){var T=a(y,m);T&&(m.manager.emit(u.COMBO_MATCH,m,y),m.resetOnMatch?h(m):m.deleteOnMatch&&m.destroy())}};this.onKeyDown=x,this.manager.on(u.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(u.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(515),u=function(n,a){if(a.matched)return!0;var h=!1,r=!1;if(n.keyCode===a.current)if(a.index>0&&a.maxKeyDelay>0){var o=a.timeLastMatched+a.maxKeyDelay;n.timeStamp<=o&&(r=!0,h=s(n,a))}else r=!0,h=s(n,a);return!r&&a.resetOnWrongKey&&(a.index=0,a.current=a.keyCodes[0]),h&&(a.timeLastMatched=n.timeStamp,a.matched=!0,a.timeMatched=n.timeStamp),h};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.timeLastMatched=s.timeStamp,u.index++,u.index===u.size?!0:(u.current=u.keyCodes[u.index],!1)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.current=s.keyCodes[0],s.index=0,s.timeLastMatched=0,s.matched=!1,s.timeMatched=0,s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(240),u=function(n,a){var h=s(a,n.xhrSettings),r=new XMLHttpRequest;if(r.open("GET",n.src,h.async,h.user,h.password),r.responseType=n.xhrSettings.responseType,r.timeout=h.timeout,h.headers)for(var o in h.headers)r.setRequestHeader(o,h.headers[o]);return h.header&&h.headerValue&&r.setRequestHeader(h.header,h.headerValue),h.requestedWith&&r.setRequestHeader("X-Requested-With",h.requestedWith),h.overrideMimeType&&r.overrideMimeType(h.overrideMimeType),h.withCredentials&&(r.withCredentials=!0),r.onload=n.onLoad.bind(n,r),r.onerror=n.onError.bind(n,r),r.onprogress=n.onProgress.bind(n),r.send(),r};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(519),o=t(7),c=new s({Extends:n,initialize:function(f,p,g,m,x){if(o(p)){var y=p;p=h(y,"key"),m=h(y,"xhrSettings"),x=h(y,"context",x)}var T={type:"audio",cache:f.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:p,url:g.url,xhrSettings:m,config:{context:x}};n.call(this,f,T)},onProcess:function(){this.state=u.FILE_PROCESSING;var l=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(f){l.data=f,l.onProcessComplete()},function(f){console.error("Error decoding audio: "+l.key+" - ",f?f.message:null),l.onProcessError()}),this.config.context=null}});c.create=function(l,f,p,g,m){var x=l.systems.game,y=x.config.audio,T=x.device.audio;o(f)&&(p=h(f,"url",[]),g=h(f,"config",{}));var S=c.getAudioURL(x,p);return S?T.webAudio&&!y.disableWebAudio?new c(l,f,S,m,x.sound.context):new r(l,f,S,g):null},c.getAudioURL=function(l,f){Array.isArray(f)||(f=[f]);for(var p=0;p<f.length;p++){var g=h(f[p],"url",f[p]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var m=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(m=h(f[p],"type",m?m[1]:"").toLowerCase(),l.device.audio[m])return{url:g,type:m}}return null},a.register("audio",function(l,f,p,g){var m=this.systems.game,x=m.config.audio,y=m.device.audio;if(x.noAudio||!y.webAudio&&!y.audioData)return this;var T;if(Array.isArray(l))for(var S=0;S<l.length;S++)T=c.create(this,l[S]),T&&this.addFile(T);else T=c.create(this,l,f,p,g),T&&this.addFile(T);return this}),e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(95),n=t(23),a=t(2),h=t(155),r=t(7),o=new s({Extends:n,initialize:function(l,f,p,g){if(r(f)){var m=f;f=a(m,"key"),g=a(m,"config",g)}var x={type:"audio",cache:l.cacheManager.audio,extension:p.type,key:f,url:p.url,config:g};n.call(this,l,x),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var c=0;c<this.data.length;c++){var l=this.data[c];l.oncanplaythrough=null,l.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(c){var l=c.target;l.oncanplaythrough=null,l.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var c=this.config&&this.config.instances||1;this.filesTotal=c,this.filesLoaded=0,this.percentComplete=0;for(var l=0;l<c;l++){var f=new Audio;f.dataset||(f.dataset={}),f.dataset.name=this.key+("0"+l).slice(-2),f.dataset.used="false",this.locked?f.dataset.locked="true":(f.dataset.locked="false",f.preload="auto",f.oncanplaythrough=this.onProgress.bind(this),f.onerror=this.onError.bind(this)),this.data.push(f)}for(l=0;l<this.data.length;l++)f=this.data[l],f.src=h(this,this.loader.baseURL),this.locked||f.load();this.locked&&setTimeout(this.onLoad.bind(this))}});e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=new s({Extends:n,initialize:function(l,f,p,g){var m="js";if(r(f)){var x=f;f=h(x,"key"),p=h(x,"url"),g=h(x,"xhrSettings"),m=h(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:f,url:p,xhrSettings:g};n.call(this,l,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("script",function(c,l,f){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new o(this,c[p]));else this.addFile(new o(this,c,l,f));return this}),e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(522),u=t(157),n=t(0),a=t(62),h=t(524),r=t(525),o=new n({initialize:function(l){this.world=l,this.scene=l.scene,this.sys=l.scene.sys},collider:function(c,l,f,p,g){return this.world.addCollider(c,l,f,p,g)},overlap:function(c,l,f,p,g){return this.world.addOverlap(c,l,f,p,g)},existing:function(c,l){var f=l?a.STATIC_BODY:a.DYNAMIC_BODY;return this.world.enableBody(c,f),c},staticImage:function(c,l,f,p){var g=new s(this.scene,c,l,f,p);return this.sys.displayList.add(g),this.world.enableBody(g,a.STATIC_BODY),g},image:function(c,l,f,p){var g=new s(this.scene,c,l,f,p);return this.sys.displayList.add(g),this.world.enableBody(g,a.DYNAMIC_BODY),g},staticSprite:function(c,l,f,p){var g=new u(this.scene,c,l,f,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,a.STATIC_BODY),g},sprite:function(c,l,f,p){var g=new u(this.scene,c,l,f,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,a.DYNAMIC_BODY),g},staticGroup:function(c,l){return this.sys.updateList.add(new r(this.world,this.world.scene,c,l))},group:function(c,l){return this.sys.updateList.add(new h(this.world,this.world.scene,c,l))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(243),n=t(125),a=new s({Extends:n,Mixins:[u.Acceleration,u.Angular,u.Bounce,u.Debug,u.Drag,u.Enable,u.Friction,u.Gravity,u.Immovable,u.Mass,u.Pushable,u.Size,u.Velocity],initialize:function(r,o,c,l,f){n.call(this,r,o,c,l,f),this.body=null}});e.exports=a},function(e,d,t){var s=t(244),u=t(65),n=t(231),a=t(151),h=function(r,o,c,l,f,p){var g=s(r,o-l,c-l,2*l,2*l,f,p);if(g.length===0)return g;for(var m=new u(o,c,l),x=new u,y=[],T=0;T<g.length;T++){var S=g[T];S.isCircle?(x.setTo(S.center.x,S.center.y,S.halfWidth),n(m,x)&&y.push(S)):a(m,S)&&y.push(S)}return y};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(157),u=t(0),n=t(62),a=t(2),h=t(113),r=t(7),o=new u({Extends:h,initialize:function(l,f,p,g){if(!p&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(r(p))g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(p)&&r(p[0])){g=p[0];var m=this;p.forEach(function(x){x.internalCreateCallback=m.createCallbackHandler,x.internalRemoveCallback=m.removeCallbackHandler}),p=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=l,g.classType=a(g,"classType",s),this.physicsType=n.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:a(g,"collideWorldBounds",!1),setBoundsRectangle:a(g,"customBoundsRectangle",null),setAccelerationX:a(g,"accelerationX",0),setAccelerationY:a(g,"accelerationY",0),setAllowDrag:a(g,"allowDrag",!0),setAllowGravity:a(g,"allowGravity",!0),setAllowRotation:a(g,"allowRotation",!0),setBounceX:a(g,"bounceX",0),setBounceY:a(g,"bounceY",0),setDragX:a(g,"dragX",0),setDragY:a(g,"dragY",0),setEnable:a(g,"enable",!0),setGravityX:a(g,"gravityX",0),setGravityY:a(g,"gravityY",0),setFrictionX:a(g,"frictionX",0),setFrictionY:a(g,"frictionY",0),setMaxVelocityX:a(g,"maxVelocityX",1e4),setMaxVelocityY:a(g,"maxVelocityY",1e4),setVelocityX:a(g,"velocityX",0),setVelocityY:a(g,"velocityY",0),setAngularVelocity:a(g,"angularVelocity",0),setAngularAcceleration:a(g,"angularAcceleration",0),setAngularDrag:a(g,"angularDrag",0),setMass:a(g,"mass",1),setImmovable:a(g,"immovable",!1)},h.call(this,f,p,g),this.type="PhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,n.DYNAMIC_BODY);var l=c.body;for(var f in this.defaults)l[f](this.defaults[f])},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},setVelocity:function(c,l,f){f===void 0&&(f=0);for(var p=this.getChildren(),g=0;g<p.length;g++)p[g].body.velocity.set(c+g*f,l+g*f);return this},setVelocityX:function(c,l){l===void 0&&(l=0);for(var f=this.getChildren(),p=0;p<f.length;p++)f[p].body.velocity.x=c+p*l;return this},setVelocityY:function(c,l){l===void 0&&(l=0);for(var f=this.getChildren(),p=0;p<f.length;p++)f[p].body.velocity.y=c+p*l;return this}});e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(157),u=t(0),n=t(62),a=t(2),h=t(113),r=t(7),o=new u({Extends:h,initialize:function(l,f,p,g){!p&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:s}:r(p)?(g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=a(g,"classType",s)):Array.isArray(p)&&r(p[0])?(g=p,p=null,g.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=a(m,"classType",s)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=l,this.physicsType=n.STATIC_BODY,h.call(this,f,p,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,n.STATIC_BODY)},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var c=this.children.entries,l=0;l<c.length;l++)c[l].body.reset();return this}});e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(350),u=t(527),n=t(18),a=t(0),h=t(528),r=t(62),o=t(50),c=t(9),l=t(245),f=t(124),p=t(354),g=t(355),m=t(246),x=t(247),y=t(529),T=t(6),S=t(14),C=t(211),E=t(530),P=t(10),M=t(531),O=t(532),A=t(537),R=t(538),F=t(149),I=t(539),B=t(248),N=t(25),Y=t(3),X=t(68),W=new a({Extends:c,initialize:function(L,D){c.call(this),this.scene=L,this.bodies=new F,this.staticBodies=new F,this.pendingDestroy=new F,this.colliders=new C,this.gravity=new Y(T(D,"gravity.x",0),T(D,"gravity.y",0)),this.bounds=new P(T(D,"x",0),T(D,"y",0),T(D,"width",L.sys.scale.width),T(D,"height",L.sys.scale.height)),this.checkCollision={up:T(D,"checkCollision.up",!0),down:T(D,"checkCollision.down",!0),left:T(D,"checkCollision.left",!0),right:T(D,"checkCollision.right",!0)},this.fps=T(D,"fps",60),this.fixedStep=T(D,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(D,"timeScale",1),this.OVERLAP_BIAS=T(D,"overlapBias",4),this.TILE_BIAS=T(D,"tileBias",16),this.forceX=T(D,"forceX",!1),this.isPaused=T(D,"isPaused",!1),this._total=0,this.drawDebug=T(D,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(D,"debugShowBody",!0),debugShowStaticBody:T(D,"debugShowStaticBody",!0),debugShowVelocity:T(D,"debugShowVelocity",!0),bodyDebugColor:T(D,"debugBodyColor",16711935),staticBodyDebugColor:T(D,"debugStaticBodyColor",255),velocityDebugColor:T(D,"debugVelocityColor",65280)},this.maxEntries=T(D,"maxEntries",16),this.useTree=T(D,"useTree",!0),this.tree=new M(this.maxEntries),this.staticTree=new M(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new N,this._tempMatrix2=new N,this.drawDebug&&this.createDebugGraphic()},enable:function(w,L){L===void 0&&(L=r.DYNAMIC_BODY),Array.isArray(w)||(w=[w]);for(var D=0;D<w.length;D++){var b=w[D];if(b.isParent)for(var G=b.getChildren(),z=0;z<G.length;z++){var U=G[z];U.isParent?this.enable(U,L):this.enableBody(U,L)}else this.enableBody(b,L)}},enableBody:function(w,L){return L===void 0&&(L=r.DYNAMIC_BODY),w.body||(L===r.DYNAMIC_BODY?w.body=new u(this,w):L===r.STATIC_BODY&&(w.body=new I(this,w))),this.add(w.body),w},add:function(w){return w.physicsType===r.DYNAMIC_BODY?this.bodies.set(w):w.physicsType===r.STATIC_BODY&&(this.staticBodies.set(w),this.staticTree.insert(w)),w.enable=!0,w},disable:function(w){Array.isArray(w)||(w=[w]);for(var L=0;L<w.length;L++){var D=w[L];if(D.isParent)for(var b=D.getChildren(),G=0;G<b.length;G++){var z=b[G];z.isParent?this.disable(z):this.disableBody(z.body)}else this.disableBody(D.body)}},disableBody:function(w){this.remove(w),w.enable=!1},remove:function(w){w.physicsType===r.DYNAMIC_BODY?(this.tree.remove(w),this.bodies.delete(w)):w.physicsType===r.STATIC_BODY&&(this.staticBodies.delete(w),this.staticTree.remove(w))},createDebugGraphic:function(){var w=this.scene.sys.add.graphics({x:0,y:0});return w.setDepth(Number.MAX_VALUE),this.debugGraphic=w,this.drawDebug=!0,w},setBounds:function(w,L,D,b,G,z,U,H){return this.bounds.setTo(w,L,D,b),G!==void 0&&this.setBoundsCollision(G,z,U,H),this},setBoundsCollision:function(w,L,D,b){return w===void 0&&(w=!0),L===void 0&&(L=!0),D===void 0&&(D=!0),b===void 0&&(b=!0),this.checkCollision.left=w,this.checkCollision.right=L,this.checkCollision.up=D,this.checkCollision.down=b,this},pause:function(){return this.isPaused=!0,this.emit(l.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(l.RESUME),this},addCollider:function(w,L,D,b,G){D===void 0&&(D=null),b===void 0&&(b=null),G===void 0&&(G=D);var z=new h(this,!1,w,L,D,b,G);return this.colliders.add(z),z},addOverlap:function(w,L,D,b,G){D===void 0&&(D=null),b===void 0&&(b=null),G===void 0&&(G=D);var z=new h(this,!0,w,L,D,b,G);return this.colliders.add(z),z},removeCollider:function(w){return this.colliders.remove(w),this},setFPS:function(w){return this.fps=w,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(w,L){if(!(this.isPaused||this.bodies.size===0)){var D,b=this._frameTime,G=this._frameTimeMS*this.timeScale;this._elapsed+=L;var z,U=this.bodies.entries,H=this._elapsed>=G;for(this.fixedStep||(b=L*.001,H=!0,this._elapsed=0),D=0;D<U.length;D++)z=U[D],z.enable&&z.preUpdate(H,b);if(H){this._elapsed-=G,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(U));var $=this.colliders.update();for(D=0;D<$.length;D++){var K=$[D];K.active&&K.update()}this.emit(l.WORLD_STEP,b)}for(;this._elapsed>=G;)this._elapsed-=G,this.step(b)}},step:function(w){var L,D,b=this.bodies.entries,G=b.length;for(L=0;L<G;L++)D=b[L],D.enable&&D.update(w);this.useTree&&(this.tree.clear(),this.tree.load(b));var z=this.colliders.update();for(L=0;L<z.length;L++){var U=z[L];U.active&&U.update()}this.emit(l.WORLD_STEP,w),this.stepsLastFrame++},postUpdate:function(){var w,L,D=this.bodies.entries,b=D.length,G=this.bodies,z=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,w=0;w<b;w++)L=D[w],L.enable&&L.postUpdate();if(this.drawDebug){var U=this.debugGraphic;for(U.clear(),w=0;w<b;w++)L=D[w],L.willDrawDebug()&&L.drawDebug(U);for(D=z.entries,b=D.length,w=0;w<b;w++)L=D[w],L.willDrawDebug()&&L.drawDebug(U)}var H=this.pendingDestroy;if(H.size>0){var $=this.tree,K=this.staticTree;for(D=H.entries,b=D.length,w=0;w<b;w++)L=D[w],L.physicsType===r.DYNAMIC_BODY?($.remove(L),G.delete(L)):L.physicsType===r.STATIC_BODY&&(K.remove(L),z.delete(L)),L.world=void 0,L.gameObject=void 0;H.clear()}},updateMotion:function(w,L){w.allowRotation&&this.computeAngularVelocity(w,L),this.computeVelocity(w,L)},computeAngularVelocity:function(w,L){var D=w.angularVelocity,b=w.angularAcceleration,G=w.angularDrag,z=w.maxAngular;b?D+=b*L:w.allowDrag&&G&&(G*=L,p(D-G,0,.1)?D-=G:g(D+G,0,.1)?D+=G:D=0),D=n(D,-z,z);var U=D-w.angularVelocity;w.angularVelocity+=U,w.rotation+=w.angularVelocity*L},computeVelocity:function(w,L){var D=w.velocity.x,b=w.acceleration.x,G=w.drag.x,z=w.maxVelocity.x,U=w.velocity.y,H=w.acceleration.y,$=w.drag.y,K=w.maxVelocity.y,Z=w.speed,k=w.maxSpeed,J=w.allowDrag,q=w.useDamping;w.allowGravity&&(D+=(this.gravity.x+w.gravity.x)*L,U+=(this.gravity.y+w.gravity.y)*L),b?D+=b*L:J&&G&&(q?(G=Math.pow(G,L),D*=G,Z=Math.sqrt(D*D+U*U),f(Z,0,.001)&&(D=0)):(G*=L,p(D-G,0,.01)?D-=G:g(D+G,0,.01)?D+=G:D=0)),H?U+=H*L:J&&$&&(q?($=Math.pow($,L),U*=$,Z=Math.sqrt(D*D+U*U),f(Z,0,.001)&&(U=0)):($*=L,p(U-$,0,.01)?U-=$:g(U+$,0,.01)?U+=$:U=0)),D=n(D,-z,z),U=n(U,-K,K),w.velocity.set(D,U),k>-1&&Z>k&&(w.velocity.normalize().scale(k),Z=k),w.speed=Z},separate:function(w,L,D,b,G,z){if(!z&&!w.enable||!L.enable||w.checkCollision.none||L.checkCollision.none||!this.intersects(w,L)||D&&D.call(b,w.gameObject,L.gameObject)===!1)return!1;if(w.isCircle&&L.isCircle)return this.separateCircle(w,L,G);if(w.isCircle!==L.isCircle){var U=w.isCircle?L:w,H=w.isCircle?w:L,$={x:U.x,y:U.y,right:U.right,bottom:U.bottom},K=H.center;if((K.y<$.y||K.y>$.bottom)&&(K.x<$.x||K.x>$.right))return this.separateCircle(w,L,G)}var Z=!1,k=!1;G?(Z=A(w,L,G,this.OVERLAP_BIAS),k=R(w,L,G,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+w.gravity.y)<Math.abs(this.gravity.x+w.gravity.x)?(Z=A(w,L,G,this.OVERLAP_BIAS),this.intersects(w,L)&&(k=R(w,L,G,this.OVERLAP_BIAS))):(k=R(w,L,G,this.OVERLAP_BIAS),this.intersects(w,L)&&(Z=A(w,L,G,this.OVERLAP_BIAS)));var J=Z||k;return J&&(G?(w.onOverlap||L.onOverlap)&&this.emit(l.OVERLAP,w.gameObject,L.gameObject,w,L):(w.onCollide||L.onCollide)&&this.emit(l.COLLIDE,w.gameObject,L.gameObject,w,L)),J},separateCircle:function(w,L,D,b){m(w,L,!1,b),x(w,L,!1,b);var G=0;if(w.isCircle!==L.isCircle){var z={x:L.isCircle?w.position.x:L.position.x,y:L.isCircle?w.position.y:L.position.y,right:L.isCircle?w.right:L.right,bottom:L.isCircle?w.bottom:L.bottom},U={x:w.isCircle?w.center.x:L.center.x,y:w.isCircle?w.center.y:L.center.y,radius:w.isCircle?w.halfWidth:L.halfWidth};U.y<z.y?U.x<z.x?G=o(U.x,U.y,z.x,z.y)-U.radius:U.x>z.right&&(G=o(U.x,U.y,z.right,z.y)-U.radius):U.y>z.bottom&&(U.x<z.x?G=o(U.x,U.y,z.x,z.bottom)-U.radius:U.x>z.right&&(G=o(U.x,U.y,z.right,z.bottom)-U.radius)),G*=-1}else G=w.halfWidth+L.halfWidth-o(w.center.x,w.center.y,L.center.x,L.center.y);if(w.overlapR=G,L.overlapR=G,D||G===0||w.immovable&&L.immovable||w.customSeparateX||L.customSeparateX)return G!==0&&(w.onOverlap||L.onOverlap)&&this.emit(l.OVERLAP,w.gameObject,L.gameObject,w,L),G!==0;var H=w.center.x-L.center.x,$=w.center.y-L.center.y,K=Math.sqrt(Math.pow(H,2)+Math.pow($,2)),Z=(L.center.x-w.center.x)/K||0,k=(L.center.y-w.center.y)/K||0,J=2*(w.velocity.x*Z+w.velocity.y*k-L.velocity.x*Z-L.velocity.y*k)/(w.mass+L.mass);(w.immovable||L.immovable)&&(J*=2),w.immovable||(w.velocity.x=w.velocity.x-J/w.mass*Z,w.velocity.y=w.velocity.y-J/w.mass*k),L.immovable||(L.velocity.x=L.velocity.x+J/L.mass*Z,L.velocity.y=L.velocity.y+J/L.mass*k),!w.immovable&&!L.immovable&&(G/=2);var q=s(w.center,L.center),Q=(G+S.EPSILON)*Math.cos(q),_=(G+S.EPSILON)*Math.sin(q);return w.immovable||(w.x-=Q,w.y-=_,w.updateCenter()),L.immovable||(L.x+=Q,L.y+=_,L.updateCenter()),w.velocity.x*=w.bounce.x,w.velocity.y*=w.bounce.y,L.velocity.x*=L.bounce.x,L.velocity.y*=L.bounce.y,(w.onCollide||L.onCollide)&&this.emit(l.COLLIDE,w.gameObject,L.gameObject,w,L),!0},intersects:function(w,L){return w===L?!1:!w.isCircle&&!L.isCircle?!(w.right<=L.position.x||w.bottom<=L.position.y||w.position.x>=L.right||w.position.y>=L.bottom):w.isCircle?L.isCircle?o(w.center.x,w.center.y,L.center.x,L.center.y)<=w.halfWidth+L.halfWidth:this.circleBodyIntersects(w,L):this.circleBodyIntersects(L,w)},circleBodyIntersects:function(w,L){var D=n(w.center.x,L.left,L.right),b=n(w.center.y,L.top,L.bottom),G=(w.center.x-D)*(w.center.x-D),z=(w.center.y-b)*(w.center.y-b);return G+z<=w.halfWidth*w.halfWidth},overlap:function(w,L,D,b,G){return D===void 0&&(D=null),b===void 0&&(b=null),G===void 0&&(G=D),this.collideObjects(w,L,D,b,G,!0)},collide:function(w,L,D,b,G){return D===void 0&&(D=null),b===void 0&&(b=null),G===void 0&&(G=D),this.collideObjects(w,L,D,b,G,!1)},collideObjects:function(w,L,D,b,G,z){var U,H;w.isParent&&w.physicsType===void 0&&(w=w.children.entries),L&&L.isParent&&L.physicsType===void 0&&(L=L.children.entries);var $=Array.isArray(w),K=Array.isArray(L);if(this._total=0,!$&&!K)this.collideHandler(w,L,D,b,G,z);else if(!$&&K)for(U=0;U<L.length;U++)this.collideHandler(w,L[U],D,b,G,z);else if($&&!K)if(L)for(U=0;U<w.length;U++)this.collideHandler(w[U],L,D,b,G,z);else for(U=0;U<w.length;U++){var Z=w[U];for(H=U+1;H<w.length;H++)U!==H&&this.collideHandler(Z,w[H],D,b,G,z)}else for(U=0;U<w.length;U++)for(H=0;H<L.length;H++)this.collideHandler(w[U],L[H],D,b,G,z);return this._total>0},collideHandler:function(w,L,D,b,G,z){if(L===void 0&&w.isParent)return this.collideGroupVsGroup(w,w,D,b,G,z);if(!w||!L)return!1;if(w.body){if(L.body)return this.collideSpriteVsSprite(w,L,D,b,G,z);if(L.isParent)return this.collideSpriteVsGroup(w,L,D,b,G,z);if(L.isTilemap)return this.collideSpriteVsTilemapLayer(w,L,D,b,G,z)}else if(w.isParent){if(L.body)return this.collideSpriteVsGroup(L,w,D,b,G,z);if(L.isParent)return this.collideGroupVsGroup(w,L,D,b,G,z);if(L.isTilemap)return this.collideGroupVsTilemapLayer(w,L,D,b,G,z)}else if(w.isTilemap){if(L.body)return this.collideSpriteVsTilemapLayer(L,w,D,b,G,z);if(L.isParent)return this.collideGroupVsTilemapLayer(L,w,D,b,G,z)}},collideSpriteVsSprite:function(w,L,D,b,G,z){return!w.body||!L.body?!1:(this.separate(w.body,L.body,b,G,z)&&(D&&D.call(G,w,L),this._total++),!0)},collideSpriteVsGroup:function(w,L,D,b,G,z){var U=w.body;if(!(L.length===0||!U||!U.enable||U.checkCollision.none)){var H,$,K;if(this.useTree||L.physicsType===r.STATIC_BODY){var Z=this.treeMinMax;Z.minX=U.left,Z.minY=U.top,Z.maxX=U.right,Z.maxY=U.bottom;var k=L.physicsType===r.DYNAMIC_BODY?this.tree.search(Z):this.staticTree.search(Z);for($=k.length,H=0;H<$;H++)K=k[H],!(U===K||!K.enable||K.checkCollision.none||!L.contains(K.gameObject))&&this.separate(U,K,b,G,z,!0)&&(D&&D.call(G,U.gameObject,K.gameObject),this._total++)}else{var J=L.getChildren(),q=L.children.entries.indexOf(w);for($=J.length,H=0;H<$;H++)K=J[H].body,!(!K||H===q||!K.enable)&&this.separate(U,K,b,G,z)&&(D&&D.call(G,U.gameObject,K.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(w,L,D,b,G,z){var U=w.getChildren();if(U.length===0)return!1;for(var H=!1,$=0;$<U.length;$++)U[$].body&&this.collideSpriteVsTilemapLayer(U[$],L,D,b,G,z)&&(H=!0);return H},collideTiles:function(w,L,D,b,G){return!w.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(w,L,D,b,G,!1,!1)},overlapTiles:function(w,L,D,b,G){return!w.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(w,L,D,b,G,!0,!1)},collideSpriteVsTilemapLayer:function(w,L,D,b,G,z){var U=w.body;if(!U.enable||U.checkCollision.none)return!1;var H=U.position.x,$=U.position.y,K=U.width,Z=U.height,k=L.layer;if(k.tileWidth>k.baseTileWidth){var J=(k.tileWidth-k.baseTileWidth)*L.scaleX;H-=J,K+=J}if(k.tileHeight>k.baseTileHeight){var q=(k.tileHeight-k.baseTileHeight)*L.scaleY;Z+=q}var Q=y(H,$,K,Z,null,L.scene.cameras.main,L.layer);return Q.length===0?!1:this.collideSpriteVsTilesHandler(w,Q,D,b,G,z,!0)},collideSpriteVsTilesHandler:function(w,L,D,b,G,z,U){for(var H=w.body,$,K={left:0,right:0,top:0,bottom:0},Z,k=!1,J=0;J<L.length;J++){$=L[J],Z=$.tilemapLayer;var q=Z.tileToWorldXY($.x,$.y);K.left=q.x,K.top=q.y,$.baseHeight!==$.height&&(K.top-=($.height-$.baseHeight)*Z.scaleY),K.right=K.left+$.width*Z.scaleX,K.bottom=K.top+$.height*Z.scaleY,B(K,H)&&(!b||b.call(G,w,$))&&E($,w)&&(z||O(J,H,$,K,Z,this.TILE_BIAS,U))&&(this._total++,k=!0,D&&D.call(G,w,$),z&&H.onOverlap?this.emit(l.TILE_OVERLAP,w,$,H):H.onCollide&&this.emit(l.TILE_COLLIDE,w,$,H))}return k},collideGroupVsGroup:function(w,L,D,b,G,z){if(!(w.length===0||L.length===0))for(var U=w.getChildren(),H=0;H<U.length;H++)this.collideSpriteVsGroup(U[H],L,D,b,G,z)},wrap:function(w,L){w.body?this.wrapObject(w,L):w.getChildren?this.wrapArray(w.getChildren(),L):Array.isArray(w)?this.wrapArray(w,L):this.wrapObject(w,L)},wrapArray:function(w,L){for(var D=0;D<w.length;D++)this.wrapObject(w[D],L)},wrapObject:function(w,L){L===void 0&&(L=0),w.x=X(w.x,this.bounds.left-L,this.bounds.right+L),w.y=X(w.y,this.bounds.top-L,this.bounds.bottom+L)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});e.exports=W},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(62),n=t(245),a=t(196),h=t(10),r=t(57),o=t(3),c=new s({initialize:function(f,p){var g=p.displayWidth?p.displayWidth:64,m=p.displayHeight?p.displayHeight:64;this.world=f,this.gameObject=p,this.transform={x:p.x,y:p.y,rotation:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,displayOriginX:p.displayOriginX,displayOriginY:p.displayOriginY},this.debugShowBody=f.defaults.debugShowBody,this.debugShowVelocity=f.defaults.debugShowVelocity,this.debugBodyColor=f.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(p.x-p.scaleX*p.displayOriginX,p.y-p.scaleY*p.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=p.angle,this.preRotation=p.angle,this.width=g,this.height=m,this.sourceWidth=g,this.sourceHeight=m,p.frame&&(this.sourceWidth=p.frame.realWidth,this.sourceHeight=p.frame.realHeight),this.halfWidth=Math.abs(g/2),this.halfHeight=Math.abs(m/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new o,this.newVelocity=new o,this.deltaMax=new o,this.acceleration=new o,this.allowDrag=!0,this.drag=new o,this.allowGravity=!0,this.gravity=new o,this.bounce=new o,this.worldBounce=null,this.customBoundsRectangle=f.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new o(1e4,1e4),this.maxSpeed=-1,this.friction=new o(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=u.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=u.DYNAMIC_BODY,this._sx=p.scaleX,this._sy=p.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new h},updateBounds:function(){var l=this.gameObject,f=this.transform;if(l.parentContainer){var p=l.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);f.x=p.tx,f.y=p.ty,f.rotation=a(p.rotation),f.scaleX=p.scaleX,f.scaleY=p.scaleY,f.displayOriginX=l.displayOriginX,f.displayOriginY=l.displayOriginY}else f.x=l.x,f.y=l.y,f.rotation=l.angle,f.scaleX=l.scaleX,f.scaleY=l.scaleY,f.displayOriginX=l.displayOriginX,f.displayOriginY=l.displayOriginY;var g=!1;if(this.syncBounds){var m=l.getBounds(this._bounds);this.width=m.width,this.height=m.height,g=!0}else{var x=Math.abs(f.scaleX),y=Math.abs(f.scaleY);(this._sx!==x||this._sy!==y)&&(this.width=this.sourceWidth*x,this.height=this.sourceHeight*y,this._sx=x,this._sy=y,g=!0)}g&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var l=this.transform;this.position.x=l.x+l.scaleX*(this.offset.x-l.displayOriginX),this.position.y=l.y+l.scaleY*(this.offset.y-l.displayOriginY),this.updateCenter()},resetFlags:function(l){l===void 0&&(l=!1);var f=this.wasTouching,p=this.touching,g=this.blocked;l?(f.none=!0,f.up=!1,f.down=!1,f.left=!1,f.right=!1):(f.none=p.none,f.up=p.up,f.down=p.down,f.left=p.left,f.right=p.right),p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1,g.none=!0,g.up=!1,g.down=!1,g.left=!1,g.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(l,f){l&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),l&&this.update(f)},update:function(l){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,l);var f=this.velocity.x,p=this.velocity.y;this.newVelocity.set(f*l,p*l),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(p,f),this.speed=Math.sqrt(f*f+p*p),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(n.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var l=this.position.x-this.prevFrame.x,f=this.position.y-this.prevFrame.y;if(this.moves){var p=this.deltaMax.x,g=this.deltaMax.y;p!==0&&l!==0&&(l<0&&l<-p?l=-p:l>0&&l>p&&(l=p)),g!==0&&f!==0&&(f<0&&f<-g?f=-g:f>0&&f>g&&(f=g)),this.gameObject.x+=l,this.gameObject.y+=f}l<0?this.facing=u.FACING_LEFT:l>0&&(this.facing=u.FACING_RIGHT),f<0?this.facing=u.FACING_UP:f>0&&(this.facing=u.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=l,this._ty=f},setBoundsRectangle:function(l){return this.customBoundsRectangle=l||this.world.bounds,this},checkWorldBounds:function(){var l=this.position,f=this.customBoundsRectangle,p=this.world.checkCollision,g=this.worldBounce?-this.worldBounce.x:-this.bounce.x,m=this.worldBounce?-this.worldBounce.y:-this.bounce.y,x=!1;return l.x<f.x&&p.left?(l.x=f.x,this.velocity.x*=g,this.blocked.left=!0,x=!0):this.right>f.right&&p.right&&(l.x=f.right-this.width,this.velocity.x*=g,this.blocked.right=!0,x=!0),l.y<f.y&&p.up?(l.y=f.y,this.velocity.y*=m,this.blocked.up=!0,x=!0):this.bottom>f.bottom&&p.down&&(l.y=f.bottom-this.height,this.velocity.y*=m,this.blocked.down=!0,x=!0),x&&(this.blocked.none=!1,this.updateCenter()),x},setOffset:function(l,f){return f===void 0&&(f=l),this.offset.set(l,f),this},setSize:function(l,f,p){p===void 0&&(p=!0);var g=this.gameObject;if(!l&&g.frame&&(l=g.frame.realWidth),!f&&g.frame&&(f=g.frame.realHeight),this.sourceWidth=l,this.sourceHeight=f,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),p&&g.getCenter){var m=(g.width-l)/2,x=(g.height-f)/2;this.offset.set(m,x)}return this.isCircle=!1,this.radius=0,this},setCircle:function(l,f,p){return f===void 0&&(f=this.offset.x),p===void 0&&(p=this.offset.y),l>0?(this.isCircle=!0,this.radius=l,this.sourceWidth=l*2,this.sourceHeight=l*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(f,p),this.updateCenter()):this.isCircle=!1,this},reset:function(l,f){this.stop();var p=this.gameObject;p.setPosition(l,f),p.getTopLeft?p.getTopLeft(this.position):this.position.set(l,f),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=p.angle,this.preRotation=p.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(l){return l.x=this.x,l.y=this.y,l.right=this.right,l.bottom=this.bottom,l},hitTest:function(l,f){if(!this.isCircle)return r(this,l,f);if(this.radius>0&&l>=this.left&&l<=this.right&&f>=this.top&&f<=this.bottom){var p=(this.center.x-l)*(this.center.x-l),g=(this.center.y-f)*(this.center.y-f);return p+g<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(l){var f=this.position,p=f.x+this.halfWidth,g=f.y+this.halfHeight;this.debugShowBody&&(l.lineStyle(l.defaultStrokeWidth,this.debugBodyColor),this.isCircle?l.strokeCircle(p,g,this.width/2):(this.checkCollision.up&&l.lineBetween(f.x,f.y,f.x+this.width,f.y),this.checkCollision.right&&l.lineBetween(f.x+this.width,f.y,f.x+this.width,f.y+this.height),this.checkCollision.down&&l.lineBetween(f.x,f.y+this.height,f.x+this.width,f.y+this.height),this.checkCollision.left&&l.lineBetween(f.x,f.y,f.x,f.y+this.height))),this.debugShowVelocity&&(l.lineStyle(l.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),l.lineBetween(p,g,p+this.velocity.x/2,g+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(l,f,p,g){l===void 0&&(l=!0),this.collideWorldBounds=l;var m=f!==void 0,x=p!==void 0;return(m||x)&&(this.worldBounce||(this.worldBounce=new o),m&&(this.worldBounce.x=f),x&&(this.worldBounce.y=p)),g!==void 0&&(this.onWorldBounds=g),this},setVelocity:function(l,f){return this.velocity.set(l,f),l=this.velocity.x,f=this.velocity.y,this.speed=Math.sqrt(l*l+f*f),this},setVelocityX:function(l){this.velocity.x=l;var f=l,p=this.velocity.y;return this.speed=Math.sqrt(f*f+p*p),this},setVelocityY:function(l){this.velocity.y=l;var f=this.velocity.x,p=l;return this.speed=Math.sqrt(f*f+p*p),this},setMaxVelocity:function(l,f){return this.maxVelocity.set(l,f),this},setMaxVelocityX:function(l){return this.maxVelocity.x=l,this},setMaxVelocityY:function(l){return this.maxVelocity.y=l,this},setMaxSpeed:function(l){return this.maxSpeed=l,this},setBounce:function(l,f){return this.bounce.set(l,f),this},setBounceX:function(l){return this.bounce.x=l,this},setBounceY:function(l){return this.bounce.y=l,this},setAcceleration:function(l,f){return this.acceleration.set(l,f),this},setAccelerationX:function(l){return this.acceleration.x=l,this},setAccelerationY:function(l){return this.acceleration.y=l,this},setAllowDrag:function(l){return l===void 0&&(l=!0),this.allowDrag=l,this},setAllowGravity:function(l){return l===void 0&&(l=!0),this.allowGravity=l,this},setAllowRotation:function(l){return l===void 0&&(l=!0),this.allowRotation=l,this},setDrag:function(l,f){return this.drag.set(l,f),this},setDamping:function(l){return this.useDamping=l,this},setDragX:function(l){return this.drag.x=l,this},setDragY:function(l){return this.drag.y=l,this},setGravity:function(l,f){return this.gravity.set(l,f),this},setGravityX:function(l){return this.gravity.x=l,this},setGravityY:function(l){return this.gravity.y=l,this},setFriction:function(l,f){return this.friction.set(l,f),this},setFrictionX:function(l){return this.friction.x=l,this},setFrictionY:function(l){return this.friction.y=l,this},setAngularVelocity:function(l){return this.angularVelocity=l,this},setAngularAcceleration:function(l){return this.angularAcceleration=l,this},setAngularDrag:function(l){return this.angularDrag=l,this},setMass:function(l){return this.mass=l,this},setImmovable:function(l){return l===void 0&&(l=!0),this.immovable=l,this},setEnable:function(l){return l===void 0&&(l=!0),this.enable=l,this},processX:function(l,f,p,g){this.x+=l,this.updateCenter(),f!==null&&(this.velocity.x=f);var m=this.blocked;p&&(m.left=!0),g&&(m.right=!0)},processY:function(l,f,p,g){this.y+=l,this.updateCenter(),f!==null&&(this.velocity.y=f);var m=this.blocked;p&&(m.up=!0),g&&(m.down=!0)},x:{get:function(){return this.position.x},set:function(l){this.position.x=l}},y:{get:function(){return this.position.y},set:function(l){this.position.y=l}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,h,r,o,c,l,f){this.world=a,this.name="",this.active=!0,this.overlapOnly=h,this.object1=r,this.object2=o,this.collideCallback=c,this.processCallback=l,this.callbackContext=f},setName:function(n){return this.name=n,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(3),n=new u,a=new u,h=function(r,o,c,l,f,p,g){var m=g.tilemapLayer.tilemap._convert.WorldToTileXY;m(r,o,!0,n,p,g);var x=n.x,y=n.y;m(r+c,o+l,!1,a,p,g);var T=Math.ceil(a.x),S=Math.ceil(a.y);return s(x,y,T-x,S-y,f,g)};e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.collisionCallback?!s.collisionCallback.call(s.collisionCallbackContext,u,s):s.layer.callbacks[s.index]?!s.layer.callbacks[s.index].callback.call(s.layer.callbacks[s.index].callbackContext,u,s):!0};e.exports=t},function(e,d,t){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(436);function u(S){if(!(this instanceof u))return new u(S);this._maxEntries=Math.max(4,S||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}u.prototype={all:function(){return this._all(this.data,[])},search:function(S){var C=this.data,E=[],P=this.toBBox;if(!x(S,C))return E;for(var M=[],O,A,R,F;C;){for(O=0,A=C.children.length;O<A;O++)R=C.children[O],F=C.leaf?P(R):R,x(S,F)&&(C.leaf?E.push(R):m(S,F)?this._all(R,E):M.push(R));C=M.pop()}return E},collides:function(S){var C=this.data,E=this.toBBox;if(!x(S,C))return!1;for(var P=[],M,O,A,R;C;){for(M=0,O=C.children.length;M<O;M++)if(A=C.children[M],R=C.leaf?E(A):A,x(S,R)){if(C.leaf||m(S,R))return!0;P.push(A)}C=P.pop()}return!1},load:function(S){if(!(S&&S.length))return this;if(S.length<this._minEntries){for(var C=0,E=S.length;C<E;C++)this.insert(S[C]);return this}var P=this._build(S.slice(),0,S.length-1,0);if(!this.data.children.length)this.data=P;else if(this.data.height===P.height)this._splitRoot(this.data,P);else{if(this.data.height<P.height){var M=this.data;this.data=P,P=M}this._insert(P,this.data.height-P.height-1,!0)}return this},insert:function(S){return S&&this._insert(S,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(S,C){if(!S)return this;for(var E=this.data,P=this.toBBox(S),M=[],O=[],A,R,F,I;E||M.length;){if(E||(E=M.pop(),R=M[M.length-1],A=O.pop(),I=!0),E.leaf&&(F=n(S,E.children,C),F!==-1))return E.children.splice(F,1),M.push(E),this._condense(M),this;!I&&!E.leaf&&m(E,P)?(M.push(E),O.push(A),A=0,R=E,E=E.children[0]):R?(A++,E=R.children[A],I=!1):E=null}return this},toBBox:function(S){return S},compareMinX:o,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(S){return this.data=S,this},_all:function(S,C){for(var E=[];S;)S.leaf?C.push.apply(C,S.children):E.push.apply(E,S.children),S=E.pop();return C},_build:function(S,C,E,P){var M=E-C+1,O=this._maxEntries,A;if(M<=O)return A=y(S.slice(C,E+1)),a(A,this.toBBox),A;P||(P=Math.ceil(Math.log(M)/Math.log(O)),O=Math.ceil(M/Math.pow(O,P-1))),A=y([]),A.leaf=!1,A.height=P;var R=Math.ceil(M/O),F=R*Math.ceil(Math.sqrt(O)),I,B,N,Y;for(T(S,C,E,F,this.compareMinX),I=C;I<=E;I+=F)for(N=Math.min(I+F-1,E),T(S,I,N,R,this.compareMinY),B=I;B<=N;B+=R)Y=Math.min(B+R-1,N),A.children.push(this._build(S,B,Y,P-1));return a(A,this.toBBox),A},_chooseSubtree:function(S,C,E,P){for(var M,O,A,R,F,I,B,N;P.push(C),!(C.leaf||P.length-1===E);){for(B=N=1/0,M=0,O=C.children.length;M<O;M++)A=C.children[M],F=l(A),I=p(S,A)-F,I<N?(N=I,B=F<B?F:B,R=A):I===N&&F<B&&(B=F,R=A);C=R||C.children[0]}return C},_insert:function(S,C,E){var P=this.toBBox,M=E?S:P(S),O=[],A=this._chooseSubtree(M,this.data,C,O);for(A.children.push(S),r(A,M);C>=0&&O[C].children.length>this._maxEntries;)this._split(O,C),C--;this._adjustParentBBoxes(M,O,C)},_split:function(S,C){var E=S[C],P=E.children.length,M=this._minEntries;this._chooseSplitAxis(E,M,P);var O=this._chooseSplitIndex(E,M,P),A=y(E.children.splice(O,E.children.length-O));A.height=E.height,A.leaf=E.leaf,a(E,this.toBBox),a(A,this.toBBox),C?S[C-1].children.push(A):this._splitRoot(E,A)},_splitRoot:function(S,C){this.data=y([S,C]),this.data.height=S.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(S,C,E){var P,M,O,A,R,F,I,B;for(F=I=1/0,P=C;P<=E-C;P++)M=h(S,0,P,this.toBBox),O=h(S,P,E,this.toBBox),A=g(M,O),R=l(M)+l(O),A<F?(F=A,B=P,I=R<I?R:I):A===F&&R<I&&(I=R,B=P);return B},_chooseSplitAxis:function(S,C,E){var P=S.leaf?this.compareMinX:o,M=S.leaf?this.compareMinY:c,O=this._allDistMargin(S,C,E,P),A=this._allDistMargin(S,C,E,M);O<A&&S.children.sort(P)},_allDistMargin:function(S,C,E,P){S.children.sort(P);var M=this.toBBox,O=h(S,0,C,M),A=h(S,E-C,E,M),R=f(O)+f(A),F,I;for(F=C;F<E-C;F++)I=S.children[F],r(O,S.leaf?M(I):I),R+=f(O);for(F=E-C-1;F>=C;F--)I=S.children[F],r(A,S.leaf?M(I):I),R+=f(A);return R},_adjustParentBBoxes:function(S,C,E){for(var P=E;P>=0;P--)r(C[P],S)},_condense:function(S){for(var C=S.length-1,E;C>=0;C--)S[C].children.length===0?C>0?(E=S[C-1].children,E.splice(E.indexOf(S[C]),1)):this.clear():a(S[C],this.toBBox)},compareMinX:function(S,C){return S.left-C.left},compareMinY:function(S,C){return S.top-C.top},toBBox:function(S){return{minX:S.left,minY:S.top,maxX:S.right,maxY:S.bottom}}};function n(S,C,E){if(!E)return C.indexOf(S);for(var P=0;P<C.length;P++)if(E(S,C[P]))return P;return-1}function a(S,C){h(S,0,S.children.length,C,S)}function h(S,C,E,P,M){M||(M=y(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var O=C,A;O<E;O++)A=S.children[O],r(M,S.leaf?P(A):A);return M}function r(S,C){return S.minX=Math.min(S.minX,C.minX),S.minY=Math.min(S.minY,C.minY),S.maxX=Math.max(S.maxX,C.maxX),S.maxY=Math.max(S.maxY,C.maxY),S}function o(S,C){return S.minX-C.minX}function c(S,C){return S.minY-C.minY}function l(S){return(S.maxX-S.minX)*(S.maxY-S.minY)}function f(S){return S.maxX-S.minX+(S.maxY-S.minY)}function p(S,C){return(Math.max(C.maxX,S.maxX)-Math.min(C.minX,S.minX))*(Math.max(C.maxY,S.maxY)-Math.min(C.minY,S.minY))}function g(S,C){var E=Math.max(S.minX,C.minX),P=Math.max(S.minY,C.minY),M=Math.min(S.maxX,C.maxX),O=Math.min(S.maxY,C.maxY);return Math.max(0,M-E)*Math.max(0,O-P)}function m(S,C){return S.minX<=C.minX&&S.minY<=C.minY&&C.maxX<=S.maxX&&C.maxY<=S.maxY}function x(S,C){return C.minX<=S.maxX&&C.minY<=S.maxY&&C.maxX>=S.minX&&C.maxY>=S.minY}function y(S){return{children:S,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function T(S,C,E,P,M){for(var O=[C,E],A;O.length;)E=O.pop(),C=O.pop(),!(E-C<=P)&&(A=C+Math.ceil((E-C)/P/2)*P,s(S,A,C,E,M),O.push(C,A,A,E))}e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(533),u=t(535),n=t(248),a=function(h,r,o,c,l,f,p){var g=c.left,m=c.top,x=c.right,y=c.bottom,T=o.faceLeft||o.faceRight,S=o.faceTop||o.faceBottom;if(p||(T=!0,S=!0),!T&&!S)return!1;var C=0,E=0,P=0,M=1;if(r.deltaAbsX()>r.deltaAbsY()?P=-1:r.deltaAbsX()<r.deltaAbsY()&&(M=-1),r.deltaX()!==0&&r.deltaY()!==0&&T&&S&&(P=Math.min(Math.abs(r.position.x-x),Math.abs(r.right-g)),M=Math.min(Math.abs(r.position.y-y),Math.abs(r.bottom-m))),P<M){if(T&&(C=s(r,o,g,x,f,p),C!==0&&!n(c,r)))return!0;S&&(E=u(r,o,m,y,f,p))}else{if(S&&(E=u(r,o,m,y,f,p),E!==0&&!n(c,r)))return!0;T&&(C=s(r,o,g,x,f,p))}return C!==0||E!==0};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(534),u=function(n,a,h,r,o,c){var l=0,f=a.faceLeft,p=a.faceRight,g=a.collideLeft,m=a.collideRight;return c||(f=!0,p=!0,g=!0,m=!0),n.deltaX()<0&&m&&n.checkCollision.left?p&&n.x<r&&(l=n.x-r,l<-o&&(l=0)):n.deltaX()>0&&g&&n.checkCollision.right&&f&&n.right>h&&(l=n.right-h,l>o&&(l=0)),l!==0&&(n.customSeparateX?n.overlapX=l:s(n,l)),l};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u<0?(s.blocked.none=!1,s.blocked.left=!0):u>0&&(s.blocked.none=!1,s.blocked.right=!0),s.position.x-=u,s.bounce.x===0?s.velocity.x=0:s.velocity.x=-s.velocity.x*s.bounce.x};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(536),u=function(n,a,h,r,o,c){var l=0,f=a.faceTop,p=a.faceBottom,g=a.collideUp,m=a.collideDown;return c||(f=!0,p=!0,g=!0,m=!0),n.deltaY()<0&&m&&n.checkCollision.up?p&&n.y<r&&(l=n.y-r,l<-o&&(l=0)):n.deltaY()>0&&g&&n.checkCollision.down&&f&&n.bottom>h&&(l=n.bottom-h,l>o&&(l=0)),l!==0&&(n.customSeparateY?n.overlapY=l:s(n,l)),l};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u<0?(s.blocked.none=!1,s.blocked.up=!0):u>0&&(s.blocked.none=!1,s.blocked.down=!0),s.position.y-=u,s.bounce.y===0?s.velocity.y=0:s.velocity.y=-s.velocity.y*s.bounce.y};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(246),u=t(1389),n=function(a,h,r,o){var c=s(a,h,r,o),l=a.immovable,f=h.immovable;if(r||c===0||l&&f||a.customSeparateX||h.customSeparateX)return c!==0||a.embedded&&h.embedded;var p=u.Set(a,h,c);return!l&&!f?p>0?!0:u.Check():(l?u.RunImmovableBody1(p):f&&u.RunImmovableBody2(p),!0)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(247),u=t(1390),n=function(a,h,r,o){var c=s(a,h,r,o),l=a.immovable,f=h.immovable;if(r||c===0||l&&f||a.customSeparateY||h.customSeparateY)return c!==0||a.embedded&&h.embedded;var p=u.Set(a,h,c);return!l&&!f?p>0?!0:u.Check():(l?u.RunImmovableBody1(p):f&&u.RunImmovableBody2(p),!0)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66),u=t(0),n=t(62),a=t(57),h=t(3),r=new u({initialize:function(c,l){var f=l.displayWidth?l.displayWidth:64,p=l.displayHeight?l.displayHeight:64;this.world=c,this.gameObject=l,this.debugShowBody=c.defaults.debugShowStaticBody,this.debugBodyColor=c.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(l.x-f*l.originX,l.y-p*l.originY),this.width=f,this.height=p,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new h(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=h.ZERO,this.allowGravity=!1,this.gravity=h.ZERO,this.bounce=h.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=n.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(o,c){return o&&o!==this.gameObject&&(this.gameObject.body=null,o.body=this,this.gameObject=o),c&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var o=this.gameObject;return o.getTopLeft(this.position),this.width=o.displayWidth,this.height=o.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(o,c){return c===void 0&&(c=o),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(o,c),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(o,c,l){l===void 0&&(l=!0);var f=this.gameObject;if(!o&&f.frame&&(o=f.frame.realWidth),!c&&f.frame&&(c=f.frame.realHeight),this.world.staticTree.remove(this),this.width=o,this.height=c,this.halfWidth=Math.floor(o/2),this.halfHeight=Math.floor(c/2),l&&f.getCenter){var p=f.displayWidth/2,g=f.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(p-this.halfWidth,g-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(o,c,l){return c===void 0&&(c=this.offset.x),l===void 0&&(l=this.offset.y),o>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=o,this.width=o*2,this.height=o*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,l),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(o,c){var l=this.gameObject;o===void 0&&(o=l.x),c===void 0&&(c=l.y),this.world.staticTree.remove(this),l.setPosition(o,c),l.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(o){return o.x=this.x,o.y=this.y,o.right=this.right,o.bottom=this.bottom,o},hitTest:function(o,c){return this.isCircle?s(this,o,c):a(this,o,c)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(o){var c=this.position,l=c.x+this.halfWidth,f=c.y+this.halfHeight;this.debugShowBody&&(o.lineStyle(o.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?o.strokeCircle(l,f,this.width/2):o.strokeRect(c.x,c.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(o){return o<=0&&(o=.1),this.mass=o,this},x:{get:function(){return this.position.x},set:function(o){this.world.staticTree.remove(this),this.position.x=o,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(o){this.world.staticTree.remove(this),this.position.y=o,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=r},function(e,d,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=t(0),u=new s({initialize:function(a){this.pluginManager=a,this.game=a.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=new s,n=function(a,h,r,o){var c=r.tilemapLayer,l=c.cullPaddingX,f=c.cullPaddingY,p=c.tilemap.tileToWorldXY(a,h,u,o,c);return p.x>o.worldView.x+c.scaleX*r.tileWidth*(-l-.5)&&p.x<o.worldView.right+c.scaleX*r.tileWidth*(l-.5)&&p.y>o.worldView.y+c.scaleY*r.tileHeight*(-f-1)&&p.y<o.worldView.bottom+c.scaleY*r.tileHeight*(f-.5)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,h,r,o,c,l){for(var f=s(h,r,o,c,null,l),p=0;p<f.length;p++)f[p]&&f[p].index===n&&(f[p].index=a)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(139),n=t(76),a=new s,h=function(r,o){var c=r.tilemapLayer.tilemap,l=r.tilemapLayer,f=Math.floor(c.tileWidth*l.scaleX),p=Math.floor(c.tileHeight*l.scaleY),g=n(o.worldView.x-l.x,f,0,!0)-l.cullPaddingX,m=u(o.worldView.right-l.x,f,0,!0)+l.cullPaddingX,x=n(o.worldView.y-l.y,p,0,!0)-l.cullPaddingY,y=u(o.worldView.bottom-l.y,p,0,!0)+l.cullPaddingY;return a.setTo(g,x,m-g,y-x)};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(543),u=t(159),n=function(a,h,r,o){r===void 0&&(r=[]),o===void 0&&(o=0),r.length=0;var c=a.tilemapLayer,l=s(a,h);return(c.skipCull||c.scrollFactorX!==1||c.scrollFactorY!==1)&&(l.left=0,l.right=a.width,l.top=0,l.bottom=a.height),u(a,l,o,r),r};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(546),u=t(159),n=function(a,h,r,o){r===void 0&&(r=[]),o===void 0&&(o=0),r.length=0;var c=a.tilemapLayer;if(!c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1){var l=s(a,h);u(a,l,o,r)}return r};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(139),u=t(76),n=function(a,h){var r=a.tilemapLayer.tilemap,o=a.tilemapLayer,c=Math.floor(r.tileWidth*o.scaleX),l=Math.floor(r.tileHeight*o.scaleY),f=a.hexSideLength,p=(l-f)/2+f,g=u(h.worldView.x-o.x,c,0,!0)-o.cullPaddingX,m=s(h.worldView.right-o.x,c,0,!0)+o.cullPaddingX,x=u(h.worldView.y-o.y,p,0,!0)-o.cullPaddingY,y=s(h.worldView.bottom-o.y,p,0,!0)+o.cullPaddingY;return{left:g,right:m,top:x,bottom:y}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(541),u=function(n,a,h,r){h===void 0&&(h=[]),r===void 0&&(r=0),h.length=0;var o=n.tilemapLayer,c=n.data,l=n.width,f=n.height,p=0,g=l,m=0,x=f;if(!o.skipCull){var y,T,S;if(r===0){for(T=m;T<x;T++)for(y=p;c[T]&&y<g;y++)if(s(y,T,n,a)){if(S=c[T][y],!S||S.index===-1||!S.visible||S.alpha===0)continue;h.push(S)}}else if(r===1){for(T=m;T<x;T++)for(y=g;c[T]&&y>=p;y--)if(s(y,T,n,a)){if(S=c[T][y],!S||S.index===-1||!S.visible||S.alpha===0)continue;h.push(S)}}else if(r===2){for(T=x;T>=m;T--)for(y=p;c[T]&&y<g;y++)if(s(y,T,n,a)){if(S=c[T][y],!S||S.index===-1||!S.visible||S.alpha===0)continue;h.push(S)}}else if(r===3){for(T=x;T>=m;T--)for(y=g;c[T]&&y>=p;y--)if(s(y,T,n,a)){if(S=c[T][y],!S||S.index===-1||!S.visible||S.alpha===0)continue;h.push(S)}}}return o.tilesDrawn=h.length,o.tilesTotal=l*f,h};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(549),u=t(159),n=function(a,h,r,o){r===void 0&&(r=[]),o===void 0&&(o=0),r.length=0;var c=a.tilemapLayer;if(!c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1){var l=s(a,h);u(a,l,o,r)}return r};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(139),u=t(76),n=function(a,h){var r=a.tilemapLayer.tilemap,o=a.tilemapLayer,c=Math.floor(r.tileWidth*o.scaleX),l=Math.floor(r.tileHeight*o.scaleY),f=u(h.worldView.x-o.x,c,0,!0)-o.cullPaddingX,p=s(h.worldView.right-o.x,c,0,!0)+o.cullPaddingX,g=u(h.worldView.y-o.y,l/2,0,!0)-o.cullPaddingY,m=s(h.worldView.bottom-o.y,l/2,0,!0)+o.cullPaddingY;return{left:f,right:p,top:g,bottom:m}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,h,r,o){h||(h=new s);var c=o.baseTileWidth,l=o.baseTileHeight,f=o.tilemapLayer,p=0,g=0;f&&(r||(r=f.scene.cameras.main),p=f.x+r.scrollX*(1-f.scrollFactorX),c*=f.scaleX,g=f.y+r.scrollY*(1-f.scrollFactorY),l*=f.scaleY);var m=o.hexSideLength,x=(l-m)/2+m,y=p+n*c+a%2*(c/2),T=g+a*x;return h.set(y,T)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,h,r,o){h||(h=new s);var c=o.baseTileWidth,l=o.baseTileHeight,f=o.tilemapLayer,p=0,g=0;f&&(r||(r=f.scene.cameras.main),p=f.x+r.scrollX*(1-f.scrollFactorX),c*=f.scaleX,g=f.y+r.scrollY*(1-f.scrollFactorY),l*=f.scaleY);var m=p+(n-a)*(c/2),x=g+(n+a)*(l/2);return h.set(m,x)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,h,r,o){h||(h=new s);var c=o.baseTileWidth,l=o.baseTileHeight,f=o.tilemapLayer,p=0,g=0;f&&(r||(r=f.scene.cameras.main),p=f.x+r.scrollX*(1-f.scrollFactorX),c*=f.scaleX,g=f.y+r.scrollY*(1-f.scrollFactorY),l*=f.scaleY);var m=p+n*c+a%2*(c/2),x=g+a*(l/2);return h.set(m,x)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(253),u=t(254),n=t(3),a=function(h,r,o,c,l){return o||(o=new n(0,0)),o.x=s(h,c,l),o.y=u(r,c,l),o};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=n.baseTileHeight,h=n.tilemapLayer,r=0;h&&(u===void 0&&(u=h.scene.cameras.main),r=h.y+u.scrollY*(1-h.scrollFactorY),a*=h.scaleY);var o=h.tilemap.hexSideLength,c=(a-o)/2+o;return r+s*c};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=n.baseTileHeight,h=n.tilemapLayer,r=0;return h&&(u===void 0&&(u=h.scene.cameras.main),r=h.y+u.scrollY*(1-h.scrollFactorY),a*=h.scaleY),r+s*(a/2)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,h,r,o,c){r||(r=new s);var l=c.baseTileWidth,f=c.baseTileHeight,p=c.tilemapLayer;p&&(o||(o=p.scene.cameras.main),a=a-(p.y+o.scrollY*(1-p.scrollFactorY)),f*=p.scaleY,n=n-(p.x+o.scrollX*(1-p.scrollFactorX)),l*=p.scaleX);var g=c.hexSideLength,m=(f-g)/2+g,x=h?Math.floor(a/m):a/m,y=h?Math.floor((n-x%2*.5*l)/l):(n-x%2*.5*l)/l;return r.set(y,x)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,h,r,o,c){r||(r=new s);var l=c.baseTileWidth,f=c.baseTileHeight,p=c.tilemapLayer;p&&(o||(o=p.scene.cameras.main),a=a-(p.y+o.scrollY*(1-p.scrollFactorY)),f*=p.scaleY,n=n-(p.x+o.scrollX*(1-p.scrollFactorX)),l*=p.scaleX);var g=h?Math.floor((n/(l/2)+a/(f/2))/2):(n/(l/2)+a/(f/2))/2,m=h?Math.floor((a/(f/2)-n/(l/2))/2):(a/(f/2)-n/(l/2))/2;return r.set(g,m)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,h,r,o,c){r||(r=new s);var l=c.baseTileWidth,f=c.baseTileHeight,p=c.tilemapLayer;p&&(o||(o=p.scene.cameras.main),a=a-(p.y+o.scrollY*(1-p.scrollFactorY)),f*=p.scaleY,n=n-(p.x+o.scrollX*(1-p.scrollFactorX)),l*=p.scaleX);var g=h?Math.floor(a/(f/2)):a/(f/2),m=h?Math.floor((n+g%2*.5*l)/l):(n+g%2*.5*l)/l;return r.set(m,g)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(255),u=t(256),n=t(3),a=function(h,r,o,c,l,f){return o===void 0&&(o=!0),c||(c=new n(0,0)),c.x=s(h,o,l,f),c.y=u(r,o,l,f),c};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h=a.baseTileHeight,r=a.tilemapLayer;r&&(n||(n=r.scene.cameras.main),s=s-(r.y+n.scrollY*(1-r.scrollFactorY)),h*=r.scaleY);var o=a.hexSideLength,c=(h-o)/2+o;return u?Math.floor(s/c):s/c};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h=a.baseTileHeight,r=a.tilemapLayer;return r&&(n||(n=r.scene.cameras.main),s=s-(r.y+n.scrollY*(1-r.scrollFactorY)),h*=r.scaleY),u?Math.floor(s/(h/2)):s/(h/2)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(119),u=function(n,a,h){if(s(n,a,h)){var r=h.data[a][n];return r!==null&&r.index>-1}else return!1};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85),u=t(119),n=t(252),a=function(h,r,o,c,l){if(o===void 0&&(o=!0),c===void 0&&(c=!0),!u(h,r,l))return null;var f=l.data[r][h];if(f)l.data[r][h]=o?null:new s(l,-1,h,r,l.tileWidth,l.tileHeight);else return null;return c&&f&&f.collides&&n(h,r,l),f};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(259),n=t(565),a=t(566),h=t(577),r=function(o,c,l,f,p,g){var m;switch(c){case s.ARRAY_2D:m=u(o,l,f,p,g);break;case s.CSV:m=n(o,l,f,p,g);break;case s.TILED_JSON:m=a(o,l,g);break;case s.WELTMEISTER:m=h(o,l,g);break;default:console.warn("Unrecognized tilemap data format: "+c),m=null}return m};e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(259),n=function(a,h,r,o,c){var l=h.trim().split(`
`).map(function(p){return p.split(",")}),f=u(a,l,r,o,c);return f.format=s.CSV,f};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(567),u=t(568),n=t(29),a=t(40),h=t(258),r=t(121),o=t(569),c=t(570),l=t(573),f=t(575),p=function(g,m,x){var y=new r({width:m.width,height:m.height,name:g,tileWidth:m.tilewidth,tileHeight:m.tileheight,orientation:h(m.orientation),format:a.TILED_JSON,version:m.version,properties:m.properties,renderOrder:m.renderorder,infinite:m.infinite});y.orientation===n.HEXAGONAL&&(y.hexSideLength=m.hexsidelength),y.layers=l(m,x),y.images=o(m);var T=f(m);return y.tilesets=T.tilesets,y.imageCollections=T.imageCollections,y.objects=c(m),y.tiles=u(y),s(y),y};e.exports=p},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=function(n){for(var a,h,r,o,c,l=0;l<n.layers.length;l++){a=n.layers[l],o=null;for(var f=0;f<a.data.length;f++){c=a.data[f];for(var p=0;p<c.length;p++)h=c[p],!(h===null||h.index<0)&&(r=n.tiles[h.index][2],o=n.tilesets[r],h.width=o.tileWidth,h.height=o.tileHeight,o.tileProperties&&o.tileProperties[h.index-o.firstgid]&&(h.properties=s(h.properties,o.tileProperties[h.index-o.firstgid])))}}};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(122),u=function(n){var a,h,r=[];for(a=0;a<n.imageCollections.length;a++)for(var o=n.imageCollections[a],c=o.images,l=0;l<c.length;l++){var f=c[l];h=new s(f.image,f.gid,o.imageWidth,o.imageHeight,0,0),h.updateTileData(o.imageWidth,o.imageHeight),n.tilesets.push(h)}for(a=0;a<n.tilesets.length;a++){h=n.tilesets[a];for(var p=h.tileMargin,g=h.tileMargin,m=0,x=0,y=0,T=h.firstgid;T<h.firstgid+h.total&&(r[T]=[p,g,a],p+=h.tileWidth+h.tileSpacing,m++,!(m===h.total||(x++,x===h.columns&&(p=h.tileMargin,g+=h.tileHeight+h.tileSpacing,x=0,y++,y===h.rows))));T++);}return r};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=t(161),n=function(a){for(var h=[],r=[],o=u(a);o.i<o.layers.length||r.length>0;){if(o.i>=o.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=r.pop();continue}var c=o.layers[o.i];if(o.i++,c.type!=="imagelayer"){if(c.type==="group"){var l=u(a,c,o);r.push(o),o=l}continue}var f=s(c,"offsetx",0)+s(c,"startx",0),p=s(c,"offsety",0)+s(c,"starty",0);h.push({name:o.name+c.name,image:c.image,x:o.x+f+c.x,y:o.y+p+c.y,alpha:o.opacity*c.opacity,visible:o.visible&&c.visible,properties:s(c,"properties",{})})}return h};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=t(260),n=t(572),a=t(161),h=function(r){for(var o=[],c=[],l=a(r);l.i<l.layers.length||c.length>0;){if(l.i>=l.layers.length){if(c.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=c.pop();continue}var f=l.layers[l.i];if(l.i++,f.opacity*=l.opacity,f.visible=l.visible&&f.visible,f.type!=="objectgroup"){if(f.type==="group"){var p=a(r,f,l);c.push(l),l=p}continue}f.name=l.name+f.name;for(var g=l.x+s(f,"startx",0)+s(f,"offsetx",0),m=l.y+s(f,"starty",0)+s(f,"offsety",0),x=[],y=0;y<f.objects.length;y++){var T=u(f.objects[y],g,m);x.push(T)}var S=new n(f);S.objects=x,o.push(S)}return o};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(126),u=function(n,a){for(var h={},r=0;r<a.length;r++){var o=a[r];s(n,o)&&(h[o]=n[o])}return h};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=new s({initialize:function(h){h===void 0&&(h={}),this.name=u(h,"name","object layer"),this.opacity=u(h,"opacity",1),this.properties=u(h,"properties",{}),this.propertyTypes=u(h,"propertytypes",{}),this.type=u(h,"type","objectgroup"),this.visible=u(h,"visible",!0),this.objects=u(h,"objects",[])}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(574),u=t(29),n=t(161),a=t(258),h=t(2),r=t(120),o=t(261),c=t(85),l=function(f,p){for(var g=h(f,"infinite",!1),m=[],x=[],y=n(f);y.i<y.layers.length||x.length>0;){if(y.i>=y.layers.length){if(x.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}y=x.pop();continue}var T=y.layers[y.i];if(y.i++,T.type!=="tilelayer"){if(T.type==="group"){var S=n(f,T,y);x.push(y),y=S}continue}if(T.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+T.name+"'");continue}else if(T.encoding&&T.encoding==="base64"){if(T.chunks)for(var C=0;C<T.chunks.length;C++)T.chunks[C].data=s(T.chunks[C].data);T.data&&(T.data=s(T.data)),delete T.encoding}var E,P,M,O,A=[],R=0;if(g){var F=h(T,"startx",0)+T.x,I=h(T,"starty",0)+T.y;E=new r({name:y.name+T.name,x:y.x+h(T,"offsetx",0)+F*f.tilewidth,y:y.y+h(T,"offsety",0)+I*f.tileheight,width:T.width,height:T.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:h(T,"properties",[]),orientation:a(f.orientation)}),E.orientation===u.HEXAGONAL&&(E.hexSideLength=f.hexsidelength);for(var B=0;B<T.height;B++){A.push([null]);for(var N=0;N<T.width;N++)A[B][N]=null}for(B=0,H=T.chunks.length;B<H;B++)for(var Y=T.chunks[B],X=Y.x-F,W=Y.y-I,w=0,L=0,D=Y.data.length;L<D;L++){var b=R+X,G=w+W;P=o(Y.data[L]),P.gid>0?(M=new c(E,P.gid,b,G,f.tilewidth,f.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,A[G][b]=M):(O=p?null:new c(E,-1,b,G,f.tilewidth,f.tileheight),A[G][b]=O),R++,R===Y.width&&(w++,R=0)}}else{E=new r({name:y.name+T.name,x:y.x+h(T,"offsetx",0)+T.x,y:y.y+h(T,"offsety",0)+T.y,width:T.width,height:T.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:h(T,"properties",[]),orientation:a(f.orientation)}),E.orientation===u.HEXAGONAL&&(E.hexSideLength=f.hexsidelength);for(var z=[],U=0,H=T.data.length;U<H;U++)P=o(T.data[U]),P.gid>0?(M=new c(E,P.gid,R,A.length,f.tilewidth,f.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,z.push(M)):(O=p?null:new c(E,-1,R,A.length,f.tilewidth,f.tileheight),z.push(O)),R++,R===T.width&&(A.push(z),R=0,z=[])}E.data=A,m.push(E)}return m};e.exports=l},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=window.atob(s),n=u.length,a=new Array(n/4),h=0;h<n;h+=4)a[h/4]=(u.charCodeAt(h)|u.charCodeAt(h+1)<<8|u.charCodeAt(h+2)<<16|u.charCodeAt(h+3)<<24)>>>0;return a};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(122),u=t(576),n=t(260),a=t(1453),h=function(r){for(var o=[],c=[],l=null,f,p=0;p<r.tilesets.length;p++){var g=r.tilesets[p];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var m=new s(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing);if(r.version>1){var x=void 0,y=void 0;if(Array.isArray(g.tiles)){x=x||{},y=y||{};for(var T=0;T<g.tiles.length;T++){var S=g.tiles[T];if(S.properties){var C={};S.properties.forEach(function(B){C[B.name]=B.value}),y[S.id]=C}if(S.objectgroup&&((x[S.id]||(x[S.id]={})).objectgroup=S.objectgroup,S.objectgroup.objects)){var E=S.objectgroup.objects.map(function(B){return n(B)});x[S.id].objectgroup.objects=E}S.animation&&((x[S.id]||(x[S.id]={})).animation=S.animation),S.type&&((x[S.id]||(x[S.id]={})).type=S.type)}}Array.isArray(g.wangsets)&&(x=x||{},y=y||{},a(g.wangsets,x)),x&&(m.tileData=x,m.tileProperties=y)}else if(g.tileproperties&&(m.tileProperties=g.tileproperties),g.tiles){m.tileData=g.tiles;for(f in m.tileData){var P=m.tileData[f].objectgroup;if(P&&P.objects){var M=P.objects.map(function(B){return n(B)});m.tileData[f].objectgroup.objects=M}}}m.updateTileData(g.imagewidth,g.imageheight),o.push(m)}else{var O=new u(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),A=0;for(T=0;T<g.tiles.length;T++){S=g.tiles[T];var R=S.image,F=parseInt(S.id,10),I=g.firstgid+F;O.addImage(I,R),A=Math.max(F,A)}O.maxId=A,c.push(O)}l&&(l.lastgid=g.firstgid-1),l=g}return{tilesets:o,imageCollections:c}};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,h,r,o,c,l,f){(r===void 0||r<=0)&&(r=32),(o===void 0||o<=0)&&(o=32),c===void 0&&(c=0),l===void 0&&(l=0),this.name=a,this.firstgid=h|0,this.imageWidth=r|0,this.imageHeight=o|0,this.imageMargin=c|0,this.imageSpacing=l|0,this.properties=f||{},this.images=[],this.total=0},containsImageIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},addImage:function(n,a){return this.images.push({gid:n,image:a}),this.total++,this}});e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(121),n=t(578),a=t(579),h=function(r,o,c){if(o.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+r),null;for(var l=0,f=0,p=0;p<o.layer.length;p++)o.layer[p].width>l&&(l=o.layer[p].width),o.layer[p].height>f&&(f=o.layer[p].height);var g=new u({width:l,height:f,name:r,tileWidth:o.layer[0].tilesize,tileHeight:o.layer[0].tilesize,format:s.WELTMEISTER});return g.layers=n(o,c),g.tilesets=a(o),g};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(120),u=t(85),n=function(a,h){for(var r=[],o=0;o<a.layer.length;o++){for(var c=a.layer[o],l=new s({name:c.name,width:c.width,height:c.height,tileWidth:c.tilesize,tileHeight:c.tilesize,visible:c.visible===1}),f=[],p=[],g=0;g<c.data.length;g++){for(var m=0;m<c.data[g].length;m++){var x=c.data[g][m]-1,y;x>-1?y=new u(l,x,m,g,c.tilesize,c.tilesize):y=h?null:new u(l,-1,m,g,c.tilesize,c.tilesize),f.push(y)}p.push(f),f=[]}l.data=p,r.push(l)}return r};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(122),u=function(n){for(var a=[],h=[],r=0;r<n.layer.length;r++){var o=n.layer[r],c=o.tilesetName;c!==""&&h.indexOf(c)===-1&&(h.push(c),a.push(new s(c,0,o.tilesize,o.tilesize,0,0)))}return a};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(36),n=t(40),a=t(2),h=t(120),r=t(29),o=t(362),c=t(74),l=t(73),f=t(85),p=t(251),g=t(581),m=t(122),x=new s({initialize:function(T,S){this.scene=T,this.tileWidth=S.tileWidth,this.tileHeight=S.tileHeight,this.width=S.width,this.height=S.height,this.orientation=S.orientation,this.renderOrder=S.renderOrder,this.format=S.format,this.version=S.version,this.properties=S.properties,this.widthInPixels=S.widthInPixels,this.heightInPixels=S.heightInPixels,this.imageCollections=S.imageCollections,this.images=S.images,this.layers=S.layers,this.tilesets=S.tilesets,this.objects=S.objects,this.currentLayerIndex=0,this.hexSideLength=S.hexSideLength;var C=this.orientation;this._convert={WorldToTileXY:p.GetWorldToTileXYFunction(C),WorldToTileX:p.GetWorldToTileXFunction(C),WorldToTileY:p.GetWorldToTileYFunction(C),TileToWorldXY:p.GetTileToWorldXYFunction(C),TileToWorldX:p.GetTileToWorldXFunction(C),TileToWorldY:p.GetTileToWorldYFunction(C)}},createBlankDynamicLayer:function(y,T,S,C,E,P,M,O){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(y,T,S,C,E,P,M,O)},createDynamicLayer:function(y,T,S,C){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(y,T,S,C)},createStaticLayer:function(y,T,S,C){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(y,T,S,C)},setRenderOrder:function(y){var T=["right-down","left-down","right-up","left-up"];return typeof y=="number"&&(y=T[y]),T.indexOf(y)>-1&&(this.renderOrder=y),this},addTilesetImage:function(y,T,S,C,E,P,M){if(y===void 0)return null;if(T==null&&(T=y),!this.scene.sys.textures.exists(T))return console.warn("Invalid Tileset Image: "+T),null;var O=this.scene.sys.textures.get(T),A=this.getTilesetIndex(y);if(A===null&&this.format===n.TILED_JSON)return console.warn("No data found for Tileset: "+y),null;var R=this.tilesets[A];return R?(R.setTileSize(S,C),R.setSpacing(E,P),R.setImage(O),R):(S===void 0&&(S=this.tileWidth),C===void 0&&(C=this.tileHeight),E===void 0&&(E=0),P===void 0&&(P=0),M===void 0&&(M=0),R=new m(y,M,S,C,E,P),R.setImage(O),this.tilesets.push(R),R)},copy:function(y,T,S,C,E,P,M,O){return O=this.getLayer(O),O!==null?(p.Copy(y,T,S,C,E,P,M,O),this):null},createBlankLayer:function(y,T,S,C,E,P,M,O){S===void 0&&(S=0),C===void 0&&(C=0),E===void 0&&(E=this.width),P===void 0&&(P=this.height),M===void 0&&(M=this.tileWidth),O===void 0&&(O=this.tileHeight);var A=this.getLayerIndex(y);if(A!==null)return console.warn("Invalid Tilemap Layer ID: "+y),null;for(var R=new h({name:y,tileWidth:M,tileHeight:O,width:E,height:P,orientation:this.orientation}),F,I=0;I<P;I++){F=[];for(var B=0;B<E;B++)F.push(new f(R,-1,B,I,M,O,this.tileWidth,this.tileHeight));R.data.push(F)}this.layers.push(R),this.currentLayerIndex=this.layers.length-1;var N=new g(this.scene,this,this.currentLayerIndex,T,S,C);return N.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(N),N},createLayer:function(y,T,S,C){var E=this.getLayerIndex(y);if(E===null)return console.warn("Invalid Tilemap Layer ID: "+y),typeof y=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var P=this.layers[E];if(P.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+y),null;this.currentLayerIndex=E,S===void 0&&(S=P.x),C===void 0&&(C=P.y);var M=new g(this.scene,this,E,T,S,C);return M.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(M),M},createFromObjects:function(y,T){var S=[],C=this.getObjectLayer(y);if(!C)return console.warn("createFromObjects: Invalid objectLayerName given: "+y),S;Array.isArray(T)||(T=[T]);for(var E=C.objects,P=0;P<T.length;P++){for(var M=T[P],O=a(M,"id",null),A=a(M,"gid",null),R=a(M,"name",null),F,I=[],B=0;B<E.length;B++)F=E[B],(O===null&&A===null&&R===null||O!==null&&F.id===O||A!==null&&F.gid===A||R!==null&&F.name===R)&&I.push(F);for(var N=a(M,"classType",l),Y=a(M,"scene",this.scene),X=a(M,"container",null),W=a(M,"key",null),w=a(M,"frame",null),L=0;L<I.length;L++){F=I[L];var D=new N(Y);D.setName(F.name),D.setPosition(F.x,F.y),D.setTexture(W,w),F.width&&(D.displayWidth=F.width),F.height&&(D.displayHeight=F.height);var b={x:D.originX*F.width,y:(D.originY-1)*F.height};if(F.rotation){var G=u(F.rotation);o(b,G),D.rotation=G}if(D.x+=b.x,D.y+=b.y,(F.flippedHorizontal!==void 0||F.flippedVertical!==void 0)&&D.setFlip(F.flippedHorizontal,F.flippedVertical),F.visible||(D.visible=!1),Array.isArray(F.properties))F.properties.forEach(function(U){var H=U.name;D[H]!==void 0?D[H]=U.value:D.setData(H,U.value)});else for(var z in F.properties)D[z]!==void 0?D[z]=F.properties[z]:D.setData(z,F.properties[z]);X?X.add(D):Y.add.existing(D),S.push(D)}}return S},createFromTiles:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:p.CreateFromTiles(y,T,S,C,E,P)},fill:function(y,T,S,C,E,P,M){return P===void 0&&(P=!0),M=this.getLayer(M),M===null?null:(p.Fill(y,T,S,C,E,P,M),this)},filterObjects:function(y,T,S){if(typeof y=="string"){var C=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+C),null}return y.objects.filter(T,S)},filterTiles:function(y,T,S,C,E,P,M,O){return O=this.getLayer(O),O===null?null:p.FilterTiles(y,T,S,C,E,P,M,O)},findByIndex:function(y,T,S,C){return C=this.getLayer(C),C===null?null:p.FindByIndex(y,T,S,C)},findObject:function(y,T,S){if(typeof y=="string"){var C=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+C),null}return y.objects.find(T,S)||null},findTile:function(y,T,S,C,E,P,M,O){return O=this.getLayer(O),O===null?null:p.FindTile(y,T,S,C,E,P,M,O)},forEachTile:function(y,T,S,C,E,P,M,O){return O=this.getLayer(O),O===null?null:(p.ForEachTile(y,T,S,C,E,P,M,O),this)},getImageIndex:function(y){return this.getIndex(this.images,y)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(y){return y.name})},getIndex:function(y,T){for(var S=0;S<y.length;S++)if(y[S].name===T)return S;return null},getLayer:function(y){var T=this.getLayerIndex(y);return T!==null?this.layers[T]:null},getObjectLayer:function(y){var T=this.getIndex(this.objects,y);return T!==null?this.objects[T]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(y){return y.name})},getLayerIndex:function(y){return y===void 0?this.currentLayerIndex:typeof y=="string"?this.getLayerIndexByName(y):typeof y=="number"&&y<this.layers.length?y:y instanceof g?y.layerIndex:null},getLayerIndexByName:function(y){return this.getIndex(this.layers,y)},getTileAt:function(y,T,S,C){return C=this.getLayer(C),C===null?null:p.GetTileAt(y,T,S,C)},getTileAtWorldXY:function(y,T,S,C,E){return E=this.getLayer(E),E===null?null:p.GetTileAtWorldXY(y,T,S,C,E)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(y){return y.name})},getTilesWithin:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:p.GetTilesWithin(y,T,S,C,E,P)},getTilesWithinShape:function(y,T,S,C){return C=this.getLayer(C),C===null?null:p.GetTilesWithinShape(y,T,S,C)},getTilesWithinWorldXY:function(y,T,S,C,E,P,M){return M=this.getLayer(M),M===null?null:p.GetTilesWithinWorldXY(y,T,S,C,E,P,M)},getTileset:function(y){var T=this.getIndex(this.tilesets,y);return T!==null?this.tilesets[T]:null},getTilesetIndex:function(y){return this.getIndex(this.tilesets,y)},hasTileAt:function(y,T,S){return S=this.getLayer(S),S===null?null:p.HasTileAt(y,T,S)},hasTileAtWorldXY:function(y,T,S,C){return C=this.getLayer(C),C===null?null:p.HasTileAtWorldXY(y,T,S,C)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(y){this.setLayer(y)}},putTileAt:function(y,T,S,C,E){return C===void 0&&(C=!0),E=this.getLayer(E),E===null?null:p.PutTileAt(y,T,S,C,E)},putTileAtWorldXY:function(y,T,S,C,E,P){return C===void 0&&(C=!0),P=this.getLayer(P),P===null?null:p.PutTileAtWorldXY(y,T,S,C,E,P)},putTilesAt:function(y,T,S,C,E){return C===void 0&&(C=!0),E=this.getLayer(E),E===null?null:(p.PutTilesAt(y,T,S,C,E),this)},randomize:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:(p.Randomize(y,T,S,C,E,P),this)},calculateFacesAt:function(y,T,S){return S=this.getLayer(S),S===null?null:(p.CalculateFacesAt(y,T,S),this)},calculateFacesWithin:function(y,T,S,C,E){return E=this.getLayer(E),E===null?null:(p.CalculateFacesWithin(y,T,S,C,E),this)},removeLayer:function(y){var T=this.getLayerIndex(y);if(T!==null){c(this.layers,T);for(var S=T;S<this.layers.length;S++)this.layers[S].tilemapLayer&&this.layers[S].tilemapLayer.layerIndex--;return this.currentLayerIndex===T&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(y){var T=this.getLayerIndex(y);return T!==null?(y=this.layers[T],y.destroy(),c(this.layers,T),this.currentLayerIndex===T&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var y=this.layers,T=0;T<y.length;T++)y[T].tilemapLayer&&y[T].tilemapLayer.destroy(!1);return y.length=0,this.currentLayerIndex=0,this},removeTile:function(y,T,S){T===void 0&&(T=-1),S===void 0&&(S=!0);var C=[];Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++){var P=y[E];C.push(this.removeTileAt(P.x,P.y,!0,S,P.tilemapLayer)),T>-1&&this.putTileAt(T,P.x,P.y,S,P.tilemapLayer)}return C},removeTileAt:function(y,T,S,C,E){return S===void 0&&(S=!0),C===void 0&&(C=!0),E=this.getLayer(E),E===null?null:p.RemoveTileAt(y,T,S,C,E)},removeTileAtWorldXY:function(y,T,S,C,E,P){return S===void 0&&(S=!0),C===void 0&&(C=!0),P=this.getLayer(P),P===null?null:p.RemoveTileAtWorldXY(y,T,S,C,E,P)},renderDebug:function(y,T,S){return S=this.getLayer(S),S===null?null:(this.orientation===r.ORTHOGONAL&&p.RenderDebug(y,T,S),this)},renderDebugFull:function(y,T){for(var S=this.layers,C=0;C<S.length;C++)p.RenderDebug(y,T,S[C]);return this},replaceByIndex:function(y,T,S,C,E,P,M){return M=this.getLayer(M),M===null?null:(p.ReplaceByIndex(y,T,S,C,E,P,M),this)},setCollision:function(y,T,S,C,E){return T===void 0&&(T=!0),S===void 0&&(S=!0),E===void 0&&(E=!0),C=this.getLayer(C),C===null?null:(p.SetCollision(y,T,S,C,E),this)},setCollisionBetween:function(y,T,S,C,E){return S===void 0&&(S=!0),C===void 0&&(C=!0),E=this.getLayer(E),E===null?null:(p.SetCollisionBetween(y,T,S,C,E),this)},setCollisionByProperty:function(y,T,S,C){return T===void 0&&(T=!0),S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:(p.SetCollisionByProperty(y,T,S,C),this)},setCollisionByExclusion:function(y,T,S,C){return T===void 0&&(T=!0),S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:(p.SetCollisionByExclusion(y,T,S,C),this)},setCollisionFromCollisionGroup:function(y,T,S){return y===void 0&&(y=!0),T===void 0&&(T=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionFromCollisionGroup(y,T,S),this)},setTileIndexCallback:function(y,T,S,C){return C=this.getLayer(C),C===null?null:(p.SetTileIndexCallback(y,T,S,C),this)},setTileLocationCallback:function(y,T,S,C,E,P,M){return M=this.getLayer(M),M===null?null:(p.SetTileLocationCallback(y,T,S,C,E,P,M),this)},setLayer:function(y){var T=this.getLayerIndex(y);return T!==null&&(this.currentLayerIndex=T),this},setBaseTileSize:function(y,T){this.tileWidth=y,this.tileHeight=T,this.widthInPixels=this.width*y,this.heightInPixels=this.height*T;for(var S=0;S<this.layers.length;S++){this.layers[S].baseTileWidth=y,this.layers[S].baseTileHeight=T;for(var C=this.layers[S].data,E=this.layers[S].width,P=this.layers[S].height,M=0;M<P;M++)for(var O=0;O<E;O++){var A=C[M][O];A!==null&&A.setSize(void 0,void 0,y,T)}}return this},setLayerTileSize:function(y,T,S){if(S=this.getLayer(S),S===null)return this;S.tileWidth=y,S.tileHeight=T;for(var C=S.data,E=S.width,P=S.height,M=0;M<P;M++)for(var O=0;O<E;O++){var A=C[M][O];A!==null&&A.setSize(y,T)}return this},shuffle:function(y,T,S,C,E){return E=this.getLayer(E),E===null?null:(p.Shuffle(y,T,S,C,E),this)},swapByIndex:function(y,T,S,C,E,P,M){return M=this.getLayer(M),M===null?null:(p.SwapByIndex(y,T,S,C,E,P,M),this)},tileToWorldX:function(y,T,S){return S=this.getLayer(S),S===null?null:this._convert.TileToWorldX(y,T,S)},tileToWorldY:function(y,T,S){return S=this.getLayer(S),S===null?null:this._convert.TileToWorldY(y,T,S)},tileToWorldXY:function(y,T,S,C,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldXY(y,T,S,C,E)},weightedRandomize:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:(p.WeightedRandomize(T,S,C,E,y,P),this)},worldToTileX:function(y,T,S,C){return C=this.getLayer(C),C===null?null:this._convert.WorldToTileX(y,T,S,C)},worldToTileY:function(y,T,S,C){return C=this.getLayer(C),C===null?null:this._convert.WorldToTileY(y,T,S,C)},worldToTileXY:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileXY(y,T,S,C,E,P)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});e.exports=x},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(251),h=t(1456),r=new s({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Depth,u.Flip,u.GetBounds,u.Origin,u.Pipeline,u.Transform,u.Visible,u.ScrollFactor,h],initialize:function(c,l,f,p,g,m){n.call(this,c,"TilemapLayer"),this.isTilemap=!0,this.tilemap=l,this.layerIndex=f,this.layer=l.layers[f],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(p),this.setAlpha(this.layer.alpha),this.setPosition(g,m),this.setOrigin(),this.setSize(l.tileWidth*this.layer.width,l.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(o){var c=[],l=[],f=this.tilemap;Array.isArray(o)||(o=[o]);for(var p=0;p<o.length;p++){var g=o[p];if(typeof g=="string"&&(g=f.getTileset(g)),g){l.push(g);for(var m=g.firstgid,x=0;x<g.total;x++)c[m+x]=g}}this.gidMap=c,this.tileset=l},setRenderOrder:function(o){var c=["right-down","left-down","right-up","left-up"];return typeof o=="string"&&(o=c.indexOf(o)),o>=0&&o<4&&(this._renderOrder=o),this},calculateFacesAt:function(o,c){return a.CalculateFacesAt(o,c,this.layer),this},calculateFacesWithin:function(o,c,l,f){return a.CalculateFacesWithin(o,c,l,f,this.layer),this},createFromTiles:function(o,c,l,f,p){return a.CreateFromTiles(o,c,l,f,p,this.layer)},cull:function(o){return this.cullCallback(this.layer,o,this.culledTiles,this._renderOrder)},copy:function(o,c,l,f,p,g,m){return a.Copy(o,c,l,f,p,g,m,this.layer),this},fill:function(o,c,l,f,p,g){return a.Fill(o,c,l,f,p,g,this.layer),this},filterTiles:function(o,c,l,f,p,g,m){return a.FilterTiles(o,c,l,f,p,g,m,this.layer)},findByIndex:function(o,c,l){return a.FindByIndex(o,c,l,this.layer)},findTile:function(o,c,l,f,p,g,m){return a.FindTile(o,c,l,f,p,g,m,this.layer)},forEachTile:function(o,c,l,f,p,g,m){return a.ForEachTile(o,c,l,f,p,g,m,this.layer),this},getTileAt:function(o,c,l){return a.GetTileAt(o,c,l,this.layer)},getTileAtWorldXY:function(o,c,l,f){return a.GetTileAtWorldXY(o,c,l,f,this.layer)},getTilesWithin:function(o,c,l,f,p){return a.GetTilesWithin(o,c,l,f,p,this.layer)},getTilesWithinShape:function(o,c,l){return a.GetTilesWithinShape(o,c,l,this.layer)},getTilesWithinWorldXY:function(o,c,l,f,p,g){return a.GetTilesWithinWorldXY(o,c,l,f,p,g,this.layer)},hasTileAt:function(o,c){return a.HasTileAt(o,c,this.layer)},hasTileAtWorldXY:function(o,c,l){return a.HasTileAtWorldXY(o,c,l,this.layer)},putTileAt:function(o,c,l,f){return a.PutTileAt(o,c,l,f,this.layer)},putTileAtWorldXY:function(o,c,l,f,p){return a.PutTileAtWorldXY(o,c,l,f,p,this.layer)},putTilesAt:function(o,c,l,f){return a.PutTilesAt(o,c,l,f,this.layer),this},randomize:function(o,c,l,f,p){return a.Randomize(o,c,l,f,p,this.layer),this},removeTileAt:function(o,c,l,f){return a.RemoveTileAt(o,c,l,f,this.layer)},removeTileAtWorldXY:function(o,c,l,f,p){return a.RemoveTileAtWorldXY(o,c,l,f,p,this.layer)},renderDebug:function(o,c){return a.RenderDebug(o,c,this.layer),this},replaceByIndex:function(o,c,l,f,p,g){return a.ReplaceByIndex(o,c,l,f,p,g,this.layer),this},setSkipCull:function(o){return o===void 0&&(o=!0),this.skipCull=o,this},setCullPadding:function(o,c){return o===void 0&&(o=1),c===void 0&&(c=1),this.cullPaddingX=o,this.cullPaddingY=c,this},setCollision:function(o,c,l,f){return a.SetCollision(o,c,l,this.layer,f),this},setCollisionBetween:function(o,c,l,f){return a.SetCollisionBetween(o,c,l,f,this.layer),this},setCollisionByProperty:function(o,c,l){return a.SetCollisionByProperty(o,c,l,this.layer),this},setCollisionByExclusion:function(o,c,l){return a.SetCollisionByExclusion(o,c,l,this.layer),this},setCollisionFromCollisionGroup:function(o,c){return a.SetCollisionFromCollisionGroup(o,c,this.layer),this},setTileIndexCallback:function(o,c,l){return a.SetTileIndexCallback(o,c,l,this.layer),this},setTileLocationCallback:function(o,c,l,f,p,g){return a.SetTileLocationCallback(o,c,l,f,p,g,this.layer),this},shuffle:function(o,c,l,f){return a.Shuffle(o,c,l,f,this.layer),this},swapByIndex:function(o,c,l,f,p,g){return a.SwapByIndex(o,c,l,f,p,g,this.layer),this},tileToWorldX:function(o,c){return this.tilemap.tileToWorldX(o,c,this)},tileToWorldY:function(o,c){return this.tilemap.tileToWorldY(o,c,this)},tileToWorldXY:function(o,c,l,f){return this.tilemap.tileToWorldXY(o,c,l,f,this)},weightedRandomize:function(o,c,l,f,p){return a.WeightedRandomize(c,l,f,p,o,this.layer),this},worldToTileX:function(o,c,l){return this.tilemap.worldToTileX(o,c,l,this)},worldToTileY:function(o,c,l){return this.tilemap.worldToTileY(o,c,l,this)},worldToTileXY:function(o,c,l,f,p){return this.tilemap.worldToTileXY(o,c,l,f,p,this)},destroy:function(o){o===void 0&&(o=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),o&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],n.prototype.destroy.call(this))}});e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=new s({initialize:function(h){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(h)},reset:function(a){return this.delay=u(a,"delay",0),this.repeat=u(a,"repeat",0),this.loop=u(a,"loop",!1),this.callback=u(a,"callback",void 0),this.callbackScope=u(a,"callbackScope",this.callback),this.args=u(a,"args",[]),this.timeScale=u(a,"timeScale",1),this.startAt=u(a,"startAt",0),this.paused=u(a,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var a=this.delay+this.delay*this.repeat,h=this.elapsed+this.delay*(this.repeat-this.repeatCount);return h/a}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(a){a===void 0&&(a=!1),this.elapsed=this.delay,this.hasDispatched=!a,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1465),u=function(n){var a,h=[];if(n.hasOwnProperty("props"))for(a in n.props)a.substr(0,1)!=="_"&&h.push({key:a,value:n.props[a]});else for(a in n)s.indexOf(a)===-1&&a.substr(0,1)!=="_"&&h.push({key:a,value:n[a]});return h};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=function(n){var a=s(n,"tweens",null);return a===null?[]:(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a]),a)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(265),u=t(13),n=t(99),a=t(80),h=t(162),r=t(6),o=t(264),c=t(266),l=t(268),f=function(p,g,m){m===void 0&&(m=s);var x=r(g,"from",0),y=r(g,"to",1),T=[{value:x}],S=h(g,"delay",m.delay),C=h(g,"duration",m.duration),E=r(g,"easeParams",m.easeParams),P=a(r(g,"ease",m.ease),E),M=h(g,"hold",m.hold),O=h(g,"repeat",m.repeat),A=h(g,"repeatDelay",m.repeatDelay),R=n(g,"yoyo",m.yoyo),F=[],I=o("value",y),B=l(T[0],0,"value",I.getEnd,I.getStart,I.getActive,P,S,C,R,M,O,A,!1,!1);B.start=x,B.current=x,B.to=y,F.push(B);var N=new c(p,F,T);N.offset=u(g,"offset",null),N.completeDelay=u(g,"completeDelay",0),N.loop=Math.round(u(g,"loop",0)),N.loopDelay=Math.round(u(g,"loopDelay",0)),N.paused=n(g,"paused",!1),N.useFrames=n(g,"useFrames",!1);for(var Y=r(g,"callbackScope",N),X=[N,null],W=c.TYPES,w=0;w<W.length;w++){var L=W[w],D=r(g,L,!1);if(D){var b=r(g,L+"Scope",Y),G=r(g,L+"Params",[]);N.setCallback(L,D,X.concat(G),b)}}return N};e.exports=f},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(80),u=t(6),n=t(14),a=function(h,r){r===void 0&&(r={});var o,c=u(r,"start",0),l=u(r,"ease",null),f=u(r,"grid",null),p=u(r,"from",0),g=p==="first",m=p==="center",x=p==="last",y=typeof p=="number",T=Array.isArray(h),S=parseFloat(T?h[0]:h),C=T?parseFloat(h[1]):0,E=Math.max(S,C);if(T&&(c+=S),f){var P=f[0],M=f[1],O=0,A=0,R=0,F=0,I=[];x?(O=P-1,A=M-1):y?(O=p%P,A=Math.floor(p/P)):m&&(O=(P-1)/2,A=(M-1)/2);for(var B=n.MIN_SAFE_INTEGER,N=0;N<M;N++){I[N]=[];for(var Y=0;Y<P;Y++){R=O-Y,F=A-N;var X=Math.sqrt(R*R+F*F);X>B&&(B=X),I[N][Y]=X}}}var W=l?s(l):null;return f?o=function(w,L,D,b){var G=0,z=b%P,U=Math.floor(b/P);z>=0&&z<P&&U>=0&&U<M&&(G=I[U][z]);var H;if(T){var $=C-S;W?H=G/B*$*W(G/B):H=G/B*$}else W?H=G*S*W(G/B):H=G*S;return H+c}:o=function(w,L,D,b,G){G--;var z;g?z=b:m?z=Math.abs(G/2-b):x?z=G-b:y&&(z=Math.abs(p-b));var U;if(T){var H;m?H=(C-S)/G*(z*2):H=(C-S)/G*z,W?U=H*W(z/G):U=H}else W?U=G*E*W(z/G):U=z*S;return U+c},o};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=t(265),n=t(13),a=t(99),h=t(80),r=t(162),o=t(263),c=t(584),l=t(6),f=t(588),p=t(163),g=function(m,x){var y=new f(m);y.completeDelay=n(x,"completeDelay",0),y.loop=Math.round(n(x,"loop",0)),y.loopDelay=Math.round(n(x,"loopDelay",0)),y.paused=a(x,"paused",!1),y.useFrames=a(x,"useFrames",!1);var T=l(x,"callbackScope",y),S=[y],C=l(x,"onStart",!1);if(C){var E=l(x,"onStartScope",T),P=l(x,"onStartParams",[]);y.setCallback("onStart",C,S.concat(P),E)}var M=l(x,"onUpdate",!1);if(M){var O=l(x,"onUpdateScope",T),A=l(x,"onUpdateParams",[]);y.setCallback("onUpdate",M,S.concat(A),O)}var R=l(x,"onLoop",!1);if(R){var F=l(x,"onLoopScope",T),I=l(x,"onLoopParams",[]);y.setCallback("onLoop",R,S.concat(I),F)}var B=l(x,"onYoyo",!1);if(B){var N=l(x,"onYoyoScope",T),Y=l(x,"onYoyoParams",[]);y.setCallback("onYoyo",B,S.concat(null,Y),N)}var X=l(x,"onComplete",!1);if(X){var W=l(x,"onCompleteScope",T),w=l(x,"onCompleteParams",[]);y.setCallback("onComplete",X,S.concat(w),W)}var L=c(x);if(L.length===0)return y.paused=!0,y;var D=s(u);D.targets=o(x);var b=n(x,"totalDuration",0);b>0?D.duration=Math.floor(b/L.length):D.duration=r(x,"duration",D.duration),D.delay=r(x,"delay",D.delay),D.easeParams=l(x,"easeParams",D.easeParams),D.ease=h(l(x,"ease",D.ease),D.easeParams),D.hold=r(x,"hold",D.hold),D.repeat=r(x,"repeat",D.repeat),D.repeatDelay=r(x,"repeatDelay",D.repeatDelay),D.yoyo=a(x,"yoyo",D.yoyo),D.flipX=a(x,"flipX",D.flipX),D.flipY=a(x,"flipY",D.flipY);for(var G=0;G<L.length;G++)y.queue(p(y,L[G],D));return y};e.exports=g},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(267),a=t(163),h=t(100),r=new s({Extends:u,initialize:function(c){u.call(this),this.manager=c,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=h.PENDING_ADD,this._pausedState=h.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(o,c){this.emit(o,this),c&&c.func.apply(c.scope,c.params)},setTimeScale:function(o){return this.timeScale=o,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===h.ACTIVE},add:function(o){return this.queue(a(this,o))},queue:function(o){return this.isPlaying()||(o.parent=this,o.parentIsTimeline=!0,this.data.push(o),this.totalData=this.data.length),this},hasOffset:function(o){return o.offset!==null},isOffsetAbsolute:function(o){return typeof o=="number"},isOffsetRelative:function(o){var c=typeof o;if(c==="string"){var l=o[0];if(l==="-"||l==="+")return!0}return!1},getRelativeOffset:function(o,c){var l=o[0],f=parseFloat(o.substr(2)),p=c;switch(l){case"+":p+=f;break;case"-":p-=f;break}return Math.max(0,p)},calcDuration:function(){for(var o=0,c=0,l=0,f=0;f<this.totalData;f++){var p=this.data[f];p.init(),this.hasOffset(p)?this.isOffsetAbsolute(p.offset)?(p.calculatedOffset=p.offset,p.offset===0&&(l=0)):this.isOffsetRelative(p.offset)&&(p.calculatedOffset=this.getRelativeOffset(p.offset,o)):p.calculatedOffset=l,o=p.totalDuration+p.calculatedOffset,c+=p.totalDuration,l+=p.totalDuration}this.duration=c,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=h.PAUSED,!1):!0},resetTweens:function(o){for(var c=0;c<this.totalData;c++){var l=this.data[c];l.play(o)}},setCallback:function(o,c,l,f){return r.TYPES.indexOf(o)!==-1&&(this.callbacks[o]={func:c,scope:f,params:l}),this},makeActive:function(o){return this.manager.makeActive(o)},play:function(){if(this.state!==h.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=h.ACTIVE;this.dispatchTimelineEvent(n.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=h.LOOP_DELAY):(this.state=h.ACTIVE,this.dispatchTimelineEvent(n.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=h.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=h.PENDING_REMOVE,this.dispatchTimelineEvent(n.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(o,c){if(this.state!==h.PAUSED){switch(this.useFrames&&(c=1*this.manager.timeScale),c*=this.timeScale,this.elapsed+=c,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=c,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case h.ACTIVE:for(var l=this.totalData,f=0;f<this.totalData;f++){var p=this.data[f];p.update(o,c)&&l--}this.dispatchTimelineEvent(n.TIMELINE_UPDATE,this.callbacks.onUpdate),l===0&&this.nextState();break;case h.LOOP_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=h.ACTIVE,this.dispatchTimelineEvent(n.TIMELINE_LOOP,this.callbacks.onLoop));break;case h.COMPLETE_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=h.PENDING_REMOVE,this.dispatchTimelineEvent(n.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===h.PENDING_REMOVE}},stop:function(){this.state=h.PENDING_REMOVE},pause:function(){if(this.state!==h.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=h.PAUSED,this.emit(n.TIMELINE_PAUSE,this),this},resume:function(){return this.state===h.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(n.TIMELINE_RESUME,this)),this},hasTarget:function(o){for(var c=0;c<this.data.length;c++)if(this.data[c].hasTarget(o))return!0;return!1},destroy:function(){for(var o=0;o<this.data.length;o++)this.data[o].stop()}});r.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],e.exports=r},function(e,d,t){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n=t(32),a=t(2),h=t(64),r={parseBody:function(o,c,l,f){f===void 0&&(f={});for(var p=a(l,"fixtures",[]),g=[],m=0;m<p.length;m++)for(var x=this.parseFixture(p[m]),y=0;y<x.length;y++)g.push(x[y]);var T=n.clone(l,!0);n.extend(T,f,!0),delete T.fixtures,delete T.type;var S=u.create(T);return u.setParts(S,g),u.setPosition(S,{x:o,y:c}),S},parseFixture:function(o){var c=n.extend({},!1,o);delete c.circle,delete c.vertices;var l;if(o.circle){var f=a(o.circle,"x"),p=a(o.circle,"y"),g=a(o.circle,"radius");l=[s.circle(f,p,g,c)]}else o.vertices&&(l=this.parseVertices(o.vertices,c));return l},parseVertices:function(o,c){c===void 0&&(c={});for(var l=[],f=0;f<o.length;f++)h.clockwiseSort(o[f]),l.push(u.create(n.extend({position:h.centre(o[f]),vertices:o[f]},c)));return s.flagCoincidentParts(l)}};e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n={parseBody:function(a,h,r,o){o===void 0&&(o={});var c,l=r.vertices;if(l.length===1)o.vertices=l[0],c=u.create(o),s.flagCoincidentParts(c.parts);else{for(var f=[],p=0;p<l.length;p++){var g=u.create({vertices:l[p]});f.push(g)}s.flagCoincidentParts(f),o.parts=f,c=u.create(o)}return c.label=r.label,u.setPosition(c,{x:a,y:h}),c}};e.exports=n},function(e,d,t){var s={};e.exports=s;var u=t(118),n=t(128),a=t(32),h=t(41),r=t(86);(function(){s.stack=function(o,c,l,f,p,g,m){for(var x=u.create({label:"Stack"}),y=o,T=c,S,C=0,E=0;E<f;E++){for(var P=0,M=0;M<l;M++){var O=m(y,T,M,E,S,C);if(O){var A=O.bounds.max.y-O.bounds.min.y,R=O.bounds.max.x-O.bounds.min.x;A>P&&(P=A),h.translate(O,{x:R*.5,y:A*.5}),y=O.bounds.max.x+p,u.addBody(x,O),S=O,C+=1}else y+=p}T+=P+g,y=o}return x},s.chain=function(o,c,l,f,p,g){for(var m=o.bodies,x=1;x<m.length;x++){var y=m[x-1],T=m[x],S=y.bounds.max.y-y.bounds.min.y,C=y.bounds.max.x-y.bounds.min.x,E=T.bounds.max.y-T.bounds.min.y,P=T.bounds.max.x-T.bounds.min.x,M={bodyA:y,pointA:{x:C*c,y:S*l},bodyB:T,pointB:{x:P*f,y:E*p}},O=a.extend(M,g);u.addConstraint(o,n.create(O))}return o.label+=" Chain",o},s.mesh=function(o,c,l,f,p){var g=o.bodies,m,x,y,T,S;for(m=0;m<l;m++){for(x=1;x<c;x++)y=g[x-1+m*c],T=g[x+m*c],u.addConstraint(o,n.create(a.extend({bodyA:y,bodyB:T},p)));if(m>0)for(x=0;x<c;x++)y=g[x+(m-1)*c],T=g[x+m*c],u.addConstraint(o,n.create(a.extend({bodyA:y,bodyB:T},p))),f&&x>0&&(S=g[x-1+(m-1)*c],u.addConstraint(o,n.create(a.extend({bodyA:S,bodyB:T},p)))),f&&x<c-1&&(S=g[x+1+(m-1)*c],u.addConstraint(o,n.create(a.extend({bodyA:S,bodyB:T},p))))}return o.label+=" Mesh",o},s.pyramid=function(o,c,l,f,p,g,m){return s.stack(o,c,l,f,p,g,function(x,y,T,S,C,E){var P=Math.min(f,Math.ceil(l/2)),M=C?C.bounds.max.x-C.bounds.min.x:0;if(!(S>P)){S=P-S;var O=S,A=l-1-S;if(!(T<O||T>A)){E===1&&h.translate(C,{x:(T+(l%2===1?1:-1))*M,y:0});var R=C?T*M:0;return m(o+R+T*p,y,T,S,C,E)}}})},s.newtonsCradle=function(o,c,l,f,p){for(var g=u.create({label:"Newtons Cradle"}),m=0;m<l;m++){var x=1.9,y=r.circle(o+m*(f*x),c+p,f,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),T=n.create({pointA:{x:o+m*(f*x),y:c},bodyB:y});u.addBody(g,y),u.addConstraint(g,T)}return g},s.car=function(o,c,l,f,p){var g=h.nextGroup(!0),m=20,x=-l*.5+m,y=l*.5-m,T=0,S=u.create({label:"Car"}),C=r.rectangle(o,c,l,f,{collisionFilter:{group:g},chamfer:{radius:f*.5},density:2e-4}),E=r.circle(o+x,c+T,p,{collisionFilter:{group:g},friction:.8}),P=r.circle(o+y,c+T,p,{collisionFilter:{group:g},friction:.8}),M=n.create({bodyB:C,pointB:{x,y:T},bodyA:E,stiffness:1,length:0}),O=n.create({bodyB:C,pointB:{x:y,y:T},bodyA:P,stiffness:1,length:0});return u.addBody(S,C),u.addBody(S,E),u.addBody(S,P),u.addConstraint(S,M),u.addConstraint(S,O),S},s.softBody=function(o,c,l,f,p,g,m,x,y,T){y=a.extend({inertia:1/0},y),T=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},T);var S=s.stack(o,c,l,f,p,g,function(C,E){return r.circle(C,E,x,y)});return s.mesh(S,l,f,m,T),S.label="Soft Body",S}})()},function(e,d,t){var s={};e.exports=s,t(84);var u=t(32);(function(){s.pathToVertices=function(n,a){typeof window!="undefined"&&!("SVGPathSeg"in window)&&u.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,r,o,c,l,f,p,g,m,x,y=[],T,S,C=0,E=0,P=0;a=a||15;var M=function(A,R,F){var I=F%2===1&&F>1;if(!m||A!=m.x||R!=m.y){m&&I?(T=m.x,S=m.y):(T=0,S=0);var B={x:T+A,y:S+R};(I||!m)&&(m=B),y.push(B),E=T+A,P=S+R}},O=function(A){var R=A.pathSegTypeAsLetter.toUpperCase();if(R!=="Z"){switch(R){case"M":case"L":case"T":case"C":case"S":case"Q":E=A.x,P=A.y;break;case"H":E=A.x;break;case"V":P=A.y;break}M(E,P,A.pathSegType)}};for(s._svgPathToAbsolute(n),o=n.getTotalLength(),f=[],h=0;h<n.pathSegList.numberOfItems;h+=1)f.push(n.pathSegList.getItem(h));for(p=f.concat();C<o;){if(x=n.getPathSegAtLength(C),l=f[x],l!=g){for(;p.length&&p[0]!=l;)O(p.shift());g=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":c=n.getPointAtLength(C),M(c.x,c.y,0);break}C+=a}for(h=0,r=p.length;h<r;++h)O(p[h]);return y},s._svgPathToAbsolute=function(n){for(var a,h,r,o,c,l,f=n.pathSegList,p=0,g=0,m=f.numberOfItems,x=0;x<m;++x){var y=f.getItem(x),T=y.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(T))"x"in y&&(p=y.x),"y"in y&&(g=y.y);else switch("x1"in y&&(r=p+y.x1),"x2"in y&&(c=p+y.x2),"y1"in y&&(o=g+y.y1),"y2"in y&&(l=g+y.y2),"x"in y&&(p+=y.x),"y"in y&&(g+=y.y),T){case"m":f.replaceItem(n.createSVGPathSegMovetoAbs(p,g),x);break;case"l":f.replaceItem(n.createSVGPathSegLinetoAbs(p,g),x);break;case"h":f.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(p),x);break;case"v":f.replaceItem(n.createSVGPathSegLinetoVerticalAbs(g),x);break;case"c":f.replaceItem(n.createSVGPathSegCurvetoCubicAbs(p,g,r,o,c,l),x);break;case"s":f.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(p,g,c,l),x);break;case"q":f.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(p,g,r,o),x);break;case"t":f.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(p,g),x);break;case"a":f.replaceItem(n.createSVGPathSegArcAbs(p,g,y.r1,y.r2,y.angle,y.largeArcFlag,y.sweepFlag),x);break;case"z":case"Z":p=a,g=h;break}(T=="M"||T=="m")&&(a=p,h=g)}}})()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n=t(0),a=t(249),h=t(9),r=t(2),o=t(126),c=t(64),l=new n({Extends:h,Mixins:[a.Bounce,a.Collision,a.Friction,a.Gravity,a.Mass,a.Sensor,a.Sleep,a.Static],initialize:function(p,g,m){h.call(this),this.tile=g,this.world=p,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var x=r(m,"body",null),y=r(m,"addToWorld",!0);if(x)this.setBody(x,y);else{var T=g.getCollisionGroup(),S=r(T,"objects",[]);S.length>0?this.setFromTileCollision(m):this.setFromTileRectangle(m)}},setFromTileRectangle:function(f){f===void 0&&(f={}),o(f,"isStatic")||(f.isStatic=!0),o(f,"addToWorld")||(f.addToWorld=!0);var p=this.tile.getBounds(),g=p.x+p.width/2,m=p.y+p.height/2,x=s.rectangle(g,m,p.width,p.height,f);return this.setBody(x,f.addToWorld),this},setFromTileCollision:function(f){f===void 0&&(f={}),o(f,"isStatic")||(f.isStatic=!0),o(f,"addToWorld")||(f.addToWorld=!0);for(var p=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,m=this.tile.getLeft(),x=this.tile.getTop(),y=this.tile.getCollisionGroup(),T=r(y,"objects",[]),S=[],C=0;C<T.length;C++){var E=T[C],P=m+E.x*p,M=x+E.y*g,O=E.width*p,A=E.height*g,R=null;if(E.rectangle)R=s.rectangle(P+O/2,M+A/2,O,A,f);else if(E.ellipse)R=s.circle(P+O/2,M+A/2,O/2,f);else if(E.polygon||E.polyline){var F=E.polygon?E.polygon:E.polyline,I=F.map(function(Y){return{x:Y.x*p,y:Y.y*g}}),B=c.create(I),N=c.centre(B);P+=N.x,M+=N.y,R=s.fromVertices(P,M,B,f)}R&&S.push(R)}return S.length===1?this.setBody(S[0],f.addToWorld):S.length>1&&(f.parts=S,this.setBody(u.create(f),f.addToWorld)),this},setBody:function(f,p){return p===void 0&&(p=!0),this.body&&this.removeBody(),this.body=f,this.body.gameObject=this,p&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});e.exports=l},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1399);s.Body=t(41),s.Composite=t(118),s.World=t(596),s.Detector=t(273),s.Grid=t(597),s.Pairs=t(598),s.Pair=t(250),s.Query=t(1400),s.Resolver=t(599),s.SAT=t(274),s.Constraint=t(128),s.Common=t(32),s.Engine=t(1401),s.Events=t(166),s.Sleeping=t(165),s.Plugin=t(595),s.Bodies=t(86),s.Composites=t(591),s.Axes=t(271),s.Bounds=t(84),s.Svg=t(592),s.Vector=t(83),s.Vertices=t(64),s.World.add=s.Composite.add,s.World.remove=s.Composite.remove,s.World.addComposite=s.Composite.addComposite,s.World.addBody=s.Composite.addBody,s.World.addConstraint=s.Composite.addConstraint,s.World.clear=s.Composite.clear,e.exports=s},function(e,d,t){var s={};e.exports=s;var u=t(32);(function(){s._registry={},s.register=function(n){if(s.isPlugin(n)||u.warn("Plugin.register:",s.toString(n),"does not implement all required fields."),n.name in s._registry){var a=s._registry[n.name],h=s.versionParse(n.version).number,r=s.versionParse(a.version).number;h>r?(u.warn("Plugin.register:",s.toString(a),"was upgraded to",s.toString(n)),s._registry[n.name]=n):h<r?u.warn("Plugin.register:",s.toString(a),"can not be downgraded to",s.toString(n)):n!==a&&u.warn("Plugin.register:",s.toString(n),"is already registered to different plugin object")}else s._registry[n.name]=n;return n},s.resolve=function(n){return s._registry[s.dependencyParse(n).name]},s.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},s.isPlugin=function(n){return n&&n.name&&n.version&&n.install},s.isUsed=function(n,a){return n.used.indexOf(a)>-1},s.isFor=function(n,a){var h=n.for&&s.dependencyParse(n.for);return!n.for||a.name===h.name&&s.versionSatisfies(a.version,h.range)},s.use=function(n,a){if(n.uses=(n.uses||[]).concat(a||[]),n.uses.length===0){u.warn("Plugin.use:",s.toString(n),"does not specify any dependencies to install.");return}for(var h=s.dependencies(n),r=u.topologicalSort(h),o=[],c=0;c<r.length;c+=1)if(r[c]!==n.name){var l=s.resolve(r[c]);if(!l){o.push("\u274C "+r[c]);continue}s.isUsed(n,l.name)||(s.isFor(l,n)||(u.warn("Plugin.use:",s.toString(l),"is for",l.for,"but installed on",s.toString(n)+"."),l._warned=!0),l.install?l.install(n):(u.warn("Plugin.use:",s.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(o.push("\u{1F536} "+s.toString(l)),delete l._warned):o.push("\u2705 "+s.toString(l)),n.used.push(l.name))}o.length>0&&!l.silent&&u.info(o.join("  "))},s.dependencies=function(n,a){var h=s.dependencyParse(n),r=h.name;if(a=a||{},!(r in a)){n=s.resolve(n)||n,a[r]=u.map(n.uses||[],function(c){s.isPlugin(c)&&s.register(c);var l=s.dependencyParse(c),f=s.resolve(c);return f&&!s.versionSatisfies(f.version,l.range)?(u.warn("Plugin.dependencies:",s.toString(f),"does not satisfy",s.toString(l),"used by",s.toString(h)+"."),f._warned=!0,n._warned=!0):f||(u.warn("Plugin.dependencies:",s.toString(c),"used by",s.toString(h),"could not be resolved."),n._warned=!0),l.name});for(var o=0;o<a[r].length;o+=1)s.dependencies(a[r][o],a);return a}},s.dependencyParse=function(n){if(u.isString(n)){var a=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return a.test(n)||u.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},s.versionParse=function(n){var a=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;a.test(n)||u.warn("Plugin.versionParse:",n,"is not a valid version or range.");var h=n.split("-");n=h[0];var r=isNaN(Number(n[0])),o=r?n.substr(1):n,c=u.map(o.split("."),function(l){return Number(l)});return{isRange:r,version:o,range:n,operator:r?n[0]:"",parts:c,prerelease:h[1],number:c[0]*1e8+c[1]*1e4+c[2]}},s.versionSatisfies=function(n,a){a=a||"*";var h=s.versionParse(a),r=h.parts,o=s.versionParse(n),c=o.parts;if(h.isRange){if(h.operator==="*"||n==="*")return!0;if(h.operator==="~")return c[0]===r[0]&&c[1]===r[1]&&c[2]>=r[2];if(h.operator==="^")return r[0]>0?c[0]===r[0]&&o.number>=h.number:r[1]>0?c[1]===r[1]&&c[2]>=r[2]:c[2]===r[2]}return n===a||n==="*"}})()},function(e,d,t){var s={};e.exports=s;var u=t(118);t(128);var n=t(32);(function(){s.create=function(a){var h=u.create(),r={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return n.extend(h,r,a)}})()},function(e,d,t){var s={};e.exports=s;var u=t(250),n=t(273),a=t(32);(function(){s.create=function(h){var r={controller:s,detector:n.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(r,h)},s.update=function(h,r,o,c){var l,f,p,g=o.world,m=h.buckets,x,y,T=!1,S=o.metrics;for(S.broadphaseTests=0,l=0;l<r.length;l++){var C=r[l];if(!(C.isSleeping&&!c)&&!(C.bounds.max.x<g.bounds.min.x||C.bounds.min.x>g.bounds.max.x||C.bounds.max.y<g.bounds.min.y||C.bounds.min.y>g.bounds.max.y)){var E=s._getRegion(h,C);if(!C.region||E.id!==C.region.id||c){S.broadphaseTests+=1,(!C.region||c)&&(C.region=E);var P=s._regionUnion(E,C.region);for(f=P.startCol;f<=P.endCol;f++)for(p=P.startRow;p<=P.endRow;p++){y=s._getBucketId(f,p),x=m[y];var M=f>=E.startCol&&f<=E.endCol&&p>=E.startRow&&p<=E.endRow,O=f>=C.region.startCol&&f<=C.region.endCol&&p>=C.region.startRow&&p<=C.region.endRow;!M&&O&&O&&x&&s._bucketRemoveBody(h,x,C),(C.region===E||M&&!O||c)&&(x||(x=s._createBucket(m,y)),s._bucketAddBody(h,x,C))}C.region=E,T=!0}}}T&&(h.pairsList=s._createActivePairsList(h))},s.clear=function(h){h.buckets={},h.pairs={},h.pairsList=[]},s._regionUnion=function(h,r){var o=Math.min(h.startCol,r.startCol),c=Math.max(h.endCol,r.endCol),l=Math.min(h.startRow,r.startRow),f=Math.max(h.endRow,r.endRow);return s._createRegion(o,c,l,f)},s._getRegion=function(h,r){var o=r.bounds,c=Math.floor(o.min.x/h.bucketWidth),l=Math.floor(o.max.x/h.bucketWidth),f=Math.floor(o.min.y/h.bucketHeight),p=Math.floor(o.max.y/h.bucketHeight);return s._createRegion(c,l,f,p)},s._createRegion=function(h,r,o,c){return{id:h+","+r+","+o+","+c,startCol:h,endCol:r,startRow:o,endRow:c}},s._getBucketId=function(h,r){return"C"+h+"R"+r},s._createBucket=function(h,r){var o=h[r]=[];return o},s._bucketAddBody=function(h,r,o){for(var c=0;c<r.length;c++){var l=r[c];if(!(o.id===l.id||o.isStatic&&l.isStatic)){var f=u.id(o,l),p=h.pairs[f];p?p[2]+=1:h.pairs[f]=[o,l,1]}}r.push(o)},s._bucketRemoveBody=function(h,r,o){r.splice(r.indexOf(o),1);for(var c=0;c<r.length;c++){var l=r[c],f=u.id(o,l),p=h.pairs[f];p&&(p[2]-=1)}},s._createActivePairsList=function(h){var r,o,c=[];r=a.keys(h.pairs);for(var l=0;l<r.length;l++)o=h.pairs[r[l]],o[2]>0?c.push(o):delete h.pairs[r[l]];return c}})()},function(e,d,t){var s={};e.exports=s;var u=t(250),n=t(32);(function(){s._pairMaxIdleLife=1e3,s.create=function(a){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},s.update=function(a,h,r){var o=a.list,c=a.table,l=a.collisionStart,f=a.collisionEnd,p=a.collisionActive,g,m,x,y;for(l.length=0,f.length=0,p.length=0,y=0;y<o.length;y++)o[y].confirmedActive=!1;for(y=0;y<h.length;y++)g=h[y],g.collided&&(m=u.id(g.bodyA,g.bodyB),x=c[m],x?(x.isActive?p.push(x):l.push(x),u.update(x,g,r),x.confirmedActive=!0):(x=u.create(g,r),c[m]=x,l.push(x),o.push(x)));for(y=0;y<o.length;y++)x=o[y],x.isActive&&!x.confirmedActive&&(u.setActive(x,!1,r),f.push(x))},s.removeOld=function(a,h){var r=a.list,o=a.table,c=[],l,f,p,g;for(g=0;g<r.length;g++){if(l=r[g],f=l.collision,f.bodyA.isSleeping||f.bodyB.isSleeping){l.timeUpdated=h;continue}h-l.timeUpdated>s._pairMaxIdleLife&&c.push(g)}for(g=0;g<c.length;g++)p=c[g]-g,l=r[p],delete o[l.id],r.splice(p,1)},s.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}})()},function(e,d,t){var s={};e.exports=s;var u=t(64),n=t(83),a=t(32),h=t(84);(function(){s._restingThresh=4,s._restingThreshTangent=6,s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s.preSolvePosition=function(r){var o,c,l;for(o=0;o<r.length;o++)c=r[o],c.isActive&&(l=c.activeContacts.length,c.collision.parentA.totalContacts+=l,c.collision.parentB.totalContacts+=l)},s.solvePosition=function(r,o,c){var l,f,p,g,m,x,y,T,S,C,E,P,M,O,A,R,F=c*s._positionDampen;for(l=0;l<o.length;l++){var I=o[l];I.previousPositionImpulse.x=I.positionImpulse.x,I.previousPositionImpulse.y=I.positionImpulse.y}for(l=0;l<r.length;l++)g=r[l],!(!g.isActive||g.isSensor)&&(m=g.collision,x=m.parentA,y=m.parentB,T=m.normal,E=x.previousPositionImpulse,P=y.previousPositionImpulse,C=m.penetration,O=P.x-E.x+C.x,A=P.y-E.y+C.y,f=T.x,p=T.y,S=f*O+p*A,g.separation=S,R=(S-g.slop)*F,(x.isStatic||y.isStatic)&&(R*=2),x.isStatic||x.isSleeping||(M=R/x.totalContacts,x.positionImpulse.x+=f*M,x.positionImpulse.y+=p*M),y.isStatic||y.isSleeping||(M=R/y.totalContacts,y.positionImpulse.x-=f*M,y.positionImpulse.y-=p*M))},s.postSolvePosition=function(r){for(var o=0;o<r.length;o++){var c=r[o];if(c.totalContacts=0,c.positionImpulse.x!==0||c.positionImpulse.y!==0){for(var l=0;l<c.parts.length;l++){var f=c.parts[l];u.translate(f.vertices,c.positionImpulse),h.update(f.bounds,f.vertices,c.velocity),f.position.x+=c.positionImpulse.x,f.position.y+=c.positionImpulse.y}c.positionPrev.x+=c.positionImpulse.x,c.positionPrev.y+=c.positionImpulse.y,n.dot(c.positionImpulse,c.velocity)<0?(c.positionImpulse.x=0,c.positionImpulse.y=0):(c.positionImpulse.x*=s._positionWarming,c.positionImpulse.y*=s._positionWarming)}}},s.preSolveVelocity=function(r){var o,c,l,f,p,g,m,x,y,T,S,C,E,P,M=n._temp[0],O=n._temp[1];for(o=0;o<r.length;o++)if(l=r[o],!(!l.isActive||l.isSensor))for(f=l.activeContacts,p=l.collision,g=p.parentA,m=p.parentB,x=p.normal,y=p.tangent,c=0;c<f.length;c++)T=f[c],S=T.vertex,C=T.normalImpulse,E=T.tangentImpulse,(C!==0||E!==0)&&(M.x=x.x*C+y.x*E,M.y=x.y*C+y.y*E,g.isStatic||g.isSleeping||(P=n.sub(S,g.position,O),g.positionPrev.x+=M.x*g.inverseMass,g.positionPrev.y+=M.y*g.inverseMass,g.anglePrev+=n.cross(P,M)*g.inverseInertia),m.isStatic||m.isSleeping||(P=n.sub(S,m.position,O),m.positionPrev.x-=M.x*m.inverseMass,m.positionPrev.y-=M.y*m.inverseMass,m.anglePrev-=n.cross(P,M)*m.inverseInertia))},s.solveVelocity=function(r,o){for(var c=o*o,l=n._temp[0],f=n._temp[1],p=n._temp[2],g=n._temp[3],m=n._temp[4],x=n._temp[5],y=0;y<r.length;y++){var T=r[y];if(!(!T.isActive||T.isSensor)){var S=T.collision,C=S.parentA,E=S.parentB,P=S.normal,M=S.tangent,O=T.activeContacts,A=1/O.length;C.velocity.x=C.position.x-C.positionPrev.x,C.velocity.y=C.position.y-C.positionPrev.y,E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,C.angularVelocity=C.angle-C.anglePrev,E.angularVelocity=E.angle-E.anglePrev;for(var R=0;R<O.length;R++){var F=O[R],I=F.vertex,B=n.sub(I,C.position,f),N=n.sub(I,E.position,p),Y=n.add(C.velocity,n.mult(n.perp(B),C.angularVelocity),g),X=n.add(E.velocity,n.mult(n.perp(N),E.angularVelocity),m),W=n.sub(Y,X,x),w=n.dot(P,W),L=n.dot(M,W),D=Math.abs(L),b=a.sign(L),G=(1+T.restitution)*w,z=a.clamp(T.separation+w,0,1)*s._frictionNormalMultiplier,U=L,H=1/0;D>T.friction*T.frictionStatic*z*c&&(H=D,U=a.clamp(T.friction*b*c,-H,H));var $=n.cross(B,P),K=n.cross(N,P),Z=A/(C.inverseMass+E.inverseMass+C.inverseInertia*$*$+E.inverseInertia*K*K);if(G*=Z,U*=Z,w<0&&w*w>s._restingThresh*c)F.normalImpulse=0;else{var k=F.normalImpulse;F.normalImpulse=Math.min(F.normalImpulse+G,0),G=F.normalImpulse-k}if(L*L>s._restingThreshTangent*c)F.tangentImpulse=0;else{var J=F.tangentImpulse;F.tangentImpulse=a.clamp(F.tangentImpulse+U,-H,H),U=F.tangentImpulse-J}l.x=P.x*G+M.x*U,l.y=P.y*G+M.y*U,C.isStatic||C.isSleeping||(C.positionPrev.x+=l.x*C.inverseMass,C.positionPrev.y+=l.y*C.inverseMass,C.anglePrev+=n.cross(B,l)*C.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=l.x*E.inverseMass,E.positionPrev.y-=l.y*E.inverseMass,E.anglePrev-=n.cross(N,l)*E.inverseInertia)}}}}})()},function(e,d){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}e.exports=t},function(e,d,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(276),u=function(n,a,h,r){for(var o=n[0],c=1;c<n.length;c++){var l=n[c];s(l,o,a,h,r),o=l}return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,h,r,o){return s(n,"angle",a,h,r,o)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var a=0;a<s.length;a++){var h=s[a];u.call(n,h)}return s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){n===void 0&&(n=0);for(var a=n;a<s.length;a++){var h=s[a],r=!0;for(var o in u)h[o]!==u[o]&&(r=!1);if(r)return h}return null};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){n===void 0&&(n=0);for(var a=n;a<s.length;a++){var h=s[a],r=!0;for(var o in u)h[o]!==u[o]&&(r=!1);if(r)return h}return null};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(289),u=t(123),n=t(2),a=t(1),h=t(129),r=new h({sys:{queueDepthSort:a,events:{once:a}}},0,0,1,1),o=function(c,l){l===void 0&&(l={});var f=l.hasOwnProperty("width"),p=l.hasOwnProperty("height"),g=n(l,"width",-1),m=n(l,"height",-1),x=n(l,"cellWidth",1),y=n(l,"cellHeight",x),T=n(l,"position",u.TOP_LEFT),S=n(l,"x",0),C=n(l,"y",0),E=0,P=0,M=g*x,O=m*y;r.setPosition(S,C),r.setSize(x,y);for(var A=0;A<c.length;A++)if(s(c[A],r,T),f&&g===-1)r.x+=x;else if(p&&m===-1)r.y+=y;else if(p&&!f){if(P+=y,r.y+=y,P===O&&(P=0,E+=x,r.y=C,r.x+=x,E===M))break}else if(E+=x,r.x+=x,E===M&&(E=0,P+=y,r.x=S,r.y+=y,P===O))break;return c};e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=2,n={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a,h,r,o){return a===void 0&&(a=1),h===void 0?this.alpha=a:(this._alphaTL=s(a,0,1),this._alphaTR=s(h,0,1),this._alphaBL=s(r,0,1),this._alphaBR=s(o,0,1)),this},alpha:{get:function(){return this._alpha},set:function(a){var h=s(a,0,1);this._alpha=h,this._alphaTL=h,this._alphaTR=h,this._alphaBL=h,this._alphaBR=h,h===0?this.renderFlags&=~u:this.renderFlags|=u}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(a){var h=s(a,0,1);this._alphaTL=h,h!==0&&(this.renderFlags|=u)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(a){var h=s(a,0,1);this._alphaTR=h,h!==0&&(this.renderFlags|=u)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(a){var h=s(a,0,1);this._alphaBL=h,h!==0&&(this.renderFlags|=u)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(a){var h=s(a,0,1);this._alphaBR=h,h!==0&&(this.renderFlags|=u)}}};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}},setSize:function(s,u){return this.width=s,this.height=u,this},setDisplaySize:function(s,u){return this.displayWidth=s,this.displayHeight=u,this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={texture:null,frame:null,isCropped:!1,setCrop:function(s,u,n,a){if(s===void 0)this.isCropped=!1;else if(this.frame){if(typeof s=="number")this.frame.setCropUVs(this._crop,s,u,n,a,this.flipX,this.flipY);else{var h=s;this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(s){return this.flipX=s,this},setFlipY:function(s){return this.flipY=s,this},setFlip:function(s,u){return this.flipX=s,this.flipY=u,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(308),n=t(3),a={prepareBoundsOutput:function(h,r){if(r===void 0&&(r=!1),this.rotation!==0&&u(h,this.x,this.y,this.rotation),r&&this.parentContainer){var o=this.parentContainer.getBoundsTransformMatrix();o.transformPoint(h.x,h.y,h)}return h},getCenter:function(h){return h===void 0&&(h=new n),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,h},getTopLeft:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getTopCenter:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getTopRight:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getLeftCenter:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,r)},getRightCenter:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,r)},getBottomLeft:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBottomCenter:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBottomRight:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBounds:function(h){h===void 0&&(h=new s);var r,o,c,l,f,p,g,m;if(this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(h),x.transformPoint(h.x,h.y,h),r=h.x,o=h.y,this.getTopRight(h),x.transformPoint(h.x,h.y,h),c=h.x,l=h.y,this.getBottomLeft(h),x.transformPoint(h.x,h.y,h),f=h.x,p=h.y,this.getBottomRight(h),x.transformPoint(h.x,h.y,h),g=h.x,m=h.y}else this.getTopLeft(h),r=h.x,o=h.y,this.getTopRight(h),c=h.x,l=h.y,this.getBottomLeft(h),f=h.x,p=h.y,this.getBottomRight(h),g=h.x,m=h.y;return h.x=Math.min(r,c,f,g),h.y=Math.min(o,l,p,m),h.width=Math.max(r,c,f,g)-h.x,h.height=Math.max(o,l,p,m)-h.y,h}};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="blur"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextlost"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextrestored"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="focus"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="hidden"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="poststep"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prestep"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="step"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="visible"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(s){this._displayOriginX=s,this.originX=s/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(s){this._displayOriginY=s,this.originY=s/this.height}},setOrigin:function(s,u){return s===void 0&&(s=.5),u===void 0&&(u=s),this.originX=s,this.originY=u,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(s,u){return s===void 0&&(s=0),u===void 0&&(u=s),this.displayOriginX=s,this.displayOriginY=u,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36),u=t(99),n=t(6),a=t(100),h=t(3),r={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(o,c){c===void 0&&(c=this.pathConfig);var l=this.pathTween;return l&&l.isPlaying()&&l.stop(),this.path=o,c&&this.startFollow(c),this},setRotateToPath:function(o,c){return c===void 0&&(c=0),this.rotateToPath=o,this.pathRotationOffset=c,this},isFollowing:function(){var o=this.pathTween;return o&&o.isPlaying()},startFollow:function(o,c){o===void 0&&(o={}),c===void 0&&(c=0);var l=this.pathTween;l&&l.isPlaying()&&l.stop(),typeof o=="number"&&(o={duration:o}),o.from=n(o,"from",0),o.to=n(o,"to",1);var f=u(o,"positionOnPath",!1);this.rotateToPath=u(o,"rotateToPath",!1),this.pathRotationOffset=n(o,"rotationOffset",0);var p=n(o,"startAt",c);if(p&&(o.onStart=function(m){var x=m.data[0];x.progress=p,x.elapsed=x.duration*p;var y=x.ease(x.progress);x.current=x.start+(x.end-x.start)*y,x.target[x.key]=x.current}),this.pathOffset||(this.pathOffset=new h(this.x,this.y)),this.pathVector||(this.pathVector=new h),this.pathDelta||(this.pathDelta=new h),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(o),this.path.getStartPoint(this.pathOffset),f&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+s(this.pathRotationOffset)}return this.pathConfig=o,this},pauseFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.pause(),this},resumeFollow:function(){var o=this.pathTween;return o&&o.isPaused()&&o.resume(),this},stopFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this},pathUpdate:function(){var o=this.pathTween;if(o){var c=o.data[0],l=this.pathDelta,f=this.pathVector;if(l.copy(f).negate(),c.state===a.COMPLETE){this.path.getPoint(1,f),l.add(f),f.add(this.pathOffset),this.setPosition(f.x,f.y);return}else if(c.state!==a.PLAYING_FORWARD&&c.state!==a.PLAYING_BACKWARD)return;this.path.getPoint(o.getValue(),f),l.add(f),f.add(this.pathOffset);var p=this.x,g=this.y;this.setPosition(f.x,f.y);var m=this.x-p,x=this.y-g;if(m===0&&x===0)return;if(c.state!==this._prevDirection){this._prevDirection=c.state;return}this.rotateToPath&&(this.rotation=Math.atan2(x,m)+s(this.pathRotationOffset))}}};e.exports=r},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(s){this.scaleX=s/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(s){this.scaleY=s/this.frame.realHeight}},setSizeToFrame:function(s){return s===void 0&&(s=this.frame),this.width=s.realWidth,this.height=s.realHeight,this},setSize:function(s,u){return this.width=s,this.height=u,this},setDisplaySize:function(s,u){return this.displayWidth=s,this.displayHeight=u,this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,s={texture:null,frame:null,isCropped:!1,setTexture:function(u,n){return this.texture=this.scene.sys.textures.get(u),this.setFrame(n)},setFrame:function(u,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};e.exports=s},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,s={texture:null,frame:null,isCropped:!1,setCrop:function(u,n,a,h){if(u===void 0)this.isCropped=!1;else if(this.frame){if(typeof u=="number")this.frame.setCropUVs(this._crop,u,n,a,h,this.flipX,this.flipY);else{var r=u;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(u,n){return this.texture=this.scene.sys.textures.get(u),this.setFrame(n)},setFrame:function(u,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=s},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(s,u,n,a){return s===void 0&&(s=16777215),u===void 0&&(u=s,n=s,a=s),this.tintTopLeft=s,this.tintTopRight=u,this.tintBottomLeft=n,this.tintBottomRight=a,this.tintFill=!1,this},setTintFill:function(s,u,n,a){return this.setTint(s,u,n,a),this.tintFill=!0,this},tint:{set:function(s){this.setTint(s,s,s,s)}},isTinted:{get:function(){var s=16777215;return this.tintFill||this.tintTopLeft!==s||this.tintTopRight!==s||this.tintBottomLeft!==s||this.tintBottomRight!==s}}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata-"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedata"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="setdata"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="created"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="error"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeked"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeking"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="timeout"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="create"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postupdate"},function(e,d){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleep"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioncomplete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioninit"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionout"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionstart"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionwake"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wake"},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,h,r,o){return s(n,"alpha",a,h,r,o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,h,r,o){return s(n,"x",a,h,r,o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,h,r,o,c,l){return h==null&&(h=a),s(n,"x",a,r,c,l),s(n,"y",h,o,c,l)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,h,r,o){return s(n,"y",a,h,r,o)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n===void 0&&(n=0),a===void 0&&(a=6.28);for(var h=n,r=(a-n)/s.length,o=0;o<s.length;o++)s[o].x=u.x+u.radius*Math.cos(h),s[o].y=u.y+u.radius*Math.sin(h),h+=r;return s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n===void 0&&(n=0),a===void 0&&(a=6.28);for(var h=n,r=(a-n)/s.length,o=u.width/2,c=u.height/2,l=0;l<s.length;l++)s[l].x=u.x+o*Math.cos(h),s[l].y=u.y+c*Math.sin(h),h+=r;return s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(172),u=function(n,a){for(var h=s(a,n.length),r=0;r<n.length;r++){var o=n[r],c=h[r];o.x=c.x,o.y=c.y}return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(316),u=t(178),n=t(179),a=function(h,r,o){o===void 0&&(o=0);var c=s(r,!1,h.length);o>0?u(c,o):o<0&&n(c,Math.abs(o));for(var l=0;l<h.length;l++)h[l].x=c[l].x,h[l].y=c[l].y;return h};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(317),u=function(n,a,h){var r=s({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},h),o=s({x1:a.x2,y1:a.y2,x2:a.x3,y2:a.y3},h),c=s({x1:a.x3,y1:a.y3,x2:a.x1,y2:a.y1},h);r.pop(),o.pop(),c.pop(),r=r.concat(o,c);for(var l=r.length/n.length,f=0,p=0;p<n.length;p++){var g=n[p],m=r[Math.floor(f)];g.x=m.x,g.y=m.y,f+=l}return n};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var a=0;a<s.length;a++){var h=s[a];h.anims&&h.anims.play(u,n)}return s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(170),u=function(n,a){for(var h=0;h<n.length;h++)s(a,n[h]);return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(180),u=function(n,a){for(var h=0;h<n.length;h++)s(a,n[h]);return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(173),u=function(n,a){for(var h=0;h<n.length;h++)s(a,n[h]);return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(174),u=function(n,a){for(var h=0;h<n.length;h++)s(a,n[h]);return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(181),u=function(n,a){for(var h=0;h<n.length;h++)s(a,n[h]);return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,h,r,o){return s(n,"rotation",a,h,r,o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(182),u=t(50),n=function(a,h,r){for(var o=h.x,c=h.y,l=0;l<a.length;l++){var f=a[l];s(f,o,c,r,Math.max(1,u(f.x,f.y,o,c)))}return a};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(182),u=function(n,a,h,r){var o=a.x,c=a.y;if(r===0)return n;for(var l=0;l<n.length;l++)s(n[l],o,c,h,r);return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,h,r,o){return s(n,"scaleX",a,h,r,o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,h,r,o,c,l){return h==null&&(h=a),s(n,"scaleX",a,r,c,l),s(n,"scaleY",h,o,c,l)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,h,r,o){return s(n,"scaleY",a,h,r,o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r,o){return s(n,"alpha",a,h,r,o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r){return s(n,"blendMode",a,0,h,r)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r,o){return s(n,"depth",a,h,r,o)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var a=0;a<s.length;a++)s[a].setInteractive(u,n);return s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r,o,c,l){return h==null&&(h=a),s(n,"originX",a,r,c,l),s(n,"originY",h,o,c,l),n.forEach(function(f){f.updateDisplayOrigin()}),n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r,o){return s(n,"rotation",a,h,r,o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r,o,c,l){return h==null&&(h=a),s(n,"scaleX",a,r,c,l),s(n,"scaleY",h,o,c,l)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r,o){return s(n,"scaleX",a,h,r,o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r,o){return s(n,"scaleY",a,h,r,o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r,o,c,l){return h==null&&(h=a),s(n,"scrollFactorX",a,r,c,l),s(n,"scrollFactorY",h,o,c,l)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r,o){return s(n,"scrollFactorX",a,h,r,o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r,o){return s(n,"scrollFactorY",a,h,r,o)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h){for(var r=0;r<s.length;r++)s[r].setTint(u,n,a,h);return s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r){return s(n,"visible",a,0,h,r)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r,o){return s(n,"x",a,h,r,o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r,o,c,l){return h==null&&(h=a),s(n,"x",a,r,c,l),s(n,"y",h,o,c,l)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,h,r,o){return s(n,"y",a,h,r,o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,h,r,o){r===void 0&&(r=0),o===void 0&&(o=new s);var c,l;if(n.length>1){var f,p,g,m;if(r===0){var x=n.length-1;for(c=n[x].x,l=n[x].y,f=x-1;f>=0;f--)m=n[f],p=m.x,g=m.y,m.x=c,m.y=l,c=p,l=g;n[x].x=a,n[x].y=h}else{for(c=n[0].x,l=n[0].y,f=1;f<n.length;f++)m=n[f],p=m.x,g=m.y,m.x=c,m.y=l,c=p,l=g;n[0].x=a,n[0].y=h}}else c=n[0].x,l=n[0].y,n[0].x=a,n[0].y=h;return o.x=c,o.y=l,o};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(131),u=function(n){return s(n)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(183),u=function(n,a,h,r,o){o===void 0&&(o=!1);var c=Math.abs(r-h)/n.length,l;if(o)for(l=0;l<n.length;l++)n[l][a]+=s(l*c,h,r);else for(l=0;l<n.length;l++)n[l][a]=s(l*c,h,r);return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(184),u=function(n,a,h,r,o){o===void 0&&(o=!1);var c=Math.abs(r-h)/n.length,l;if(o)for(l=0;l<n.length;l++)n[l][a]+=s(l*c,h,r);else for(l=0;l<n.length;l++)n[l][a]=s(l*c,h,r);return n};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h){h===void 0&&(h=!1);var r=Math.abs(a-n)/s.length,o;if(h)for(o=0;o<s.length;o++)s[o][u]+=o*r+n;else for(o=0;o<s.length;o++)s[o][u]=o*r+n;return s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=0;u<s.length;u++)s[u].visible=!s[u].visible;return s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68),u=function(n,a,h){h===void 0&&(h=0);for(var r=0;r<n.length;r++){var o=n[r];o.x=s(o.x,a.left-h,a.right+h),o.y=s(o.y,a.top-h,a.bottom+h)}return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Animation:t(185),AnimationFrame:t(319),AnimationManager:t(321),AnimationState:t(164),Events:t(132)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete-"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrepeat"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrestart"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstart"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstop"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationupdate"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BaseCache:t(323),CacheManager:t(325),Events:t(324)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Controls:t(739),Scene2D:t(742)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FixedKeyControl:t(740),SmoothedKeyControl:t(741)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(6),n=new s({initialize:function(h){this.camera=u(h,"camera",null),this.left=u(h,"left",null),this.right=u(h,"right",null),this.up=u(h,"up",null),this.down=u(h,"down",null),this.zoomIn=u(h,"zoomIn",null),this.zoomOut=u(h,"zoomOut",null),this.zoomSpeed=u(h,"zoomSpeed",.01),this.minZoom=u(h,"minZoom",.001),this.maxZoom=u(h,"maxZoom",1e3),this.speedX=0,this.speedY=0;var r=u(h,"speed",null);typeof r=="number"?(this.speedX=r,this.speedY=r):(this.speedX=u(h,"speed.x",0),this.speedY=u(h,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(!!this.active){a===void 0&&(a=1);var h=this.camera;this.up&&this.up.isDown?h.scrollY-=this.speedY*a|0:this.down&&this.down.isDown&&(h.scrollY+=this.speedY*a|0),this.left&&this.left.isDown?h.scrollX-=this.speedX*a|0:this.right&&this.right.isDown&&(h.scrollX+=this.speedX*a|0),this.zoomIn&&this.zoomIn.isDown?(h.zoom-=this.zoomSpeed,h.zoom<this.minZoom&&(h.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(h.zoom+=this.zoomSpeed,h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(6),n=new s({initialize:function(h){this.camera=u(h,"camera",null),this.left=u(h,"left",null),this.right=u(h,"right",null),this.up=u(h,"up",null),this.down=u(h,"down",null),this.zoomIn=u(h,"zoomIn",null),this.zoomOut=u(h,"zoomOut",null),this.zoomSpeed=u(h,"zoomSpeed",.01),this.minZoom=u(h,"minZoom",.001),this.maxZoom=u(h,"maxZoom",1e3),this.accelX=0,this.accelY=0;var r=u(h,"acceleration",null);typeof r=="number"?(this.accelX=r,this.accelY=r):(this.accelX=u(h,"acceleration.x",0),this.accelY=u(h,"acceleration.y",0)),this.dragX=0,this.dragY=0;var o=u(h,"drag",null);typeof o=="number"?(this.dragX=o,this.dragY=o):(this.dragX=u(h,"drag.x",0),this.dragY=u(h,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var c=u(h,"maxSpeed",null);typeof c=="number"?(this.maxSpeedX=c,this.maxSpeedY=c):(this.maxSpeedX=u(h,"maxSpeed.x",0),this.maxSpeedY=u(h,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(!!this.active){a===void 0&&(a=1);var h=this.camera;this._speedX>0?(this._speedX-=this.dragX*a,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*a,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*a,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*a,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(h.scrollX-=this._speedX*a|0),this._speedY!==0&&(h.scrollY-=this._speedY*a|0),this._zoom!==0&&(h.zoom+=this._zoom,h.zoom<this.minZoom?h.zoom=this.minZoom:h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Camera:t(326),BaseCamera:t(133),CameraManager:t(799),Effects:t(333),Events:t(37)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameradestroy"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeincomplete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeinstart"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutcomplete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutstart"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashcomplete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashstart"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="followupdate"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapancomplete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapanstart"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatecomplete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatestart"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakecomplete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakestart"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomcomplete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomstart"},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(37),a=new u({initialize:function(r){this.camera=r,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,r,o,c,l,f,p,g){if(h===void 0&&(h=!0),r===void 0&&(r=1e3),o===void 0&&(o=0),c===void 0&&(c=0),l===void 0&&(l=0),f===void 0&&(f=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),!f&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=h,this.progress=0,this.red=o,this.green=c,this.blue=l,this.alpha=h?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g;var m=h?n.FADE_OUT_START:n.FADE_IN_START;return this.camera.emit(m,this.camera,this,r,o,c,l),this.camera},update:function(h,r){!this.isRunning||(this._elapsed+=r,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(h){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(h,r){if(!this.isRunning&&!this.isComplete)return!1;var o=this.camera,c=this.red/255,l=this.green/255,f=this.blue/255;return h.drawFillRect(o.x,o.y,o.width,o.height,r(f,l,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var h=this.direction?n.FADE_OUT_COMPLETE:n.FADE_IN_COMPLETE;this.camera.emit(h,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(37),a=new u({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,r,o,c,l,f,p){return h===void 0&&(h=250),r===void 0&&(r=255),o===void 0&&(o=255),c===void 0&&(c=255),l===void 0&&(l=!1),f===void 0&&(f=null),p===void 0&&(p=this.camera.scene),!l&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=h,this.progress=0,this.red=r,this.green=o,this.blue=c,this.alpha=1,this._elapsed=0,this._onUpdate=f,this._onUpdateScope=p,this.camera.emit(n.FLASH_START,this.camera,this,h,r,o,c),this.camera)},update:function(h,r){!this.isRunning||(this._elapsed+=r,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(h){if(!this.isRunning)return!1;var r=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(h,r){if(!this.isRunning)return!1;var o=this.camera,c=this.red/255,l=this.green/255,f=this.blue/255;return h.drawFillRect(o.x,o.y,o.width,o.height,r(f,l,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(134),a=t(37),h=t(3),r=new u({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.source=new h,this.current=new h,this.destination=new h,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,c,l,f,p,g,m){l===void 0&&(l=1e3),f===void 0&&(f=n.Linear),p===void 0&&(p=!1),g===void 0&&(g=null),m===void 0&&(m=this.camera.scene);var x=this.camera;return!p&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.source.set(x.scrollX,x.scrollY),this.destination.set(o,c),x.getScroll(o,c,this.current),typeof f=="string"&&n.hasOwnProperty(f)?this.ease=n[f]:typeof f=="function"&&(this.ease=f),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=m,this.camera.emit(a.PAN_START,this.camera,this,l,o,c)),x},update:function(o,c){if(!!this.isRunning){this._elapsed+=c;var l=s(this._elapsed/this.duration,0,1);this.progress=l;var f=this.camera;if(this._elapsed<this.duration){var p=this.ease(l);f.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*p,m=this.source.y+(this.current.y-this.source.y)*p;f.setScroll(g,m),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,l,g,m)}else f.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,l,f.scrollX,f.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=r},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1.70158),s*s*((u+1)*s-u)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1.70158),--s*s*((u+1)*s+u)+1};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1.70158);var n=u*1.525;return(s*=2)<1?.5*(s*s*((n+1)*s-n)):.5*((s-=2)*s*((n+1)*s+n)+2)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s=1-s,s<.36363636363636365?1-7.5625*s*s:s<.7272727272727273?1-(7.5625*(s-=.5454545454545454)*s+.75):s<.9090909090909091?1-(7.5625*(s-=.8181818181818182)*s+.9375):1-(7.5625*(s-=.9545454545454546)*s+.984375)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s<.36363636363636365?7.5625*s*s:s<.7272727272727273?7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?7.5625*(s-=.8181818181818182)*s+.9375:7.5625*(s-=.9545454545454546)*s+.984375};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=!1;return s<.5?(s=1-s*2,u=!0):s=s*2-1,s<.36363636363636365?s=7.5625*s*s:s<.7272727272727273?s=7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?s=7.5625*(s-=.8181818181818182)*s+.9375:s=7.5625*(s-=.9545454545454546)*s+.984375,u?(1-s)*.5:s*.5+.5};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 1-Math.sqrt(1-s*s)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.sqrt(1- --s*s)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*s*s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return--s*s*s+1};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*s*s*s:.5*((s-=2)*s*s+2)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===void 0&&(u=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var a=n/4;return u<1?u=1:a=n*Math.asin(1/u)/(2*Math.PI),-(u*Math.pow(2,10*(s-=1))*Math.sin((s-a)*(2*Math.PI)/n))};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===void 0&&(u=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var a=n/4;return u<1?u=1:a=n*Math.asin(1/u)/(2*Math.PI),u*Math.pow(2,-10*s)*Math.sin((s-a)*(2*Math.PI)/n)+1};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===void 0&&(u=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var a=n/4;return u<1?u=1:a=n*Math.asin(1/u)/(2*Math.PI),(s*=2)<1?-.5*(u*Math.pow(2,10*(s-=1))*Math.sin((s-a)*(2*Math.PI)/n)):u*Math.pow(2,-10*(s-=1))*Math.sin((s-a)*(2*Math.PI)/n)*.5+1};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.pow(2,10*(s-1))-.001};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 1-Math.pow(2,-10*s)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*Math.pow(2,10*(s-1)):.5*(2-Math.pow(2,-10*(s-1)))};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*(2-s)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*s*s:-.5*(--s*(s-2)-1)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*s*s*s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 1- --s*s*s*s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*s*s*s*s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return--s*s*s*s*s+1};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s===0?0:s===1?1:1-Math.cos(s*Math.PI/2)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s===0?0:s===1?1:Math.sin(s*Math.PI/2)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s===0?0:s===1?1:.5*(1-Math.cos(Math.PI*s))};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1),s<=0?0:s>=1?1:((u*s|0)+1)*(1/u)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(37),a=t(3),h=new u({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.intensity=new a,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(r,o,c,l,f){return r===void 0&&(r=100),o===void 0&&(o=.05),c===void 0&&(c=!1),l===void 0&&(l=null),f===void 0&&(f=this.camera.scene),!c&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,typeof o=="number"?this.intensity.set(o):this.intensity.set(o.x,o.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=l,this._onUpdateScope=f,this.camera.emit(n.SHAKE_START,this.camera,this,r,o),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(r,o){if(!!this.isRunning)if(this._elapsed+=o,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var c=this.intensity,l=this.camera.width,f=this.camera.height,p=this.camera.zoom;this._offsetX=(Math.random()*c.x*l*2-c.x*l)*p,this._offsetY=(Math.random()*c.y*f*2-c.y*f)*p,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});e.exports=h},function(e,d,t){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var s=t(18),u=t(0),n=t(37),a=t(134),h=new u({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(r,o,c,l,f,p,g){c===void 0&&(c=1e3),l===void 0&&(l=a.Linear),f===void 0&&(f=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),o===void 0&&(o=!1),this.shortestPath=o;var m=r;r<0?(m=-1*r,this.clockwise=!1):this.clockwise=!0;var x=360*Math.PI/180;m=m-Math.floor(m/x)*x;var y=this.camera;if(!f&&this.isRunning)return y;if(this.isRunning=!0,this.duration=c,this.progress=0,this.source=y.rotation,this.destination=m,typeof l=="string"&&a.hasOwnProperty(l)?this.ease=a[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.shortestPath){var T=0,S=0;this.destination>this.source?T=Math.abs(this.destination-this.source):T=Math.abs(this.destination+x)-this.source,this.source>this.destination?S=Math.abs(this.source-this.destination):S=Math.abs(this.source+x)-this.destination,T<S?this.clockwise=!0:T>S&&(this.clockwise=!1)}return this.camera.emit(n.ROTATE_START,this.camera,this,c,m),y},update:function(r,o){if(!!this.isRunning){this._elapsed+=o;var c=s(this._elapsed/this.duration,0,1);this.progress=c;var l=this.camera;if(this._elapsed<this.duration){var f=this.ease(c);this.current=l.rotation;var p=0,g=360*Math.PI/180,m=this.destination,x=this.current;this.clockwise===!1&&(m=this.current,x=this.destination),m>=x?p=Math.abs(m-x):p=Math.abs(m+g)-x;var y=0;this.clockwise?y=l.rotation+p*f:y=l.rotation-p*f,l.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,c,y)}else l.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,c,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(134),a=t(37),h=new u({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,o,c,l,f,p){o===void 0&&(o=1e3),c===void 0&&(c=n.Linear),l===void 0&&(l=!1),f===void 0&&(f=null),p===void 0&&(p=this.camera.scene);var g=this.camera;return!l&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source=g.zoom,this.destination=r,typeof c=="string"&&n.hasOwnProperty(c)?this.ease=n[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=p,this.camera.emit(a.ZOOM_START,this.camera,this,o,r)),g},update:function(r,o){!this.isRunning||(this._elapsed+=o,this.progress=s(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(326),u=t(0),n=t(2),a=t(24),h=t(57),r=t(104),o=t(20),c=new u({initialize:function(f){this.scene=f,this.systems=f.sys,this.roundPixels=f.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,f.sys.events.once(o.BOOT,this.boot,this),f.sys.events.on(o.START,this.start,this)},boot:function(){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new s(0,0,l.scale.width,l.scale.height).setScene(this.scene),l.game.scale.on(r.RESIZE,this.onResize,this),this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){if(!this.main){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0]}var f=this.systems.events;f.on(o.UPDATE,this.update,this),f.once(o.SHUTDOWN,this.shutdown,this)},add:function(l,f,p,g,m,x){l===void 0&&(l=0),f===void 0&&(f=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),m===void 0&&(m=!1),x===void 0&&(x="");var y=new s(l,f,p,g);return y.setName(x),y.setScene(this.scene),y.setRoundPixels(this.roundPixels),y.id=this.getNextID(),this.cameras.push(y),m&&(this.main=y),y},addExisting:function(l,f){f===void 0&&(f=!1);var p=this.cameras.indexOf(l);return p===-1?(l.id=this.getNextID(),l.setRoundPixels(this.roundPixels),this.cameras.push(l),f&&(this.main=l),l):null},getNextID:function(){for(var l=this.cameras,f=1,p=0;p<32;p++){for(var g=!1,m=0;m<l.length;m++){var x=l[m];if(x&&x.id===f){g=!0;continue}}if(g)f=f<<1;else return f}return 0},getTotal:function(l){l===void 0&&(l=!1);for(var f=0,p=this.cameras,g=0;g<p.length;g++){var m=p[g];(!l||l&&m.visible)&&f++}return f},fromJSON:function(l){Array.isArray(l)||(l=[l]);for(var f=this.scene.sys.scale.width,p=this.scene.sys.scale.height,g=0;g<l.length;g++){var m=l[g],x=n(m,"x",0),y=n(m,"y",0),T=n(m,"width",f),S=n(m,"height",p),C=this.add(x,y,T,S);C.name=n(m,"name",""),C.zoom=n(m,"zoom",1),C.rotation=n(m,"rotation",0),C.scrollX=n(m,"scrollX",0),C.scrollY=n(m,"scrollY",0),C.roundPixels=n(m,"roundPixels",!1),C.visible=n(m,"visible",!0);var E=n(m,"backgroundColor",!1);E&&C.setBackgroundColor(E);var P=n(m,"bounds",null);if(P){var M=n(P,"x",0),O=n(P,"y",0),A=n(P,"width",f),R=n(P,"height",p);C.setBounds(M,O,A,R)}}return this},getCamera:function(l){for(var f=this.cameras,p=0;p<f.length;p++)if(f[p].name===l)return f[p];return null},getCamerasBelowPointer:function(l){for(var f=this.cameras,p=l.x,g=l.y,m=[],x=0;x<f.length;x++){var y=f[x];y.visible&&y.inputEnabled&&h(y,p,g)&&m.unshift(y)}return m},remove:function(l,f){f===void 0&&(f=!0),Array.isArray(l)||(l=[l]);for(var p=0,g=this.cameras,m=0;m<l.length;m++){var x=g.indexOf(l[m]);x!==-1&&(f?g[x].destroy():g[x].renderList=[],g.splice(x,1),p++)}return!this.main&&g[0]&&(this.main=g[0]),p},render:function(l,f){for(var p=this.scene,g=this.cameras,m=0;m<this.cameras.length;m++){var x=g[m];if(x.visible&&x.alpha>0){x.preRender();var y=this.getVisibleChildren(f.getChildren(),x);l.render(p,y,x)}}},getVisibleChildren:function(l,f){for(var p=[],g=0;g<l.length;g++){var m=l[g];m.willRender(f)&&p.push(m)}return p},resetAll:function(){for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(l,f){for(var p=0;p<this.cameras.length;p++)this.cameras[p].update(l,f)},onResize:function(l,f,p,g,m){for(var x=0;x<this.cameras.length;x++){var y=this.cameras[x];y._x===0&&y._y===0&&y._width===g&&y._height===m&&y.setSize(f.width,f.height)}},resize:function(l,f){for(var p=0;p<this.cameras.length;p++)this.cameras[p].setSize(l,f)},shutdown:function(){this.main=void 0;for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();this.cameras=[];var f=this.systems.events;f.off(o.UPDATE,this.update,this),f.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});a.register("CameraManager",c,"cameras"),e.exports=c},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="enterfullscreen"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenfailed"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenunsupported"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="leavefullscreen"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="orientationchange"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Config:t(346),CreateRenderer:t(366),DebugHeader:t(384),Events:t(22),TimeStep:t(385),VisibilityHandler:t(387)}},function(e,d){var t=e.exports={},s,u;function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=n}catch{s=n}try{typeof clearTimeout=="function"?u=clearTimeout:u=a}catch{u=a}})();function h(y){if(s===setTimeout)return setTimeout(y,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(y,0);try{return s(y,0)}catch{try{return s.call(null,y,0)}catch{return s.call(this,y,0)}}}function r(y){if(u===clearTimeout)return clearTimeout(y);if((u===a||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(y);try{return u(y)}catch{try{return u.call(null,y)}catch{return u.call(this,y)}}}var o=[],c=!1,l,f=-1;function p(){!c||!l||(c=!1,l.length?o=l.concat(o):f=-1,o.length&&g())}function g(){if(!c){var y=h(p);c=!0;for(var T=o.length;T;){for(l=o,o=[];++f<T;)l&&l[f].run();f=-1,T=o.length}l=null,c=!1,r(y)}}t.nextTick=function(y){var T=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)T[S-1]=arguments[S];o.push(new m(y,T)),o.length===1&&!c&&h(g)};function m(y,T){this.fun=y,this.array=T}m.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function x(){}t.on=x,t.addListener=x,t.once=x,t.off=x,t.removeListener=x,t.removeAllListeners=x,t.emit=x,t.prependListener=x,t.prependOnceListener=x,t.listeners=function(y){return[]},t.binding=function(y){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(y){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(136),u={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function n(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(u.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(u.mspointer=!0),navigator.getGamepads&&(u.gamepads=!0),"onwheel"in window||s.ie&&"WheelEvent"in window?u.wheelEvent="wheel":"onmousewheel"in window?u.wheelEvent="mousewheel":s.firefox&&"MouseScrollEvent"in window&&(u.wheelEvent="DOMMouseScroll")),u}e.exports=n()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(136),u={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function n(){if(typeof importScripts=="function")return u;u.audioData=!!window.Audio,u.webAudio=!!(window.AudioContext||window.webkitAudioContext);var a=document.createElement("audio"),h=!!a.canPlayType;try{if(h&&(a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(u.ogg=!0),(a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||a.canPlayType("audio/opus;").replace(/^no$/,""))&&(u.opus=!0),a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(u.mp3=!0),a.canPlayType("audio/wav").replace(/^no$/,"")&&(u.wav=!0),(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))&&(u.m4a=!0),a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(u.webm=!0),a.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(s.edge)u.dolby=!0;else if(s.safari&&s.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var r=parseInt(RegExp.$1,10),o=parseInt(RegExp.$2,10);(r===10&&o>=11||r>10)&&(u.dolby=!0)}}}catch{}return u}e.exports=n()},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function s(){if(typeof importScripts=="function")return t;var u=document.createElement("video"),n=!!u.canPlayType;try{n&&(u.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(t.ogg=!0),u.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.h264=!0,t.mp4=!0),u.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(t.webm=!0),u.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(t.vp9=!0),u.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.hls=!0))}catch{}return t}e.exports=s()},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={available:!1,cancel:"",keyboard:!1,request:""};function s(){if(typeof importScripts=="function")return t;var u,n="Fullscreen",a="FullScreen",h=["request"+n,"request"+a,"webkitRequest"+n,"webkitRequest"+a,"msRequest"+n,"msRequest"+a,"mozRequest"+a,"mozRequest"+n];for(u=0;u<h.length;u++)if(document.documentElement[h[u]]){t.available=!0,t.request=h[u];break}var r=["cancel"+a,"exit"+n,"webkitCancel"+a,"webkitExit"+n,"msCancel"+a,"msExit"+n,"mozCancel"+a,"mozExit"+n];if(t.available){for(u=0;u<r.length;u++)if(document[r[u]]){t.cancel=r[u];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(t.keyboard=!0),Object.defineProperty(t,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),t}e.exports=s()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:t(349),BetweenPoints:t(350),BetweenPointsY:t(813),BetweenY:t(814),CounterClockwise:t(815),Normalize:t(351),Random:t(816),RandomDegrees:t(817),Reverse:t(818),RotateTo:t(819),ShortestBetween:t(820),Wrap:t(269),WrapDegrees:t(270)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.atan2(u.x-s.x,u.y-s.y)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return Math.atan2(n-s,a-u)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=function(n){return n>Math.PI&&(n-=s.PI2),Math.abs(((n+s.TAU)%s.PI2-s.PI2)%s.PI2)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(137),u=function(){return s(-Math.PI,Math.PI)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(137),u=function(){return s(-180,180)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(351),u=function(n){return s(n+Math.PI)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=function(n,a,h){return h===void 0&&(h=.05),n===a||(Math.abs(a-n)<=h||Math.abs(a-n)>=s.PI2-h?n=a:(Math.abs(a-n)>Math.PI&&(a<n?a+=s.PI2:a-=s.PI2),a>n?n+=h:a<n&&(n-=h))),n};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=u-s;if(n===0)return 0;var a=Math.floor((n- -180)/360);return n-a*360};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:t(50),BetweenPoints:t(352),BetweenPointsSquared:t(822),Chebyshev:t(823),Power:t(824),Snake:t(825),Squared:t(353)}},function(e,d){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x-u.x,a=s.y-u.y;return n*n+a*a};e.exports=t},function(e,d){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return Math.max(Math.abs(s-n),Math.abs(u-a))};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h){return h===void 0&&(h=2),Math.sqrt(Math.pow(n-s,h)+Math.pow(a-u,h))};e.exports=t},function(e,d){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return Math.abs(s-n)+Math.abs(u-a)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Back:t(334),Bounce:t(335),Circular:t(336),Cubic:t(337),Elastic:t(338),Expo:t(339),Linear:t(340),Quadratic:t(341),Quartic:t(342),Quintic:t(343),Sine:t(344),Stepped:t(345)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:t(828),Equal:t(124),Floor:t(829),GreaterThan:t(354),LessThan:t(355)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1e-4),Math.ceil(s-u)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1e-4),Math.floor(s+u)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bezier:t(831),CatmullRom:t(832),CubicBezier:t(358),Linear:t(833),QuadraticBezier:t(359),SmoothStep:t(360),SmootherStep:t(834)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(356),u=function(n,a){for(var h=0,r=n.length-1,o=0;o<=r;o++)h+=Math.pow(1-a,r-o)*Math.pow(a,o)*n[o]*s(r,o);return h};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(194),u=function(n,a){var h=n.length-1,r=h*a,o=Math.floor(r);return n[0]===n[h]?(a<0&&(o=Math.floor(r=h*(1+a))),s(r-o,n[(o-1+h)%h],n[o],n[(o+1)%h],n[(o+2)%h])):a<0?n[0]-(s(-r,n[0],n[0],n[1],n[1])-n[0]):a>1?n[h]-(s(r-h,n[h],n[h],n[h-1],n[h-1])-n[h]):s(r-o,n[o?o-1:0],n[o],n[h<o+1?h:o+1],n[h<o+2?h:o+2])};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(135),u=function(n,a){var h=n.length-1,r=h*a,o=Math.floor(r);return a<0?s(n[0],n[1],r):a>1?s(n[h],n[h-1],h-r):s(n[o],n[o+1>h?h:o+1],r-o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(183),u=function(n,a,h){return a+(h-a)*s(n,0,1)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetNext:t(361),IsSize:t(138),IsValue:t(836)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s>0&&(s&s-1)===0};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:t(139),Floor:t(76),To:t(838)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return n===void 0&&(n=0),u===0?s:(s-=n,s=u*Math.round(s/u),a?(n+s)/u:n+s)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a){a===void 0&&(a=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],a&&this.init(a)},rnd:function(){var n=2091639*this.s0+this.c*23283064365386963e-26;return this.c=n|0,this.s0=this.s1,this.s1=this.s2,this.s2=n-this.c,this.s2},hash:function(n){var a,h=this.n;n=n.toString();for(var r=0;r<n.length;r++)h+=n.charCodeAt(r),a=.02519603282416938*h,h=a>>>0,a-=h,a*=h,h=a>>>0,a-=h,h+=a*4294967296;return this.n=h,(h>>>0)*23283064365386963e-26},init:function(n){typeof n=="string"?this.state(n):this.sow(n)},sow:function(n){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!n)for(var a=0;a<n.length&&n[a]!=null;a++){var h=n[a];this.s0-=this.hash(h),this.s0+=~~(this.s0<0),this.s1-=this.hash(h),this.s1+=~~(this.s1<0),this.s2-=this.hash(h),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(n,a){return Math.floor(this.realInRange(0,a-n+1)+n)},between:function(n,a){return Math.floor(this.realInRange(0,a-n+1)+n)},realInRange:function(n,a){return this.frac()*(a-n)+n},normal:function(){return 1-2*this.frac()},uuid:function(){var n="",a="";for(a=n="";n++<36;a+=~n%5|n*3&4?(n^15?8^this.frac()*(n^20?16:4):4).toString(16):"-");return a},pick:function(n){return n[this.integerInRange(0,n.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(n){return n[~~(Math.pow(this.frac(),2)*(n.length-1)+.5)]},timestamp:function(n,a){return this.realInRange(n||9466848e5,a||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(n){return typeof n=="string"&&n.match(/^!rnd/)&&(n=n.split(","),this.c=parseFloat(n[1]),this.s0=parseFloat(n[2]),this.s1=parseFloat(n[3]),this.s2=parseFloat(n[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(n){for(var a=n.length-1,h=a;h>0;h--){var r=Math.floor(this.frac()*(h+1)),o=n[r];n[r]=n[h],n[h]=o}return n}});e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=0,n=0;n<s.length;n++)u+=+s[n];return u/s.length};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=0),n===void 0&&(n=10);var a=Math.pow(n,-u);return Math.ceil(s*a)/a};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.abs(s-u)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(69),a=t(1),h=new n,r=new u({initialize:function o(c,l,f,p){c===void 0&&(c=0),l===void 0&&(l=0),f===void 0&&(f=0),p===void 0&&(p=o.DefaultOrder),this._x=c,this._y=l,this._z=f,this._order=p,this.onChangeCallback=a},x:{get:function(){return this._x},set:function(o){this._x=o,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(o){this._y=o,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(o){this._z=o,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(o){this._order=o,this.onChangeCallback(this)}},set:function(o,c,l,f){return f===void 0&&(f=this._order),this._x=o,this._y=c,this._z=l,this._order=f,this.onChangeCallback(this),this},copy:function(o){return this.set(o.x,o.y,o.z,o.order)},setFromQuaternion:function(o,c,l){return c===void 0&&(c=this._order),l===void 0&&(l=!1),h.fromQuat(o),this.setFromRotationMatrix(h,c,l)},setFromRotationMatrix:function(o,c,l){c===void 0&&(c=this._order),l===void 0&&(l=!1);var f=o.val,p=f[0],g=f[4],m=f[8],x=f[1],y=f[5],T=f[9],S=f[2],C=f[6],E=f[10],P=0,M=0,O=0,A=.99999;switch(c){case"XYZ":{M=Math.asin(s(m,-1,1)),Math.abs(m)<A?(P=Math.atan2(-T,E),O=Math.atan2(-g,p)):P=Math.atan2(C,y);break}case"YXZ":{P=Math.asin(-s(T,-1,1)),Math.abs(T)<A?(M=Math.atan2(m,E),O=Math.atan2(x,y)):M=Math.atan2(-S,p);break}case"ZXY":{P=Math.asin(s(C,-1,1)),Math.abs(C)<A?(M=Math.atan2(-S,E),O=Math.atan2(-g,y)):O=Math.atan2(x,p);break}case"ZYX":{M=Math.asin(-s(S,-1,1)),Math.abs(S)<A?(P=Math.atan2(C,E),O=Math.atan2(x,p)):O=Math.atan2(-g,y);break}case"YZX":{O=Math.asin(s(x,-1,1)),Math.abs(x)<A?(P=Math.atan2(-T,y),M=Math.atan2(-S,p)):M=Math.atan2(m,E);break}case"XZY":{O=Math.asin(-s(g,-1,1)),Math.abs(g)<A?(P=Math.atan2(C,y),M=Math.atan2(m,p)):P=Math.atan2(-T,E);break}}return this._x=P,this._y=M,this._z=O,this._order=c,l&&this.onChangeCallback(this),this}});r.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],r.DefaultOrder="XYZ",e.exports=r},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=0),n===void 0&&(n=10);var a=Math.pow(n,-u);return Math.floor(s*a)/a};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s/u/1e3};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s==parseFloat(s)?!(s%2):void 0};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s===parseFloat(s)?!(s%2):void 0};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return Math.min(s+u,n)};e.exports=t},function(e,d){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=s.length;if(u===0)return 0;s.sort(function(a,h){return a-h});var n=Math.floor(u/2);return u%2===0?(s[n]+s[n-1])/2:s[n]};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return Math.max(s-u,n)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n===void 0&&(n=u+1);var h=(s-u)/(n-u);return h>1?a!==void 0?(h=(a-s)/(a-n),h<0&&(h=0)):h=1:h<0&&(h=0),h};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1);var n=Math.random()*2*Math.PI;return s.x=Math.cos(n)*u,s.y=Math.sin(n)*u,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1);var n=Math.random()*2*Math.PI,a=Math.random()*2-1,h=Math.sqrt(1-a*a)*u;return s.x=Math.cos(n)*h,s.y=Math.sin(n)*h,s.z=a*u,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1),s.x=(Math.random()*2-1)*u,s.y=(Math.random()*2-1)*u,s.z=(Math.random()*2-1)*u,s.w=(Math.random()*2-1)*u,s};e.exports=t},function(e,d){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h){return s.x=u+h*Math.cos(a),s.y=n+h*Math.sin(a),s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=0),n===void 0&&(n=10);var a=Math.pow(n,-u);return Math.round(s*a)/a};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u===void 0&&(u=1),n===void 0&&(n=1),a===void 0&&(a=1),a*=Math.PI/s;for(var h=[],r=[],o=0;o<s;o++)n-=u*a,u+=n*a,h[o]=n,r[o]=u;return{sin:r,cos:h,length:s}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,h,r){r===void 0&&(r=new s);var o=0,c=0,l=a*h;return n>0&&n<=l&&(n>a-1?(c=Math.floor(n/a),o=n-c*a):o=n),r.set(o,c)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return Math.abs(s-u)<=n};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39),u=t(69),n=t(365),a=new u,h=new n,r=new s,o=function(c,l,f){return h.setAxisAngle(l,f),a.fromRotationTranslation(h,r.set(0,0,0)),c.transformMat4(a)};e.exports=o},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addtexture"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onerror"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onload"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removetexture"},function(e,d){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineafterflush"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebeforeflush"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebind"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineboot"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinedestroy"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinerebind"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineresize"},function(e,d){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GenerateTexture:t(388),Palettes:t(889)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARNE16:t(389),C64:t(890),CGA:t(891),JMP:t(892),MSX:t(893)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Path:t(895),MoveTo:t(393),CubicBezier:t(390),Curve:t(94),Ellipse:t(391),Line:t(392),QuadraticBezier:t(394),Spline:t(395)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(390),n=t(391),a=t(5),h=t(392),r=t(393),o=t(394),c=t(10),l=t(395),f=t(3),p=t(14),g=new s({initialize:function(x,y){x===void 0&&(x=0),y===void 0&&(y=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new f,this._tmpVec2A=new f,this._tmpVec2B=new f,typeof x=="object"?this.fromJSON(x):this.startPoint.set(x,y)},add:function(m){return this.curves.push(m),this},circleTo:function(m,x,y){return x===void 0&&(x=!1),this.ellipseTo(m,m,0,360,x,y)},closePath:function(){var m=this.curves[0].getPoint(0),x=this.curves[this.curves.length-1].getPoint(1);return m.equals(x)||this.curves.push(new h(x,m)),this},cubicBezierTo:function(m,x,y,T,S,C){var E=this.getEndPoint(),P,M,O;return m instanceof f?(P=m,M=x,O=y):(P=new f(y,T),M=new f(S,C),O=new f(m,x)),this.add(new u(E,P,M,O))},quadraticBezierTo:function(m,x,y,T){var S=this.getEndPoint(),C,E;return m instanceof f?(C=m,E=x):(C=new f(y,T),E=new f(m,x)),this.add(new o(S,C,E))},draw:function(m,x){for(var y=0;y<this.curves.length;y++){var T=this.curves[y];!T.active||T.draw(m,x)}return m},ellipseTo:function(m,x,y,T,S,C){var E=new n(0,0,m,x,y,T,S,C),P=this.getEndPoint(this._tmpVec2A),M=E.getStartPoint(this._tmpVec2B);return P.subtract(M),E.x=P.x,E.y=P.y,this.add(E)},fromJSON:function(m){this.curves=[],this.cacheLengths=[],this.startPoint.set(m.x,m.y),this.autoClose=m.autoClose;for(var x=0;x<m.curves.length;x++){var y=m.curves[x];switch(y.type){case"LineCurve":this.add(h.fromJSON(y));break;case"EllipseCurve":this.add(n.fromJSON(y));break;case"SplineCurve":this.add(l.fromJSON(y));break;case"CubicBezierCurve":this.add(u.fromJSON(y));break;case"QuadraticBezierCurve":this.add(o.fromJSON(y));break}}return this},getBounds:function(m,x){m===void 0&&(m=new c),x===void 0&&(x=16),m.x=Number.MAX_VALUE,m.y=Number.MAX_VALUE;for(var y=new c,T=p.MIN_SAFE_INTEGER,S=p.MIN_SAFE_INTEGER,C=0;C<this.curves.length;C++){var E=this.curves[C];!E.active||(E.getBounds(y,x),m.x=Math.min(m.x,y.x),m.y=Math.min(m.y,y.y),T=Math.max(T,y.right),S=Math.max(S,y.bottom))}return m.right=T,m.bottom=S,m},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var m=[],x=0,y=0;y<this.curves.length;y++)x+=this.curves[y].getLength(),m.push(x);return this.cacheLengths=m,m},getEndPoint:function(m){return m===void 0&&(m=new f),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,m):m.copy(this.startPoint),m},getLength:function(){var m=this.getCurveLengths();return m[m.length-1]},getPoint:function(m,x){x===void 0&&(x=new f);for(var y=m*this.getLength(),T=this.getCurveLengths(),S=0;S<T.length;){if(T[S]>=y){var C=T[S]-y,E=this.curves[S],P=E.getLength(),M=P===0?0:1-C/P;return E.getPointAt(M,x)}S++}return null},getPoints:function(m){m===void 0&&(m=12);for(var x=[],y,T=0;T<this.curves.length;T++){var S=this.curves[T];if(!!S.active)for(var C=S.getResolution(m),E=S.getPoints(C),P=0;P<E.length;P++){var M=E[P];y&&y.equals(M)||(x.push(M),y=M)}}return this.autoClose&&x.length>1&&!x[x.length-1].equals(x[0])&&x.push(x[0]),x},getRandomPoint:function(m){return m===void 0&&(m=new f),this.getPoint(Math.random(),m)},getSpacedPoints:function(m){m===void 0&&(m=40);for(var x=[],y=0;y<=m;y++)x.push(this.getPoint(y/m));return this.autoClose&&x.push(x[0]),x},getStartPoint:function(m){return m===void 0&&(m=new f),m.copy(this.startPoint)},getTangent:function(m,x){x===void 0&&(x=new f);for(var y=m*this.getLength(),T=this.getCurveLengths(),S=0;S<T.length;){if(T[S]>=y){var C=T[S]-y,E=this.curves[S],P=E.getLength(),M=P===0?0:1-C/P;return E.getTangentAt(M,x)}S++}return null},lineTo:function(m,x){m instanceof f?this._tmpVec2B.copy(m):this._tmpVec2B.set(m,x);var y=this.getEndPoint(this._tmpVec2A);return this.add(new h([y.x,y.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(m){return m.unshift(this.getEndPoint()),this.add(new l(m))},moveTo:function(m,x){return m instanceof f?this.add(new r(m.x,m.y)):this.add(new r(m,x))},toJSON:function(){for(var m=[],x=0;x<this.curves.length;x++)m.push(this.curves[x].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:m}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});a.register("path",function(m,x){return new g(m,x)}),e.exports=g},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DataManager:t(101),DataManagerPlugin:t(897),Events:t(315)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(101),n=t(24),a=t(20),h=new s({Extends:u,initialize:function(o){u.call(this,o,o.sys.events),this.scene=o,this.systems=o.sys,o.sys.events.once(a.BOOT,this.boot,this),o.sys.events.on(a.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){u.prototype.destroy.call(this),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});n.register("DataManagerPlugin",h,"data"),e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Align:t(899),BaseShader:t(396),Bounds:t(902),Canvas:t(906),Color:t(397),ColorMatrix:t(198),Masks:t(916),RGB:t(200)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(123),u=t(17),n={In:t(900),To:t(901)};n=u(!1,n,s),e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:t(290),BottomLeft:t(291),BottomRight:t(292),Center:t(293),LeftCenter:t(295),QuickSet:t(289),RightCenter:t(296),TopCenter:t(297),TopLeft:t(298),TopRight:t(299)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:t(277),BottomLeft:t(278),BottomRight:t(279),LeftBottom:t(280),LeftCenter:t(281),LeftTop:t(282),QuickSet:t(276),RightBottom:t(283),RightCenter:t(284),RightTop:t(285),TopCenter:t(286),TopLeft:t(287),TopRight:t(288)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CenterOn:t(294),GetBottom:t(42),GetBounds:t(903),GetCenterX:t(87),GetCenterY:t(89),GetLeft:t(43),GetOffsetX:t(904),GetOffsetY:t(905),GetRight:t(44),GetTop:t(45),SetBottom:t(55),SetCenterX:t(88),SetCenterY:t(90),SetLeft:t(53),SetRight:t(54),SetTop:t(52)}},function(e,d,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(43),n=t(44),a=t(45),h=function(r,o){o===void 0&&(o={});var c=u(r),l=a(r);return o.x=c,o.y=l,o.width=n(r)-c,o.height=s(r)-l,o};e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.width*s.originX};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.height*s.originY};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasInterpolation:t(367),CanvasPool:t(31),Smoothing:t(192),TouchAction:t(907),UserSelect:t(908)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u="none"),s.style.msTouchAction=u,s.style["ms-touch-action"]=u,s.style["touch-action"]=u,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u="none");var n=["-webkit-","-khtml-","-moz-","-ms-",""];return n.forEach(function(a){s.style[a+"user-select"]=u}),s.style["-webkit-touch-callout"]=u,s.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(103),u=function(n){n===void 0&&(n=1024);var a=[],h=255,r,o=255,c=0,l=0;for(r=0;r<=h;r++)a.push({r:o,g:r,b:l,color:s(o,r,l)});for(c=255,r=h;r>=0;r--)a.push({r,g:c,b:l,color:s(r,c,l)});for(o=0,r=0;r<=h;r++,c--)a.push({r:o,g:c,b:r,color:s(o,c,r)});for(c=0,l=255,r=0;r<=h;r++,l--,o++)a.push({r:o,g:c,b:l,color:s(o,c,l)});if(n===1024)return a;var f=[],p=0,g=1024/n;for(r=0;r<n;r++)f.push(a[Math.floor(p)]),p+=g;return f};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u={r:s>>16&255,g:s>>8&255,b:s&255,a:255};return s>16777215&&(u.a=s>>>24),u};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=t(399),n=function(a,h,r){var o=r,c=r,l=r;if(h!==0){var f=r<.5?r*(1+h):r+h-r*h,p=2*r-f;o=u(p,f,a+1/3),c=u(p,f,a),l=u(p,f,a-1/3)}var g=new s;return g.setGLTo(o,c,l,1)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(188),u=function(n,a){n===void 0&&(n=1),a===void 0&&(a=1);for(var h=[],r=0;r<=359;r++)h.push(s(r/359,n,a));return h};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(135),u=function(h,r,o,c,l,f,p,g){p===void 0&&(p=100),g===void 0&&(g=0);var m=g/p;return{r:s(h,c,m),g:s(r,l,m),b:s(o,f,m)}},n=function(h,r,o,c){return o===void 0&&(o=100),c===void 0&&(c=0),u(h.r,h.g,h.b,r.r,r.g,r.b,o,c)},a=function(h,r,o,c,l,f){return l===void 0&&(l=100),f===void 0&&(f=0),u(h.r,h.g,h.b,r,o,c,l,f)};e.exports={RGBWithRGB:u,ColorWithRGB:a,ColorWithColor:n}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(195),u=t(38),n=function(a,h){return a===void 0&&(a=0),h===void 0&&(h=255),new u(s(a,h),s(a,h),s(a,h))};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(398),u=function(n,a,h,r,o){return r===void 0&&(r=255),o===void 0&&(o="#"),o==="#"?"#"+((1<<24)+(n<<16)+(a<<8)+h).toString(16).slice(1,7):"0x"+s(r)+s(n)+s(a)+s(h)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BitmapMask:t(310),GeometryMask:t(311)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={AddToDOM:t(142),DOMContentLoaded:t(400),GetInnerHeight:t(401),GetScreenOrientation:t(402),GetTarget:t(407),ParseXML:t(408),RemoveFromDOM:t(202),RequestAnimationFrame:t(386)};e.exports=s},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EventEmitter:t(919)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(24),a=new s({Extends:u,initialize:function(){u.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});n.register("EventEmitter",a,"events"),e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(142),u=t(321),n=t(325),a=t(31),h=t(0),r=t(346),o=t(921),c=t(366),l=t(101),f=t(384),p=t(347),g=t(400),m=t(9),x=t(22),y=t(409),T=t(24),S=t(414),C=t(415),E=t(417),P=t(106),M=t(422),O=t(385),A=t(387),R=t(426),F=new h({initialize:function(B){this.config=new r(B),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new u(this),this.textures=new M(this),this.cache=new n(this),this.registry=new l(this),this.input=new y(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=p,this.scale=new C(this,this.config),this.sound=null,this.sound=R.create(this),this.loop=new O(this,this.config.fps),this.plugins=new S(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,g(this.boot.bind(this))},boot:function(){if(!T.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),c(this),o(this),f(this),s(this.canvas,this.config.parent),this.textures.once(P.READY,this.texturesReady,this),this.events.emit(x.BOOT)},texturesReady:function(){this.events.emit(x.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),A(this);var I=this.events;I.on(x.HIDDEN,this.onHidden,this),I.on(x.VISIBLE,this.onVisible,this),I.on(x.BLUR,this.onBlur,this),I.on(x.FOCUS,this.onFocus,this)},step:function(I,B){if(this.pendingDestroy)return this.runDestroy();var N=this.events;N.emit(x.PRE_STEP,I,B),N.emit(x.STEP,I,B),this.scene.update(I,B),N.emit(x.POST_STEP,I,B);var Y=this.renderer;Y.preRender(),N.emit(x.PRE_RENDER,Y,I,B),this.scene.render(Y),Y.postRender(),N.emit(x.POST_RENDER,Y,I,B)},headlessStep:function(I,B){if(this.pendingDestroy)return this.runDestroy();var N=this.events;N.emit(x.PRE_STEP,I,B),N.emit(x.STEP,I,B),this.scene.update(I,B),N.emit(x.POST_STEP,I,B),N.emit(x.PRE_RENDER),N.emit(x.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(x.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(x.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(I,B){B===void 0&&(B=!1),this.pendingDestroy=!0,this.removeCanvas=I,this.noReturn=B},runDestroy:function(){this.scene.destroy(),this.events.emit(x.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(a.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});e.exports=F},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(142),u=function(n){var a=n.config;if(!(!a.parent||!a.domCreateContainer)){var h=document.createElement("div");h.style.cssText=["display: block;","width: "+n.scale.width+"px;","height: "+n.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+a.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),n.domContainer=h,s(h,a.parent)}};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameout"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameover"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectdown"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectmove"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectout"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectover"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectup"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectwheel"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="process"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdownoutside"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerupoutside"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerlockchange"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addfile"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete-"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loaderror"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="load"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fileprogress"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postprocess"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="progress"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};e.exports=s},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(!n.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var a=s.source[u];s.add("__BASE",u,0,0,a.width,a.height);for(var h=n.getElementsByTagName("SubTexture"),r,o=0;o<h.length;o++){var c=h[o].attributes,l=c.name.value,f=parseInt(c.x.value,10),p=parseInt(c.y.value,10),g=parseInt(c.width.value,10),m=parseInt(c.height.value,10);if(r=s.add(l,u,f,p,g,m),c.frameX){var x=Math.abs(parseInt(c.frameX.value,10)),y=Math.abs(parseInt(c.frameY.value,10)),T=parseInt(c.frameWidth.value,10),S=parseInt(c.frameHeight.value,10);r.setTrim(g,m,x,y,T,S)}}return s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.source[u];return s.add("__BASE",u,0,0,n.width,n.height),s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.source[u];return s.add("__BASE",u,0,0,n.width,n.height),s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=function(n,a,h){if(!h.frames&&!h.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=n.source[a];n.add("__BASE",a,0,0,r.width,r.height);for(var o=Array.isArray(h.textures)?h.textures[a].frames:h.frames,c,l=0;l<o.length;l++){var f=o[l];c=n.add(f.filename,a,f.frame.x,f.frame.y,f.frame.w,f.frame.h),f.trimmed&&c.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(c.rotated=!0,c.updateUVsInverted());var p=f.anchor||f.pivot;p&&(c.customPivot=!0,c.pivotX=p.x,c.pivotY=p.y),c.customData=s(f)}for(var g in h)g!=="frames"&&(Array.isArray(h[g])?n.customData[g]=h[g].slice(0):n.customData[g]=h[g]);return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=function(n,a,h){if(!h.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=n.source[a];n.add("__BASE",a,0,0,r.width,r.height);var o=h.frames,c;for(var l in o)if(!!o.hasOwnProperty(l)){var f=o[l];c=n.add(l,a,f.frame.x,f.frame.y,f.frame.w,f.frame.h),f.trimmed&&c.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(c.rotated=!0,c.updateUVsInverted());var p=f.anchor||f.pivot;p&&(c.customPivot=!0,c.pivotX=p.x,c.pivotY=p.y),c.customData=s(f)}for(var g in h)g!=="frames"&&(Array.isArray(h[g])?n.customData[g]=h[g].slice(0):n.customData[g]=h[g]);return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n,a,h,r,o,c,l){var f=s(l,"frameWidth",null),p=s(l,"frameHeight",f);if(f===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=n.source[a];n.add("__BASE",a,0,0,g.width,g.height);var m=s(l,"startFrame",0),x=s(l,"endFrame",-1),y=s(l,"margin",0),T=s(l,"spacing",0),S=Math.floor((o-y+T)/(f+T)),C=Math.floor((c-y+T)/(p+T)),E=S*C;E===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",n.key),(m>E||m<-E)&&(m=0),m<0&&(m=E+m),x!==-1&&(E=m+(x+1));for(var P=y,M=y,O=0,A=0,R=0;R<E;R++){O=0,A=0;var F=P+f,I=M+p;F>o&&(O=F-o),I>c&&(A=I-c),n.add(R,a,h+P,r+M,f-O,p-A),P+=f+T,P+f>o&&(P=y,M+=p+T)}return n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n,a,h){var r=s(h,"frameWidth",null),o=s(h,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var c=n.source[0];n.add("__BASE",0,0,0,c.width,c.height),s(h,"startFrame",0),s(h,"endFrame",-1);for(var l=s(h,"margin",0),f=s(h,"spacing",0),p=a.cutX,g=a.cutY,m=a.cutWidth,x=a.cutHeight,y=a.realWidth,T=a.realHeight,S=Math.floor((y-l+f)/(r+f)),C=Math.floor((T-l+f)/(o+f)),E=a.x,P=r-E,M=r-(y-m-E),O=a.y,A=o-O,R=o-(T-x-O),F,I=l,B=l,N=0,Y=a.sourceIndex,X=0;X<C;X++){for(var W=X===0,w=X===C-1,L=0;L<S;L++){var D=L===0,b=L===S-1;if(F=n.add(N,Y,p+I,g+B,r,o),D||W||b||w){var G=D?E:0,z=W?O:0,U=0,H=0;D&&(U+=r-P),b&&(U+=r-M),W&&(H+=o-A),w&&(H+=o-R);var $=r-U,K=o-H;F.cutWidth=$,F.cutHeight=K,F.setTrim(r,o,G,z,$,K)}I+=f,D?I+=P:b?I+=M:I+=r,N++}I=l,B+=f,W?B+=A:w?B+=R:B+=o}return n};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=0,s=function(n,a,h,r){var o=t-r.y-r.height;n.add(h,a,r.x,o,r.width,r.height)},u=function(n,a,h){var r=n.source[a];n.add("__BASE",a,0,0,r.width,r.height),t=r.height;for(var o=h.split(`
`),c=/^[ ]*(- )*(\w+)+[: ]+(.*)/,l="",f="",p={x:0,y:0,width:0,height:0},g=0;g<o.length;g++){var m=o[g].match(c);if(!!m){var x=m[1]==="- ",y=m[2],T=m[3];if(x&&(f!==l&&(s(n,a,f,p),l=f),p={x:0,y:0,width:0,height:0}),y==="name"){f=T;continue}switch(y){case"x":case"y":case"width":case"height":p[y]=parseInt(T,10);break}}}return f!==l&&s(n,a,f,p),n};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decoded"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decodedall"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="looped"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,d){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pan"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seek"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stopall"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Events:t(75),DisplayList:t(1012),GameObjectCreator:t(16),GameObjectFactory:t(5),UpdateList:t(1040),Components:t(11),GetCalcMatrix:t(19),BuildGameObject:t(28),BuildGameObjectAnimation:t(439),GameObject:t(15),BitmapText:t(148),Blitter:t(213),Bob:t(440),Container:t(214),DOMElement:t(442),DynamicBitmapText:t(215),Extern:t(444),Graphics:t(216),Group:t(113),Image:t(125),Layer:t(219),Particles:t(1074),PathFollower:t(457),RenderTexture:t(221),RetroFont:t(1082),Rope:t(223),Sprite:t(73),Text:t(224),GetTextSize:t(458),MeasureText:t(460),TextStyle:t(459),TileSprite:t(225),Zone:t(129),Video:t(226),Shape:t(34),Arc:t(461),Curve:t(462),Ellipse:t(463),Grid:t(464),IsoBox:t(465),IsoTriangle:t(466),Line:t(467),Polygon:t(468),Rectangle:t(473),Star:t(474),Triangle:t(475),Factories:{Blitter:t(1130),Container:t(1131),DOMElement:t(1132),DynamicBitmapText:t(1133),Extern:t(1134),Graphics:t(1135),Group:t(1136),Image:t(1137),Layer:t(1138),Particles:t(1139),PathFollower:t(1140),RenderTexture:t(1141),Rope:t(1142),Sprite:t(1143),StaticBitmapText:t(1144),Text:t(1145),TileSprite:t(1146),Zone:t(1147),Video:t(1148),Arc:t(1149),Curve:t(1150),Ellipse:t(1151),Grid:t(1152),IsoBox:t(1153),IsoTriangle:t(1154),Line:t(1155),Polygon:t(1156),Rectangle:t(1157),Star:t(1158),Triangle:t(1159)},Creators:{Blitter:t(1160),Container:t(1161),DynamicBitmapText:t(1162),Graphics:t(1163),Group:t(1164),Image:t(1165),Layer:t(1166),Particles:t(1167),RenderTexture:t(1168),Rope:t(1169),Sprite:t(1170),StaticBitmapText:t(1171),Text:t(1172),TileSprite:t(1173),Zone:t(1174),Video:t(1175)}};s.Shader=t(229),s.Mesh=t(230),s.PointLight=t(150),s.Factories.Shader=t(1184),s.Factories.Mesh=t(1185),s.Factories.PointLight=t(1186),s.Creators.Shader=t(1187),s.Creators.Mesh=t(1188),s.Creators.PointLight=t(1189),s.Light=t(481),s.LightsManager=t(482),s.LightsPlugin=t(1190),e.exports=s},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(110),n=t(24),a=t(75),h=t(20),r=t(79),o=new s({Extends:u,initialize:function(l){u.call(this,l),this.sortChildrenFlag=!1,this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},addChildCallback:function(c){c.displayList&&c.displayList!==this&&c.removeFromDisplayList(),c.displayList||(this.queueDepthSort(),c.displayList=this,c.emit(a.ADDED_TO_SCENE,c,this.scene),this.events.emit(h.ADDED_TO_SCENE,c,this.scene))},removeChildCallback:function(c){this.queueDepthSort(),c.displayList=null,c.emit(a.REMOVED_FROM_SCENE,c,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,c,this.scene)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(r(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(c,l){return c._depth-l._depth},getChildren:function(){return this.list},shutdown:function(){for(var c=this.list,l=c.length;l--;)c[l].destroy(!0);c.length=0,this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});n.register("DisplayList",o,"displayList"),e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CheckMatrix:t(209),MatrixToString:t(1014),ReverseColumns:t(1015),ReverseRows:t(1016),Rotate180:t(1017),RotateLeft:t(1018),RotateMatrix:t(147),RotateRight:t(1019),Translate:t(1020),TransposeMatrix:t(435)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(186),u=t(209),n=function(a){var h="";if(!u(a))return h;for(var r=0;r<a.length;r++){for(var o=0;o<a[r].length;o++){var c=a[r][o].toString();c!=="undefined"?h+=s(c,2):h+="?",o<a[r].length-1&&(h+=" |")}if(r<a.length-1){h+=`
`;for(var l=0;l<a[r].length;l++)h+="---",l<a[r].length-1&&(h+="+");h+=`
`}}return h};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.reverse()};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=0;u<s.length;u++)s[u].reverse();return s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(147),u=function(n){return s(n,180)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(147),u=function(n){return s(n,90)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(147),u=function(n){return s(n,-90)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(178),u=t(179),n=function(a,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),r!==0&&(r<0?s(a,Math.abs(r)):u(a,r)),h!==0)for(var o=0;o<a.length;o++){var c=a[o];h<0?s(c,Math.abs(h)):u(c,h)}return a};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h){if(h===void 0&&(h=s),n>0){var r=n-s.length;if(r<=0)return null}if(!Array.isArray(u))return s.indexOf(u)===-1?(s.push(u),a&&a.call(h,u),u):null;for(var o=u.length-1;o>=0;)s.indexOf(u[o])!==-1&&u.splice(o,1),o--;if(o=u.length,o===0)return null;n>0&&o>r&&(u.splice(r),o=r);for(var c=0;c<o;c++){var l=u[c];s.push(l),a&&a.call(h,l)}return u};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h,r){if(n===void 0&&(n=0),r===void 0&&(r=s),a>0){var o=a-s.length;if(o<=0)return null}if(!Array.isArray(u))return s.indexOf(u)===-1?(s.splice(n,0,u),h&&h.call(r,u),u):null;for(var c=u.length-1;c>=0;)s.indexOf(u[c])!==-1&&u.pop(),c--;if(c=u.length,c===0)return null;a>0&&c>o&&(u.splice(o),c=o);for(var l=c-1;l>=0;l--){var f=u[l];s.splice(n,0,f),h&&h.call(r,f)}return u};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.indexOf(u);return n!==-1&&n<s.length&&(s.splice(n,1),s.push(u)),u};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,a,h,r,o){r===void 0&&(r=0),o===void 0&&(o=n.length);var c=0;if(s(n,r,o))for(var l=r;l<o;l++){var f=n[l];f[a]===h&&c++}return c};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a,h=[null];for(a=3;a<arguments.length;a++)h.push(arguments[a]);for(a=0;a<s.length;a++)h[0]=s[a],u.apply(n,h);return s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,a,h,r,o){if(r===void 0&&(r=0),o===void 0&&(o=n.length),s(n,r,o)){var c,l=[null];for(c=5;c<arguments.length;c++)l.push(arguments[c]);for(c=r;c<o;c++)l[0]=n[c],a.apply(h,l)}return n};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.indexOf(u);if(n>0){var a=s[n-1],h=s.indexOf(a);s[n]=a,s[h]=u}return s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=s.indexOf(u);if(a===-1||n<0||n>=s.length)throw new Error("Supplied index out of bounds");return a!==n&&(s.splice(a,1),s.splice(n,0,u)),u};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.indexOf(u);if(n!==-1&&n<s.length-1){var a=s[n+1],h=s.indexOf(a);s[n]=a,s[h]=u}return s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===n)return s;var a=s.indexOf(u),h=s.indexOf(n);if(a<0||h<0)throw new Error("Supplied items must be elements of the same array");return a>h||(s.splice(a,1),h===s.length-1?s.push(u):s.splice(h,0,u)),s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===n)return s;var a=s.indexOf(u),h=s.indexOf(n);if(a<0||h<0)throw new Error("Supplied items must be elements of the same array");return a<h||(s.splice(a,1),h===0?s.unshift(u):s.splice(h,0,u)),s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(363),u=function(n,a,h){n===void 0&&(n=0),a===void 0&&(a=null),h===void 0&&(h=1),a===null&&(a=n,n=0);for(var r=[],o=Math.max(s((a-n)/(h||1)),0),c=0;c<o;c++)r.push(n),n+=h;return r};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74),u=function(n,a,h,r){if(r===void 0&&(r=n),a<0||a>n.length-1)throw new Error("Index out of bounds");var o=s(n,a);return h&&h.call(r,o),o};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,a,h,r,o){if(a===void 0&&(a=0),h===void 0&&(h=n.length),o===void 0&&(o=n),s(n,a,h)){var c=h-a,l=n.splice(a,c);if(r)for(var f=0;f<l.length;f++){var p=l[f];r.call(o,p)}return l}else return[]};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74),u=function(n,a,h){a===void 0&&(a=0),h===void 0&&(h=n.length);var r=a+Math.floor(Math.random()*h);return s(n,r)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=s.indexOf(u),h=s.indexOf(n);return a!==-1&&h===-1?(s[a]=n,!0):!1};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.indexOf(u);return n!==-1&&n>0&&(s.splice(n,1),s.unshift(u)),u};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,a,h,r,o){if(r===void 0&&(r=0),o===void 0&&(o=n.length),s(n,r,o))for(var c=r;c<o;c++){var l=n[c];l.hasOwnProperty(a)&&(l[a]=h)}return n};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===n)return s;var a=s.indexOf(u),h=s.indexOf(n);if(a<0||h<0)throw new Error("Supplied items must be elements of the same array");return s[a]=n,s[h]=u,s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(211),n=t(24),a=t(20),h=new s({Extends:u,initialize:function(o){u.call(this),this.checkQueue=!0,this.scene=o,this.systems=o.sys,o.sys.events.once(a.BOOT,this.boot,this),o.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(a.PRE_UPDATE,this.update,this),r.on(a.UPDATE,this.sceneUpdate,this),r.once(a.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(r,o){for(var c=this._active,l=c.length,f=0;f<l;f++){var p=c[f];p.active&&p.preUpdate.call(p,r,o)}},shutdown:function(){for(var r=this._active.length;r--;)this._active[r].destroy(!0);for(r=this._pending.length;r--;)this._pending[r].destroy(!0);for(r=this._destroy.length;r--;)this._destroy[r].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var o=this.systems.events;o.off(a.PRE_UPDATE,this.update,this),o.off(a.UPDATE,this.sceneUpdate,this),o.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});n.register("UpdateList",h,"updateList"),e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){if(n===void 0&&(n=!1),a===void 0)return a={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},a;var h=s.text,r=h.length,o=s.maxWidth,c=s.wordWrapCharCode,l=Number.MAX_VALUE,f=Number.MAX_VALUE,p=0,g=0,m=s.fontData.chars,x=s.fontData.lineHeight,y=s.letterSpacing,T=0,S=0,C=0,E=null,P=s._align,M=0,O=0,A=s.fontSize/s.fontData.size,R=A*s.scaleX,F=A*s.scaleY,I=null,B=0,N=[],Y=Number.MAX_VALUE,X=0,W=0,w=0,L,D=[],b=[],G=null;if(o>0){for(L=0;L<r;L++){if(C=h.charCodeAt(L),C===10){G!==null&&(D.push({word:G.word,i:G.i,x:G.x*R,y:G.y*F,w:G.w*R,h:G.h*F,cr:!0}),G=null),T=0,S+=x,I=null;continue}if(E=m[C],!!E){if(I!==null)var z=E.kerning[B];C===c?G!==null&&(D.push({word:G.word,i:G.i,x:G.x*R,y:G.y*F,w:G.w*R,h:G.h*F,cr:!1}),G=null):(G===null&&(G={word:"",i:L,x:T,y:S,w:0,h:x,cr:!1}),G.word=G.word.concat(h[L]),G.w+=E.xOffset+E.xAdvance+(z!==void 0?z:0)),T+=E.xAdvance+y,I=E,B=C}}G!==null&&D.push({word:G.word,i:G.i,x:G.x*R,y:G.y*F,w:G.w*R,h:G.h*F,cr:!1}),T=0,S=0,I=null,B=0;var U,H=0,$=[];for(L=0;L<D.length;L++){var K=D[L],Z=K.x,k=K.x+K.w;if(U){var J=Z-(U.x+U.w);H=Z-(J+U.w),U=null}var q=Z-H,Q=k-H;q>o||Q>o?($.push(K.i-1),K.cr?($.push(K.i+K.word.length),H=0,U=null):U=K):K.cr&&($.push(K.i+K.word.length),H=0,U=null)}var _=function(At,Et,_t){return At.substr(0,Et)+_t+At.substr(Et+1)};for(L=$.length-1;L>=0;L--)h=_(h,$[L],`
`);a.wrappedText=h,r=h.length,D=[],G=null}var at=0;for(L=0;L<r;L++){if(C=h.charCodeAt(L),C===10){G!==null&&(D.push({word:G.word,i:G.i,x:G.x*R,y:G.y*F,w:G.w*R,h:G.h*F}),G=null),T=0,S+=x,I=null,N[W]=w,w>X&&(X=w),w<Y&&(Y=w),W++,w=0;continue}if(E=m[C],!!E){if(M=T,O=S,I!==null){var st=E.kerning[B];M+=st!==void 0?st:0}l>M&&(l=M),f>O&&(f=O);var tt=M+E.xAdvance,j=O+x;p<tt&&(p=tt),g<j&&(g=j);var ot=E.xOffset+E.xAdvance+(st!==void 0?st:0);C===c?G!==null&&(D.push({word:G.word,i:G.i,x:G.x*R,y:G.y*F,w:G.w*R,h:G.h*F}),G=null):(G===null&&(G={word:"",i:at,x:T,y:S,w:0,h:x}),G.word=G.word.concat(h[L]),G.w+=ot),b.push({i:at,char:h[L],code:C,x:(E.xOffset+T)*A,y:(E.yOffset+S)*A,w:E.width*A,h:E.height*A,t:S*A,r:tt*A,b:x*A,line:W,glyph:E}),T+=E.xAdvance+y,I=E,B=C,w=tt*A,at++}}if(G!==null&&D.push({word:G.word,i:G.i,x:G.x*R,y:G.y*F,w:G.w*R,h:G.h*F}),N[W]=w,w>X&&(X=w),w<Y&&(Y=w),P>0)for(var et=0;et<b.length;et++){var nt=b[et];if(P===1){var jt=(X-N[nt.line])/2;nt.x+=jt,nt.r+=jt}else if(P===2){var qt=X-N[nt.line];nt.x+=qt,nt.r+=qt}}var yt=a.local,lt=a.global,Rt=a.lines;return yt.x=l*A,yt.y=f*A,yt.width=p*A,yt.height=g*A,lt.x=s.x-s._displayOriginX+l*R,lt.y=s.y-s._displayOriginY+f*F,lt.width=p*R,lt.height=g*F,Rt.shortest=Y,Rt.longest=X,Rt.lengths=N,u&&(yt.x=Math.ceil(yt.x),yt.y=Math.ceil(yt.y),yt.width=Math.ceil(yt.width),yt.height=Math.ceil(yt.height),lt.x=Math.ceil(lt.x),lt.y=Math.ceil(lt.y),lt.width=Math.ceil(lt.width),lt.height=Math.ceil(lt.height),Rt.shortest=Math.ceil(Y),Rt.longest=Math.ceil(X)),n&&(s._displayOriginX=s.originX*yt.width,s._displayOriginY=s.originY*yt.height,lt.x=s.x-s._displayOriginX*s.scaleX,lt.y=s.y-s._displayOriginY*s.scaleY,u&&(lt.x=Math.ceil(lt.x),lt.y=Math.ceil(lt.y))),a.words=D,a.characters=b,a.lines.height=x,a.scale=A,a.scaleX=s.scaleX,a.scaleY=s.scaleY,a};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(212),u=function(n,a,h,r,o,c,l){var f=n.sys.textures.get(h),p=f.get(r),g=n.sys.cache.xml.get(o);if(p&&g){var m=s(g,p,c,l,f);return n.sys.cache.bitmapFont.add(a,{data:m,texture:h,frame:r,fromAtlas:!0}),!0}else return!1};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1046),u=t(1048),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1047),u=t(19),n=t(12),a=function(h,r,o,c){var l=r._text,f=l.length;if(f!==0){o.addToRenderList(r);var p=h.pipelines.set(r.pipeline,r),g=u(r,o,c).calc,m=o.roundPixels,x=o.alpha,y=r.charColors,T=r.tintFill,S=n.getTintAppendFloatAlpha,C=S(r.tintTopLeft,x*r._alphaTL),E=S(r.tintTopRight,x*r._alphaTR),P=S(r.tintBottomLeft,x*r._alphaBL),M=S(r.tintBottomRight,x*r._alphaBR),O=r.frame.glTexture,A=p.setGameObject(r),R=r.getTextBounds(!1),F,I,B,N=R.characters,Y=r.dropShadowX,X=r.dropShadowY,W=Y!==0||X!==0;if(h.pipelines.preBatch(r),W){var w=r.dropShadowColor,L=r.dropShadowAlpha,D=S(w,x*L*r._alphaTL),b=S(w,x*L*r._alphaTR),G=S(w,x*L*r._alphaBL),z=S(w,x*L*r._alphaBR);for(F=0;F<N.length;F++)I=N[F],B=I.glyph,!(I.code===32||B.width===0||B.height===0)&&s(p,r,I,B,Y,X,g,m,D,b,G,z,1,O,A)}for(F=0;F<N.length;F++)if(I=N[F],B=I.glyph,!(I.code===32||B.width===0||B.height===0))if(y[I.i]){var U=y[I.i],H=U.tintEffect,$=S(U.tintTL,x*r._alphaTL),K=S(U.tintTR,x*r._alphaTR),Z=S(U.tintBL,x*r._alphaBL),k=S(U.tintBR,x*r._alphaBR);s(p,r,I,B,0,0,g,m,$,K,Z,k,H,O,A)}else s(p,r,I,B,0,0,g,m,C,E,P,M,T,O,A);h.pipelines.postBatch(r)}};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h,r,o,c,l,f,p,g,m,x,y){var T=n.x-u.displayOriginX+h,S=n.y-u.displayOriginY+r,C=T+n.w,E=S+n.h,P=o.getXRound(T,S,c),M=o.getYRound(T,S,c),O=o.getXRound(T,E,c),A=o.getYRound(T,E,c),R=o.getXRound(C,E,c),F=o.getYRound(C,E,c),I=o.getXRound(C,S,c),B=o.getYRound(C,S,c);s.batchQuad(u,P,M,O,A,R,F,I,B,a.u0,a.v0,a.u1,a.v1,l,f,p,g,m,x,y)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(30),u=function(n,a,h,r){var o=a._text,c=o.length,l=n.currentContext;if(!(c===0||!s(n,l,a,h,r))){h.addToRenderList(a);var f=a.fromAtlas?a.frame:a.texture.frames.__BASE,p=a.fontData.chars,g=a.fontData.lineHeight,m=a._letterSpacing,x=0,y=0,T=0,S=null,C=0,E=0,P=0,M=0,O=0,A=0,R=null,F=0,I=f.source.image,B=f.cutX,N=f.cutY,Y=a._fontSize/a.fontData.size,X=a._align,W=0,w=0,L=a.getTextBounds(!1);a.maxWidth>0&&(o=L.wrappedText,c=o.length);var D=a._bounds.lines;X===1?w=(D.longest-D.lengths[0])/2:X===2&&(w=D.longest-D.lengths[0]),l.translate(-a.displayOriginX,-a.displayOriginY);for(var b=h.roundPixels,G=0;G<c;G++){if(T=o.charCodeAt(G),T===10){W++,X===1?w=(D.longest-D.lengths[W])/2:X===2&&(w=D.longest-D.lengths[W]),x=0,y+=g,R=null;continue}if(S=p[T],!!S){if(C=B+S.x,E=N+S.y,P=S.width,M=S.height,O=S.xOffset+x,A=S.yOffset+y,R!==null){var z=S.kerning[F];O+=z!==void 0?z:0}O*=Y,A*=Y,O+=w,x+=S.xAdvance+m,R=S,F=T,!(P===0||M===0||T===32)&&(b&&(O=Math.round(O),A=Math.round(A)),l.save(),l.translate(O,A),l.scale(Y,Y),l.drawImage(I,C,E,P,M,0,0,P,M),l.restore())}}l.restore()}};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1050),u=t(1051),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=t(12),n=new s,a=function(h,r,o,c){var l=r.getRenderList();if(l.length!==0){var f=o.alpha*r.alpha;if(f!==0){o.addToRenderList(r);var p=h.pipelines.set(this.pipeline,r),g=o.scrollX*r.scrollFactorX,m=o.scrollY*r.scrollFactorY,x=n.copyFrom(o.matrix);c&&(x.multiplyWithOffset(c,-g,-m),g=0,m=0);var y=r.x-g,T=r.y-m,S=-1,C=!1,E=o.roundPixels;h.pipelines.preBatch(r);for(var P=0;P<l.length;P++){var M=l[P],O=M.frame,A=M.alpha*f;if(A!==0){var R=O.width,F=O.height,I=y+M.x+O.x,B=T+M.y+O.y;M.flipX&&(R*=-1,I+=O.width),M.flipY&&(F*=-1,B+=O.height);var N=I+R,Y=B+F,X=x.getX(I,B),W=x.getY(I,B),w=x.getX(N,Y),L=x.getY(N,Y),D=u.getTintAppendFloatAlpha(M.tint,A);if(O.sourceIndex!==S){var b=p.setGameObject(r,O);S=O.sourceIndex}E&&(X=Math.round(X),W=Math.round(W),w=Math.round(w),L=Math.round(L)),p.batchQuad(r,X,W,X,L,w,L,w,W,O.u0,O.v0,O.u1,O.v1,D,D,D,D,C,O.glTexture,b)&&(S=-1)}}h.pipelines.postBatch(r)}}};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h=u.getRenderList();if(h.length!==0){var r=s.currentContext,o=n.alpha*u.alpha;if(o!==0){n.addToRenderList(u),r.globalCompositeOperation=s.blendModes[u.blendMode],r.imageSmoothingEnabled=!(!s.antialias||u.frame.source.scaleMode);var c=u.x-n.scrollX*u.scrollFactorX,l=u.y-n.scrollY*u.scrollFactorY;r.save(),a&&a.copyToContext(r);for(var f=n.roundPixels,p=0;p<h.length;p++){var g=h[p],m=g.flipX||g.flipY,x=g.frame,y=x.canvasData,T=x.x,S=x.y,C=1,E=1,P=g.alpha*o;P!==0&&(r.globalAlpha=P,m?(g.flipX&&(C=-1,T-=y.width),g.flipY&&(E=-1,S-=y.height),r.save(),r.translate(g.x+c,g.y+l),r.scale(C,E),r.drawImage(x.source.image,y.x,y.y,y.width,y.height,T,S,y.width,y.height),r.restore()):(f&&(T=Math.round(T),S=Math.round(S)),r.drawImage(x.source.image,y.x,y.y,y.width,y.height,T+g.x+c,S+g.y+l,y.width,y.height)))}r.restore()}}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1053),u=t(1054),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u);var h=u.list,r=h.length;if(r!==0){var o=u.localTransform;a?(o.loadIdentity(),o.multiply(a),o.translate(u.x,u.y),o.rotate(u.rotation),o.scale(u.scaleX,u.scaleY)):o.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),s.pipelines.preBatch(u);var c=u.blendMode!==-1;c||s.setBlendMode(0);for(var l=u.alpha,f=u.scrollFactorX,p=u.scrollFactorY,g=0;g<r;g++){var m=h[g];if(!!m.willRender(n)){var x,y,T,S;if(m.alphaTopLeft!==void 0)x=m.alphaTopLeft,y=m.alphaTopRight,T=m.alphaBottomLeft,S=m.alphaBottomRight;else{var C=m.alpha;x=C,y=C,T=C,S=C}var E=m.scrollFactorX,P=m.scrollFactorY;!c&&m.blendMode!==s.currentBlendMode&&s.setBlendMode(m.blendMode);var M=m.mask;M&&M.preRenderWebGL(s,m,n);var O=m.type;O!==s.currentType&&(s.newType=!0,s.currentType=O),s.nextTypeMatch=g<r-1?h[g+1].type===s.currentType:!1,m.setScrollFactor(E*f,P*p),m.setAlpha(x*l,y*l,T*l,S*l),m.renderWebGL(s,m,n,o),m.setAlpha(x,y,T,S),m.setScrollFactor(E,P),M&&M.postRenderWebGL(s,n),s.newType=!1}}s.pipelines.postBatch(u)}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u);var h=u.list;if(h.length!==0){var r=u.localTransform;a?(r.loadIdentity(),r.multiply(a),r.translate(u.x,u.y),r.rotate(u.rotation),r.scale(u.scaleX,u.scaleY)):r.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);var o=u.blendMode!==-1;o||s.setBlendMode(0);var c=u._alpha,l=u.scrollFactorX,f=u.scrollFactorY;u.mask&&u.mask.preRenderCanvas(s,null,n);for(var p=0;p<h.length;p++){var g=h[p];if(!!g.willRender(n)){var m=g.alpha,x=g.scrollFactorX,y=g.scrollFactorY;!o&&g.blendMode!==s.currentBlendMode&&s.setBlendMode(g.blendMode),g.setScrollFactor(x*l,y*f),g.setAlpha(m*c),g.renderCanvas(s,g,n,r),g.setAlpha(m),g.setScrollFactor(x,y)}}u.mask&&u.mask.postRenderCanvas(s)}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(443),u=t(443),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1058),u=t(1059),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(25),n=t(12),a=new u,h=function(r,o,c,l){var f=o.text,p=f.length;if(p!==0){c.addToRenderList(o);var g=r.pipelines.set(o.pipeline,o),m=s(o,c,l),x=m.sprite,y=m.calc,T=a,S=o.cropWidth>0||o.cropHeight>0;S&&(g.flush(),r.pushScissor(y.tx,y.ty,o.cropWidth*y.scaleX,o.cropHeight*y.scaleY));var C=o.frame,E=C.glTexture,P=o.tintFill,M=n.getTintAppendFloatAlpha(o.tintTopLeft,c.alpha*o._alphaTL),O=n.getTintAppendFloatAlpha(o.tintTopRight,c.alpha*o._alphaTR),A=n.getTintAppendFloatAlpha(o.tintBottomLeft,c.alpha*o._alphaBL),R=n.getTintAppendFloatAlpha(o.tintBottomRight,c.alpha*o._alphaBR),F=g.setGameObject(o),I=0,B=0,N=0,Y=0,X=o.letterSpacing,W,w=0,L=0,D,b=o.scrollX,G=o.scrollY,z=o.fontData,U=z.chars,H=z.lineHeight,$=o.fontSize/z.size,K=0,Z=o._align,k=0,J=0,q=o.getTextBounds(!1);o.maxWidth>0&&(f=q.wrappedText,p=f.length);var Q=o._bounds.lines;Z===1?J=(Q.longest-Q.lengths[0])/2:Z===2&&(J=Q.longest-Q.lengths[0]);var _=c.roundPixels,at=o.displayCallback,st=o.callbackData;r.pipelines.preBatch(o);for(var tt=0;tt<p;tt++){if(N=f.charCodeAt(tt),N===10){k++,Z===1?J=(Q.longest-Q.lengths[k])/2:Z===2&&(J=Q.longest-Q.lengths[k]),I=0,B+=H,D=null;continue}if(W=U[N],!!W){w=W.width,L=W.height;var j=W.xOffset+I-b,ot=W.yOffset+B-G;if(D!==null){var et=W.kerning[Y];j+=et!==void 0?et:0}if(I+=W.xAdvance+X,D=W,Y=N,!(w===0||L===0||N===32)){if($=o.fontSize/o.fontData.size,K=0,at){st.color=0,st.tint.topLeft=M,st.tint.topRight=O,st.tint.bottomLeft=A,st.tint.bottomRight=R,st.index=tt,st.charCode=N,st.x=j,st.y=ot,st.scale=$,st.rotation=K,st.data=W.data;var nt=at(st);j=nt.x,ot=nt.y,$=nt.scale,K=nt.rotation,nt.color?(M=nt.color,O=nt.color,A=nt.color,R=nt.color):(M=nt.tint.topLeft,O=nt.tint.topRight,A=nt.tint.bottomLeft,R=nt.tint.bottomRight),M=n.getTintAppendFloatAlpha(M,c.alpha*o._alphaTL),O=n.getTintAppendFloatAlpha(O,c.alpha*o._alphaTR),A=n.getTintAppendFloatAlpha(A,c.alpha*o._alphaBL),R=n.getTintAppendFloatAlpha(R,c.alpha*o._alphaBR)}j*=$,ot*=$,j-=o.displayOriginX,ot-=o.displayOriginY,j+=J,T.applyITRS(j,ot,K,$,$),y.multiply(T,x);var jt=W.u0,qt=W.v0,yt=W.u1,lt=W.v1,Rt=w,At=L,Et=x.e,_t=x.f,Ye=At*x.c+x.e,Ue=At*x.d+x.f,Xe=Rt*x.a+At*x.c+x.e,We=Rt*x.b+At*x.d+x.f,He=Rt*x.a+x.e,$e=Rt*x.b+x.f;_&&(Et=Math.round(Et),_t=Math.round(_t),Ye=Math.round(Ye),Ue=Math.round(Ue),Xe=Math.round(Xe),We=Math.round(We),He=Math.round(He),$e=Math.round($e)),g.batchQuad(o,Et,_t,Ye,Ue,Xe,We,He,$e,jt,qt,yt,lt,M,O,A,R,P,E,F)}}}S&&(g.flush(),r.popScissor()),r.pipelines.postBatch(o)}};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(30),u=function(n,a,h,r){var o=a._text,c=o.length,l=n.currentContext;if(!(c===0||!s(n,l,a,h,r))){h.addToRenderList(a);var f=a.fromAtlas?a.frame:a.texture.frames.__BASE,p=a.displayCallback,g=a.callbackData,m=a.fontData.chars,x=a.fontData.lineHeight,y=a._letterSpacing,T=0,S=0,C=0,E=null,P=0,M=0,O=0,A=0,R=0,F=0,I=null,B=0,N=a.frame.source.image,Y=f.cutX,X=f.cutY,W=0,w=0,L=a._fontSize/a.fontData.size,D=a._align,b=0,G=0;a.getTextBounds(!1);var z=a._bounds.lines;D===1?G=(z.longest-z.lengths[0])/2:D===2&&(G=z.longest-z.lengths[0]),l.translate(-a.displayOriginX,-a.displayOriginY);var U=h.roundPixels;a.cropWidth>0&&a.cropHeight>0&&(l.beginPath(),l.rect(0,0,a.cropWidth,a.cropHeight),l.clip());for(var H=0;H<c;H++){if(w=L,W=0,C=o.charCodeAt(H),C===10){b++,D===1?G=(z.longest-z.lengths[b])/2:D===2&&(G=z.longest-z.lengths[b]),T=0,S+=x,I=null;continue}if(E=m[C],!!E){if(P=Y+E.x,M=X+E.y,O=E.width,A=E.height,R=E.xOffset+T-a.scrollX,F=E.yOffset+S-a.scrollY,I!==null){var $=E.kerning[B];R+=$!==void 0?$:0}if(p){g.index=H,g.charCode=C,g.x=R,g.y=F,g.scale=w,g.rotation=W,g.data=E.data;var K=p(g);R=K.x,F=K.y,w=K.scale,W=K.rotation}R*=w,F*=w,R+=G,T+=E.xAdvance+y,I=E,B=C,!(O===0||A===0||C===32)&&(U&&(R=Math.round(R),F=Math.round(F)),l.save(),l.translate(R,F),l.rotate(W),l.scale(w,w),l.drawImage(N,P,M,O,A,0,0,O,A),l.restore())}}l.restore()}};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1061),u=t(1062),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,a,h,r){n.pipelines.clear();var o=s(a,h,r).calc;a.render.call(a,n,h,o),n.pipelines.rebind()};e.exports=u},function(e,d){},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1064),u=t(448),u=t(448),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(217),u=t(19),n=t(25),a=t(12),h=function(f,p,g){this.x=f,this.y=p,this.width=g},r=function(f,p,g){this.points=[],this.pointsLength=1,this.points[0]=new h(f,p,g)},o=[],c=new n,l=function(f,p,g,m){if(p.commandBuffer.length!==0){g.addToRenderList(p);var x=f.pipelines.set(p.pipeline,p);f.pipelines.preBatch(p);for(var y=u(p,g,m).calc,T=c.loadIdentity(),S=p.commandBuffer,C=g.alpha*p.alpha,E=1,P=x.fillTint,M=x.strokeTint,O=0,A=0,R=0,F=.01,I=Math.PI*2,B,N=[],Y=0,X=!0,W=null,w=a.getTintAppendFloatAlpha,L=0;L<S.length;L++)switch(B=S[L],B){case s.BEGIN_PATH:{N.length=0,W=null,X=!0;break}case s.CLOSE_PATH:{X=!1,W&&W.points.length&&W.points.push(W.points[0]);break}case s.FILL_PATH:{for(Y=0;Y<N.length;Y++)x.batchFillPath(N[Y].points,T,y);break}case s.STROKE_PATH:{for(Y=0;Y<N.length;Y++)x.batchStrokePath(N[Y].points,E,X,T,y);break}case s.LINE_STYLE:{E=S[++L];var D=S[++L],b=S[++L]*C,G=w(D,b);M.TL=G,M.TR=G,M.BL=G,M.BR=G;break}case s.FILL_STYLE:{var z=S[++L],U=S[++L]*C,H=w(z,U);P.TL=H,P.TR=H,P.BL=H,P.BR=H;break}case s.GRADIENT_FILL_STYLE:{var $=S[++L]*C,K=S[++L]*C,Z=S[++L]*C,k=S[++L]*C;P.TL=w(S[++L],$),P.TR=w(S[++L],K),P.BL=w(S[++L],Z),P.BR=w(S[++L],k);break}case s.GRADIENT_LINE_STYLE:{E=S[++L];var J=S[++L]*C;M.TL=w(S[++L],J),M.TR=w(S[++L],J),M.BL=w(S[++L],J),M.BR=w(S[++L],J);break}case s.ARC:{var q=0,Q=S[++L],_=S[++L],at=S[++L],st=S[++L],tt=S[++L],j=S[++L],ot=S[++L];for(tt-=st,j?tt<-I?tt=-I:tt>0&&(tt=-I+tt%I):tt>I?tt=I:tt<0&&(tt=I+tt%I),W===null&&(W=new r(Q+Math.cos(st)*at,_+Math.sin(st)*at,E),N.push(W),q+=F);q<1+ot;)R=tt*q+st,O=Q+Math.cos(R)*at,A=_+Math.sin(R)*at,W.points.push(new h(O,A,E)),q+=F;R=tt+st,O=Q+Math.cos(R)*at,A=_+Math.sin(R)*at,W.points.push(new h(O,A,E));break}case s.FILL_RECT:{x.batchFillRect(S[++L],S[++L],S[++L],S[++L],T,y);break}case s.FILL_TRIANGLE:{x.batchFillTriangle(S[++L],S[++L],S[++L],S[++L],S[++L],S[++L],T,y);break}case s.STROKE_TRIANGLE:{x.batchStrokeTriangle(S[++L],S[++L],S[++L],S[++L],S[++L],S[++L],E,T,y);break}case s.LINE_TO:{W!==null?W.points.push(new h(S[++L],S[++L],E)):(W=new r(S[++L],S[++L],E),N.push(W));break}case s.MOVE_TO:{W=new r(S[++L],S[++L],E),N.push(W);break}case s.SAVE:{o.push(T.copyToArray());break}case s.RESTORE:{T.copyFromArray(o.pop());break}case s.TRANSLATE:{Q=S[++L],_=S[++L],T.translate(Q,_);break}case s.SCALE:{Q=S[++L],_=S[++L],T.scale(Q,_);break}case s.ROTATE:{T.rotate(S[++L]);break}}f.pipelines.postBatch(p)}};e.exports=l},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1066),u=t(1067),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u),u.pipeline.batchSprite(u,n,a)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u),s.batchSprite(u,u.frame,n,a)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1069),u=t(1070),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u),this.pipeline.batchSprite(u,n,a)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u),s.batchSprite(u,u.frame,n,a)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1072),u=t(1073),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=u.list,h=a.length;if(h!==0){u.depthSort(),s.pipelines.preBatch(u);var r=u.blendMode!==-1;r||s.setBlendMode(0);for(var o=u.alpha,c=0;c<h;c++){var l=a[c];if(!!l.willRender(n)){var f,p,g,m;if(l.alphaTopLeft!==void 0)f=l.alphaTopLeft,p=l.alphaTopRight,g=l.alphaBottomLeft,m=l.alphaBottomRight;else{var x=l.alpha;f=x,p=x,g=x,m=x}!r&&l.blendMode!==s.currentBlendMode&&s.setBlendMode(l.blendMode);var y=l.mask;y&&y.preRenderWebGL(s,l,n);var T=l.type;T!==s.currentType&&(s.newType=!0,s.currentType=T),s.nextTypeMatch=c<h-1?a[c+1].type===s.currentType:!1,l.setAlpha(f*o,p*o,g*o,m*o),l.renderWebGL(s,l,n),l.setAlpha(f,p,g,m),y&&y.postRenderWebGL(s,n),s.newType=!1}}s.pipelines.postBatch(u)}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=u.list;if(a.length!==0){u.depthSort();var h=u.blendMode!==-1;h||s.setBlendMode(0);var r=u._alpha;u.mask&&u.mask.preRenderCanvas(s,null,n);for(var o=0;o<a.length;o++){var c=a[o];if(!!c.willRender(n)){var l=c.alpha;!h&&c.blendMode!==s.currentBlendMode&&s.setBlendMode(c.blendMode),c.setAlpha(l*r),c.renderCanvas(s,c,n),c.setAlpha(l)}}u.mask&&u.mask.postRenderCanvas(s)}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EmitterOp:t(449),GravityWell:t(450),Particle:t(451),ParticleEmitter:t(452),ParticleEmitterManager:t(220),Zones:t(1078)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1076),u=t(1077),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=t(12),n=new s,a=new s,h=new s,r=new s,o=function(c,l,f,p){var g=l.emitters.list,m=g.length;if(m!==0){var x=c.pipelines.set(l.pipeline),y=n,T=a,S=h,C=r;p?(C.loadIdentity(),C.multiply(p),C.translate(l.x,l.y),C.rotate(l.rotation),C.scale(l.scaleX,l.scaleY)):C.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var E=f.roundPixels,P=l.defaultFrame.glTexture,M=u.getTintAppendFloatAlpha,O=x.setGameObject(l,l.defaultFrame);c.pipelines.preBatch(l);for(var A=0;A<m;A++){var R=g[A],F=R.alive,I=F.length;if(!(!R.visible||I===0)){f.addToRenderList(R);var B=R.scrollFactorX,N=R.scrollFactorY;c.setBlendMode(R.blendMode),R.mask&&(R.mask.preRenderWebGL(c,R,f),c.pipelines.set(l.pipeline));for(var Y=0,X=0;X<I;X++){var W=F[X],w=W.alpha*f.alpha;if(!(w<=0)){S.applyITRS(W.x,W.y,W.rotation,W.scaleX,W.scaleY),y.copyFrom(f.matrix),y.multiplyWithOffset(C,-f.scrollX*B,-f.scrollY*N),S.e=W.x,S.f=W.y,y.multiply(S,T);var L=W.frame,D=-L.halfWidth,b=-L.halfHeight,G=D+L.width,z=b+L.height,U=T.getXRound(D,b,E),H=T.getYRound(D,b,E),$=T.getXRound(D,z,E),K=T.getYRound(D,z,E),Z=T.getXRound(G,z,E),k=T.getYRound(G,z,E),J=T.getXRound(G,b,E),q=T.getYRound(G,b,E),Q=M(W.tint,w);x.batchQuad(R,U,H,$,K,Z,k,J,q,L.u0,L.v0,L.u1,L.v1,Q,Q,Q,Q,Y,P,O)}}R.mask&&R.mask.postRenderWebGL(c,f)}}c.pipelines.postBatch(l)}};e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=new s,n=new s,a=new s,h=new s,r=function(o,c,l,f){var p=c.emitters.list,g=p.length;if(g!==0){var m=u.copyFrom(l.matrix),x=n,y=a,T=h;f?(T.loadIdentity(),T.multiply(f),T.translate(c.x,c.y),T.rotate(c.rotation),T.scale(c.scaleX,c.scaleY)):T.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY);for(var S=o.currentContext,C=l.roundPixels,E=0;E<g;E++){var P=p[E],M=P.alive,O=M.length;if(!(!P.visible||O===0)){l.addToRenderList(P);var A=P.scrollFactorX,R=P.scrollFactorY;S.save(),S.globalCompositeOperation=o.blendModes[P.blendMode];for(var F=0;F<O;F++){var I=M[F],B=I.alpha*l.alpha;if(!(B<=0)){y.applyITRS(I.x,I.y,I.rotation,I.scaleX,I.scaleY),m.copyFrom(l.matrix),m.multiplyWithOffset(T,-l.scrollX*A,-l.scrollY*R),y.e=I.x,y.f=I.y,m.multiply(y,x);var N=I.frame,Y=N.canvasData,X=-N.halfWidth,W=-N.halfHeight;S.globalAlpha=B,S.save(),x.setToContext(S),C&&(X=Math.round(X),W=Math.round(W)),S.imageSmoothingEnabled=!(!o.antialias||N.source.scaleMode),S.drawImage(N.source.image,Y.x,Y.y,Y.width,Y.height,X,W,Y.width,Y.height),S.restore()}}S.restore()}}}};e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DeathZone:t(453),EdgeZone:t(454),RandomZone:t(456)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1080),u=t(1081),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,a,h,r){h.addToRenderList(a);var o=h.alpha,c=a.renderTarget,l=c.width,f=c.height,p=s.getTintAppendFloatAlpha,g=n.pipelines.set(a.pipeline),m=g.setTexture2D(c.texture);n.pipelines.preBatch(a),g.batchTexture(a,c.texture,l,f,a.x,a.y,l,f,a.scaleX,a.scaleY,a.rotation,a.flipX,!a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,l,f,p(a.tintTopLeft,o*a._alphaTL),p(a.tintTopRight,o*a._alphaTR),p(a.tintBottomLeft,o*a._alphaBL),p(a.tintBottomRight,o*a._alphaBR),a.tintFill,0,0,h,r,!0,m),n.resetTextures(),n.pipelines.postBatch(a)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u),s.batchSprite(u,u.frame,n,a)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1083),u=t(17),n={Parse:t(1084)};n=u(!1,n,s),e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=function(n,a){var h=a.width,r=a.height,o=Math.floor(h/2),c=Math.floor(r/2),l=s(a,"chars","");if(l!==""){var f=s(a,"image",""),p=n.sys.textures.getFrame(f),g=p.cutX,m=p.cutY,x=p.source.width,y=p.source.height,T=s(a,"offset.x",0),S=s(a,"offset.y",0),C=s(a,"spacing.x",0),E=s(a,"spacing.y",0),P=s(a,"lineSpacing",0),M=s(a,"charsPerRow",null);M===null&&(M=x/h,M>l.length&&(M=l.length));for(var O=T,A=S,R={retroFont:!0,font:f,size:h,lineHeight:r+P,chars:{}},F=0,I=0;I<l.length;I++){var B=l.charCodeAt(I),N=(g+O)/x,Y=(m+A)/y,X=(g+O+h)/x,W=(m+A+r)/y;R.chars[B]={x:O,y:A,width:h,height:r,centerX:o,centerY:c,xOffset:0,yOffset:0,xAdvance:h,data:{},kerning:{},u0:N,v0:Y,u1:X,v1:W},F++,F===M?(F=0,O=T,A+=r+E):O+=h+C}var w={data:R,frame:null,texture:f};return w}};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1086),u=t(1087),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(a,h,r,o){r.addToRenderList(h);var c=a.pipelines.set(h.pipeline,h),l=s(h,r,o).calc,f=h.vertices,p=h.uv,g=h.colors,m=h.alphas,x=h.alpha,y=u.getTintAppendFloatAlpha,T=r.roundPixels,S=f.length,C=Math.floor(S*.5);c.flush(),a.pipelines.preBatch(h);var E=c.setGameObject(h),P=c.vertexViewF32,M=c.vertexViewU32,O=c.vertexCount*c.currentShader.vertexComponentCount-1,A=0,R=h.tintFill;h.dirty&&h.updateVertices();for(var F=h.debugCallback,I=[],B=0;B<S;B+=2){var N=f[B+0],Y=f[B+1],X=N*l.a+Y*l.c+l.e,W=N*l.b+Y*l.d+l.f;T&&(X=Math.round(X),W=Math.round(W)),P[++O]=X,P[++O]=W,P[++O]=p[B+0],P[++O]=p[B+1],P[++O]=E,P[++O]=R,M[++O]=y(g[A],r.alpha*(m[A]*x)),A++,F&&(I[B+0]=X,I[B+1]=W)}F&&F.call(h,h,S,I),c.vertexCount+=C,a.pipelines.postBatch(h)};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1089),u=t(1090),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,a,h,r){if(!(a.width===0||a.height===0)){h.addToRenderList(a);var o=a.frame,c=o.width,l=o.height,f=s.getTintAppendFloatAlpha,p=n.pipelines.set(a.pipeline,a),g=p.setTexture2D(o.glTexture,a);n.pipelines.preBatch(a),p.batchTexture(a,o.glTexture,c,l,a.x,a.y,c/a.style.resolution,l/a.style.resolution,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,c,l,f(a.tintTopLeft,h.alpha*a._alphaTL),f(a.tintTopRight,h.alpha*a._alphaTR),f(a.tintBottomLeft,h.alpha*a._alphaBL),f(a.tintBottomRight,h.alpha*a._alphaBR),a.tintFill,0,0,h,r,!1,g),n.pipelines.postBatch(a)}};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u.width===0||u.height===0||(n.addToRenderList(u),s.batchSprite(u,u.frame,n,a))};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1092),u=t(1093),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,a,h,r){a.updateCanvas();var o=a.width,c=a.height;if(!(o===0||c===0)){h.addToRenderList(a),n.pipelines.preBatch(a);var l=s.getTintAppendFloatAlpha,f=n.pipelines.set(a.pipeline,a),p=f.setTexture2D(a.fillPattern,a);f.batchTexture(a,a.fillPattern,a.displayFrame.width*a.tileScaleX,a.displayFrame.height*a.tileScaleY,a.x,a.y,o,c,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.originX*o,a.originY*c,0,0,o,c,l(a.tintTopLeft,h.alpha*a._alphaTL),l(a.tintTopRight,h.alpha*a._alphaTR),l(a.tintBottomLeft,h.alpha*a._alphaBL),l(a.tintBottomRight,h.alpha*a._alphaBR),a.tintFill,a.tilePositionX%a.displayFrame.width/a.displayFrame.width,a.tilePositionY%a.displayFrame.height/a.displayFrame.height,h,r,!1,p),n.pipelines.postBatch(a)}};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u.updateCanvas(),n.addToRenderList(u),s.batchSprite(u,u.frame,n,a)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1095),u=t(1096),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u.videoTexture&&(n.addToRenderList(u),u.pipeline.batchSprite(u,n,a))};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u.videoTexture&&(n.addToRenderList(u),s.batchSprite(u,u.frame,n,a))};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1098),u=t(1099),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(114),n=t(81),a=function(h,r,o,c){o.addToRenderList(r);var l=h.pipelines.set(r.pipeline),f=s(r,o,c),p=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX,m=r._displayOriginY,x=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&u(l,p,r,x,g,m),r.isStroked&&n(l,r,x,g,m),h.pipelines.postBatch(r)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36),u=t(48),n=t(60),a=t(30),h=function(r,o,c,l){c.addToRenderList(o);var f=r.currentContext;if(a(r,f,o,c,l)){var p=o.radius;f.beginPath(),f.arc(p-o.originX*(p*2),p-o.originY*(p*2),p,s(o._startAngle),s(o._endAngle),o.anticlockwise),o.closePath&&f.closePath(),o.isFilled&&(u(f,o),f.fill()),o.isStroked&&(n(f,o),f.stroke()),f.restore()}};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1101),u=t(1102),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(114),u=t(19),n=t(81),a=function(h,r,o,c){o.addToRenderList(r);var l=h.pipelines.set(r.pipeline),f=u(r,o,c),p=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX+r._curveBounds.x,m=r._displayOriginY+r._curveBounds.y,x=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&s(l,p,r,x,g,m),r.isStroked&&n(l,r,x,g,m),h.pipelines.postBatch(r)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(h,r,o,c){o.addToRenderList(r);var l=h.currentContext;if(n(h,l,r,o,c)){var f=r._displayOriginX+r._curveBounds.x,p=r._displayOriginY+r._curveBounds.y,g=r.pathData,m=g.length-1,x=g[0]-f,y=g[1]-p;l.beginPath(),l.moveTo(x,y),r.closePath||(m-=2);for(var T=2;T<m;T+=2){var S=g[T]-f,C=g[T+1]-p;l.lineTo(S,C)}r.closePath&&l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1104),u=t(1105),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(114),u=t(19),n=t(81),a=function(h,r,o,c){o.addToRenderList(r);var l=h.pipelines.set(r.pipeline),f=u(r,o,c),p=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX,m=r._displayOriginY,x=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&s(l,p,r,x,g,m),r.isStroked&&n(l,r,x,g,m),h.pipelines.postBatch(r)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(h,r,o,c){o.addToRenderList(r);var l=h.currentContext;if(n(h,l,r,o,c)){var f=r._displayOriginX,p=r._displayOriginY,g=r.pathData,m=g.length-1,x=g[0]-f,y=g[1]-p;l.beginPath(),l.moveTo(x,y),r.closePath||(m-=2);for(var T=2;T<m;T+=2){var S=g[T]-f,C=g[T+1]-p;l.lineTo(S,C)}l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1107),u=t(1108),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(a,h,r,o){r.addToRenderList(h);var c=a.pipelines.set(h.pipeline),l=s(h,r,o),f=c.calcMatrix.copyFrom(l.calc);f.translate(-h._displayOriginX,-h._displayOriginY);var p=r.alpha*h.alpha,g=h.width,m=h.height,x=h.cellWidth,y=h.cellHeight,T=Math.ceil(g/x),S=Math.ceil(m/y),C=x,E=y,P=x-(T*x-g),M=y-(S*y-m),O,A,R=h.showCells,F=h.showAltCells,I=h.showOutline,B=0,N=0,Y=0,X=0,W=0;if(I&&(C--,E--,P===x&&P--,M===y&&M--),a.pipelines.preBatch(h),R&&h.fillAlpha>0)for(O=c.fillTint,A=u.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*p),O.TL=A,O.TR=A,O.BL=A,O.BR=A,N=0;N<S;N++)for(F&&(Y=N%2),B=0;B<T;B++){if(F&&Y){Y=0;continue}Y++,X=B<T-1?C:P,W=N<S-1?E:M,c.batchFillRect(B*x,N*y,X,W)}if(F&&h.altFillAlpha>0)for(O=c.fillTint,A=u.getTintAppendFloatAlpha(h.altFillColor,h.altFillAlpha*p),O.TL=A,O.TR=A,O.BL=A,O.BR=A,N=0;N<S;N++)for(F&&(Y=N%2),B=0;B<T;B++){if(F&&!Y){Y=1;continue}Y=0,X=B<T-1?C:P,W=N<S-1?E:M,c.batchFillRect(B*x,N*y,X,W)}if(I&&h.outlineFillAlpha>0){var w=c.strokeTint,L=u.getTintAppendFloatAlpha(h.outlineFillColor,h.outlineFillAlpha*p);for(w.TL=L,w.TR=L,w.BL=L,w.BR=L,B=1;B<T;B++){var D=B*x;c.batchLine(D,0,D,m,1,1,1,0,!1)}for(N=1;N<S;N++){var b=N*y;c.batchLine(0,b,g,b,1,1,1,0,!1)}}a.pipelines.postBatch(h)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(h,r,o,c){o.addToRenderList(r);var l=h.currentContext;if(n(h,l,r,o,c)){var f=-r._displayOriginX,p=-r._displayOriginY,g=o.alpha*r.alpha,m=r.width,x=r.height,y=r.cellWidth,T=r.cellHeight,S=Math.ceil(m/y),C=Math.ceil(x/T),E=y,P=T,M=y-(S*y-m),O=T-(C*T-x),A=r.showCells,R=r.showAltCells,F=r.showOutline,I=0,B=0,N=0,Y=0,X=0;if(F&&(E--,P--,M===y&&M--,O===T&&O--),A&&r.fillAlpha>0)for(s(l,r),B=0;B<C;B++)for(R&&(N=B%2),I=0;I<S;I++){if(R&&N){N=0;continue}N++,Y=I<S-1?E:M,X=B<C-1?P:O,l.fillRect(f+I*y,p+B*T,Y,X)}if(R&&r.altFillAlpha>0)for(s(l,r,r.altFillColor,r.altFillAlpha*g),B=0;B<C;B++)for(R&&(N=B%2),I=0;I<S;I++){if(R&&!N){N=1;continue}N=0,Y=I<S-1?E:M,X=B<C-1?P:O,l.fillRect(f+I*y,p+B*T,Y,X)}if(F&&r.outlineFillAlpha>0){for(u(l,r,r.outlineFillColor,r.outlineFillAlpha*g),I=1;I<S;I++){var W=I*y;l.beginPath(),l.moveTo(W+f,p),l.lineTo(W+f,x+p),l.stroke()}for(B=1;B<C;B++){var w=B*T;l.beginPath(),l.moveTo(f,w+p),l.lineTo(f+m,w+p),l.stroke()}}l.restore()}};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1110),u=t(1111),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(a,h,r,o){r.addToRenderList(h);var c=a.pipelines.set(h.pipeline),l=s(h,r,o),f=c.calcMatrix.copyFrom(l.calc),p=h.width,g=h.height,m=p/2,x=p/h.projection,y=r.alpha*h.alpha;if(!!h.isFilled){var T,S,C,E,P,M,O,A,R;a.pipelines.preBatch(h),h.showTop&&(T=u.getTintAppendFloatAlpha(h.fillTop,y),S=f.getX(-m,-g),C=f.getY(-m,-g),E=f.getX(0,-x-g),P=f.getY(0,-x-g),M=f.getX(m,-g),O=f.getY(m,-g),A=f.getX(0,x-g),R=f.getY(0,x-g),c.batchQuad(h,S,C,E,P,M,O,A,R,0,0,1,1,T,T,T,T,2)),h.showLeft&&(T=u.getTintAppendFloatAlpha(h.fillLeft,y),S=f.getX(-m,0),C=f.getY(-m,0),E=f.getX(0,x),P=f.getY(0,x),M=f.getX(0,x-g),O=f.getY(0,x-g),A=f.getX(-m,-g),R=f.getY(-m,-g),c.batchQuad(h,S,C,E,P,M,O,A,R,0,0,1,1,T,T,T,T,2)),h.showRight&&(T=u.getTintAppendFloatAlpha(h.fillRight,y),S=f.getX(m,0),C=f.getY(m,0),E=f.getX(0,x),P=f.getY(0,x),M=f.getX(0,x-g),O=f.getY(0,x-g),A=f.getX(m,-g),R=f.getY(m,-g),c.batchQuad(h,S,C,E,P,M,O,A,R,0,0,1,1,T,T,T,T,2)),a.pipelines.postBatch(h)}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(30),n=function(a,h,r,o){r.addToRenderList(h);var c=a.currentContext;if(u(a,c,h,r,o)&&h.isFilled){var l=h.width,f=h.height,p=l/2,g=l/h.projection;h.showTop&&(s(c,h,h.fillTop),c.beginPath(),c.moveTo(-p,-f),c.lineTo(0,-g-f),c.lineTo(p,-f),c.lineTo(p,-1),c.lineTo(0,g-1),c.lineTo(-p,-1),c.lineTo(-p,-f),c.fill()),h.showLeft&&(s(c,h,h.fillLeft),c.beginPath(),c.moveTo(-p,0),c.lineTo(0,g),c.lineTo(0,g-f),c.lineTo(-p,-f),c.lineTo(-p,0),c.fill()),h.showRight&&(s(c,h,h.fillRight),c.beginPath(),c.moveTo(p,0),c.lineTo(0,g),c.lineTo(0,g-f),c.lineTo(p,-f),c.lineTo(p,0),c.fill()),c.restore()}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1113),u=t(1114),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(a,h,r,o){r.addToRenderList(h);var c=a.pipelines.set(h.pipeline),l=s(h,r,o),f=c.calcMatrix.copyFrom(l.calc),p=h.width,g=h.height,m=p/2,x=p/h.projection,y=h.isReversed,T=r.alpha*h.alpha;if(!!h.isFilled){a.pipelines.preBatch(h);var S,C,E,P,M,O,A;if(h.showTop&&y){S=u.getTintAppendFloatAlpha(h.fillTop,T),C=f.getX(-m,-g),E=f.getY(-m,-g),P=f.getX(0,-x-g),M=f.getY(0,-x-g),O=f.getX(m,-g),A=f.getY(m,-g);var R=f.getX(0,x-g),F=f.getY(0,x-g);c.batchQuad(h,C,E,P,M,O,A,R,F,0,0,1,1,S,S,S,S,2)}h.showLeft&&(S=u.getTintAppendFloatAlpha(h.fillLeft,T),y?(C=f.getX(-m,-g),E=f.getY(-m,-g),P=f.getX(0,x),M=f.getY(0,x),O=f.getX(0,x-g),A=f.getY(0,x-g)):(C=f.getX(-m,0),E=f.getY(-m,0),P=f.getX(0,x),M=f.getY(0,x),O=f.getX(0,x-g),A=f.getY(0,x-g)),c.batchTri(h,C,E,P,M,O,A,0,0,1,1,S,S,S,2)),h.showRight&&(S=u.getTintAppendFloatAlpha(h.fillRight,T),y?(C=f.getX(m,-g),E=f.getY(m,-g),P=f.getX(0,x),M=f.getY(0,x),O=f.getX(0,x-g),A=f.getY(0,x-g)):(C=f.getX(m,0),E=f.getY(m,0),P=f.getX(0,x),M=f.getY(0,x),O=f.getX(0,x-g),A=f.getY(0,x-g)),c.batchTri(h,C,E,P,M,O,A,0,0,1,1,S,S,S,2)),a.pipelines.postBatch(h)}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(30),n=function(a,h,r,o){r.addToRenderList(h);var c=a.currentContext;if(u(a,c,h,r,o)&&h.isFilled){var l=h.width,f=h.height,p=l/2,g=l/h.projection,m=h.isReversed;h.showTop&&m&&(s(c,h,h.fillTop),c.beginPath(),c.moveTo(-p,-f),c.lineTo(0,-g-f),c.lineTo(p,-f),c.lineTo(0,g-f),c.fill()),h.showLeft&&(s(c,h,h.fillLeft),c.beginPath(),m?(c.moveTo(-p,-f),c.lineTo(0,g),c.lineTo(0,g-f)):(c.moveTo(-p,0),c.lineTo(0,g),c.lineTo(0,g-f)),c.fill()),h.showRight&&(s(c,h,h.fillRight),c.beginPath(),m?(c.moveTo(p,-f),c.lineTo(0,g),c.lineTo(0,g-f)):(c.moveTo(p,0),c.lineTo(0,g),c.lineTo(0,g-f)),c.fill()),c.restore()}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1116),u=t(1117),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(a,h,r,o){r.addToRenderList(h);var c=a.pipelines.set(h.pipeline),l=s(h,r,o);c.calcMatrix.copyFrom(l.calc);var f=h._displayOriginX,p=h._displayOriginY,g=r.alpha*h.alpha;if(a.pipelines.preBatch(h),h.isStroked){var m=c.strokeTint,x=u.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*g);m.TL=x,m.TR=x,m.BL=x,m.BR=x;var y=h._startWidth,T=h._endWidth;c.batchLine(h.geom.x1-f,h.geom.y1-p,h.geom.x2-f,h.geom.y2-p,y,T,1,0,!1,l.sprite,l.camera)}a.pipelines.postBatch(h)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(60),u=t(30),n=function(a,h,r,o){r.addToRenderList(h);var c=a.currentContext;if(u(a,c,h,r,o)){var l=h._displayOriginX,f=h._displayOriginY;h.isStroked&&(s(c,h),c.beginPath(),c.moveTo(h.geom.x1-l,h.geom.y1-f),c.lineTo(h.geom.x2-l,h.geom.y2-f),c.stroke()),c.restore()}};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1119),u=t(1120),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(114),u=t(19),n=t(81),a=function(h,r,o,c){o.addToRenderList(r);var l=h.pipelines.set(r.pipeline),f=u(r,o,c),p=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX,m=r._displayOriginY,x=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&s(l,p,r,x,g,m),r.isStroked&&n(l,r,x,g,m),h.pipelines.postBatch(r)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(h,r,o,c){o.addToRenderList(r);var l=h.currentContext;if(n(h,l,r,o,c)){var f=r._displayOriginX,p=r._displayOriginY,g=r.pathData,m=g.length-1,x=g[0]-f,y=g[1]-p;l.beginPath(),l.moveTo(x,y),r.closePath||(m-=2);for(var T=2;T<m;T+=2){var S=g[T]-f,C=g[T+1]-p;l.lineTo(S,C)}l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1122),u=t(1123),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(81),n=t(12),a=function(h,r,o,c){o.addToRenderList(r);var l=h.pipelines.set(r.pipeline),f=s(r,o,c);l.calcMatrix.copyFrom(f.calc);var p=r._displayOriginX,g=r._displayOriginY,m=o.alpha*r.alpha;if(h.pipelines.preBatch(r),r.isFilled){var x=l.fillTint,y=n.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y,l.batchFillRect(-p,-g,r.width,r.height)}r.isStroked&&u(l,r,m,p,g),h.pipelines.postBatch(r)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(h,r,o,c){o.addToRenderList(r);var l=h.currentContext;if(n(h,l,r,o,c)){var f=r._displayOriginX,p=r._displayOriginY;r.isFilled&&(s(l,r),l.fillRect(-f,-p,r.width,r.height)),r.isStroked&&(u(l,r),l.beginPath(),l.rect(-f,-p,r.width,r.height),l.stroke()),l.restore()}};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1125),u=t(1126),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(114),u=t(19),n=t(81),a=function(h,r,o,c){o.addToRenderList(r);var l=h.pipelines.set(r.pipeline),f=u(r,o,c),p=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX,m=r._displayOriginY,x=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&s(l,p,r,x,g,m),r.isStroked&&n(l,r,x,g,m),h.pipelines.postBatch(r)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(h,r,o,c){o.addToRenderList(r);var l=h.currentContext;if(n(h,l,r,o,c)){var f=r._displayOriginX,p=r._displayOriginY,g=r.pathData,m=g.length-1,x=g[0]-f,y=g[1]-p;l.beginPath(),l.moveTo(x,y),r.closePath||(m-=2);for(var T=2;T<m;T+=2){var S=g[T]-f,C=g[T+1]-p;l.lineTo(S,C)}l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1128),u=t(1129),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(81),n=t(12),a=function(h,r,o,c){o.addToRenderList(r);var l=h.pipelines.set(r.pipeline),f=s(r,o,c);l.calcMatrix.copyFrom(f.calc);var p=r._displayOriginX,g=r._displayOriginY,m=o.alpha*r.alpha;if(h.pipelines.preBatch(r),r.isFilled){var x=l.fillTint,y=n.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y;var T=r.geom.x1-p,S=r.geom.y1-g,C=r.geom.x2-p,E=r.geom.y2-g,P=r.geom.x3-p,M=r.geom.y3-g;l.batchFillTriangle(T,S,C,E,P,M,f.sprite,f.camera)}r.isStroked&&u(l,r,m,p,g),h.pipelines.postBatch(r)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(h,r,o,c){o.addToRenderList(r);var l=h.currentContext;if(n(h,l,r,o,c)){var f=r._displayOriginX,p=r._displayOriginY,g=r.geom.x1-f,m=r.geom.y1-p,x=r.geom.x2-f,y=r.geom.y2-p,T=r.geom.x3-f,S=r.geom.y3-p;l.beginPath(),l.moveTo(g,m),l.lineTo(x,y),l.lineTo(T,S),l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(213),u=t(5);u.register("blitter",function(n,a,h,r){return this.displayList.add(new s(this.scene,n,a,h,r))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(214),u=t(5);u.register("container",function(n,a,h){return this.displayList.add(new s(this.scene,n,a,h))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(442),u=t(5);u.register("dom",function(n,a,h,r,o){var c=new s(this.scene,n,a,h,r,o);return this.displayList.add(c),c})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(215),u=t(5);u.register("dynamicBitmapText",function(n,a,h,r,o){return this.displayList.add(new s(this.scene,n,a,h,r,o))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(444),u=t(5);u.register("extern",function(){var n=new s(this.scene);return this.displayList.add(n),n})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(216),u=t(5);u.register("graphics",function(n){return this.displayList.add(new s(this.scene,n))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(113),u=t(5);u.register("group",function(n,a){return this.updateList.add(new s(this.scene,n,a))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(125),u=t(5);u.register("image",function(n,a,h,r){return this.displayList.add(new s(this.scene,n,a,h,r))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(219),u=t(5);u.register("layer",function(n){return this.displayList.add(new s(this.scene,n))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(220);s.register("particles",function(n,a,h){return this.displayList.add(new u(this.scene,n,a,h))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(457);s.register("follower",function(n,a,h,r,o){var c=new u(this.scene,n,a,h,r,o);return this.displayList.add(c),this.updateList.add(c),c})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(221);s.register("renderTexture",function(n,a,h,r,o,c){return this.displayList.add(new u(this.scene,n,a,h,r,o,c))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(223),u=t(5);u.register("rope",function(n,a,h,r,o,c,l,f){return this.displayList.add(new s(this.scene,n,a,h,r,o,c,l,f))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(73);s.register("sprite",function(n,a,h,r){var o=new u(this.scene,n,a,h,r);return this.displayList.add(o),o})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(148),u=t(5);u.register("bitmapText",function(n,a,h,r,o,c){return this.displayList.add(new s(this.scene,n,a,h,r,o,c))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(224),u=t(5);u.register("text",function(n,a,h,r){return this.displayList.add(new s(this.scene,n,a,h,r))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(225),u=t(5);u.register("tileSprite",function(n,a,h,r,o,c){return this.displayList.add(new s(this.scene,n,a,h,r,o,c))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(129),u=t(5);u.register("zone",function(n,a,h,r){return this.displayList.add(new s(this.scene,n,a,h,r))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(226),u=t(5);u.register("video",function(n,a,h){return this.displayList.add(new s(this.scene,n,a,h))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(461),u=t(5);u.register("arc",function(n,a,h,r,o,c,l,f){return this.displayList.add(new s(this.scene,n,a,h,r,o,c,l,f))}),u.register("circle",function(n,a,h,r,o){return this.displayList.add(new s(this.scene,n,a,h,0,360,!1,r,o))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(462);s.register("curve",function(n,a,h,r,o){return this.displayList.add(new u(this.scene,n,a,h,r,o))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(463),u=t(5);u.register("ellipse",function(n,a,h,r,o,c){return this.displayList.add(new s(this.scene,n,a,h,r,o,c))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(464);s.register("grid",function(n,a,h,r,o,c,l,f,p,g){return this.displayList.add(new u(this.scene,n,a,h,r,o,c,l,f,p,g))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(465);s.register("isobox",function(n,a,h,r,o,c,l){return this.displayList.add(new u(this.scene,n,a,h,r,o,c,l))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(466);s.register("isotriangle",function(n,a,h,r,o,c,l,f){return this.displayList.add(new u(this.scene,n,a,h,r,o,c,l,f))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(467);s.register("line",function(n,a,h,r,o,c,l,f){return this.displayList.add(new u(this.scene,n,a,h,r,o,c,l,f))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(468);s.register("polygon",function(n,a,h,r,o){return this.displayList.add(new u(this.scene,n,a,h,r,o))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(473);s.register("rectangle",function(n,a,h,r,o,c){return this.displayList.add(new u(this.scene,n,a,h,r,o,c))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(474),u=t(5);u.register("star",function(n,a,h,r,o,c,l){return this.displayList.add(new s(this.scene,n,a,h,r,o,c,l))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(475);s.register("triangle",function(n,a,h,r,o,c,l,f,p,g){return this.displayList.add(new u(this.scene,n,a,h,r,o,c,l,f,p,g))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(213),u=t(28),n=t(16),a=t(13);n.register("blitter",function(h,r){h===void 0&&(h={});var o=a(h,"key",null),c=a(h,"frame",null),l=new s(this.scene,0,0,o,c);return r!==void 0&&(h.add=r),u(this.scene,l,h),l})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(214),n=t(16),a=t(13);n.register("container",function(h,r){h===void 0&&(h={});var o=a(h,"x",0),c=a(h,"y",0),l=a(h,"children",null),f=new u(this.scene,o,c,l);return r!==void 0&&(h.add=r),s(this.scene,f,h),f})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(215),u=t(28),n=t(16),a=t(13);n.register("dynamicBitmapText",function(h,r){h===void 0&&(h={});var o=a(h,"font",""),c=a(h,"text",""),l=a(h,"size",!1),f=new s(this.scene,0,0,o,c,l);return r!==void 0&&(h.add=r),u(this.scene,f,h),f})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(216);s.register("graphics",function(n,a){n===void 0&&(n={}),a!==void 0&&(n.add=a);var h=new u(this.scene,n);return n.add&&this.scene.sys.displayList.add(h),h})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(113);s.register("group",function(n){return new u(this.scene,null,n)})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(125);u.register("image",function(h,r){h===void 0&&(h={});var o=n(h,"key",null),c=n(h,"frame",null),l=new a(this.scene,0,0,o,c);return r!==void 0&&(h.add=r),s(this.scene,l,h),l})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(219),n=t(16),a=t(13);n.register("layer",function(h,r){h===void 0&&(h={});var o=a(h,"children",null),c=new u(this.scene,o);return r!==void 0&&(h.add=r),s(this.scene,c,h),c})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(13),n=t(2),a=t(220);s.register("particles",function(h,r){h===void 0&&(h={});var o=u(h,"key",null),c=u(h,"frame",null),l=n(h,"emitters",null),f=new a(this.scene,o,c,l);r!==void 0&&(h.add=r);var p=n(h,"add",!1);return p?this.displayList.add(f):this.updateList.add(f),f})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(221);u.register("renderTexture",function(h,r){h===void 0&&(h={});var o=n(h,"x",0),c=n(h,"y",0),l=n(h,"width",32),f=n(h,"height",32),p=n(h,"key",void 0),g=n(h,"frame",void 0),m=new a(this.scene,o,c,l,f,p,g);return r!==void 0&&(h.add=r),s(this.scene,m,h),m})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(6),h=t(223);u.register("rope",function(r,o){r===void 0&&(r={});var c=n(r,"key",null),l=n(r,"frame",null),f=n(r,"horizontal",!0),p=a(r,"points",void 0),g=a(r,"colors",void 0),m=a(r,"alphas",void 0),x=new h(this.scene,0,0,c,l,p,f,g,m);return o!==void 0&&(r.add=o),s(this.scene,x,r),r.add||this.updateList.add(x),x})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(439),n=t(16),a=t(13),h=t(73);n.register("sprite",function(r,o){r===void 0&&(r={});var c=a(r,"key",null),l=a(r,"frame",null),f=new h(this.scene,0,0,c,l);return o!==void 0&&(r.add=o),s(this.scene,f,r),u(f,r),f})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(148),u=t(28),n=t(16),a=t(13),h=t(6);n.register("bitmapText",function(r,o){r===void 0&&(r={});var c=h(r,"font",""),l=a(r,"text",""),f=a(r,"size",!1),p=h(r,"align",0),g=new s(this.scene,0,0,c,l,f,p);return o!==void 0&&(r.add=o),u(this.scene,g,r),g})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(224);u.register("text",function(h,r){h===void 0&&(h={});var o=n(h,"text",""),c=n(h,"style",null),l=n(h,"padding",null);l!==null&&(c.padding=l);var f=new a(this.scene,0,0,o,c);return r!==void 0&&(h.add=r),s(this.scene,f,h),f.autoRound=n(h,"autoRound",!0),f.resolution=n(h,"resolution",1),f})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(225);u.register("tileSprite",function(h,r){h===void 0&&(h={});var o=n(h,"x",0),c=n(h,"y",0),l=n(h,"width",512),f=n(h,"height",512),p=n(h,"key",""),g=n(h,"frame",""),m=new a(this.scene,o,c,l,f,p,g);return r!==void 0&&(h.add=r),s(this.scene,m,h),m})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(13),n=t(129);s.register("zone",function(a){var h=u(a,"x",0),r=u(a,"y",0),o=u(a,"width",1),c=u(a,"height",o);return new n(this.scene,h,r,o,c)})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(226);u.register("video",function(h,r){h===void 0&&(h={});var o=n(h,"key",null),c=new a(this.scene,0,0,o);return r!==void 0&&(h.add=r),s(this.scene,c,h),h.add||this.updateList.add(c),c})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1177),u=t(1178),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,a,h,r){if(!!a.shader){if(h.addToRenderList(a),n.pipelines.clear(),a.renderToTexture)a.load(),a.flush();else{var o=s(a,h,r).calc;(n.width!==a._rendererWidth||n.height!==a._rendererHeight)&&a.projOrtho(0,n.width,n.height,0),a.load(o.matrix),a.flush()}n.pipelines.rebind()}};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1180),u=t(1181),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,a,h,r){var o=a.faces,c=o.length;if(c!==0){h.addToRenderList(a);var l=n.pipelines.set(a.pipeline,a),f=s(a,h,r).calc,p=l.setGameObject(a),g=l.vertexViewF32,m=l.vertexViewU32,x=l.vertexCount*l.currentShader.vertexComponentCount-1,y=a.tintFill,T=[],S=a.debugCallback,C=f.a,E=f.b,P=f.c,M=f.d,O=f.e,A=f.f,R=a.viewPosition.z,F=a.hideCCW,I=h.roundPixels,B=h.alpha*a.alpha,N=0;n.pipelines.preBatch(a);for(var Y=0;Y<c;Y++){var X=o[Y];!X.isInView(h,F,R,B,C,E,P,M,O,A,I)||(l.shouldFlush(3)&&(l.flush(),x=0),x=X.load(g,m,x,p,y),N++,l.vertexCount+=3,S&&T.push(X))}a.totalFrame+=N,S&&S.call(a,a,T),n.pipelines.postBatch(a)}};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1183),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,a,h,r){h.addToRenderList(a);var o=n.pipelines.set(a.pipeline),c=s(a,h,r).calc,l=a.width,f=a.height,p=-a._radius,g=-a._radius,m=p+l,x=g+f,y=c.getX(0,0),T=c.getY(0,0),S=c.getX(p,g),C=c.getY(p,g),E=c.getX(p,x),P=c.getY(p,x),M=c.getX(m,x),O=c.getY(m,x),A=c.getX(m,g),R=c.getY(m,g);n.pipelines.preBatch(a),o.batchPointLight(a,h,S,C,E,P,M,O,A,R,y,T),n.pipelines.postBatch(a)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(229),u=t(5);u.register("shader",function(n,a,h,r,o,c,l){return this.displayList.add(new s(this.scene,n,a,h,r,o,c,l))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(230),u=t(5);u.register("mesh",function(n,a,h,r,o,c,l,f,p,g,m){return this.displayList.add(new s(this.scene,n,a,h,r,o,c,l,f,p,g,m))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(150);s.register("pointlight",function(n,a,h,r,o,c){return this.displayList.add(new u(this.scene,n,a,h,r,o,c))})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(229);u.register("shader",function(h,r){h===void 0&&(h={});var o=n(h,"key",null),c=n(h,"x",0),l=n(h,"y",0),f=n(h,"width",128),p=n(h,"height",128),g=new a(this.scene,o,c,l,f,p);return r!==void 0&&(h.add=r),s(this.scene,g,h),g})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(6),h=t(230);u.register("mesh",function(r,o){r===void 0&&(r={});var c=n(r,"key",null),l=n(r,"frame",null),f=a(r,"vertices",[]),p=a(r,"uvs",[]),g=a(r,"indicies",[]),m=a(r,"containsZ",!1),x=a(r,"normals",[]),y=a(r,"colors",16777215),T=a(r,"alphas",1),S=new h(this.scene,0,0,c,l,f,p,g,m,x,y,T);return o!==void 0&&(r.add=o),s(this.scene,S,r),S})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(150);u.register("pointlight",function(h,r){h===void 0&&(h={});var o=n(h,"color",16777215),c=n(h,"radius",128),l=n(h,"intensity",1),f=n(h,"attenuation",.1),p=new a(this.scene,0,0,o,c,l,f);return r!==void 0&&(h.add=r),s(this.scene,p,h),p})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(482),n=t(24),a=t(20),h=new s({Extends:u,initialize:function(o){this.scene=o,this.systems=o.sys,o.sys.settings.isBooted||o.sys.events.once(a.BOOT,this.boot,this),u.call(this)},boot:function(){var r=this.systems.events;r.on(a.SHUTDOWN,this.shutdown,this),r.on(a.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});n.register("LightsPlugin",h,"lights"),e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65);s.Area=t(1192),s.Circumference=t(302),s.CircumferencePoint=t(169),s.Clone=t(1193),s.Contains=t(66),s.ContainsPoint=t(1194),s.ContainsRect=t(1195),s.CopyFrom=t(1196),s.Equals=t(1197),s.GetBounds=t(1198),s.GetPoint=t(300),s.GetPoints=t(301),s.Offset=t(1199),s.OffsetPoint=t(1200),s.Random=t(170),e.exports=s},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.radius>0?Math.PI*s.radius*s.radius:0};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65),u=function(n){return new s(n.x,n.y,n.radius)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66),u=function(n,a){return s(n,a.x,a.y)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66),u=function(n,a){return s(n,a.x,a.y)&&s(n,a.right,a.y)&&s(n,a.x,a.bottom)&&s(n,a.right,a.bottom)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x,s.y,s.radius)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x===u.x&&s.y===u.y&&s.radius===u.radius};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,a){return a===void 0&&(a=new s),a.x=n.left,a.y=n.top,a.width=n.diameter,a.height=n.diameter,a};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x+=u,s.y+=n,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x+=u.x,s.y+=u.y,s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(111);s.Area=t(1202),s.Circumference=t(447),s.CircumferencePoint=t(218),s.Clone=t(1203),s.Contains=t(112),s.ContainsPoint=t(1204),s.ContainsRect=t(1205),s.CopyFrom=t(1206),s.Equals=t(1207),s.GetBounds=t(1208),s.GetPoint=t(445),s.GetPoints=t(446),s.Offset=t(1209),s.OffsetPoint=t(1210),s.Random=t(180),e.exports=s},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.isEmpty()?0:s.getMajorRadius()*s.getMinorRadius()*Math.PI};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(111),u=function(n){return new s(n.x,n.y,n.width,n.height)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(112),u=function(n,a){return s(n,a.x,a.y)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(112),u=function(n,a){return s(n,a.x,a.y)&&s(n,a.right,a.y)&&s(n,a.x,a.bottom)&&s(n,a.right,a.bottom)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x,s.y,s.width,s.height)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x===u.x&&s.y===u.y&&s.width===u.width&&s.height===u.height};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,a){return a===void 0&&(a=new s),a.x=n.left,a.y=n.top,a.width=n.width,a.height=n.height,a};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x+=u,s.y+=n,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x+=u.x,s.y+=u.y,s};e.exports=t},function(e,d,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(231),n=function(a,h,r){if(r===void 0&&(r=[]),u(a,h)){var o=a.x,c=a.y,l=a.radius,f=h.x,p=h.y,g=h.radius,m,x,y,T,S;if(c===p)S=(g*g-l*l-f*f+o*o)/(2*(o-f)),m=1,x=-2*p,y=f*f+S*S-2*f*S+p*p-g*g,T=x*x-4*m*y,T===0?r.push(new s(S,-x/(2*m))):T>0&&(r.push(new s(S,(-x+Math.sqrt(T))/(2*m))),r.push(new s(S,(-x-Math.sqrt(T))/(2*m))));else{var C=(o-f)/(c-p),E=(g*g-l*l-f*f+o*o-p*p+c*c)/(2*(c-p));m=C*C+1,x=2*c*C-2*E*C-2*o,y=o*o+c*c+E*E-l*l-2*c*E,T=x*x-4*m*y,T===0?(S=-x/(2*m),r.push(new s(S,E-S*C))):T>0&&(S=(-x+Math.sqrt(T))/(2*m),r.push(new s(S,E-S*C)),S=(-x-Math.sqrt(T))/(2*m),r.push(new s(S,E-S*C)))}}return r};e.exports=n},function(e,d,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(232),u=t(151),n=function(a,h,r){if(r===void 0&&(r=[]),u(a,h)){var o=h.getLineA(),c=h.getLineB(),l=h.getLineC(),f=h.getLineD();s(o,a,r),s(c,a,r),s(l,a,r),s(f,a,r)}return r};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(140),u=t(487),n=t(47),a=new n;function h(c,l,f,p,g){var m=Math.cos(c),x=Math.sin(c);a.setTo(l,f,l+m,f+x);var y=u(a,p);y&&g.push(new s(y.x,y.y,c,y.w))}function r(c,l){return c.z-l.z}var o=function(c,l,f){Array.isArray(f)||(f=[f]);for(var p=[],g=[],m=0;m<f.length;m++)for(var x=f[m].points,y=0;y<x.length;y++){var T=Math.atan2(x[y].y-l,x[y].x-c);g.indexOf(T)===-1&&(h(T,c,l,f,p),h(T-1e-5,c,l,f,p),h(T+1e-5,c,l,f,p),g.push(T))}return p.sort(r)};e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(152),n=function(a,h,r){return r===void 0&&(r=new s),u(a,h)&&(r.x=Math.max(a.x,h.x),r.y=Math.max(a.y,h.y),r.width=Math.min(a.right,h.right)-r.x,r.height=Math.min(a.bottom,h.bottom)-r.y),r};e.exports=n},function(e,d,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(234),u=t(152),n=function(a,h,r){if(r===void 0&&(r=[]),u(a,h)){var o=a.getLineA(),c=a.getLineB(),l=a.getLineC(),f=a.getLineD();s(o,h,r),s(c,h,r),s(l,h,r),s(f,h,r)}return r};e.exports=n},function(e,d,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(489),u=t(234),n=function(a,h,r){if(r===void 0&&(r=[]),s(a,h)){var o=h.getLineA(),c=h.getLineB(),l=h.getLineC();u(o,a,r),u(c,a,r),u(l,a,r)}return r};e.exports=n},function(e,d,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(232),u=t(491),n=function(a,h,r){if(r===void 0&&(r=[]),u(a,h)){var o=a.getLineA(),c=a.getLineB(),l=a.getLineC();s(o,h,r),s(c,h,r),s(l,h,r)}return r};e.exports=n},function(e,d,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(494),u=t(492),n=function(a,h,r){if(r===void 0&&(r=[]),s(a,h)){var o=h.getLineA(),c=h.getLineB(),l=h.getLineC();u(a,o,r),u(a,c,r),u(a,l,r)}return r};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(496),u=function(n,a){if(!s(n,a))return!1;var h=Math.min(a.x1,a.x2),r=Math.max(a.x1,a.x2),o=Math.min(a.y1,a.y2),c=Math.max(a.y1,a.y2);return n.x>=h&&n.x<=r&&n.y>=o&&n.y<=c};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h,r){return r===void 0&&(r=0),!(u>s.right+r||n<s.left-r||a>s.bottom+r||h<s.top-r)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47);s.Angle=t(97),s.BresenhamPoints=t(317),s.CenterOn=t(1222),s.Clone=t(1223),s.CopyFrom=t(1224),s.Equals=t(1225),s.Extend=t(1226),s.GetEasedPoints=t(1227),s.GetMidPoint=t(1228),s.GetNearestPoint=t(1229),s.GetNormal=t(1230),s.GetPoint=t(307),s.GetPoints=t(172),s.GetShortestDistance=t(1231),s.Height=t(1232),s.Length=t(67),s.NormalAngle=t(497),s.NormalX=t(1233),s.NormalY=t(1234),s.Offset=t(1235),s.PerpSlope=t(1236),s.Random=t(173),s.ReflectAngle=t(1237),s.Rotate=t(1238),s.RotateAroundPoint=t(1239),s.RotateAroundXY=t(236),s.SetToAngle=t(1240),s.Slope=t(1241),s.Width=t(1242),e.exports=s},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=u-(s.x1+s.x2)/2,h=n-(s.y1+s.y2)/2;return s.x1+=a,s.y1+=h,s.x2+=a,s.y2+=h,s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47),u=function(n){return new s(n.x1,n.y1,n.x2,n.y2)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x1,s.y1,s.x2,s.y2)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x1===u.x1&&s.y1===u.y1&&s.x2===u.x2&&s.y2===u.y2};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=function(n,a,h){h===void 0&&(h=a);var r=s(n),o=n.x2-n.x1,c=n.y2-n.y1;return a&&(n.x1=n.x1-o/r*a,n.y1=n.y1-c/r*a),h&&(n.x2=n.x2+o/r*h,n.y2=n.y2+c/r*h),n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(352),u=t(80),n=t(4),a=function(h,r,o,c,l){c===void 0&&(c=0),l===void 0&&(l=[]);var f=[],p=h.x1,g=h.y1,m=h.x2-p,x=h.y2-g,y=u(r,l),T,S,C=o-1;for(T=0;T<C;T++)S=y(T/C),f.push(new n(p+m*S,g+x*S));if(S=y(1),f.push(new n(p+m*S,g+x*S)),c>0){var E=f[0],P=[E];for(T=1;T<f.length-1;T++){var M=f[T];s(E,M)>=c&&(P.push(M),E=M)}var O=f[f.length-1];return s(E,O)<c&&P.pop(),P.push(O),P}else return f};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){return a===void 0&&(a=new s),a.x=(n.x1+n.x2)/2,a.y=(n.y1+n.y2)/2,a};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,h){h===void 0&&(h=new s);var r=n.x1,o=n.y1,c=n.x2,l=n.y2,f=(c-r)*(c-r)+(l-o)*(l-o);if(f===0)return h;var p=((a.x-r)*(c-r)+(a.y-o)*(l-o))/f;return h.x=r+p*(c-r),h.y=o+p*(l-o),h};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(97),n=t(4),a=function(h,r){r===void 0&&(r=new n);var o=u(h)-s.TAU;return r.x=Math.cos(o),r.y=Math.sin(o),r};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x1,a=s.y1,h=s.x2,r=s.y2,o=(h-n)*(h-n)+(r-a)*(r-a);if(o===0)return!1;var c=((a-u.y)*(h-n)-(n-u.x)*(r-a))/o;return Math.abs(c)*Math.sqrt(o)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.abs(s.y1-s.y2)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(97),n=function(a){return Math.cos(u(a)-s.TAU)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(97),n=function(a){return Math.sin(u(a)-s.TAU)};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x1+=u,s.y1+=n,s.x2+=u,s.y2+=n,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return-((s.x2-s.x1)/(s.y2-s.y1))};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97),u=t(497),n=function(a,h){return 2*u(h)-Math.PI-s(a)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(236),u=function(n,a){var h=(n.x1+n.x2)/2,r=(n.y1+n.y2)/2;return s(n,h,r,a)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(236),u=function(n,a,h){return s(n,a.x,a.y,h)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,h){return s.x1=u,s.y1=n,s.x2=u+Math.cos(a)*h,s.y2=n+Math.sin(a)*h,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s.y2-s.y1)/(s.x2-s.x1)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.abs(s.x1-s.x2)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Face:t(116),GenerateGridVerts:t(1244),GenerateObjVerts:t(480),GenerateVerts:t(479),ParseObj:t(498),ParseObjMaterial:t(499),RotateFace:t(1245),Vertex:t(117)};e.exports=s},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(116),u=t(2),n=t(69),a=t(39),h=t(117),r=new a,o=new a,c=new n,l=function(f){var p=u(f,"mesh"),g=u(f,"texture",null),m=u(f,"frame"),x=u(f,"width",1),y=u(f,"height",x),T=u(f,"widthSegments",1),S=u(f,"heightSegments",T),C=u(f,"x",0),E=u(f,"y",0),P=u(f,"z",0),M=u(f,"rotateX",0),O=u(f,"rotateY",0),A=u(f,"rotateZ",0),R=u(f,"zIsUp",!0),F=u(f,"isOrtho",p?p.dirtyCache[11]:!1),I=u(f,"colors",[16777215]),B=u(f,"alphas",[1]),N=u(f,"tile",!1),Y=u(f,"flipY",!1),X=u(f,"width",null),W={faces:[],verts:[]};if(r.set(C,E,P),o.set(M,O,A),c.fromRotationXYTranslation(o,r,R),!g&&p)g=p.texture;else if(p&&typeof g=="string")g=p.scene.sys.textures.get(g);else return W;var w=g.get(m);!X&&F&&g&&p&&(x=w.width/p.height,y=w.height/p.height);var L=x/2,D=y/2,b=Math.floor(T),G=Math.floor(S),z=b+1,U=G+1,H=x/b,$=y/G,K=[],Z=[],k,J,q=0,Q=1,_=0,at=1;w&&(q=w.u0,Q=w.u1,Y?(_=w.v1,at=w.v0):(_=w.v0,at=w.v1));var st=Q-q,tt=at-_;for(J=0;J<U;J++){var j=J*$-D;for(k=0;k<z;k++){var ot=k*H-L;Z.push(ot,-j);var et=q+st*(k/b),nt=_+tt*(J/G);K.push(et,nt)}}Array.isArray(I)||(I=[I]),Array.isArray(B)||(B=[B]);var jt=0,qt=0;for(J=0;J<G;J++)for(k=0;k<b;k++){var yt=(k+z*J)*2,lt=(k+z*(J+1))*2,Rt=(k+1+z*(J+1))*2,At=(k+1+z*J)*2,Et=I[qt],_t=B[jt],Ye=new h(Z[yt],Z[yt+1],0,K[yt],K[yt+1],Et,_t).transformMat4(c),Ue=new h(Z[lt],Z[lt+1],0,K[lt],K[lt+1],Et,_t).transformMat4(c),Xe=new h(Z[At],Z[At+1],0,K[At],K[At+1],Et,_t).transformMat4(c),We=new h(Z[lt],Z[lt+1],0,K[lt],K[lt+1],Et,_t).transformMat4(c),He=new h(Z[Rt],Z[Rt+1],0,K[Rt],K[Rt+1],Et,_t).transformMat4(c),$e=new h(Z[At],Z[At+1],0,K[At],K[At+1],Et,_t).transformMat4(c);N&&(Ye.setUVs(q,at),Ue.setUVs(q,_),Xe.setUVs(Q,at),We.setUVs(q,_),He.setUVs(Q,_),$e.setUVs(Q,at)),qt++,qt===I.length&&(qt=0),jt++,jt===B.length&&(jt=0),W.verts.push(Ye,Ue,Xe,We,He,$e),W.faces.push(new s(Ye,Ue,Xe),new s(We,He,$e))}return p&&(p.faces=p.faces.concat(W.faces),p.vertices=p.vertices.concat(W.verts)),W};e.exports=l},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var h,r;if(n===void 0&&a===void 0){var o=s.getInCenter();h=o.x,r=o.y}var c=Math.cos(u),l=Math.sin(u),f=s.vertex1,p=s.vertex2,g=s.vertex3,m=f.x-h,x=f.y-r;f.set(m*c-x*l+h,m*l+x*c+r),m=p.x-h,x=p.y-r,p.set(m*c-x*l+h,m*l+x*c+r),m=g.x-h,x=g.y-r,g.set(m*c-x*l+h,m*l+x*c+r)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4);s.Ceil=t(1247),s.Clone=t(1248),s.CopyFrom=t(1249),s.Equals=t(1250),s.Floor=t(1251),s.GetCentroid=t(1252),s.GetMagnitude=t(500),s.GetMagnitudeSq=t(501),s.GetRectangleFromPoints=t(1253),s.Interpolate=t(1254),s.Invert=t(1255),s.Negative=t(1256),s.Project=t(1257),s.ProjectUnit=t(1258),s.SetMagnitude=t(1259),e.exports=s},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.setTo(Math.ceil(s.x),Math.ceil(s.y))};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n){return new s(n.x,n.y)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x,s.y)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x===u.x&&s.y===u.y};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.setTo(Math.floor(s.x),Math.floor(s.y))};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){if(a===void 0&&(a=new s),!Array.isArray(n))throw new Error("GetCentroid points argument must be an array");var h=n.length;if(h<1)throw new Error("GetCentroid points array must not be empty");if(h===1)a.x=n[0].x,a.y=n[0].y;else{for(var r=0;r<h;r++)a.x+=n[r].x,a.y+=n[r].y;a.x/=h,a.y/=h}return a};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,a){a===void 0&&(a=new s);for(var h=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,l=0;l<n.length;l++){var f=n[l];f.x>h&&(h=f.x),f.x<r&&(r=f.x),f.y>o&&(o=f.y),f.y<c&&(c=f.y)}return a.x=r,a.y=c,a.width=h-r,a.height=o-c,a};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,h,r){return h===void 0&&(h=0),r===void 0&&(r=new s),r.x=n.x+(a.x-n.x)*h,r.y=n.y+(a.y-n.y)*h,r};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.setTo(s.y,s.x)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){return a===void 0&&(a=new s),a.setTo(-n.x,-n.y)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(501),n=function(a,h,r){r===void 0&&(r=new s);var o=a.x*h.x+a.y*h.y,c=o/u(h);return c!==0&&(r.x=c*h.x,r.y=c*h.y),r};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,h){h===void 0&&(h=new s);var r=n.x*a.x+n.y*a.y;return r!==0&&(h.x=r*a.x,h.y=r*a.y),h};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(500),u=function(n,a){if(n.x!==0||n.y!==0){var h=s(n);n.x/=h,n.y/=h}return n.x*=a,n.y*=a,n};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(227);s.Clone=t(1261),s.Contains=t(228),s.ContainsPoint=t(1262),s.Earcut=t(59),s.GetAABB=t(469),s.GetNumberArray=t(1263),s.GetPoints=t(470),s.Perimeter=t(471),s.Reverse=t(1264),s.Simplify=t(1265),s.Smooth=t(472),s.Translate=t(1266),e.exports=s},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(227),u=function(n){return new s(n.points)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(228),u=function(n,a){return s(n,a.x,a.y)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=[]);for(var n=0;n<s.points.length;n++)u.push(s.points[n].x),u.push(s.points[n].y);return u};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.points.reverse(),s};e.exports=t},function(e,d){function t(r,o){var c=r.x-o.x,l=r.y-o.y;return c*c+l*l}function s(r,o,c){var l=o.x,f=o.y,p=c.x-l,g=c.y-f;if(p!==0||g!==0){var m=((r.x-l)*p+(r.y-f)*g)/(p*p+g*g);m>1?(l=c.x,f=c.y):m>0&&(l+=p*m,f+=g*m)}return p=r.x-l,g=r.y-f,p*p+g*g}function u(r,o){for(var c=r[0],l=[c],f,p=1,g=r.length;p<g;p++)f=r[p],t(f,c)>o&&(l.push(f),c=f);return c!==f&&l.push(f),l}function n(r,o,c,l,f){for(var p=l,g,m=o+1;m<c;m++){var x=s(r[m],r[o],r[c]);x>p&&(g=m,p=x)}p>l&&(g-o>1&&n(r,o,g,l,f),f.push(r[g]),c-g>1&&n(r,g,c,l,f))}function a(r,o){var c=r.length-1,l=[r[0]];return n(r,0,c,o,l),l.push(r[c]),l}var h=function(r,o,c){o===void 0&&(o=1),c===void 0&&(c=!1);var l=r.points;if(l.length>2){var f=o*o;c||(l=u(l,f)),r.setTo(a(l,f))}return r};e.exports=h},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var a=s.points,h=0;h<a.length;h++)a[h].x+=u,a[h].y+=n;return s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.width*s.height};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s.width=Math.ceil(s.width),s.height=Math.ceil(s.height),s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n){return new s(n.x,n.y,n.width,n.height)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(57),u=function(n,a){return s(n,a.x,a.y)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x,s.y,s.width,s.height)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x===u.x&&s.y===u.y&&s.width===u.width&&s.height===u.height};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(237),u=function(n,a){var h=s(n);return h<s(a)?n.setSize(a.height*h,a.height):n.setSize(a.width,a.width/h),n.setPosition(a.centerX-n.width/2,a.centerY-n.height/2)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(237),u=function(n,a){var h=s(n);return h>s(a)?n.setSize(a.height*h,a.height):n.setSize(a.width,a.width/h),n.setPosition(a.centerX-n.width/2,a.centerY-n.height/2)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s.width=Math.floor(s.width),s.height=Math.floor(s.height),s};e.exports=t},function(e,d,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,a,h,r,o){return o===void 0&&(o=new s),o.setTo(Math.min(n,h),Math.min(a,r),Math.abs(n-h),Math.abs(a-r))};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){return a===void 0&&(a=new s),a.x=n.centerX,a.y=n.centerY,a};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){return a===void 0&&(a=new s),a.x=n.width,a.y=n.height,a};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(190),u=function(n,a,h){var r=n.centerX,o=n.centerY;return n.setSize(n.width+a*2,n.height+h*2),s(n,r,o)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(152),n=function(a,h,r){return r===void 0&&(r=new s),u(a,h)?(r.x=Math.max(a.x,h.x),r.y=Math.max(a.y,h.y),r.width=Math.min(a.right,h.right)-r.x,r.height=Math.min(a.bottom,h.bottom)-r.y):r.setEmpty(),r};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){for(var n=s.x,a=s.right,h=s.y,r=s.bottom,o=0;o<u.length;o++)n=Math.min(n,u[o].x),a=Math.max(a,u[o].x),h=Math.min(h,u[o].y),r=Math.max(r,u[o].y);return s.x=n,s.y=h,s.width=a-n,s.height=r-h,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=Math.min(s.x,u.x),a=Math.max(s.right,u.right);s.x=n,s.width=a-n;var h=Math.min(s.y,u.y),r=Math.max(s.bottom,u.bottom);return s.y=h,s.height=r-h,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=Math.min(s.x,u),h=Math.max(s.right,u);s.x=a,s.width=h-a;var r=Math.min(s.y,n),o=Math.max(s.bottom,n);return s.y=r,s.height=o-r,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x+=u,s.y+=n,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x+=u.x,s.y+=u.y,s};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x<u.right&&s.right>u.x&&s.y<u.bottom&&s.bottom>u.y};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(36),n=function(a,h,r){r===void 0&&(r=new s),h=u(h);var o=Math.sin(h),c=Math.cos(h),l=c>0?a.width/2:a.width/-2,f=o>0?a.height/2:a.height/-2;return Math.abs(l*o)<Math.abs(f*c)?f=l*o/c:l=f*c/o,r.x=l+a.centerX,r.y=f+a.centerY,r};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(195),u=t(503),n=t(4),a=function(h,r,o){if(o===void 0&&(o=new n),u(h,r))switch(s(0,3)){case 0:o.x=h.x+Math.random()*(r.right-h.x),o.y=h.y+Math.random()*(r.top-h.y);break;case 1:o.x=r.x+Math.random()*(h.right-r.x),o.y=r.bottom+Math.random()*(h.bottom-r.bottom);break;case 2:o.x=h.x+Math.random()*(r.x-h.x),o.y=r.y+Math.random()*(h.bottom-r.y);break;case 3:o.x=r.right+Math.random()*(h.right-r.right),o.y=h.y+Math.random()*(r.bottom-h.y);break}return o};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.width===u.width&&s.height===u.height};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n===void 0&&(n=u),s.width*=u,s.height*=n,s};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82);s.Area=t(1294),s.BuildEquilateral=t(1295),s.BuildFromPolygon=t(1296),s.BuildRight=t(1297),s.CenterOn=t(1298),s.Centroid=t(504),s.CircumCenter=t(1299),s.CircumCircle=t(1300),s.Clone=t(1301),s.Contains=t(115),s.ContainsArray=t(235),s.ContainsPoint=t(1302),s.CopyFrom=t(1303),s.Decompose=t(495),s.Equals=t(1304),s.GetPoint=t(476),s.GetPoints=t(477),s.InCenter=t(506),s.Perimeter=t(1305),s.Offset=t(505),s.Random=t(181),s.Rotate=t(1306),s.RotateAroundPoint=t(1307),s.RotateAroundXY=t(238),e.exports=s},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=s.x1,n=s.y1,a=s.x2,h=s.y2,r=s.x3,o=s.y3;return Math.abs(((r-u)*(h-n)-(a-u)*(o-n))/2)};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82),u=function(n,a,h){var r=h*(Math.sqrt(3)/2),o=n,c=a,l=n+h/2,f=a+r,p=n-h/2,g=a+r;return new s(o,c,l,f,p,g)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(59),u=t(82),n=function(a,h,r,o,c){h===void 0&&(h=null),r===void 0&&(r=1),o===void 0&&(o=1),c===void 0&&(c=[]);for(var l=s(a,h),f,p,g,m,x,y,T,S,C,E=0;E<l.length;E+=3)f=l[E],p=l[E+1],g=l[E+2],m=a[f*2]*r,x=a[f*2+1]*o,y=a[p*2]*r,T=a[p*2+1]*o,S=a[g*2]*r,C=a[g*2+1]*o,c.push(new u(m,x,y,T,S,C));return c};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82),u=function(n,a,h,r){r===void 0&&(r=h);var o=n,c=a,l=n,f=a-r,p=n+h,g=a;return new s(o,c,l,f,p,g)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(504),u=t(505),n=function(a,h,r,o){o===void 0&&(o=s);var c=o(a),l=h-c.x,f=r-c.y;return u(a,l,f)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3);function u(a,h,r,o){return a*o-h*r}var n=function(a,h){h===void 0&&(h=new s);var r=a.x3,o=a.y3,c=a.x1-r,l=a.y1-o,f=a.x2-r,p=a.y2-o,g=2*u(c,l,f,p),m=u(l,c*c+l*l,p,f*f+p*p),x=u(c,c*c+l*l,f,f*f+p*p);return h.x=r-m/g,h.y=o+x/g,h};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65),u=function(n,a){a===void 0&&(a=new s);var h=n.x1,r=n.y1,o=n.x2,c=n.y2,l=n.x3,f=n.y3,p=o-h,g=c-r,m=l-h,x=f-r,y=p*(h+o)+g*(r+c),T=m*(h+l)+x*(r+f),S=2*(p*(f-c)-g*(l-o)),C,E;if(Math.abs(S)<1e-6){var P=Math.min(h,o,l),M=Math.min(r,c,f);C=(Math.max(h,o,l)-P)*.5,E=(Math.max(r,c,f)-M)*.5,a.x=P+C,a.y=M+E,a.radius=Math.sqrt(C*C+E*E)}else a.x=(x*y-g*T)/S,a.y=(p*T-m*y)/S,C=a.x-h,E=a.y-r,a.radius=Math.sqrt(C*C+E*E);return a};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82),u=function(n){return new s(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(115),u=function(n,a){return s(n,a.x,a.y)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x1,s.y1,s.x2,s.y2,s.x3,s.y3)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x1===u.x1&&s.y1===u.y1&&s.x2===u.x2&&s.y2===u.y2&&s.x3===u.x3&&s.y3===u.y3};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=function(n){var a=n.getLineA(),h=n.getLineB(),r=n.getLineC();return s(a)+s(h)+s(r)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(238),u=t(506),n=function(a,h){var r=u(a);return s(a,r.x,r.y,h)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(238),u=function(n,a,h){return s(n,a.x,a.y,h)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(203),u=t(17),n={CreatePixelPerfectHandler:t(507),CreateInteractiveObject:t(508),Events:t(51),Gamepad:t(1309),InputManager:t(409),InputPlugin:t(1321),InputPluginCache:t(153),Keyboard:t(1322),Mouse:t(1336),Pointer:t(412),Touch:t(1337)};n=u(!1,n,s),e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Axis:t(509),Button:t(510),Events:t(239),Gamepad:t(511),GamepadPlugin:t(1316),Configs:t(1317)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="connected"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="disconnected"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(239),a=t(511),h=t(6),r=t(153),o=t(51),c=new s({Extends:u,initialize:function(f){u.call(this),this.scene=f.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=f,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,f.pluginEvents.once(o.BOOT,this.boot,this),f.pluginEvents.on(o.START,this.start,this)},boot:function(){var l=this.scene.sys.game,f=this.settings.input,p=l.config;this.enabled=h(f,"gamepad",p.inputGamepad)&&l.device.input.gamepads,this.target=h(f,"gamepad.target",p.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(o.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(o.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var l=this,f=this.target,p=function(g){g.defaultPrevented||!l.isActive()||(l.refreshPads(),l.queue.push(g))};this.onGamepadHandler=p,f.addEventListener("gamepadconnected",p,!1),f.addEventListener("gamepaddisconnected",p,!1),this.sceneInputPlugin.pluginEvents.on(o.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(o.UPDATE,this.update);for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].removeAllListeners()},disconnectAll:function(){for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].pad.connected=!1},refreshPads:function(){var l=navigator.getGamepads();if(!l)this.disconnectAll();else for(var f=this.gamepads,p=0;p<l.length;p++){var g=l[p];if(!!g){var m=g.id,x=g.index,y=f[x];if(y)y.id!==m?(y.destroy(),f[x]=new a(this,g)):y.update(g);else{var T=new a(this,g);f[x]=T,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=T):this._pad3=T:this._pad2=T:this._pad1=T}}}},getAll:function(){for(var l=[],f=this.gamepads,p=0;p<f.length;p++)f[p]&&l.push(f[p]);return l},getPad:function(l){for(var f=this.gamepads,p=0;p<f.length;p++)if(f[p]&&f[p].index===l)return f[p]},update:function(){if(!!this.enabled){this.refreshPads();var l=this.queue.length;if(l!==0)for(var f=this.queue.splice(0,l),p=0;p<l;p++){var g=f[p],m=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(n.CONNECTED,m,g):g.type==="gamepaddisconnected"&&this.emit(n.DISCONNECTED,m,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var l=0;l<this.gamepads.length;l++)this.gamepads[l]&&this.gamepads[l].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});r.register("GamepadPlugin",c,"gamepad","gamepad","inputGamepad"),e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DUALSHOCK_4:t(1318),SNES_USB:t(1319),XBOX_360:t(1320)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65),u=t(66),n=t(0),a=t(203),h=t(508),r=t(507),o=t(50),c=t(111),l=t(112),f=t(51),p=t(9),g=t(2),m=t(56),x=t(153),y=t(7),T=t(24),S=t(10),C=t(57),E=t(20),P=t(82),M=t(115),O=new n({Extends:p,initialize:function(R){p.call(this),this.scene=R,this.systems=R.sys,this.settings=R.sys.settings,this.manager=R.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,x.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var F={cancelled:!1};this._eventContainer={stopPropagation:function(){F.cancelled=!0}},this._eventData=F,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,R.sys.events.once(E.BOOT,this.boot,this),R.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(f.BOOT)},start:function(){var A=this.systems.events;A.on(E.TRANSITION_START,this.transitionIn,this),A.on(E.TRANSITION_OUT,this.transitionOut,this),A.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),A.on(E.PRE_UPDATE,this.preUpdate,this),A.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(f.GAME_OUT,this.onGameOut,this),this.manager.events.on(f.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(f.START)},onGameOver:function(A){this.isActive()&&this.emit(f.GAME_OVER,A.timeStamp,A)},onGameOut:function(A){this.isActive()&&this.emit(f.GAME_OUT,A.timeStamp,A)},preUpdate:function(){this.pluginEvents.emit(f.PRE_UPDATE);var A=this._pendingRemoval,R=this._pendingInsertion,F=A.length,I=R.length;if(!(F===0&&I===0)){for(var B=this._list,N=0;N<F;N++){var Y=A[N],X=B.indexOf(Y);X>-1&&(B.splice(X,1),this.clear(Y,!0))}A.length=0,this._pendingRemoval.length=0,this._list=B.concat(R.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(A,R){if(!this.isActive())return!1;if(this.pluginEvents.emit(f.UPDATE,A,R),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var F,I=this.manager,B=I.pointers,N=I.pointersTotal;for(F=0;F<N;F++)B[F].updateMotion();if(this._list.length===0)return!1;var Y=this.pollRate;if(Y===-1)return!1;if(Y>0)if(this._pollTimer-=R,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var X=!1;for(F=0;F<N;F++){var W=0,w=B[F];this._tempZones=[],this._temp=this.hitTestPointer(w),this.sortGameObjects(this._temp,w),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),W+=this.processOverOutEvents(w),this.getDragState(w)===2&&this.processDragThresholdEvent(w,A),W>0&&(X=!0)}return X},update:function(A,R){if(!this.isActive())return!1;for(var F=R.length,I=!1,B=0;B<F;B++){var N=0,Y=R[B];switch(this._tempZones=[],this._temp=this.hitTestPointer(Y),this.sortGameObjects(this._temp,Y),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),A){case a.MOUSE_DOWN:N+=this.processDragDownEvent(Y),N+=this.processDownEvents(Y),N+=this.processOverOutEvents(Y);break;case a.MOUSE_UP:N+=this.processDragUpEvent(Y),N+=this.processUpEvents(Y),N+=this.processOverOutEvents(Y);break;case a.TOUCH_START:N+=this.processDragDownEvent(Y),N+=this.processDownEvents(Y),N+=this.processOverEvents(Y);break;case a.TOUCH_END:case a.TOUCH_CANCEL:N+=this.processDragUpEvent(Y),N+=this.processUpEvents(Y),N+=this.processOutEvents(Y);break;case a.MOUSE_MOVE:case a.TOUCH_MOVE:N+=this.processDragMoveEvent(Y),N+=this.processMoveEvents(Y),N+=this.processOverOutEvents(Y);break;case a.MOUSE_WHEEL:N+=this.processWheelEvent(Y);break}N>0&&(I=!0)}return this._updatedThisFrame=!0,I},clear:function(A,R){R===void 0&&(R=!1);var F=A.input;if(!!F){R||this.queueForRemoval(A),F.gameObject=void 0,F.target=void 0,F.hitArea=void 0,F.hitAreaCallback=void 0,F.callbackContext=void 0,A.input=null;var I=this._draggable.indexOf(A);return I>-1&&this._draggable.splice(I,1),I=this._drag[0].indexOf(A),I>-1&&this._drag[0].splice(I,1),I=this._over[0].indexOf(A),I>-1&&(this._over[0].splice(I,1),this.manager.resetCursor(F)),A}},disable:function(A){A.input.enabled=!1},enable:function(A,R,F,I){return I===void 0&&(I=!1),A.input?A.input.enabled=!0:this.setHitArea(A,R,F),A.input&&I&&!A.input.dropZone&&(A.input.dropZone=I),this},hitTestPointer:function(A){for(var R=this.cameras.getCamerasBelowPointer(A),F=0;F<R.length;F++){for(var I=R[F],B=this.manager.hitTest(A,this._list,I),N=0;N<B.length;N++){var Y=B[N];Y.input.dropZone&&this._tempZones.push(Y)}if(B.length>0)return A.camera=I,B}return A.camera=R[0],[]},processDownEvents:function(A){var R=0,F=this._temp,I=this._eventData,B=this._eventContainer;I.cancelled=!1;for(var N=!1,Y=0;Y<F.length;Y++){var X=F[Y];if(!!X.input){if(R++,X.emit(f.GAMEOBJECT_POINTER_DOWN,A,X.input.localX,X.input.localY,B),I.cancelled||!X.input){N=!0;break}if(this.emit(f.GAMEOBJECT_DOWN,A,X,B),I.cancelled||!X.input){N=!0;break}}}return!N&&this.manager&&(A.downElement===this.manager.game.canvas?this.emit(f.POINTER_DOWN,A,F):this.emit(f.POINTER_DOWN_OUTSIDE,A)),R},getDragState:function(A){return this._dragState[A.id]},setDragState:function(A,R){this._dragState[A.id]=R},processDragThresholdEvent:function(A,R){var F=!1,I=this.dragTimeThreshold,B=this.dragDistanceThreshold;if((B>0&&o(A.x,A.y,A.downX,A.downY)>=B||I>0&&R>=A.downTime+I)&&(F=!0),F)return this.setDragState(A,3),this.processDragStartList(A)},processDragStartList:function(A){if(this.getDragState(A)!==3)return 0;for(var R=this._drag[A.id],F=0;F<R.length;F++){var I=R[F],B=I.input;B.dragState=2,B.dragStartX=I.x,B.dragStartY=I.y,B.dragStartXGlobal=A.worldX,B.dragStartYGlobal=A.worldY,B.dragX=B.dragStartXGlobal-B.dragStartX,B.dragY=B.dragStartYGlobal-B.dragStartY,I.emit(f.GAMEOBJECT_DRAG_START,A,B.dragX,B.dragY),this.emit(f.DRAG_START,A,I)}return this.setDragState(A,4),R.length},processDragDownEvent:function(A){var R=this._temp;if(this._draggable.length===0||R.length===0||!A.primaryDown||this.getDragState(A)!==0)return 0;this.setDragState(A,1);for(var F=[],I=0;I<R.length;I++){var B=R[I];B.input.draggable&&B.input.dragState===0&&F.push(B)}return F.length===0?(this.setDragState(A,0),0):(F.length>1&&(this.sortGameObjects(F,A),this.topOnly&&F.splice(1)),this._drag[A.id]=F,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(A,3),this.processDragStartList(A)):(this.setDragState(A,2),0))},processDragMoveEvent:function(A){if(this.getDragState(A)===2&&this.processDragThresholdEvent(A,this.manager.game.loop.now),this.getDragState(A)!==4)return 0;for(var R=this._tempZones,F=this._drag[A.id],I=0;I<F.length;I++){var B=F[I],N=B.input,Y=N.target;if(Y){var X=R.indexOf(Y);X===0?(B.emit(f.GAMEOBJECT_DRAG_OVER,A,Y),this.emit(f.DRAG_OVER,A,B,Y)):X>0?(B.emit(f.GAMEOBJECT_DRAG_LEAVE,A,Y),this.emit(f.DRAG_LEAVE,A,B,Y),N.target=R[0],Y=N.target,B.emit(f.GAMEOBJECT_DRAG_ENTER,A,Y),this.emit(f.DRAG_ENTER,A,B,Y)):(B.emit(f.GAMEOBJECT_DRAG_LEAVE,A,Y),this.emit(f.DRAG_LEAVE,A,B,Y),R[0]?(N.target=R[0],Y=N.target,B.emit(f.GAMEOBJECT_DRAG_ENTER,A,Y),this.emit(f.DRAG_ENTER,A,B,Y)):N.target=null)}else!Y&&R[0]&&(N.target=R[0],Y=N.target,B.emit(f.GAMEOBJECT_DRAG_ENTER,A,Y),this.emit(f.DRAG_ENTER,A,B,Y));var W,w;if(!B.parentContainer)W=A.worldX-N.dragX,w=A.worldY-N.dragY;else{var L=A.worldX-N.dragStartXGlobal,D=A.worldY-N.dragStartYGlobal,b=B.getParentRotation(),G=L*Math.cos(b)+D*Math.sin(b),z=D*Math.cos(b)-L*Math.sin(b);G*=1/B.parentContainer.scaleX,z*=1/B.parentContainer.scaleY,W=G+N.dragStartX,w=z+N.dragStartY}B.emit(f.GAMEOBJECT_DRAG,A,W,w),this.emit(f.DRAG,A,B,W,w)}return F.length},processDragUpEvent:function(A){for(var R=this._drag[A.id],F=0;F<R.length;F++){var I=R[F],B=I.input;if(B&&B.dragState===2){B.dragState=0,B.dragX=B.localX-I.displayOriginX,B.dragY=B.localY-I.displayOriginY;var N=!1,Y=B.target;Y&&(I.emit(f.GAMEOBJECT_DROP,A,Y),this.emit(f.DROP,A,I,Y),B.target=null,N=!0),I.input&&(I.emit(f.GAMEOBJECT_DRAG_END,A,B.dragX,B.dragY,N),this.emit(f.DRAG_END,A,I,N))}}return this.setDragState(A,0),R.splice(0),0},processMoveEvents:function(A){var R=0,F=this._temp,I=this._eventData,B=this._eventContainer;I.cancelled=!1;for(var N=!1,Y=0;Y<F.length;Y++){var X=F[Y];if(!!X.input){if(R++,X.emit(f.GAMEOBJECT_POINTER_MOVE,A,X.input.localX,X.input.localY,B),I.cancelled||!X.input){N=!0;break}if(this.emit(f.GAMEOBJECT_MOVE,A,X,B),I.cancelled||!X.input){N=!0;break}if(this.topOnly)break}}return N||this.emit(f.POINTER_MOVE,A,F),R},processWheelEvent:function(A){var R=0,F=this._temp,I=this._eventData,B=this._eventContainer;I.cancelled=!1;for(var N=!1,Y=A.deltaX,X=A.deltaY,W=A.deltaZ,w=0;w<F.length;w++){var L=F[w];if(!!L.input){if(R++,L.emit(f.GAMEOBJECT_POINTER_WHEEL,A,Y,X,W,B),I.cancelled||!L.input){N=!0;break}if(this.emit(f.GAMEOBJECT_WHEEL,A,L,Y,X,W,B),I.cancelled||!L.input){N=!0;break}}}return N||this.emit(f.POINTER_WHEEL,A,F,Y,X,W),R},processOverEvents:function(A){var R=this._temp,F=0,I=R.length,B=[];if(I>0){var N=this.manager,Y=this._eventData,X=this._eventContainer;Y.cancelled=!1;for(var W=!1,w=0;w<I;w++){var L=R[w];if(!!L.input){if(B.push(L),N.setCursor(L.input),L.emit(f.GAMEOBJECT_POINTER_OVER,A,L.input.localX,L.input.localY,X),F++,Y.cancelled||!L.input){W=!0;break}if(this.emit(f.GAMEOBJECT_OVER,A,L,X),Y.cancelled||!L.input){W=!0;break}}}W||this.emit(f.POINTER_OVER,A,B)}return this._over[A.id]=B,F},processOutEvents:function(A){var R=this._over[A.id],F=0,I=R.length;if(I>0){var B=this.manager,N=this._eventData,Y=this._eventContainer;N.cancelled=!1;var X=!1;this.sortGameObjects(R,A);for(var W=0;W<I;W++){var w=R[W];if(w=R[W],!!w.input){if(B.resetCursor(w.input),w.emit(f.GAMEOBJECT_POINTER_OUT,A,Y),F++,N.cancelled||!w.input){X=!0;break}if(this.emit(f.GAMEOBJECT_OUT,A,w,Y),N.cancelled||!w.input){X=!0;break}X||this.emit(f.POINTER_OUT,A,R)}}this._over[A.id]=[]}return F},processOverOutEvents:function(A){var R=this._temp,F,I,B=[],N=[],Y=[],X=this._over[A.id],W=this._drag[A.id],w=this.manager;for(F=0;F<X.length;F++)I=X[F],R.indexOf(I)===-1&&W.indexOf(I)===-1?B.push(I):Y.push(I);for(F=0;F<R.length;F++)I=R[F],X.indexOf(I)===-1&&N.push(I);var L=B.length,D=0,b=this._eventData,G=this._eventContainer;b.cancelled=!1;var z=!1;if(L>0){for(this.sortGameObjects(B,A),F=0;F<L;F++)if(I=B[F],!!I.input){if(w.resetCursor(I.input),I.emit(f.GAMEOBJECT_POINTER_OUT,A,G),D++,b.cancelled||!I.input){z=!0;break}if(this.emit(f.GAMEOBJECT_OUT,A,I,G),b.cancelled||!I.input){z=!0;break}}z||this.emit(f.POINTER_OUT,A,B)}if(L=N.length,b.cancelled=!1,z=!1,L>0){for(this.sortGameObjects(N,A),F=0;F<L;F++)if(I=N[F],!!I.input){if(w.setCursor(I.input),I.emit(f.GAMEOBJECT_POINTER_OVER,A,I.input.localX,I.input.localY,G),D++,b.cancelled||!I.input){z=!0;break}if(this.emit(f.GAMEOBJECT_OVER,A,I,G),b.cancelled||!I.input){z=!0;break}}z||this.emit(f.POINTER_OVER,A,N)}return X=Y.concat(N),this._over[A.id]=this.sortGameObjects(X,A),D},processUpEvents:function(A){var R=this._temp,F=this._eventData,I=this._eventContainer;F.cancelled=!1;for(var B=!1,N=0;N<R.length;N++){var Y=R[N];if(!!Y.input){if(Y.emit(f.GAMEOBJECT_POINTER_UP,A,Y.input.localX,Y.input.localY,I),F.cancelled||!Y.input){B=!0;break}if(this.emit(f.GAMEOBJECT_UP,A,Y,I),F.cancelled||!Y.input){B=!0;break}}}return!B&&this.manager&&(A.upElement===this.manager.game.canvas?this.emit(f.POINTER_UP,A,R):this.emit(f.POINTER_UP_OUTSIDE,A)),R.length},queueForInsertion:function(A){return this._pendingInsertion.indexOf(A)===-1&&this._list.indexOf(A)===-1&&this._pendingInsertion.push(A),this},queueForRemoval:function(A){return this._pendingRemoval.push(A),this},setDraggable:function(A,R){R===void 0&&(R=!0),Array.isArray(A)||(A=[A]);for(var F=0;F<A.length;F++){var I=A[F];I.input.draggable=R;var B=this._draggable.indexOf(I);R&&B===-1?this._draggable.push(I):!R&&B>-1&&this._draggable.splice(B,1)}return this},makePixelPerfect:function(A){A===void 0&&(A=1);var R=this.systems.textures;return r(R,A)},setHitArea:function(A,R,F){if(R===void 0)return this.setHitAreaFromTexture(A);Array.isArray(A)||(A=[A]);var I=!1,B=!1,N=!1,Y=!1,X=!1,W=!0;if(y(R)){var w=R;R=g(w,"hitArea",null),F=g(w,"hitAreaCallback",null),I=g(w,"draggable",!1),B=g(w,"dropZone",!1),N=g(w,"cursor",!1),Y=g(w,"useHandCursor",!1),X=g(w,"pixelPerfect",!1);var L=g(w,"alphaTolerance",1);X&&(R={},F=this.makePixelPerfect(L)),(!R||!F)&&(this.setHitAreaFromTexture(A),W=!1)}else typeof R=="function"&&!F&&(F=R,R={});for(var D=0;D<A.length;D++){var b=A[D];if(X&&b.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var G=b.input?b.input:h(b,R,F);G.customHitArea=W,G.dropZone=B,G.cursor=Y?"pointer":N,b.input=G,I&&this.setDraggable(b),this.queueForInsertion(b)}return this},setHitAreaCircle:function(A,R,F,I,B){B===void 0&&(B=u);var N=new s(R,F,I);return this.setHitArea(A,N,B)},setHitAreaEllipse:function(A,R,F,I,B,N){N===void 0&&(N=l);var Y=new c(R,F,I,B);return this.setHitArea(A,Y,N)},setHitAreaFromTexture:function(A,R){R===void 0&&(R=C),Array.isArray(A)||(A=[A]);for(var F=0;F<A.length;F++){var I=A[F],B=I.frame,N=0,Y=0;if(I.width?(N=I.width,Y=I.height):B&&(N=B.realWidth,Y=B.realHeight),I.type==="Container"&&(N===0||Y===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}N!==0&&Y!==0&&(I.input=h(I,new S(0,0,N,Y),R),this.queueForInsertion(I))}return this},setHitAreaRectangle:function(A,R,F,I,B,N){N===void 0&&(N=C);var Y=new S(R,F,I,B);return this.setHitArea(A,Y,N)},setHitAreaTriangle:function(A,R,F,I,B,N,Y,X){X===void 0&&(X=M);var W=new P(R,F,I,B,N,Y);return this.setHitArea(A,W,X)},enableDebug:function(A,R){R===void 0&&(R=65280);var F=A.input;if(!F||!F.hitArea)return this;var I=F.hitArea,B=I.type,N=F.hitAreaDebug,Y=this.systems.add,X=this.systems.updateList;N&&(X.remove(N),N.destroy(),N=null);var W=0,w=0;switch(B){case m.CIRCLE:N=Y.arc(0,0,I.radius),W=I.x-I.radius,w=I.y-I.radius;break;case m.ELLIPSE:N=Y.ellipse(0,0,I.width,I.height),W=I.x-I.width/2,w=I.y-I.height/2;break;case m.LINE:N=Y.line(0,0,I.x1,I.y1,I.x2,I.y2);break;case m.POLYGON:N=Y.polygon(0,0,I.points);break;case m.RECTANGLE:N=Y.rectangle(0,0,I.width,I.height),W=I.x,w=I.y;break;case m.TRIANGLE:N=Y.triangle(0,0,I.x1,I.y1,I.x2,I.y2,I.x3,I.y3);break}return N&&(N.isFilled=!1,N.preUpdate=function(){N.setStrokeStyle(1/A.scale,R),N.setDisplayOrigin(A.displayOriginX,A.displayOriginY);var L=A.x,D=A.y,b=A.rotation,G=A.scaleX,z=A.scaleY;if(A.parentContainer){var U=A.getWorldTransformMatrix();L=U.tx,D=U.ty,b=U.rotation,G=U.scaleX,z=U.scaleY}N.setRotation(b),N.setScale(G,z),N.setPosition(L+W,D+w),N.setScrollFactor(A.scrollFactorX,A.scrollFactorY),N.setDepth(A.depth)},X.add(N),F.hitAreaDebug=N),this},removeDebug:function(A){var R=A.input;if(R&&R.hitAreaDebug){var F=R.hitAreaDebug;this.systems.updateList.remove(F),F.destroy(),R.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(A){return this.pollRate=A,this._pollTimer=0,this},setGlobalTopOnly:function(A){return this.manager.globalTopOnly=A,this},setTopOnly:function(A){return this.topOnly=A,this},sortGameObjects:function(A,R){if(A.length<2)return A;var F=R.camera.renderList;return A.sort(function(I,B){return F.indexOf(B)-F.indexOf(I)})},sortDropZones:function(A){return A.length<2?A:(this.scene.sys.depthSort(),A.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(A,R){if(!A.parentContainer&&!R.parentContainer)return this.displayList.getIndex(R)-this.displayList.getIndex(A);if(A.parentContainer===R.parentContainer)return R.parentContainer.getIndex(R)-A.parentContainer.getIndex(A);if(A.parentContainer===R)return-1;if(R.parentContainer===A)return 1;for(var F=A.getIndexList(),I=R.getIndexList(),B=Math.min(F.length,I.length),N=0;N<B;N++){var Y=F[N],X=I[N];if(Y!==X)return X-Y}return I.length-F.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(A){return this.manager.addPointer(A)},setDefaultCursor:function(A){return this.manager.setDefaultCursor(A),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(f.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var A=0;A<10;A++)this._drag[A]=[],this._over[A]=[];this.removeAllListeners();var R=this.manager;R.canvas.style.cursor=R.defaultCursor;var F=this.systems.events;F.off(E.TRANSITION_START,this.transitionIn,this),F.off(E.TRANSITION_OUT,this.transitionOut,this),F.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),F.off(E.PRE_UPDATE,this.preUpdate,this),R.events.off(f.GAME_OUT,this.onGameOut,this),R.events.off(f.GAME_OVER,this.onGameOver,this),F.off(E.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(f.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});T.register("InputPlugin",O,"input"),e.exports=O},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:t(154),KeyboardManager:t(410),KeyboardPlugin:t(1330),Key:t(512),KeyCodes:t(143),KeyCombo:t(513),AdvanceKeyCombo:t(515),ProcessKeyCombo:t(514),ResetKeyCombo:t(516),JustDown:t(1332),JustUp:t(1333),DownDuration:t(1334),UpDuration:t(1335)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keycombomatch"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown-"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup-"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(154),a=t(22),h=t(6),r=t(51),o=t(153),c=t(512),l=t(143),f=t(513),p=t(1331),g=t(20),m=t(76),x=new s({Extends:u,initialize:function(T){u.call(this),this.game=T.systems.game,this.scene=T.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=T,this.manager=T.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,T.pluginEvents.once(r.BOOT,this.boot,this),T.pluginEvents.on(r.START,this.start,this)},boot:function(){var y=this.settings.input;this.enabled=h(y,"keyboard",!0);var T=h(y,"keyboard.capture",null);T&&this.addCaptures(T),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(a.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(y){return this.manager.addCapture(y),this},removeCapture:function(y){return this.manager.removeCapture(y),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:l.UP,down:l.DOWN,left:l.LEFT,right:l.RIGHT,space:l.SPACE,shift:l.SHIFT})},addKeys:function(y,T,S){T===void 0&&(T=!0),S===void 0&&(S=!1);var C={};if(typeof y=="string"){y=y.split(",");for(var E=0;E<y.length;E++){var P=y[E].trim();P&&(C[P]=this.addKey(P,T,S))}}else for(var M in y)C[M]=this.addKey(y[M],T,S);return C},addKey:function(y,T,S){T===void 0&&(T=!0),S===void 0&&(S=!1);var C=this.keys;if(y instanceof c){var E=C.indexOf(y);return E>-1?C[E]=y:C[y.keyCode]=y,T&&this.addCapture(y.keyCode),y.setEmitOnRepeat(S),y}return typeof y=="string"&&(y=l[y.toUpperCase()]),C[y]||(C[y]=new c(this,y),T&&this.addCapture(y),C[y].setEmitOnRepeat(S)),C[y]},removeKey:function(y,T){T===void 0&&(T=!1);var S=this.keys,C;if(y instanceof c){var E=S.indexOf(y);E>-1&&(C=this.keys[E],this.keys[E]=void 0)}else typeof y=="string"&&(y=l[y.toUpperCase()]);return S[y]&&(C=S[y],S[y]=void 0),C&&(C.plugin=null,T&&C.destroy()),this},removeAllKeys:function(y){for(var T=this.keys,S=0;S<T.length;S++){var C=T[S];C&&(T[S]=void 0,y&&C.destroy())}return this},createCombo:function(y,T){return new f(this,y,T)},checkDown:function(y,T){if(T===void 0&&(T=0),this.enabled&&y.isDown){var S=m(this.time-y.timeDown,T);if(S>y._tick)return y._tick=S,!0}return!1},update:function(){var y=this.manager.queue,T=y.length;if(!(!this.isActive()||T===0))for(var S=this.keys,C=0;C<T;C++){var E=y[C],P=E.keyCode,M=S[P],O=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(P===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=P,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(M&&(O=M.isDown,M.onDown(E)),!E.cancelled&&(!M||!O)&&(p[P]&&this.emit(n.KEY_DOWN+p[P],E),E.cancelled||this.emit(n.ANY_KEY_DOWN,E))):(M&&M.onUp(E),E.cancelled||(p[P]&&this.emit(n.KEY_UP+p[P],E),E.cancelled||this.emit(n.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(a.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});o.register("KeyboardPlugin",x,"keyboard","keyboard","inputKeyboard"),e.exports=x},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(143),u={};for(var n in s)u[s[n]]=n;e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s._justDown?(s._justDown=!1,!0):!1};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s._justUp?(s._justUp=!1,!0):!1};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=50);var n=s.plugin.game.loop.time-s.timeDown;return s.isDown&&n<u};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=50);var n=s.plugin.game.loop.time-s.timeUp;return s.isUp&&n<u};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={MouseManager:t(411)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TouchManager:t(413)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(21),u=t(17),n={Events:t(95),FileTypes:t(1339),File:t(23),FileTypesManager:t(8),GetURL:t(155),LoaderPlugin:t(1365),MergeXHRSettings:t(240),MultiFile:t(49),XHRLoader:t(517),XHRSettings:t(156)};n=u(!1,n,s),e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AnimationJSONFile:t(1340),AsepriteFile:t(1341),AtlasJSONFile:t(1342),AtlasXMLFile:t(1343),AudioFile:t(518),AudioSpriteFile:t(1344),BinaryFile:t(1345),BitmapFontFile:t(1346),CSSFile:t(1347),GLSLFile:t(1348),HTML5AudioFile:t(519),HTMLFile:t(1349),HTMLTextureFile:t(1350),ImageFile:t(71),JSONFile:t(61),MultiAtlasFile:t(1351),MultiScriptFile:t(1352),OBJFile:t(1353),PackFile:t(1354),PluginFile:t(1355),SceneFile:t(1356),ScenePluginFile:t(1357),ScriptFile:t(520),SpriteSheetFile:t(1358),SVGFile:t(1359),TextFile:t(242),TilemapCSVFile:t(1360),TilemapImpactFile:t(1361),TilemapJSONFile:t(1362),UnityAtlasFile:t(1363),VideoFile:t(1364),XMLFile:t(241)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(61),a=t(95),h=new s({Extends:n,initialize:function(o,c,l,f,p){n.call(this,o,c,l,f,p),this.type="animationJSON"},onProcess:function(){this.loader.once(a.POST_PROCESS,this.onLoadComplete,this),n.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});u.register("animation",function(r,o,c,l){if(Array.isArray(r))for(var f=0;f<r.length;f++)this.addFile(new h(this,r[f]));else this.addFile(new h(this,r,o,l,c));return this}),e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(71),h=t(7),r=t(61),o=t(49),c=new s({Extends:o,initialize:function(f,p,g,m,x,y){var T,S;if(h(p)){var C=p;p=n(C,"key"),T=new a(f,{key:p,url:n(C,"textureURL"),extension:n(C,"textureExtension","png"),normalMap:n(C,"normalMap"),xhrSettings:n(C,"textureXhrSettings")}),S=new r(f,{key:p,url:n(C,"atlasURL"),extension:n(C,"atlasExtension","json"),xhrSettings:n(C,"atlasXhrSettings")})}else T=new a(f,p,g,x),S=new r(f,p,m,y);T.linkFile?o.call(this,f,"atlasjson",p,[T,S,T.linkFile]):o.call(this,f,"atlasjson",p,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,f.data,p),f.addToCache(),this.complete=!0}}});u.register("aseprite",function(l,f,p,g,m){var x;if(Array.isArray(l))for(var y=0;y<l.length;y++)x=new c(this,l[y]),this.addFile(x.files);else x=new c(this,l,f,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(71),h=t(7),r=t(61),o=t(49),c=new s({Extends:o,initialize:function(f,p,g,m,x,y){var T,S;if(h(p)){var C=p;p=n(C,"key"),T=new a(f,{key:p,url:n(C,"textureURL"),extension:n(C,"textureExtension","png"),normalMap:n(C,"normalMap"),xhrSettings:n(C,"textureXhrSettings")}),S=new r(f,{key:p,url:n(C,"atlasURL"),extension:n(C,"atlasExtension","json"),xhrSettings:n(C,"atlasXhrSettings")})}else T=new a(f,p,g,x),S=new r(f,p,m,y);T.linkFile?o.call(this,f,"atlasjson",p,[T,S,T.linkFile]):o.call(this,f,"atlasjson",p,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,f.data,p),f.pendingDestroy(),this.complete=!0}}});u.register("atlas",function(l,f,p,g,m){var x;if(Array.isArray(l))for(var y=0;y<l.length;y++)x=new c(this,l[y]),this.addFile(x.files);else x=new c(this,l,f,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(71),h=t(7),r=t(49),o=t(241),c=new s({Extends:r,initialize:function(f,p,g,m,x,y){var T,S;if(h(p)){var C=p;p=n(C,"key"),T=new a(f,{key:p,url:n(C,"textureURL"),extension:n(C,"textureExtension","png"),normalMap:n(C,"normalMap"),xhrSettings:n(C,"textureXhrSettings")}),S=new o(f,{key:p,url:n(C,"atlasURL"),extension:n(C,"atlasExtension","xml"),xhrSettings:n(C,"atlasXhrSettings")})}else T=new a(f,p,g,x),S=new o(f,p,m,y);T.linkFile?r.call(this,f,"atlasxml",p,[T,S,T.linkFile]):r.call(this,f,"atlasxml",p,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(l.key,l.data,f.data,p),f.pendingDestroy(),this.complete=!0}}});u.register("atlasXML",function(l,f,p,g,m){var x;if(Array.isArray(l))for(var y=0;y<l.length;y++)x=new c(this,l[y]),this.addFile(x.files);else x=new c(this,l,f,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(518),u=t(0),n=t(8),a=t(2),h=t(7),r=t(61),o=t(49),c=new u({Extends:o,initialize:function(f,p,g,m,x,y,T){if(h(p)){var S=p;p=a(S,"key"),g=a(S,"jsonURL"),m=a(S,"audioURL"),x=a(S,"audioConfig"),y=a(S,"audioXhrSettings"),T=a(S,"jsonXhrSettings")}var C;if(!m)C=new r(f,p,g,T),o.call(this,f,"audiosprite",p,[C]),this.config.resourceLoad=!0,this.config.audioConfig=x,this.config.audioXhrSettings=y;else{var E=s.create(f,p,m,x,y);E&&(C=new r(f,p,g,T),o.call(this,f,"audiosprite",p,[E,C]),this.config.resourceLoad=!1)}},onFileComplete:function(l){var f=this.files.indexOf(l);if(f!==-1&&(this.pending--,this.config.resourceLoad&&l.type==="json"&&l.data.hasOwnProperty("resources"))){var p=l.data.resources,g=a(this.config,"audioConfig"),m=a(this.config,"audioXhrSettings"),x=s.create(this.loader,l.key,p,g,m);x&&(this.addToMultiFile(x),this.loader.addFile(x))}},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1];l.addToCache(),f.addToCache(),this.complete=!0}}});n.register("audioSprite",function(l,f,p,g,m,x){var y=this.systems.game,T=y.config.audio,S=y.device.audio;if(T&&T.noAudio||!S.webAudio&&!S.audioData)return this;var C;if(Array.isArray(l))for(var E=0;E<l.length;E++)C=new c(this,l[E]),C.files&&this.addFile(C.files);else C=new c(this,l,f,p,g,m,x),C.files&&this.addFile(C.files);return this})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=new s({Extends:n,initialize:function(l,f,p,g,m){var x="bin";if(r(f)){var y=f;f=h(y,"key"),p=h(y,"url"),g=h(y,"xhrSettings"),x=h(y,"extension",x),m=h(y,"dataType",m)}var T={type:"binary",cache:l.cacheManager.binary,extension:x,responseType:"arraybuffer",key:f,url:p,xhrSettings:g,config:{dataType:m}};n.call(this,l,T)},onProcess:function(){this.state=u.FILE_PROCESSING;var c=this.config.dataType;this.data=c?new c(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});a.register("binary",function(c,l,f,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new o(this,c[g]));else this.addFile(new o(this,c,l,p,f));return this}),e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(71),h=t(7),r=t(49),o=t(212),c=t(241),l=new s({Extends:r,initialize:function(p,g,m,x,y,T){var S,C;if(h(g)){var E=g;g=n(E,"key"),S=new a(p,{key:g,url:n(E,"textureURL"),extension:n(E,"textureExtension","png"),normalMap:n(E,"normalMap"),xhrSettings:n(E,"textureXhrSettings")}),C=new c(p,{key:g,url:n(E,"fontDataURL"),extension:n(E,"fontDataExtension","xml"),xhrSettings:n(E,"fontDataXhrSettings")})}else S=new a(p,g,m,y),C=new c(p,g,x,T);S.linkFile?r.call(this,p,"bitmapfont",g,[S,C,S.linkFile]):r.call(this,p,"bitmapfont",g,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],p=this.files[1];f.addToCache(),p.pendingDestroy();var g=f.cache.get(f.key),m=o(p.data,f.cache.getFrame(f.key),0,0,g);this.loader.cacheManager.bitmapFont.add(f.key,{data:m,texture:f.key,frame:null}),this.complete=!0}}});u.register("bitmapFont",function(f,p,g,m,x){var y;if(Array.isArray(f))for(var T=0;T<f.length;T++)y=new l(this,f[T]),this.addFile(y.files);else y=new l(this,f,p,g,m,x),this.addFile(y.files);return this}),e.exports=l},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=new s({Extends:n,initialize:function(l,f,p,g){var m="css";if(r(f)){var x=f;f=h(x,"key"),p=h(x,"url"),g=h(x,"xhrSettings"),m=h(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:f,url:p,xhrSettings:g};n.call(this,l,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("css",function(c,l,f){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new o(this,c[p]));else this.addFile(new o(this,c,l,f));return this}),e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=t(396),c=new s({Extends:n,initialize:function(f,p,g,m,x){var y="glsl";if(r(p)){var T=p;p=h(T,"key"),g=h(T,"url"),m=h(T,"shaderType","fragment"),x=h(T,"xhrSettings"),y=h(T,"extension",y)}else m===void 0&&(m="fragment");var S={type:"glsl",cache:f.cacheManager.shader,extension:y,responseType:"text",key:p,url:g,config:{shaderType:m},xhrSettings:x};n.call(this,f,S)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l=this.data.split(`
`),f=this.extractBlock(l,0);if(f)for(;f;){var p=this.getShaderName(f.header),g=this.getShaderType(f.header),m=this.getShaderUniforms(f.header),x=f.shader;if(this.cache.has(p)){var y=this.cache.get(p);g==="fragment"?y.fragmentSrc=x:y.vertexSrc=x,y.uniforms||(y.uniforms=m)}else g==="fragment"?this.cache.add(p,new o(p,x,"",m)):this.cache.add(p,new o(p,"",x,m));f=this.extractBlock(l,f.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new o(this.key,this.data)):this.cache.add(this.key,new o(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(l){for(var f=0;f<l.length;f++){var p=l[f].trim();if(p.substring(0,5)==="name:")return p.substring(5).trim()}return this.key},getShaderType:function(l){for(var f=0;f<l.length;f++){var p=l[f].trim();if(p.substring(0,5)==="type:")return p.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(l){for(var f={},p=0;p<l.length;p++){var g=l[p].trim();if(g.substring(0,8)==="uniform."){var m=g.indexOf(":");if(m){var x=g.substring(8,m);try{f[x]=JSON.parse(g.substring(m+1))}catch{console.warn("Invalid uniform JSON: "+x)}}}}return f},extractBlock:function(l,f){for(var p=-1,g=-1,m=-1,x=!1,y=!1,T=[],S=[],C=f;C<l.length;C++){var E=l[C].trim();if(E==="---")if(p===-1)p=C,x=!0;else if(x)g=C,x=!1,y=!0;else{y=!1;break}else x?T.push(E):y&&(S.push(E),m=C)}return!x&&g!==-1?{header:T,shader:S.join(`
`),offset:m}:null}});a.register("glsl",function(l,f,p,g){if(Array.isArray(l))for(var m=0;m<l.length;m++)this.addFile(new c(this,l[m]));else this.addFile(new c(this,l,f,p,g));return this}),e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=new s({Extends:n,initialize:function(l,f,p,g){var m="html";if(r(f)){var x=f;f=h(x,"key"),p=h(x,"url"),g=h(x,"xhrSettings"),m=h(x,"extension",m)}var y={type:"text",cache:l.cacheManager.html,extension:m,responseType:"text",key:f,url:p,xhrSettings:g};n.call(this,l,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("html",function(c,l,f){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new o(this,c[p]));else this.addFile(new o(this,c,l,f));return this}),e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=new s({Extends:n,initialize:function(l,f,p,g,m,x){g===void 0&&(g=512),m===void 0&&(m=512);var y="html";if(r(f)){var T=f;f=h(T,"key"),p=h(T,"url"),x=h(T,"xhrSettings"),y=h(T,"extension",y),g=h(T,"width",g),m=h(T,"height",m)}var S={type:"html",cache:l.textureManager,extension:y,responseType:"text",key:f,url:p,xhrSettings:x,config:{width:g,height:m}};n.call(this,l,S)},onProcess:function(){this.state=u.FILE_PROCESSING;var c=this.config.width,l=this.config.height,f=[];f.push('<svg width="'+c+'px" height="'+l+'px" viewBox="0 0 '+c+" "+l+'" xmlns="http://www.w3.org/2000/svg">'),f.push('<foreignObject width="100%" height="100%">'),f.push('<body xmlns="http://www.w3.org/1999/xhtml">'),f.push(this.xhrLoader.responseText),f.push("</body>"),f.push("</foreignObject>"),f.push("</svg>");var p=[f.join(`
`)],g=this;try{var m=new window.Blob(p,{type:"image/svg+xml;charset=utf-8"})}catch{g.state=u.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){n.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(g.data),g.onProcessError()},n.createObjectURL(this.data,m,"image/svg+xml")},addToCache:function(){var c=this.cache.addImage(this.key,this.data);this.pendingDestroy(c)}});a.register("htmlTexture",function(c,l,f,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new o(this,c[m]));else this.addFile(new o(this,c,l,f,p,g));return this}),e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(71),h=t(7),r=t(61),o=t(49),c=new s({Extends:o,initialize:function(f,p,g,m,x,y,T){if(h(p)){var S=p;p=n(S,"key"),n(S,"url",!1)?g=n(S,"url"):g=n(S,"atlasURL"),y=n(S,"xhrSettings"),m=n(S,"path"),x=n(S,"baseURL"),T=n(S,"textureXhrSettings")}var C=new r(f,p,g,y);o.call(this,f,"multiatlas",p,[C]),this.config.path=m,this.config.baseURL=x,this.config.textureXhrSettings=T},onFileComplete:function(l){var f=this.files.indexOf(l);if(f!==-1&&(this.pending--,l.type==="json"&&l.data.hasOwnProperty("textures"))){var p=l.data.textures,g=this.config,m=this.loader,x=m.baseURL,y=m.path,T=m.prefix,S=n(g,"baseURL",this.baseURL),C=n(g,"path",this.path),E=n(g,"prefix",this.prefix),P=n(g,"textureXhrSettings");m.setBaseURL(S),m.setPath(C),m.setPrefix(E);for(var M=0;M<p.length;M++){var O=p[M].image,A="MA"+this.multiKeyIndex+"_"+O,R=new a(m,A,O,P);if(this.addToMultiFile(R),m.addFile(R),p[M].normalMap){var F=new a(m,A,p[M].normalMap,P);F.type="normalMap",R.setLink(F),this.addToMultiFile(F),m.addFile(F)}}m.setBaseURL(x),m.setPath(y),m.setPrefix(T)}},addToCache:function(){if(this.isReadyToProcess()){for(var l=this.files[0],f=[],p=[],g=[],m=1;m<this.files.length;m++){var x=this.files[m];if(x.type!=="normalMap")for(var y=x.key.indexOf("_"),T=x.key.substr(y+1),S=x.data,C=0;C<l.data.textures.length;C++){var E=l.data.textures[C];if(E.image===T){p.push(S),f.push(E),x.linkFile&&g.push(x.linkFile.data);break}}}for(g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,p,f,g),this.complete=!0,m=0;m<this.files.length;m++)this.files[m].pendingDestroy()}}});u.register("multiatlas",function(l,f,p,g,m){var x;if(Array.isArray(l))for(var y=0;y<l.length;y++)x=new c(this,l[y]),this.addFile(x.files);else x=new c(this,l,f,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(7),h=t(49),r=t(520),o=new s({Extends:h,initialize:function(l,f,p,g){var m="js",x=[];if(a(f)){var y=f;f=n(y,"key"),p=n(y,"url"),g=n(y,"xhrSettings"),m=n(y,"extension",m)}Array.isArray(p)||(p=[p]);for(var T=0;T<p.length;T++){var S=new r(l,{key:f+"_"+T.toString(),url:p[T],extension:m,xhrSettings:g});S.onProcess=function(){this.onProcessComplete()},x.push(S)}h.call(this,l,"scripts",f,x)},addToCache:function(){if(this.isReadyToProcess()){for(var c=0;c<this.files.length;c++){var l=this.files[c];l.data=document.createElement("script"),l.data.language="javascript",l.data.type="text/javascript",l.data.defer=!1,l.data.text=l.xhrLoader.responseText,document.head.appendChild(l.data)}this.complete=!0}}});u.register("scripts",function(c,l,f){var p;if(Array.isArray(c))for(var g=0;g<c.length;g++)p=new o(this,c[g]),this.addFile(p.files);else p=new o(this,c,l,f),this.addFile(p.files);return this}),e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(7),h=t(49),r=t(498),o=t(499),c=t(242),l=new s({Extends:h,initialize:function(p,g,m,x,y,T){var S,C,E=p.cacheManager.obj;if(a(g)){var P=g;g=n(P,"key"),S=new c(p,{key:g,type:"obj",cache:E,url:n(P,"url"),extension:n(P,"extension","obj"),xhrSettings:n(P,"xhrSettings"),config:{flipUV:n(P,"flipUV",y)}}),x=n(P,"matURL"),x&&(C=new c(p,{key:g,type:"mat",cache:E,url:x,extension:n(P,"matExtension","mat"),xhrSettings:n(P,"xhrSettings")}))}else S=new c(p,{key:g,url:m,type:"obj",cache:E,extension:"obj",xhrSettings:T,config:{flipUV:y}}),x&&(C=new c(p,{key:g,url:x,type:"mat",cache:E,extension:"mat",xhrSettings:T}));h.call(this,p,"obj",g,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],p=this.files[1],g=r(f.data,f.config.flipUV);p&&(g.materials=o(p.data)),f.cache.add(f.key,g),this.complete=!0}}});u.register("obj",function(f,p,g,m,x){var y;if(Array.isArray(f))for(var T=0;T<f.length;T++)y=new l(this,f[T]),this.addFile(y.files);else y=new l(this,f,p,g,m,x),this.addFile(y.files);return this}),e.exports=l},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(8),a=t(61),h=new s({Extends:a,initialize:function(o,c,l,f,p){a.call(this,o,c,l,f,p),this.type="packfile"},onProcess:function(){this.state!==u.FILE_POPULATED&&(this.state=u.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});n.register("pack",function(r,o,c,l){if(Array.isArray(r))for(var f=0;f<r.length;f++)this.addFile(new h(this,r[f]));else this.addFile(new h(this,r,o,l,c));return this}),e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=new s({Extends:n,initialize:function(l,f,p,g,m,x){var y="js";if(r(f)){var T=f;f=h(T,"key"),p=h(T,"url"),x=h(T,"xhrSettings"),y=h(T,"extension",y),g=h(T,"start"),m=h(T,"mapping")}var S={type:"plugin",cache:!1,extension:y,responseType:"text",key:f,url:p,xhrSettings:x,config:{start:g,mapping:m}};n.call(this,l,S),typeof p=="function"&&(this.data=p,this.state=u.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,l=this.config,f=h(l,"start",!1),p=h(l,"mapping",null);if(this.state===u.FILE_POPULATED)c.install(this.key,this.data,f,p);else{this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=c.install(this.key,window[this.key],f,p);(f||p)&&(this.loader.systems[p]=g,this.loader.scene[p]=g)}this.onProcessComplete()}});a.register("plugin",function(c,l,f,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new o(this,c[m]));else this.addFile(new o(this,c,l,f,p,g));return this}),e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=new s({Extends:n,initialize:function(l,f,p,g){var m="js";if(r(f)){var x=f;f=h(x,"key"),p=h(x,"url"),g=h(x,"xhrSettings"),m=h(x,"extension",m)}var y={type:"text",extension:m,responseType:"text",key:f,url:p,xhrSettings:g};n.call(this,l,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var c=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),l=eval;this.loader.sceneManager.add(this.key,l(c)),this.complete=!0}});a.register("sceneFile",function(c,l,f){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new o(this,c[p]));else this.addFile(new o(this,c,l,f));return this}),e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=new s({Extends:n,initialize:function(l,f,p,g,m,x){var y="js";if(r(f)){var T=f;f=h(T,"key"),p=h(T,"url"),x=h(T,"xhrSettings"),y=h(T,"extension",y),g=h(T,"systemKey"),m=h(T,"sceneKey")}var S={type:"scenePlugin",cache:!1,extension:y,responseType:"text",key:f,url:p,xhrSettings:x,config:{systemKey:g,sceneKey:m}};n.call(this,l,S),typeof p=="function"&&(this.data=p,this.state=u.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,l=this.config,f=this.key,p=h(l,"systemKey",f),g=h(l,"sceneKey",f);this.state===u.FILE_POPULATED?c.installScenePlugin(p,this.data,g,this.loader.scene,!0):(this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),c.installScenePlugin(p,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});a.register("scenePlugin",function(c,l,f,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new o(this,c[m]));else this.addFile(new o(this,c,l,f,p,g));return this}),e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(71),a=new s({Extends:n,initialize:function(r,o,c,l,f){n.call(this,r,o,c,f,l),this.type="spritesheet"},addToCache:function(){var h=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(h)}});u.register("spritesheet",function(h,r,o,c){if(Array.isArray(h))for(var l=0;l<h.length;l++)this.addFile(new a(this,h[l]));else this.addFile(new a(this,h,r,o,c));return this}),e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=new s({Extends:n,initialize:function(l,f,p,g,m){var x="svg";if(r(f)){var y=f;f=h(y,"key"),p=h(y,"url"),g=h(y,"svgConfig",{}),m=h(y,"xhrSettings"),x=h(y,"extension",x)}var T={type:"svg",cache:l.textureManager,extension:x,responseType:"text",key:f,url:p,xhrSettings:m,config:{width:h(g,"width"),height:h(g,"height"),scale:h(g,"scale")}};n.call(this,l,T)},onProcess:function(){this.state=u.FILE_PROCESSING;var c=this.xhrLoader.responseText,l=[c],f=this.config.width,p=this.config.height,g=this.config.scale;t:if(f&&p||g){var m=null,x=new DOMParser;m=x.parseFromString(c,"text/xml");var y=m.getElementsByTagName("svg")[0],T=y.hasAttribute("viewBox"),S=parseFloat(y.getAttribute("width")),C=parseFloat(y.getAttribute("height"));if(!T&&S&&C)y.setAttribute("viewBox","0  0 "+S+" "+C);else if(T&&!S&&!C){var E=y.getAttribute("viewBox").split(/\s+|,/);S=E[2],C=E[3]}if(g)if(S&&C)f=S*g,p=C*g;else break t;y.setAttribute("width",f.toString()+"px"),y.setAttribute("height",p.toString()+"px"),l=[new XMLSerializer().serializeToString(y)]}try{var P=new window.Blob(l,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var M=this,O=!1;this.data.onload=function(){O||n.revokeObjectURL(M.data),M.onProcessComplete()},this.data.onerror=function(){O?M.onProcessError():(O=!0,n.revokeObjectURL(M.data),M.data.src="data:image/svg+xml,"+encodeURIComponent(l.join("")))},n.createObjectURL(this.data,P,"image/svg+xml")},addToCache:function(){var c=this.cache.addImage(this.key,this.data);this.pendingDestroy(c)}});a.register("svg",function(c,l,f,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new o(this,c[g]));else this.addFile(new o(this,c,l,f,p));return this}),e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(2),r=t(7),o=t(40),c=new s({Extends:n,initialize:function(f,p,g,m){var x="csv";if(r(p)){var y=p;p=h(y,"key"),g=h(y,"url"),m=h(y,"xhrSettings"),x=h(y,"extension",x)}var T={type:"tilemapCSV",cache:f.cacheManager.tilemap,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};n.call(this,f,T),this.tilemapFormat=o.CSV},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,l),this.pendingDestroy(l)}});a.register("tilemapCSV",function(l,f,p){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new c(this,l[g]));else this.addFile(new c(this,l,f,p));return this}),e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(61),a=t(40),h=new s({Extends:n,initialize:function(o,c,l,f){n.call(this,o,c,l,f),this.type="tilemapJSON",this.cache=o.cacheManager.tilemap},addToCache:function(){var r={format:a.WELTMEISTER,data:this.data};this.cache.add(this.key,r),this.pendingDestroy(r)}});u.register("tilemapImpact",function(r,o,c){if(Array.isArray(r))for(var l=0;l<r.length;l++)this.addFile(new h(this,r[l]));else this.addFile(new h(this,r,o,c));return this}),e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(61),a=t(40),h=new s({Extends:n,initialize:function(o,c,l,f){n.call(this,o,c,l,f),this.type="tilemapJSON",this.cache=o.cacheManager.tilemap},addToCache:function(){var r={format:a.TILED_JSON,data:this.data};this.cache.add(this.key,r),this.pendingDestroy(r)}});u.register("tilemapTiledJSON",function(r,o,c){if(Array.isArray(r))for(var l=0;l<r.length;l++)this.addFile(new h(this,r[l]));else this.addFile(new h(this,r,o,c));return this}),e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(71),h=t(7),r=t(49),o=t(242),c=new s({Extends:r,initialize:function(f,p,g,m,x,y){var T,S;if(h(p)){var C=p;p=n(C,"key"),T=new a(f,{key:p,url:n(C,"textureURL"),extension:n(C,"textureExtension","png"),normalMap:n(C,"normalMap"),xhrSettings:n(C,"textureXhrSettings")}),S=new o(f,{key:p,url:n(C,"atlasURL"),extension:n(C,"atlasExtension","txt"),xhrSettings:n(C,"atlasXhrSettings")})}else T=new a(f,p,g,x),S=new o(f,p,m,y);T.linkFile?r.call(this,f,"unityatlas",p,[T,S,T.linkFile]):r.call(this,f,"unityatlas",p,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(l.key,l.data,f.data,p),f.pendingDestroy(),this.complete=!0}}});u.register("unityAtlas",function(l,f,p,g,m){var x;if(Array.isArray(l))for(var y=0;y<l.length;y++)x=new c(this,l[y]),this.addFile(x.files);else x=new c(this,l,f,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),h=t(155),r=t(2),o=t(7),c=new s({Extends:n,initialize:function(f,p,g,m,x,y,T){m===void 0&&(m="loadeddata"),x===void 0&&(x=!1),y===void 0&&(y=!1),m!=="loadeddata"&&m!=="canplay"&&m!=="canplaythrough"&&(m="loadeddata");var S={type:"video",cache:f.cacheManager.video,extension:g.type,responseType:"blob",key:p,url:g.url,xhrSettings:T,config:{loadEvent:m,asBlob:x,noAudio:y}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),n.call(this,f,S)},onProcess:function(){if(this.state=u.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var l=this.createVideoElement();this.data=l;var f=this;this.data.onloadeddata=function(){f.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(f.data),f.onProcessError()},n.createObjectURL(l,this.xhrLoader.response,""),l.load()},createVideoElement:function(){var l=document.createElement("video");return l.controls=!1,l.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(l.muted=!0,l.defaultMuted=!0,l.setAttribute("autoplay","autoplay")),l.setAttribute("playsinline","playsinline"),l.setAttribute("preload","auto"),l},onVideoLoadHandler:function(l){var f=l.target;f.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),f.removeEventListener("error",this.onErrorCallback,!0),this.data=f,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(l){var f=l.target;f&&(f.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),f.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var l=this.config.loadEvent;if(this.config.asBlob)n.prototype.load.call(this);else{this.percentComplete=0;var f=this.createVideoElement();f.addEventListener(l,this.onLoadCallback,!0),f.addEventListener("error",this.onErrorCallback,!0),f.src=h(this,this.loader.baseURL),f.load()}}});c.create=function(l,f,p,g,m,x,y){var T=l.systems.game;o(f)&&(p=r(f,"url",[]),g=r(f,"loadEvent","loadeddata"),m=r(f,"asBlob",!1),x=r(f,"noAudio",!1),y=r(f,"xhrSettings"),f=r(f,"key"));var S=c.getVideoURL(T,p);if(S)return new c(l,f,S,g,m,x,y)},c.getVideoURL=function(l,f){Array.isArray(f)||(f=[f]);for(var p=0;p<f.length;p++){var g=r(f[p],"url",f[p]);if(g.indexOf("blob:")===0)return{url:g,type:""};var m;if(g.indexOf("data:")===0?m=g.split(",")[0].match(/\/(.*?);/):m=g.match(/\.([a-zA-Z0-9]+)($|\?)/),m=r(f[p],"type",m?m[1]:"").toLowerCase(),l.device.video[m])return{url:g,type:m}}return null},a.register("video",function(l,f,p,g,m,x){var y;if(Array.isArray(l))for(var T=0;T<l.length;T++)y=c.create(this,l[T]),y&&this.addFile(y);else y=c.create(this,l,f,p,g,m,x),y&&this.addFile(y);return this}),e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(149),a=t(9),h=t(95),r=t(8),o=t(2),c=t(24),l=t(20),f=t(156),p=new s({Extends:a,initialize:function(m){a.call(this);var x=m.sys.game.config,y=m.sys.settings.loader;this.scene=m,this.systems=m.sys,this.cacheManager=m.sys.cache,this.textureManager=m.sys.textures,this.sceneManager=m.sys.game.scene,r.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(o(y,"baseURL",x.loaderBaseURL)),this.setPath(o(y,"path",x.loaderPath)),this.setPrefix(o(y,"prefix",x.loaderPrefix)),this.maxParallelDownloads=o(y,"maxParallelDownloads",x.loaderMaxParallelDownloads),this.xhr=f(o(y,"responseType",x.loaderResponseType),o(y,"async",x.loaderAsync),o(y,"user",x.loaderUser),o(y,"password",x.loaderPassword),o(y,"timeout",x.loaderTimeout),o(y,"withCredentials",x.loaderWithCredentials)),this.crossOrigin=o(y,"crossOrigin",x.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new n,this.inflight=new n,this.queue=new n,this._deleteQueue=new n,this.totalFailed=0,this.totalComplete=0,this.state=u.LOADER_IDLE,this.multiKeyIndex=0,m.sys.events.once(l.BOOT,this.boot,this),m.sys.events.on(l.START,this.pluginStart,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(l.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var m=0;m<g.length;m++){var x=g[m];this.keyExists(x)||(this.list.set(x),this.emit(h.ADD,x.key,x.type,this,x),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var m=g.hasCacheConflict();return m||this.list.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),!m&&this.isLoading()&&(this.inflight.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),this.queue.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1})),m},addPack:function(g,m){m&&g.hasOwnProperty(m)&&(g={packKey:g[m]});var x=0,y=this.baseURL,T=this.path,S=this.prefix;for(var C in g)if(!!Object.prototype.hasOwnProperty.call(g,C)){var E=g[C],P=o(E,"baseURL",y),M=o(E,"path",T),O=o(E,"prefix",S),A=o(E,"files",null),R=o(E,"defaultType","void");if(Array.isArray(A)){this.setBaseURL(P),this.setPath(M),this.setPrefix(O);for(var F=0;F<A.length;F++){var I=A[F],B=I.hasOwnProperty("type")?I.type:R;this[B]&&(this[B](I),x++)}}}return this.setBaseURL(y),this.setPath(T),this.setPrefix(S),x>0},isLoading:function(){return this.state===u.LOADER_LOADING||this.state===u.LOADER_PROCESSING},isReady:function(){return this.state===u.LOADER_IDLE||this.state===u.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(h.START,this),this.list.size===0?this.loadComplete():(this.state=u.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(l.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(h.PROGRESS,this.progress)},update:function(){this.state===u.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===u.FILE_POPULATED||g.state===u.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,m){!this.inflight||(this.inflight.delete(g),this.updateProgress(),m?(this.totalComplete++,this.queue.set(g),this.emit(h.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(h.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===u.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===u.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&g.multiFile.addToCache():g.addToCache()),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(h.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=u.LOADER_COMPLETE,this.systems.events.off(l.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(h.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,m){return this.save(JSON.stringify(g),m)},save:function(g,m,x){m===void 0&&(m="file.json"),x===void 0&&(x="application/json");var y=new Blob([g],{type:x}),T=URL.createObjectURL(y),S=document.createElement("a");return S.download=m,S.textContent="Download "+m,S.href=T,S.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,m=this.systems.settings.loader;this.setBaseURL(o(m,"baseURL",g.loaderBaseURL)),this.setPath(o(m,"path",g.loaderPath)),this.setPrefix(o(m,"prefix",g.loaderPrefix)),this.state=u.LOADER_IDLE},shutdown:function(){this.reset(),this.state=u.LOADER_SHUTDOWN,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=u.LOADER_DESTROYED,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});c.register("Loader",p,"load"),e.exports=p},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62),u=t(17),n={ArcadePhysics:t(1367),Body:t(527),Collider:t(528),Components:t(243),Events:t(245),Factory:t(521),GetOverlapX:t(246),GetOverlapY:t(247),SeparateX:t(537),SeparateY:t(538),Group:t(524),Image:t(522),Sprite:t(157),StaticBody:t(539),StaticGroup:t(525),Tilemap:t(1391),World:t(526)};n=u(!1,n,s),e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(36),n=t(50),a=t(353),h=t(521),r=t(2),o=t(127),c=t(523),l=t(244),f=t(24),p=t(20),g=t(3),m=t(526),x=new s({initialize:function(T){this.scene=T,this.systems=T.sys,this.config=this.getConfig(),this.world,this.add,T.sys.events.once(p.BOOT,this.boot,this),T.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new m(this.scene,this.config),this.add=new h(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new m(this.scene,this.config),this.add=new h(this.world));var y=this.systems.events;r(this.config,"customUpdate",!1)||y.on(p.UPDATE,this.world.update,this.world),y.on(p.POST_UPDATE,this.world.postUpdate,this.world),y.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var y=this.systems.game.config.physics,T=this.systems.settings.physics,S=o(r(T,"arcade",{}),r(y,"arcade",{}));return S},overlap:function(y,T,S,C,E){return S===void 0&&(S=null),C===void 0&&(C=null),E===void 0&&(E=S),this.world.collideObjects(y,T,S,C,E,!0)},collide:function(y,T,S,C,E){return S===void 0&&(S=null),C===void 0&&(C=null),E===void 0&&(E=S),this.world.collideObjects(y,T,S,C,E,!1)},collideTiles:function(y,T,S,C,E){return this.world.collideTiles(y,T,S,C,E)},overlapTiles:function(y,T,S,C,E){return this.world.overlapTiles(y,T,S,C,E)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(y,T,S,C,E,P){C===void 0&&(C=60);var M=Math.atan2(S-y.y,T-y.x);return y.body.acceleration.setToPolar(M,C),E!==void 0&&P!==void 0&&y.body.maxVelocity.set(E,P),M},accelerateToObject:function(y,T,S,C,E){return this.accelerateTo(y,T.x,T.y,S,C,E)},closest:function(y,T){T||(T=this.world.bodies.entries);for(var S=Number.MAX_VALUE,C=null,E=y.x,P=y.y,M=T.length,O=0;O<M;O++){var A=T[O],R=A.body||A;if(!(y===A||y===R||y===R.gameObject||y===R.center)){var F=a(E,P,R.center.x,R.center.y);F<S&&(C=A,S=F)}}return C},furthest:function(y,T){T||(T=this.world.bodies.entries);for(var S=-1,C=null,E=y.x,P=y.y,M=T.length,O=0;O<M;O++){var A=T[O],R=A.body||A;if(!(y===A||y===R||y===R.gameObject||y===R.center)){var F=a(E,P,R.center.x,R.center.y);F>S&&(C=A,S=F)}}return C},moveTo:function(y,T,S,C,E){C===void 0&&(C=60),E===void 0&&(E=0);var P=Math.atan2(S-y.y,T-y.x);return E>0&&(C=n(y.x,y.y,T,S)/(E/1e3)),y.body.velocity.setToPolar(P,C),P},moveToObject:function(y,T,S,C){return this.moveTo(y,T.x,T.y,S,C)},velocityFromAngle:function(y,T,S){return T===void 0&&(T=60),S===void 0&&(S=new g),S.setToPolar(u(y),T)},velocityFromRotation:function(y,T,S){return T===void 0&&(T=60),S===void 0&&(S=new g),S.setToPolar(y,T)},overlapRect:function(y,T,S,C,E,P){return l(this.world,y,T,S,C,E,P)},overlapCirc:function(y,T,S,C,E){return c(this.world,y,T,S,C,E)},shutdown:function(){if(!!this.world){var y=this.systems.events;y.off(p.UPDATE,this.world.update,this.world),y.off(p.POST_UPDATE,this.world.postUpdate,this.world),y.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});f.register("ArcadePhysics",x,"arcadePhysics"),e.exports=x},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAcceleration:function(s,u){return this.body.acceleration.set(s,u),this},setAccelerationX:function(s){return this.body.acceleration.x=s,this},setAccelerationY:function(s){return this.body.acceleration.y=s,this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAngularVelocity:function(s){return this.body.angularVelocity=s,this},setAngularAcceleration:function(s){return this.body.angularAcceleration=s,this},setAngularDrag:function(s){return this.body.angularDrag=s,this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(s,u){return this.body.bounce.set(s,u),this},setBounceX:function(s){return this.body.bounce.x=s,this},setBounceY:function(s){return this.body.bounce.y=s,this},setCollideWorldBounds:function(s,u,n){return this.body.setCollideWorldBounds(s,u,n),this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDebug:function(s,u,n){return this.debugShowBody=s,this.debugShowVelocity=u,this.debugBodyColor=n,this},setDebugBodyColor:function(s){return this.body.debugBodyColor=s,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(s){this.body.debugShowBody=s}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(s){this.body.debugShowVelocity=s}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(s){this.body.debugBodyColor=s}}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDrag:function(s,u){return this.body.drag.set(s,u),this},setDragX:function(s){return this.body.drag.x=s,this},setDragY:function(s){return this.body.drag.y=s,this},setDamping:function(s){return this.body.useDamping=s,this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={enableBody:function(s,u,n,a,h){return s&&this.body.reset(u,n),a&&(this.body.gameObject.active=!0),h&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(s,u){return s===void 0&&(s=!1),u===void 0&&(u=!1),this.body.stop(),this.body.enable=!1,s&&(this.body.gameObject.active=!1),u&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(s,u){return this.body.friction.set(s,u),this},setFrictionX:function(s){return this.body.friction.x=s,this},setFrictionY:function(s){return this.body.friction.y=s,this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setGravity:function(s,u){return this.body.gravity.set(s,u),this},setGravityX:function(s){return this.body.gravity.x=s,this},setGravityY:function(s){return this.body.gravity.y=s,this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setImmovable:function(s){return s===void 0&&(s=!0),this.body.immovable=s,this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setMass:function(s){return this.body.mass=s,this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setPushable:function(s){return s===void 0&&(s=!0),this.body.pushable=s,this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setOffset:function(s,u){return this.body.setOffset(s,u),this},setSize:function(s,u,n){return this.body.setSize(s,u,n),this},setBodySize:function(s,u,n){return this.body.setSize(s,u,n),this},setCircle:function(s,u,n){return this.body.setCircle(s,u,n),this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setVelocity:function(s,u){return this.body.setVelocity(s,u),this},setVelocityX:function(s){return this.body.setVelocityX(s),this},setVelocityY:function(s){return this.body.setVelocityY(s),this},setMaxVelocity:function(s,u){return this.body.maxVelocity.set(s,u),this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collide"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="overlap"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tilecollide"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tileoverlap"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldbounds"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldstep"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,s,u,n,a,h,r,o,c,l,f,p,g,m,x,y,T,S=function(A,R,F){t=A,s=R;var I=t.velocity.x,B=s.velocity.x;return u=t.pushable,c=t._dx<0,l=t._dx>0,f=t._dx===0,x=Math.abs(t.right-s.x)<=Math.abs(s.right-t.x),r=B-I*t.bounce.x,n=s.pushable,p=s._dx<0,g=s._dx>0,m=s._dx===0,y=!x,o=I-B*s.bounce.x,T=Math.abs(F),C()},C=function(){return l&&x&&s.blocked.right?(t.processX(-T,r,!1,!0),1):c&&y&&s.blocked.left?(t.processX(T,r,!0),1):g&&y&&t.blocked.right?(s.processX(-T,o,!1,!0),2):p&&x&&t.blocked.left?(s.processX(T,o,!0),2):0},E=function(){var A=t.velocity.x,R=s.velocity.x,F=Math.sqrt(R*R*s.mass/t.mass)*(R>0?1:-1),I=Math.sqrt(A*A*t.mass/s.mass)*(A>0?1:-1),B=(F+I)*.5;return F-=B,I-=B,a=B+F*t.bounce.x,h=B+I*s.bounce.x,c&&y?P(0):p&&x?P(1):l&&x?P(2):g&&y?P(3):!1},P=function(A){if(u&&n)T*=.5,A===0||A===3?(t.processX(T,a),s.processX(-T,h)):(t.processX(-T,a),s.processX(T,h));else if(u&&!n)A===0||A===3?t.processX(T,r,!0):t.processX(-T,r,!1,!0);else if(!u&&n)A===0||A===3?s.processX(-T,o,!1,!0):s.processX(T,o,!0);else{var R=T*.5;A===0?m?(t.processX(T,0,!0),s.processX(0,null,!1,!0)):g?(t.processX(R,0,!0),s.processX(-R,0,!1,!0)):(t.processX(R,s.velocity.x,!0),s.processX(-R,null,!1,!0)):A===1?f?(t.processX(0,null,!1,!0),s.processX(T,0,!0)):l?(t.processX(-R,0,!1,!0),s.processX(R,0,!0)):(t.processX(-R,null,!1,!0),s.processX(R,t.velocity.x,!0)):A===2?m?(t.processX(-T,0,!1,!0),s.processX(0,null,!0)):p?(t.processX(-R,0,!1,!0),s.processX(R,0,!0)):(t.processX(-R,s.velocity.x,!1,!0),s.processX(R,null,!0)):A===3&&(f?(t.processX(0,null,!0),s.processX(-T,0,!1,!0)):c?(t.processX(R,0,!0),s.processX(-R,0,!1,!0)):(t.processX(R,s.velocity.y,!0),s.processX(-R,null,!1,!0)))}return!0},M=function(A){A===1?s.velocity.x=0:x?s.processX(T,o,!0):s.processX(-T,o,!1,!0),t.moves&&(s.y+=(t.y-t.prev.y)*t.friction.y,s._dy=s.y-s.prev.y)},O=function(A){A===2?t.velocity.x=0:y?t.processX(T,r,!0):t.processX(-T,r,!1,!0),s.moves&&(t.y+=(s.y-s.prev.y)*s.friction.y,t._dy=t.y-t.prev.y)};e.exports={BlockCheck:C,Check:E,Set:S,Run:P,RunImmovableBody1:M,RunImmovableBody2:O}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,s,u,n,a,h,r,o,c,l,f,p,g,m,x,y,T,S=function(A,R,F){t=A,s=R;var I=t.velocity.y,B=s.velocity.y;return u=t.pushable,c=t._dy<0,l=t._dy>0,f=t._dy===0,x=Math.abs(t.bottom-s.y)<=Math.abs(s.bottom-t.y),r=B-I*t.bounce.y,n=s.pushable,p=s._dy<0,g=s._dy>0,m=s._dy===0,y=!x,o=I-B*s.bounce.y,T=Math.abs(F),C()},C=function(){return l&&x&&s.blocked.down?(t.processY(-T,r,!1,!0),1):c&&y&&s.blocked.up?(t.processY(T,r,!0),1):g&&y&&t.blocked.down?(s.processY(-T,o,!1,!0),2):p&&x&&t.blocked.up?(s.processY(T,o,!0),2):0},E=function(){var A=t.velocity.y,R=s.velocity.y,F=Math.sqrt(R*R*s.mass/t.mass)*(R>0?1:-1),I=Math.sqrt(A*A*t.mass/s.mass)*(A>0?1:-1),B=(F+I)*.5;return F-=B,I-=B,a=B+F*t.bounce.y,h=B+I*s.bounce.y,c&&y?P(0):p&&x?P(1):l&&x?P(2):g&&y?P(3):!1},P=function(A){if(u&&n)T*=.5,A===0||A===3?(t.processY(T,a),s.processY(-T,h)):(t.processY(-T,a),s.processY(T,h));else if(u&&!n)A===0||A===3?t.processY(T,r,!0):t.processY(-T,r,!1,!0);else if(!u&&n)A===0||A===3?s.processY(-T,o,!1,!0):s.processY(T,o,!0);else{var R=T*.5;A===0?m?(t.processY(T,0,!0),s.processY(0,null,!1,!0)):g?(t.processY(R,0,!0),s.processY(-R,0,!1,!0)):(t.processY(R,s.velocity.y,!0),s.processY(-R,null,!1,!0)):A===1?f?(t.processY(0,null,!1,!0),s.processY(T,0,!0)):l?(t.processY(-R,0,!1,!0),s.processY(R,0,!0)):(t.processY(-R,null,!1,!0),s.processY(R,t.velocity.y,!0)):A===2?m?(t.processY(-T,0,!1,!0),s.processY(0,null,!0)):p?(t.processY(-R,0,!1,!0),s.processY(R,0,!0)):(t.processY(-R,s.velocity.y,!1,!0),s.processY(R,null,!0)):A===3&&(f?(t.processY(0,null,!0),s.processY(-T,0,!1,!0)):c?(t.processY(R,0,!0),s.processY(-R,0,!1,!0)):(t.processY(R,s.velocity.y,!0),s.processY(-R,null,!1,!0)))}return!0},M=function(A){A===1?s.velocity.y=0:x?s.processY(T,o,!0):s.processY(-T,o,!1,!0),t.moves&&(s.x+=(t.x-t.prev.x)*t.friction.x,s._dx=s.x-s.prev.x)},O=function(A){A===2?t.velocity.y=0:y?t.processY(T,r,!0):t.processY(-T,r,!1,!0),s.moves&&(t.x+=(s.x-s.prev.x)*s.friction.x,t._dx=t.x-t.prev.x)};e.exports={BlockCheck:C,Check:E,Set:S,Run:P,RunImmovableBody1:M,RunImmovableBody2:O}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ProcessTileCallbacks:t(530),ProcessTileSeparationX:t(534),ProcessTileSeparationY:t(536),SeparateTile:t(532),TileCheckX:t(533),TileCheckY:t(535),TileIntersectsBody:t(248)};e.exports=s},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(3),n=new s({initialize:function(){this.boundsCenter=new u,this.centerDiff=new u},parseBody:function(a){if(a=a.hasOwnProperty("body")?a.body:a,!a.hasOwnProperty("bounds")||!a.hasOwnProperty("centerOfMass"))return!1;var h=this.boundsCenter,r=this.centerDiff,o=a.bounds.max.x-a.bounds.min.x,c=a.bounds.max.y-a.bounds.min.y,l=o*a.centerOfMass.x,f=c*a.centerOfMass.y;return h.set(o/2,c/2),r.set(l-h.x,f-h.y),!0},getTopLeft:function(a,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(a)){var o=this.boundsCenter,c=this.centerDiff;return new u(h+o.x+c.x,r+o.y+c.y)}return!1},getTopCenter:function(a,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(a)){var o=this.boundsCenter,c=this.centerDiff;return new u(h+c.x,r+o.y+c.y)}return!1},getTopRight:function(a,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(a)){var o=this.boundsCenter,c=this.centerDiff;return new u(h-(o.x-c.x),r+o.y+c.y)}return!1},getLeftCenter:function(a,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(a)){var o=this.boundsCenter,c=this.centerDiff;return new u(h+o.x+c.x,r+c.y)}return!1},getCenter:function(a,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(a)){var o=this.centerDiff;return new u(h+o.x,r+o.y)}return!1},getRightCenter:function(a,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(a)){var o=this.boundsCenter,c=this.centerDiff;return new u(h-(o.x-c.x),r+c.y)}return!1},getBottomLeft:function(a,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(a)){var o=this.boundsCenter,c=this.centerDiff;return new u(h+o.x+c.x,r-(o.y-c.y))}return!1},getBottomCenter:function(a,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(a)){var o=this.boundsCenter,c=this.centerDiff;return new u(h+c.x,r-(o.y-c.y))}return!1},getBottomRight:function(a,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(a)){var o=this.boundsCenter,c=this.centerDiff;return new u(h-(o.x-c.x),r-(o.y-c.y))}return!1}});e.exports=n},function(e,d){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={decomp:A,quickDecomp:B,isSimple:F,removeCollinearPoints:N,removeDuplicatePoints:Y,makeCCW:x};function t(w,L,D){D=D||0;var b=[0,0],G,z,U,H,$,K,Z;return G=w[1][1]-w[0][1],z=w[0][0]-w[1][0],U=G*w[0][0]+z*w[0][1],H=L[1][1]-L[0][1],$=L[0][0]-L[1][0],K=H*L[0][0]+$*L[0][1],Z=G*$-H*z,X(Z,0,D)||(b[0]=($*U-z*K)/Z,b[1]=(G*K-H*U)/Z),b}function s(w,L,D,b){var G=L[0]-w[0],z=L[1]-w[1],U=b[0]-D[0],H=b[1]-D[1];if(U*z-H*G===0)return!1;var $=(G*(D[1]-w[1])+z*(w[0]-D[0]))/(U*z-H*G),K=(U*(w[1]-D[1])+H*(D[0]-w[0]))/(H*G-U*z);return $>=0&&$<=1&&K>=0&&K<=1}function u(w,L,D){return(L[0]-w[0])*(D[1]-w[1])-(D[0]-w[0])*(L[1]-w[1])}function n(w,L,D){return u(w,L,D)>0}function a(w,L,D){return u(w,L,D)>=0}function h(w,L,D){return u(w,L,D)<0}function r(w,L,D){return u(w,L,D)<=0}var o=[],c=[];function l(w,L,D,b){if(b){var G=o,z=c;G[0]=L[0]-w[0],G[1]=L[1]-w[1],z[0]=D[0]-L[0],z[1]=D[1]-L[1];var U=G[0]*z[0]+G[1]*z[1],H=Math.sqrt(G[0]*G[0]+G[1]*G[1]),$=Math.sqrt(z[0]*z[0]+z[1]*z[1]),K=Math.acos(U/(H*$));return K<b}else return u(w,L,D)===0}function f(w,L){var D=L[0]-w[0],b=L[1]-w[1];return D*D+b*b}function p(w,L){var D=w.length;return w[L<0?L%D+D:L%D]}function g(w){w.length=0}function m(w,L,D,b){for(var G=D;G<b;G++)w.push(L[G])}function x(w){for(var L=0,D=w,b=1;b<w.length;++b)(D[b][1]<D[L][1]||D[b][1]===D[L][1]&&D[b][0]>D[L][0])&&(L=b);return n(p(w,L-1),p(w,L),p(w,L+1))?!1:(y(w),!0)}function y(w){for(var L=[],D=w.length,b=0;b!==D;b++)L.push(w.pop());for(var b=0;b!==D;b++)w[b]=L[b]}function T(w,L){return h(p(w,L-1),p(w,L),p(w,L+1))}var S=[],C=[];function E(w,L,D){var b,G,z=S,U=C;if(a(p(w,L+1),p(w,L),p(w,D))&&r(p(w,L-1),p(w,L),p(w,D)))return!1;G=f(p(w,L),p(w,D));for(var H=0;H!==w.length;++H)if(!((H+1)%w.length===L||H===L)&&a(p(w,L),p(w,D),p(w,H+1))&&r(p(w,L),p(w,D),p(w,H))&&(z[0]=p(w,L),z[1]=p(w,D),U[0]=p(w,H),U[1]=p(w,H+1),b=t(z,U),f(p(w,L),b)<G))return!1;return!0}function P(w,L,D){for(var b=0;b!==w.length;++b)if(!(b===L||b===D||(b+1)%w.length===L||(b+1)%w.length===D)&&s(p(w,L),p(w,D),p(w,b),p(w,b+1)))return!1;return!0}function M(w,L,D,b){var G=b||[];if(g(G),L<D)for(var z=L;z<=D;z++)G.push(w[z]);else{for(var z=0;z<=D;z++)G.push(w[z]);for(var z=L;z<w.length;z++)G.push(w[z])}return G}function O(w){for(var L=[],D=[],b=[],G=[],z=Number.MAX_VALUE,U=0;U<w.length;++U)if(T(w,U)){for(var H=0;H<w.length;++H)if(E(w,U,H)){D=O(M(w,U,H,G)),b=O(M(w,H,U,G));for(var $=0;$<b.length;$++)D.push(b[$]);D.length<z&&(L=D,z=D.length,L.push([p(w,U),p(w,H)]))}}return L}function A(w){var L=O(w);return L.length>0?R(w,L):[w]}function R(w,L){if(L.length===0)return[w];if(L instanceof Array&&L.length&&L[0]instanceof Array&&L[0].length===2&&L[0][0]instanceof Array){for(var D=[w],b=0;b<L.length;b++)for(var G=L[b],z=0;z<D.length;z++){var U=D[z],H=R(U,G);if(H){D.splice(z,1),D.push(H[0],H[1]);break}}return D}else{var G=L,b=w.indexOf(G[0]),z=w.indexOf(G[1]);return b!==-1&&z!==-1?[M(w,b,z),M(w,z,b)]:!1}}function F(w){var L=w,D;for(D=0;D<L.length-1;D++)for(var b=0;b<D-1;b++)if(s(L[D],L[D+1],L[b],L[b+1]))return!1;for(D=1;D<L.length-2;D++)if(s(L[0],L[L.length-1],L[D],L[D+1]))return!1;return!0}function I(w,L,D,b,G){G=G||0;var z=L[1]-w[1],U=w[0]-L[0],H=z*w[0]+U*w[1],$=b[1]-D[1],K=D[0]-b[0],Z=$*D[0]+K*D[1],k=z*K-$*U;return X(k,0,G)?[0,0]:[(K*H-U*Z)/k,(z*Z-$*H)/k]}function B(w,L,D,b,G,z,U){z=z||100,U=U||0,G=G||25,L=typeof L!="undefined"?L:[],D=D||[],b=b||[];var H=[0,0],$=[0,0],K=[0,0],Z=0,k=0,J=0,q=0,Q=0,_=0,at=0,st=[],tt=[],j=w,ot=w;if(ot.length<3)return L;if(U++,U>z)return console.warn("quickDecomp: max level ("+z+") reached."),L;for(var et=0;et<w.length;++et)if(T(j,et)){D.push(j[et]),Z=k=Number.MAX_VALUE;for(var nt=0;nt<w.length;++nt)n(p(j,et-1),p(j,et),p(j,nt))&&r(p(j,et-1),p(j,et),p(j,nt-1))&&(K=I(p(j,et-1),p(j,et),p(j,nt),p(j,nt-1)),h(p(j,et+1),p(j,et),K)&&(J=f(j[et],K),J<k&&(k=J,$=K,_=nt))),n(p(j,et+1),p(j,et),p(j,nt+1))&&r(p(j,et+1),p(j,et),p(j,nt))&&(K=I(p(j,et+1),p(j,et),p(j,nt),p(j,nt+1)),n(p(j,et-1),p(j,et),K)&&(J=f(j[et],K),J<Z&&(Z=J,H=K,Q=nt)));if(_===(Q+1)%w.length)K[0]=($[0]+H[0])/2,K[1]=($[1]+H[1])/2,b.push(K),et<Q?(m(st,j,et,Q+1),st.push(K),tt.push(K),_!==0&&m(tt,j,_,j.length),m(tt,j,0,et+1)):(et!==0&&m(st,j,et,j.length),m(st,j,0,Q+1),st.push(K),tt.push(K),m(tt,j,_,et+1));else{if(_>Q&&(Q+=w.length),q=Number.MAX_VALUE,Q<_)return L;for(var nt=_;nt<=Q;++nt)a(p(j,et-1),p(j,et),p(j,nt))&&r(p(j,et+1),p(j,et),p(j,nt))&&(J=f(p(j,et),p(j,nt)),J<q&&P(j,et,nt)&&(q=J,at=nt%w.length));et<at?(m(st,j,et,at+1),at!==0&&m(tt,j,at,ot.length),m(tt,j,0,et+1)):(et!==0&&m(st,j,et,ot.length),m(st,j,0,at+1),m(tt,j,at,et+1))}return st.length<tt.length?(B(st,L,D,b,G,z,U),B(tt,L,D,b,G,z,U)):(B(tt,L,D,b,G,z,U),B(st,L,D,b,G,z,U)),L}return L.push(w),L}function N(w,L){for(var D=0,b=w.length-1;w.length>3&&b>=0;--b)l(p(w,b-1),p(w,b),p(w,b+1),L)&&(w.splice(b%w.length,1),D++);return D}function Y(w,L){for(var D=w.length-1;D>=1;--D)for(var b=w[D],G=D-1;G>=0;--G)if(W(b,w[G],L)){w.splice(D,1);continue}}function X(w,L,D){return D=D||0,Math.abs(w-L)<=D}function W(w,L,D){return X(w[0],L[0],D)&&X(w[1],L[1],D)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(0),n=t(591),a=t(128),h=t(592),r=t(1395),o=t(1396),c=t(1397),l=t(593),f=t(589),p=t(590),g=t(1398),m=t(64),x=new u({initialize:function(T){this.world=T,this.scene=T.scene,this.sys=T.scene.sys},rectangle:function(y,T,S,C,E){var P=s.rectangle(y,T,S,C,E);return this.world.add(P),P},trapezoid:function(y,T,S,C,E,P){var M=s.trapezoid(y,T,S,C,E,P);return this.world.add(M),M},circle:function(y,T,S,C,E){var P=s.circle(y,T,S,C,E);return this.world.add(P),P},polygon:function(y,T,S,C,E){var P=s.polygon(y,T,S,C,E);return this.world.add(P),P},fromVertices:function(y,T,S,C,E,P,M){typeof S=="string"&&(S=m.fromPath(S));var O=s.fromVertices(y,T,S,C,E,P,M);return this.world.add(O),O},fromPhysicsEditor:function(y,T,S,C,E){E===void 0&&(E=!0);var P=f.parseBody(y,T,S,C);return E&&!this.world.has(P)&&this.world.add(P),P},fromSVG:function(y,T,S,C,E,P){C===void 0&&(C=1),E===void 0&&(E={}),P===void 0&&(P=!0);for(var M=S.getElementsByTagName("path"),O=[],A=0;A<M.length;A++){var R=h.pathToVertices(M[A],30);C!==1&&m.scale(R,C,C),O.push(R)}var F=s.fromVertices(y,T,O,E);return P&&this.world.add(F),F},fromJSON:function(y,T,S,C,E){C===void 0&&(C={}),E===void 0&&(E=!0);var P=p.parseBody(y,T,S,C);return P&&E&&this.world.add(P),P},imageStack:function(y,T,S,C,E,P,M,O,A){M===void 0&&(M=0),O===void 0&&(O=0),A===void 0&&(A={});var R=this.world,F=this.sys.displayList;A.addToWorld=!1;var I=n.stack(S,C,E,P,M,O,function(B,N){var Y=new o(R,B,N,y,T,A);return F.add(Y),Y.body});return R.add(I),I},stack:function(y,T,S,C,E,P,M){var O=n.stack(y,T,S,C,E,P,M);return this.world.add(O),O},pyramid:function(y,T,S,C,E,P,M){var O=n.pyramid(y,T,S,C,E,P,M);return this.world.add(O),O},chain:function(y,T,S,C,E,P){return n.chain(y,T,S,C,E,P)},mesh:function(y,T,S,C,E){return n.mesh(y,T,S,C,E)},newtonsCradle:function(y,T,S,C,E){var P=n.newtonsCradle(y,T,S,C,E);return this.world.add(P),P},car:function(y,T,S,C,E){var P=n.car(y,T,S,C,E);return this.world.add(P),P},softBody:function(y,T,S,C,E,P,M,O,A,R){var F=n.softBody(y,T,S,C,E,P,M,O,A,R);return this.world.add(F),F},joint:function(y,T,S,C,E){return this.constraint(y,T,S,C,E)},spring:function(y,T,S,C,E){return this.constraint(y,T,S,C,E)},constraint:function(y,T,S,C,E){C===void 0&&(C=1),E===void 0&&(E={}),E.bodyA=y.type==="body"?y:y.body,E.bodyB=T.type==="body"?T:T.body,isNaN(S)||(E.length=S),E.stiffness=C;var P=a.create(E);return this.world.add(P),P},worldConstraint:function(y,T,S,C){S===void 0&&(S=1),C===void 0&&(C={}),C.bodyB=y.type==="body"?y:y.body,isNaN(T)||(C.length=T),C.stiffness=S;var E=a.create(C);return this.world.add(E),E},mouseSpring:function(y){return this.pointerConstraint(y)},pointerConstraint:function(y){y===void 0&&(y={}),y.hasOwnProperty("render")||(y.render={visible:!1});var T=new g(this.scene,this.world,y);return this.world.add(T.constraint),T},image:function(y,T,S,C,E){var P=new o(this.world,y,T,S,C,E);return this.sys.displayList.add(P),P},tileBody:function(y,T){return new l(this.world,y,T)},sprite:function(y,T,S,C,E){var P=new c(this.world,y,T,S,C,E);return this.sys.displayList.add(P),this.sys.updateList.add(P),P},gameObject:function(y,T,S){return r(this.world,y,T,S)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=x},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(249),u=t(2),n=t(3);function a(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}var h=function(r,o,c,l){c===void 0&&(c={}),l===void 0&&(l=!0);var f=o.x,p=o.y;o.body={temp:!0,position:{x:f,y:p}};var g=[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity];if(g.forEach(function(x){for(var y in x)a(x[y])?Object.defineProperty(o,y,{get:x[y].get,set:x[y].set}):Object.defineProperty(o,y,{value:x[y]})}),o.world=r,o._tempVec2=new n(f,p),c.hasOwnProperty("type")&&c.type==="body")o.setExistingBody(c,l);else{var m=u(c,"shape",null);m||(m="rectangle"),c.addToWorld=l,o.setBody(m,c)}return o};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(249),n=t(15),a=t(2),h=t(125),r=t(167),o=t(3),c=new s({Extends:h,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,r],initialize:function(f,p,g,m,x,y){n.call(this,f.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(m,x),this.setSizeToFrame(),this.setOrigin(),this.world=f,this._tempVec2=new o(p,g);var T=a(y,"shape",null);T?this.setBody(T,y):this.setRectangle(this.width,this.height,y),this.setPosition(p,g),this.initPipeline()}});e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(164),u=t(0),n=t(249),a=t(15),h=t(2),r=t(167),o=t(73),c=t(3),l=new u({Extends:o,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,r],initialize:function(p,g,m,x,y,T){a.call(this,p.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(x,y),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new c(g,m);var S=h(T,"shape",null);S?this.setBody(S,T):this.setRectangle(this.width,this.height,T),this.setPosition(g,m),this.initPipeline()}});e.exports=l},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84),u=t(0),n=t(118),a=t(128),h=t(273),r=t(272),o=t(51),c=t(127),l=t(165),f=t(3),p=t(64),g=new u({initialize:function(x,y,T){T===void 0&&(T={});var S={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=x,this.world=y,this.camera=null,this.pointer=null,this.active=!0,this.position=new f,this.body=null,this.part=null,this.constraint=a.create(c(T,S)),this.world.on(r.BEFORE_UPDATE,this.update,this),x.sys.input.on(o.POINTER_DOWN,this.onDown,this),x.sys.input.on(o.POINTER_UP,this.onUp,this)},onDown:function(m){this.pointer||(this.pointer=m,this.camera=m.camera)},onUp:function(m){m===this.pointer&&(this.pointer=null)},getBody:function(m){var x=this.position,y=this.constraint;this.camera.getWorldPoint(m.x,m.y,x);for(var T=n.allBodies(this.world.localWorld),S=0;S<T.length;S++){var C=T[S];if(!C.ignorePointer&&s.contains(C.bounds,x)&&h.canCollide(C.collisionFilter,y.collisionFilter)&&this.hitTestBody(C,x))return this.world.emit(r.DRAG_START,C,this.part,this),!0}return!1},hitTestBody:function(m,x){for(var y=this.constraint,T=m.parts.length,S=T>1?1:0,C=S;C<T;C++){var E=m.parts[C];if(p.contains(E.vertices,x))return y.pointA=x,y.pointB={x:x.x-m.position.x,y:x.y-m.position.y},y.bodyB=m,y.angleB=m.angle,l.set(m,!1),this.part=E,this.body=m,!0}return!1},update:function(){var m=this.pointer,x=this.body;if(!this.active||!m){x&&this.stopDrag();return}if(!m.isDown&&x){this.stopDrag();return}else if(m.isDown){if(!x&&!this.getBody(m))return;x=this.body;var y=this.position,T=this.constraint;this.camera.getWorldPoint(m.x,m.y,y),T.pointA.x=y.x,T.pointA.y=y.y,l.set(x,!1),this.world.emit(r.DRAG,x,this)}},stopDrag:function(){var m=this.body,x=this.constraint;x.bodyB=null,x.pointB=null,this.pointer=null,this.body=null,this.part=null,m&&this.world.emit(r.DRAG_END,m,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(r.BEFORE_UPDATE,this.update),this.scene.sys.input.off(o.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(o.POINTER_UP,this.onUp,this)}});e.exports=g},function(e,d,t){var s={};e.exports=s;var u=t(595),n=t(32);(function(){s.name="matter-js",s.version="0.14.2",s.uses=[],s.used=[],s.use=function(){u.use(s,Array.prototype.slice.call(arguments))},s.before=function(a,h){return a=a.replace(/^Matter./,""),n.chainPathBefore(s,a,h)},s.after=function(a,h){return a=a.replace(/^Matter./,""),n.chainPathAfter(s,a,h)}})()},function(e,d,t){var s={};e.exports=s;var u=t(83),n=t(274),a=t(84),h=t(86),r=t(64);(function(){s.collides=function(o,c){for(var l=[],f=0;f<c.length;f++){var p=c[f];if(o!==p&&a.overlaps(p.bounds,o.bounds))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(a.overlaps(m.bounds,o.bounds)){var x=n.collides(m,o);if(x.collided){l.push(x);break}}}}return l},s.ray=function(o,c,l,f){f=f||1e-100;for(var p=u.angle(c,l),g=u.magnitude(u.sub(c,l)),m=(l.x+c.x)*.5,x=(l.y+c.y)*.5,y=h.rectangle(m,x,g,f,{angle:p}),T=s.collides(y,o),S=0;S<T.length;S+=1){var C=T[S];C.body=C.bodyB=C.bodyA}return T},s.region=function(o,c,l){for(var f=[],p=0;p<o.length;p++){var g=o[p],m=a.overlaps(g.bounds,c);(m&&!l||!m&&l)&&f.push(g)}return f},s.point=function(o,c){for(var l=[],f=0;f<o.length;f++){var p=o[f];if(a.contains(p.bounds,c))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(a.contains(m.bounds,c)&&r.contains(m.vertices,c)){l.push(p);break}}}return l}})()},function(e,d,t){var s={};e.exports=s;var u=t(596),n=t(165),a=t(599),h=t(598),r=t(1523),o=t(597),c=t(166),l=t(118),f=t(128),p=t(32),g=t(41);(function(){s.create=function(m,x){x=p.isElement(m)?x:m,m=p.isElement(m)?m:null,x=x||{},(m||x.render)&&p.warn("Engine.create: engine.render is deprecated (see docs)");var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:o}},T=p.extend(y,x);return T.world=x.world||u.create(T.world),T.pairs=h.create(),T.broadphase=T.broadphase.controller.create(T.broadphase),T.metrics=T.metrics||{extended:!1},T.metrics=r.create(T.metrics),T},s.update=function(m,x,y){x=x||1e3/60,y=y||1;var T=m.world,S=m.timing,C=m.broadphase,E=[],P;S.timestamp+=x*S.timeScale;var M={timestamp:S.timestamp};c.trigger(m,"beforeUpdate",M);var O=l.allBodies(T),A=l.allConstraints(T);for(r.reset(m.metrics),m.enableSleeping&&n.update(O,S.timeScale),s._bodiesApplyGravity(O,T.gravity),s._bodiesUpdate(O,x,S.timeScale,y,T.bounds),f.preSolveAll(O),P=0;P<m.constraintIterations;P++)f.solveAll(A,S.timeScale);f.postSolveAll(O),C.controller?(T.isModified&&C.controller.clear(C),C.controller.update(C,O,m,T.isModified),E=C.pairsList):E=O,T.isModified&&l.setModified(T,!1,!1,!0);var R=C.detector(E,m),F=m.pairs,I=S.timestamp;for(h.update(F,R,I),h.removeOld(F,I),m.enableSleeping&&n.afterCollisions(F.list,S.timeScale),F.collisionStart.length>0&&c.trigger(m,"collisionStart",{pairs:F.collisionStart}),a.preSolvePosition(F.list),P=0;P<m.positionIterations;P++)a.solvePosition(F.list,O,S.timeScale);for(a.postSolvePosition(O),f.preSolveAll(O),P=0;P<m.constraintIterations;P++)f.solveAll(A,S.timeScale);for(f.postSolveAll(O),a.preSolveVelocity(F.list),P=0;P<m.velocityIterations;P++)a.solveVelocity(F.list,S.timeScale);return F.collisionActive.length>0&&c.trigger(m,"collisionActive",{pairs:F.collisionActive}),F.collisionEnd.length>0&&c.trigger(m,"collisionEnd",{pairs:F.collisionEnd}),r.update(m.metrics,m),s._bodiesClearForces(O),c.trigger(m,"afterUpdate",M),m},s.merge=function(m,x){if(p.extend(m,x),x.world){m.world=x.world,s.clear(m);for(var y=l.allBodies(m.world),T=0;T<y.length;T++){var S=y[T];n.set(S,!1),S.id=p.nextId()}}},s.clear=function(m){var x=m.world;h.clear(m.pairs);var y=m.broadphase;if(y.controller){var T=l.allBodies(x);y.controller.clear(y),y.controller.update(y,T,m,!0)}},s._bodiesClearForces=function(m){for(var x=0;x<m.length;x++){var y=m[x];y.force.x=0,y.force.y=0,y.torque=0}},s._bodiesApplyGravity=function(m,x){var y=typeof x.scale!="undefined"?x.scale:.001;if(!(x.x===0&&x.y===0||y===0))for(var T=0;T<m.length;T++){var S=m[T];S.ignoreGravity||S.isStatic||S.isSleeping||(S.force.x+=S.mass*x.x*y*S.gravityScale.x,S.force.y+=S.mass*x.y*y*S.gravityScale.y)}},s._bodiesUpdate=function(m,x,y,T,S){for(var C=0;C<m.length;C++){var E=m[C];E.isStatic||E.isSleeping||g.update(E,x,y,T)}}})()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n=t(0),a=t(32),h=t(118),r=t(1401),o=t(9),c=t(272),l=t(2),f=t(6),p=t(41),g=t(166),m=t(593),x=t(596),y=t(83),T=new n({Extends:o,initialize:function(C,E){o.call(this),this.scene=C,this.engine=r.create(E),this.localWorld=this.engine.world;var P=f(E,"gravity",null);P?this.setGravity(P.x,P.y,P.scale):P===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=f(E,"enabled",!0),this.correction=f(E,"correction",1),this.getDelta=f(E,"getDelta",this.update60Hz);var M=l(E,"runner",{}),O=l(M,"fps",!1),A=l(M,"fps",60),R=l(M,"delta",1e3/A),F=l(M,"deltaMin",1e3/A),I=l(M,"deltaMax",1e3/(A*.5));O||(A=1e3/R),this.runner={fps:A,correction:l(M,"correction",1),deltaSampleSize:l(M,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:l(M,"isFixed",!1),delta:R,deltaMin:F,deltaMax:I},this.autoUpdate=f(E,"autoUpdate",!0);var B=f(E,"debug",!1);if(this.drawDebug=typeof B=="object"?!0:B,this.debugGraphic,this.debugConfig={showAxes:l(B,"showAxes",!1),showAngleIndicator:l(B,"showAngleIndicator",!1),angleColor:l(B,"angleColor",15208787),showBroadphase:l(B,"showBroadphase",!1),broadphaseColor:l(B,"broadphaseColor",16757760),showBounds:l(B,"showBounds",!1),boundsColor:l(B,"boundsColor",16777215),showVelocity:l(B,"showVelocity",!1),velocityColor:l(B,"velocityColor",44783),showCollisions:l(B,"showCollisions",!1),collisionColor:l(B,"collisionColor",16094476),showSeparations:l(B,"showSeparations",!1),separationColor:l(B,"separationColor",16753920),showBody:l(B,"showBody",!0),showStaticBody:l(B,"showStaticBody",!0),showInternalEdges:l(B,"showInternalEdges",!1),renderFill:l(B,"renderFill",!1),renderLine:l(B,"renderLine",!0),fillColor:l(B,"fillColor",1075465),fillOpacity:l(B,"fillOpacity",1),lineColor:l(B,"lineColor",2678297),lineOpacity:l(B,"lineOpacity",1),lineThickness:l(B,"lineThickness",1),staticFillColor:l(B,"staticFillColor",857979),staticLineColor:l(B,"staticLineColor",1255396),showSleeping:l(B,"showSleeping",!1),staticBodySleepOpacity:l(B,"staticBodySleepOpacity",.7),sleepFillColor:l(B,"sleepFillColor",4605510),sleepLineColor:l(B,"sleepLineColor",10066585),showSensors:l(B,"showSensors",!0),sensorFillColor:l(B,"sensorFillColor",857979),sensorLineColor:l(B,"sensorLineColor",1255396),showPositions:l(B,"showPositions",!0),positionSize:l(B,"positionSize",4),positionColor:l(B,"positionColor",14697178),showJoint:l(B,"showJoint",!0),jointColor:l(B,"jointColor",14737474),jointLineOpacity:l(B,"jointLineOpacity",1),jointLineThickness:l(B,"jointLineThickness",2),pinSize:l(B,"pinSize",4),pinColor:l(B,"pinColor",4382944),springColor:l(B,"springColor",14697184),anchorColor:l(B,"anchorColor",15724527),anchorSize:l(B,"anchorSize",4),showConvexHulls:l(B,"showConvexHulls",!1),hullColor:l(B,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),l(E,"setBounds",!1)){var N=E.setBounds;if(typeof N=="boolean")this.setBounds();else{var Y=l(N,"x",0),X=l(N,"y",0),W=l(N,"width",C.sys.scale.width),w=l(N,"height",C.sys.scale.height),L=l(N,"thickness",64),D=l(N,"left",!0),b=l(N,"right",!0),G=l(N,"top",!0),z=l(N,"bottom",!0);this.setBounds(Y,X,W,w,L,D,b,G,z)}}},setCompositeRenderStyle:function(S){var C=S.bodies,E=S.constraints,P=S.composites,M,O,A;for(M=0;M<C.length;M++)O=C[M],A=O.render,this.setBodyRenderStyle(O,A.lineColor,A.lineOpacity,A.lineThickness,A.fillColor,A.fillOpacity);for(M=0;M<E.length;M++)O=E[M],A=O.render,this.setConstraintRenderStyle(O,A.lineColor,A.lineOpacity,A.lineThickness,A.pinSize,A.anchorColor,A.anchorSize);for(M=0;M<P.length;M++)O=P[M],this.setCompositeRenderStyle(O);return this},setBodyRenderStyle:function(S,C,E,P,M,O){var A=S.render,R=this.debugConfig;return A?(C==null&&(C=S.isStatic?R.staticLineColor:R.lineColor),E==null&&(E=R.lineOpacity),P==null&&(P=R.lineThickness),M==null&&(M=S.isStatic?R.staticFillColor:R.fillColor),O==null&&(O=R.fillOpacity),C!==!1&&(A.lineColor=C),E!==!1&&(A.lineOpacity=E),P!==!1&&(A.lineThickness=P),M!==!1&&(A.fillColor=M),O!==!1&&(A.fillOpacity=O),this):this},setConstraintRenderStyle:function(S,C,E,P,M,O,A){var R=S.render,F=this.debugConfig;if(!R)return this;if(C==null){var I=R.type;I==="line"?C=F.jointColor:I==="pin"?C=F.pinColor:I==="spring"&&(C=F.springColor)}return E==null&&(E=F.jointLineOpacity),P==null&&(P=F.jointLineThickness),M==null&&(M=F.pinSize),O==null&&(O=F.anchorColor),A==null&&(A=F.anchorSize),C!==!1&&(R.lineColor=C),E!==!1&&(R.lineOpacity=E),P!==!1&&(R.lineThickness=P),M!==!1&&(R.pinSize=M),O!==!1&&(R.anchorColor=O),A!==!1&&(R.anchorSize=A),this},setEventsProxy:function(){var S=this,C=this.engine,E=this.localWorld;this.drawDebug&&(g.on(E,"compositeModified",function(P){S.setCompositeRenderStyle(P)}),g.on(E,"beforeAdd",function(P){for(var M=[].concat(P.object),O=0;O<M.length;O++){var A=M[O],R=A.render;A.type==="body"?S.setBodyRenderStyle(A,R.lineColor,R.lineOpacity,R.lineThickness,R.fillColor,R.fillOpacity):A.type==="composite"?S.setCompositeRenderStyle(A):A.type==="constraint"&&S.setConstraintRenderStyle(A,R.lineColor,R.lineOpacity,R.lineThickness,R.pinSize,R.anchorColor,R.anchorSize)}})),g.on(E,"beforeAdd",function(P){S.emit(c.BEFORE_ADD,P)}),g.on(E,"afterAdd",function(P){S.emit(c.AFTER_ADD,P)}),g.on(E,"beforeRemove",function(P){S.emit(c.BEFORE_REMOVE,P)}),g.on(E,"afterRemove",function(P){S.emit(c.AFTER_REMOVE,P)}),g.on(C,"beforeUpdate",function(P){S.emit(c.BEFORE_UPDATE,P)}),g.on(C,"afterUpdate",function(P){S.emit(c.AFTER_UPDATE,P)}),g.on(C,"collisionStart",function(P){var M=P.pairs,O,A;M.length>0&&(O=M[0].bodyA,A=M[0].bodyB),S.emit(c.COLLISION_START,P,O,A)}),g.on(C,"collisionActive",function(P){var M=P.pairs,O,A;M.length>0&&(O=M[0].bodyA,A=M[0].bodyB),S.emit(c.COLLISION_ACTIVE,P,O,A)}),g.on(C,"collisionEnd",function(P){var M=P.pairs,O,A;M.length>0&&(O=M[0].bodyA,A=M[0].bodyB),S.emit(c.COLLISION_END,P,O,A)})},setBounds:function(S,C,E,P,M,O,A,R,F){return S===void 0&&(S=0),C===void 0&&(C=0),E===void 0&&(E=this.scene.sys.scale.width),P===void 0&&(P=this.scene.sys.scale.height),M===void 0&&(M=64),O===void 0&&(O=!0),A===void 0&&(A=!0),R===void 0&&(R=!0),F===void 0&&(F=!0),this.updateWall(O,"left",S-M,C-M,M,P+M*2),this.updateWall(A,"right",S+E,C-M,M,P+M*2),this.updateWall(R,"top",S,C-M,E,M),this.updateWall(F,"bottom",S,C+P,E,M),this},updateWall:function(S,C,E,P,M,O){var A=this.walls[C];S?(A&&x.remove(this.localWorld,A),E+=M/2,P+=O/2,this.walls[C]=this.create(E,P,M,O,{isStatic:!0,friction:0,frictionStatic:0})):(A&&x.remove(this.localWorld,A),this.walls[C]=null)},createDebugGraphic:function(){var S=this.scene.sys.add.graphics({x:0,y:0});return S.setDepth(Number.MAX_VALUE),this.debugGraphic=S,this.drawDebug=!0,S},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(S,C,E){return S===void 0&&(S=0),C===void 0&&(C=1),this.localWorld.gravity.x=S,this.localWorld.gravity.y=C,E!==void 0&&(this.localWorld.gravity.scale=E),this},create:function(S,C,E,P,M){var O=s.rectangle(S,C,E,P,M);return x.add(this.localWorld,O),O},add:function(S){return x.add(this.localWorld,S),this},remove:function(S,C){Array.isArray(S)||(S=[S]);for(var E=0;E<S.length;E++){var P=S[E],M=P.body?P.body:P;h.remove(this.localWorld,M,C)}return this},removeConstraint:function(S,C){return h.remove(this.localWorld,S,C),this},convertTilemapLayer:function(S,C){var E=S.layer,P=S.getTilesWithin(0,0,E.width,E.height,{isColliding:!0});return this.convertTiles(P,C),this},convertTiles:function(S,C){if(S.length===0)return this;for(var E=0;E<S.length;E++)new m(this,S[E],C);return this},nextGroup:function(S){return p.nextGroup(S)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(c.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(c.RESUME),this},update:function(S,C){if(!(!this.enabled||!this.autoUpdate)){var E=this.engine,P=this.runner,M=E.timing,O=this.correction;P.isFixed?C=this.getDelta(S,C):(C=S-P.timePrev||P.delta,P.timePrev=S,P.deltaHistory.push(C),P.deltaHistory=P.deltaHistory.slice(-P.deltaSampleSize),C=Math.min.apply(null,P.deltaHistory),C=C<P.deltaMin?P.deltaMin:C,C=C>P.deltaMax?P.deltaMax:C,O=C/P.delta,P.delta=C),P.timeScalePrev!==0&&(O*=M.timeScale/P.timeScalePrev),M.timeScale===0&&(O=0),P.timeScalePrev=M.timeScale,P.correction=O,P.frameCounter+=1,S-P.counterTimestamp>=1e3&&(P.fps=P.frameCounter*((S-P.counterTimestamp)/1e3),P.counterTimestamp=S,P.frameCounter=0),r.update(E,C,O)}},step:function(S,C){r.update(this.engine,S,C)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(S){var C=S.hasOwnProperty("body")?S.body:S;return h.get(this.localWorld,C.id,C.type)!==null},getAllBodies:function(){return h.allBodies(this.localWorld)},getAllConstraints:function(){return h.allConstraints(this.localWorld)},getAllComposites:function(){return h.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var S=this.debugConfig,C=this.engine,E=this.debugGraphic,P=h.allBodies(this.localWorld);this.debugGraphic.clear(),S.showBroadphase&&C.broadphase.controller&&this.renderGrid(C.broadphase,E,S.broadphaseColor,.5),S.showBounds&&this.renderBodyBounds(P,E,S.boundsColor,.5),(S.showBody||S.showStaticBody)&&this.renderBodies(P),S.showJoint&&this.renderJoints(),(S.showAxes||S.showAngleIndicator)&&this.renderBodyAxes(P,E,S.showAxes,S.angleColor,.5),S.showVelocity&&this.renderBodyVelocity(P,E,S.velocityColor,1,2),S.showSeparations&&this.renderSeparations(C.pairs.list,E,S.separationColor),S.showCollisions&&this.renderCollisions(C.pairs.list,E,S.collisionColor)}},renderGrid:function(S,C,E,P){C.lineStyle(1,E,P);for(var M=a.keys(S.buckets),O=0;O<M.length;O++){var A=M[O];if(!(S.buckets[A].length<2)){var R=A.split(/C|R/);C.strokeRect(parseInt(R[1],10)*S.bucketWidth,parseInt(R[2],10)*S.bucketHeight,S.bucketWidth,S.bucketHeight)}}return this},renderSeparations:function(S,C,E){C.lineStyle(1,E,1);for(var P=0;P<S.length;P++){var M=S[P];if(!!M.isActive){var O=M.collision,A=O.bodyA,R=O.bodyB,F=A.position,I=R.position,B=O.penetration,N=!A.isStatic&&!R.isStatic?4:1;R.isStatic&&(N=0),C.lineBetween(I.x,I.y,I.x-B.x*N,I.y-B.y*N),N=!A.isStatic&&!R.isStatic?4:1,A.isStatic&&(N=0),C.lineBetween(F.x,F.y,F.x-B.x*N,F.y-B.y*N)}}return this},renderCollisions:function(S,C,E){C.lineStyle(1,E,.5),C.fillStyle(E,1);var P,M;for(P=0;P<S.length;P++)if(M=S[P],!!M.isActive)for(var O=0;O<M.activeContacts.length;O++){var A=M.activeContacts[O],R=A.vertex;C.fillRect(R.x-2,R.y-2,5,5)}for(P=0;P<S.length;P++)if(M=S[P],!!M.isActive){var F=M.collision,I=M.activeContacts;if(I.length>0){var B=I[0].vertex.x,N=I[0].vertex.y;I.length===2&&(B=(I[0].vertex.x+I[1].vertex.x)/2,N=(I[0].vertex.y+I[1].vertex.y)/2),F.bodyB===F.supports[0].body||F.bodyA.isStatic?C.lineBetween(B-F.normal.x*8,N-F.normal.y*8,B,N):C.lineBetween(B+F.normal.x*8,N+F.normal.y*8,B,N)}}return this},renderBodyBounds:function(S,C,E,P){C.lineStyle(1,E,P);for(var M=0;M<S.length;M++){var O=S[M];if(!!O.render.visible){var A=O.bounds;if(A)C.strokeRect(A.min.x,A.min.y,A.max.x-A.min.x,A.max.y-A.min.y);else for(var R=O.parts,F=R.length>1?1:0;F<R.length;F++){var I=R[F];C.strokeRect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}}return this},renderBodyAxes:function(S,C,E,P,M){C.lineStyle(1,P,M);for(var O=0;O<S.length;O++){var A=S[O],R=A.parts;if(!!A.render.visible){var F,I,B;if(E)for(I=R.length>1?1:0;I<R.length;I++)for(F=R[I],B=0;B<F.axes.length;B++){var N=F.axes[B];C.lineBetween(F.position.x,F.position.y,F.position.x+N.x*20,F.position.y+N.y*20)}else for(I=R.length>1?1:0;I<R.length;I++)for(F=R[I],B=0;B<F.axes.length;B++)C.lineBetween(F.position.x,F.position.y,(F.vertices[0].x+F.vertices[F.vertices.length-1].x)/2,(F.vertices[0].y+F.vertices[F.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(S,C,E,P,M){C.lineStyle(M,E,P);for(var O=0;O<S.length;O++){var A=S[O];!A.render.visible||C.lineBetween(A.position.x,A.position.y,A.position.x+(A.position.x-A.positionPrev.x)*2,A.position.y+(A.position.y-A.positionPrev.y)*2)}return this},renderBodies:function(S){for(var C=this.debugGraphic,E=this.debugConfig,P=E.showBody,M=E.showStaticBody,O=E.showSleeping,A=E.showInternalEdges,R=E.showConvexHulls,F=E.renderFill,I=E.renderLine,B=E.staticBodySleepOpacity,N=E.sleepFillColor,Y=E.sleepLineColor,X=E.hullColor,W=0;W<S.length;W++){var w=S[W];if(!!w.render.visible&&!(!M&&w.isStatic||!P&&!w.isStatic)){var L=w.render.lineColor,D=w.render.lineOpacity,b=w.render.lineThickness,G=w.render.fillColor,z=w.render.fillOpacity;O&&w.isSleeping&&(w.isStatic?(D*=B,z*=B):(L=Y,G=N)),F||(G=null),I||(L=null),this.renderBody(w,C,A,L,D,b,G,z);var U=w.parts.length;R&&U>1&&this.renderConvexHull(w,C,X,b)}}},renderBody:function(S,C,E,P,M,O,A,R){P===void 0&&(P=null),M===void 0&&(M=null),O===void 0&&(O=1),A===void 0&&(A=null),R===void 0&&(R=null);for(var F=this.debugConfig,I=F.sensorFillColor,B=F.sensorLineColor,N=S.parts,Y=N.length,X=Y>1?1:0;X<Y;X++){var W=N[X],w=W.render,L=w.opacity;if(!(!w.visible||L===0||W.isSensor&&!F.showSensors)){var D=W.circleRadius;if(C.beginPath(),W.isSensor?(A!==null&&C.fillStyle(I,R*L),P!==null&&C.lineStyle(O,B,M*L)):(A!==null&&C.fillStyle(A,R*L),P!==null&&C.lineStyle(O,P,M*L)),D)C.arc(W.position.x,W.position.y,D,0,2*Math.PI);else{var b=W.vertices,G=b.length;C.moveTo(b[0].x,b[0].y);for(var z=1;z<G;z++){var U=b[z];if(!b[z-1].isInternal||E?C.lineTo(U.x,U.y):C.moveTo(U.x,U.y),z<G&&U.isInternal&&!E){var H=(z+1)%G;C.moveTo(b[H].x,b[H].y)}}C.closePath()}A!==null&&C.fillPath(),P!==null&&C.strokePath()}}if(F.showPositions&&!S.isStatic){var $=S.position.x,K=S.position.y,Z=Math.ceil(F.positionSize/2);C.fillStyle(F.positionColor,1),C.fillRect($-Z,K-Z,F.positionSize,F.positionSize)}return this},renderConvexHull:function(S,C,E,P){P===void 0&&(P=1);var M=S.parts,O=M.length;if(O>1){var A=S.vertices;C.lineStyle(P,E),C.beginPath(),C.moveTo(A[0].x,A[0].y);for(var R=1;R<A.length;R++)C.lineTo(A[R].x,A[R].y);C.lineTo(A[0].x,A[0].y),C.strokePath()}return this},renderJoints:function(){for(var S=this.debugGraphic,C=h.allConstraints(this.localWorld),E=0;E<C.length;E++){var P=C[E].render,M=P.lineColor,O=P.lineOpacity,A=P.lineThickness,R=P.pinSize,F=P.anchorColor,I=P.anchorSize;this.renderConstraint(C[E],S,M,O,A,R,F,I)}},renderConstraint:function(S,C,E,P,M,O,A,R){var F=S.render;if(!F.visible||!S.pointA||!S.pointB)return this;C.lineStyle(M,E,P);var I=S.bodyA,B=S.bodyB,N,Y;if(I?N=y.add(I.position,S.pointA):N=S.pointA,F.type==="pin")C.strokeCircle(N.x,N.y,O);else{if(B?Y=y.add(B.position,S.pointB):Y=S.pointB,C.beginPath(),C.moveTo(N.x,N.y),F.type==="spring")for(var X=y.sub(Y,N),W=y.perp(y.normalise(X)),w=Math.ceil(a.clamp(S.length/5,12,20)),L,D=1;D<w;D+=1)L=D%2===0?1:-1,C.lineTo(N.x+X.x*(D/w)+W.x*L*4,N.y+X.y*(D/w)+W.y*L*4);C.lineTo(Y.x,Y.y)}return C.strokePath(),F.anchors&&R>0&&(C.fillStyle(A),C.fillCircle(N.x,N.y,R),C.fillCircle(Y.x,Y.y,R)),this},resetCollisionIDs:function(){return u._nextCollidingGroupId=1,u._nextNonCollidingGroupId=-1,u._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),x.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});e.exports=T},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BasePlugin:t(540),DefaultPlugins:t(197),PluginCache:t(24),PluginManager:t(414),ScenePlugin:t(1404)}},function(e,d,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=t(540),u=t(0),n=t(20),a=new u({Extends:s,initialize:function(r,o,c){s.call(this,o),this.scene=r,this.systems=r.sys,this.pluginKey=c,r.sys.events.once(n.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:t(1406),Events:t(91),Snapshot:t(1407),WebGL:t(1408)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasRenderer:t(368),GetBlendModes:t(370),SetTransform:t(30)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:t(369),WebGL:t(383)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(107),u=t(17),n={PipelineManager:t(372),Pipelines:t(1409),RenderTarget:t(141),Utils:t(12),WebGLPipeline:t(58),WebGLRenderer:t(371),WebGLShader:t(375)};n=u(!1,n,s),e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(92),u=t(17),n={BitmapMaskPipeline:t(373),Events:t(374),GraphicsPipeline:t(376),LightPipeline:t(377),MultiPipeline:t(108),PointLightPipeline:t(378),PostFXPipeline:t(1410),RopePipeline:t(379),SinglePipeline:t(380),UtilityPipeline:t(381)};n=u(!1,n,s),e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(198),n=t(2),a=t(1411),h=t(382),r=t(58),o=new s({Extends:r,initialize:function(l){l.renderTarget=n(l,"renderTarget",1),l.fragShader=n(l,"fragShader",a),l.vertShader=n(l,"vertShader",h),l.attributes=n(l,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),l.batchSize=1,l.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],r.call(this,l),this.isPostFX=!0,this.gameObject,this.colorMatrix=new u,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){r.prototype.boot.call(this);var c=this.manager.UTILITY_PIPELINE;this.fullFrame1=c.fullFrame1,this.fullFrame2=c.fullFrame2,this.halfFrame1=c.halfFrame1,this.halfFrame2=c.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(c){this.bindAndDraw(c)},copyFrame:function(c,l,f,p,g){this.manager.copyFrame(c,l,f,p,g)},copyToGame:function(c){this.manager.copyToGame(c)},drawFrame:function(c,l,f){this.manager.drawFrame(c,l,f,this.colorMatrix)},blendFrames:function(c,l,f,p,g){this.manager.blendFrames(c,l,f,p,g)},blendFramesAdditive:function(c,l,f,p,g){this.manager.blendFramesAdditive(c,l,f,p,g)},clearFrame:function(c,l){this.manager.clearFrame(c,l)},blitFrame:function(c,l,f,p,g,m){this.manager.blitFrame(c,l,f,p,g,m)},copyFrameRect:function(c,l,f,p,g,m,x,y){this.manager.copyFrameRect(c,l,f,p,g,m,x,y)},bindAndDraw:function(c,l,f,p,g){f===void 0&&(f=!0),p===void 0&&(p=!0);var m=this.gl,x=this.renderer;this.bind(g),this.set1i("uMainSampler",0),l?(m.viewport(0,0,l.width,l.height),m.bindFramebuffer(m.FRAMEBUFFER,l.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,l.texture,0),f&&(p?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT))):(x.popFramebuffer(!1,!1,!1),x.currentFramebuffer||m.viewport(0,0,x.width,x.height)),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,c.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),l?(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,null)):x.resetTextures()}});e.exports=o},function(e,d){e.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=t(201),n={Center:t(403),Events:t(104),Orientation:t(404),ScaleManager:t(415),ScaleModes:t(405),Zoom:t(406)};n=s(!1,n,u.CENTER),n=s(!1,n,u.ORIENTATION),n=s(!1,n,u.SCALE_MODE),n=s(!1,n,u.ZOOM),e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(144),u=t(17),n={Events:t(20),GetPhysicsPlugins:t(419),GetScenePlugins:t(420),SceneManager:t(417),ScenePlugin:t(1414),Settings:t(421),Systems:t(204)};n=u(!1,n,s),e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(20),a=t(2),h=t(24),r=new u({initialize:function(c){this.scene=c,this.systems=c.sys,this.settings=c.sys.settings,this.key=c.sys.settings.key,this.manager=c.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,c.sys.events.once(n.BOOT,this.boot,this),c.sys.events.on(n.START,this.pluginStart,this)},boot:function(){this.systems.events.once(n.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(n.SHUTDOWN,this.shutdown,this)},start:function(o,c){return o===void 0&&(o=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",o,c),this},restart:function(o){var c=this.key;return this.manager.queueOp("stop",c),this.manager.queueOp("start",c,o),this},transition:function(o){o===void 0&&(o={});var c=a(o,"target",!1),l=this.manager.getScene(c);if(!c||!this.checkValidTransition(l))return!1;var f=a(o,"duration",1e3);this._elapsed=0,this._target=l,this._duration=f,this._willSleep=a(o,"sleep",!1),this._willRemove=a(o,"remove",!1);var p=a(o,"onUpdate",null);p&&(this._onUpdate=p,this._onUpdateScope=a(o,"onUpdateScope",this.scene));var g=a(o,"allowInput",!1);this.settings.transitionAllowInput=g;var m=l.sys.settings;return m.isTransition=!0,m.transitionFrom=this.scene,m.transitionDuration=f,m.transitionAllowInput=g,a(o,"moveAbove",!1)?this.manager.moveAbove(this.key,c):a(o,"moveBelow",!1)&&this.manager.moveBelow(this.key,c),l.sys.isSleeping()?l.sys.wake(a(o,"data")):this.manager.start(c,a(o,"data")),this.systems.events.emit(n.TRANSITION_OUT,l,f),this.systems.events.on(n.UPDATE,this.step,this),!0},checkValidTransition:function(o){return!(!o||o.sys.isActive()||o.sys.isTransitioning()||o===this.scene||this.systems.isTransitioning())},step:function(o,c){this._elapsed+=c,this.transitionProgress=s(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var o=this._target.sys,c=this._target.sys.settings;this.systems.events.off(n.UPDATE,this.step,this),o.events.emit(n.TRANSITION_COMPLETE,this.scene),c.isTransition=!1,c.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(o,c,l,f){return this.manager.add(o,c,l,f)},launch:function(o,c){return o&&o!==this.key&&this.manager.queueOp("start",o,c),this},run:function(o,c){return o&&o!==this.key&&this.manager.queueOp("run",o,c),this},pause:function(o,c){return o===void 0&&(o=this.key),this.manager.queueOp("pause",o,c),this},resume:function(o,c){return o===void 0&&(o=this.key),this.manager.queueOp("resume",o,c),this},sleep:function(o,c){return o===void 0&&(o=this.key),this.manager.queueOp("sleep",o,c),this},wake:function(o,c){return o===void 0&&(o=this.key),this.manager.queueOp("wake",o,c),this},switch:function(o){return o!==this.key&&this.manager.queueOp("switch",this.key,o),this},stop:function(o,c){return o===void 0&&(o=this.key),this.manager.queueOp("stop",o,c),this},setActive:function(o,c,l){c===void 0&&(c=this.key);var f=this.manager.getScene(c);return f&&f.sys.setActive(o,l),this},setVisible:function(o,c){c===void 0&&(c=this.key);var l=this.manager.getScene(c);return l&&l.sys.setVisible(o),this},isSleeping:function(o){return o===void 0&&(o=this.key),this.manager.isSleeping(o)},isActive:function(o){return o===void 0&&(o=this.key),this.manager.isActive(o)},isPaused:function(o){return o===void 0&&(o=this.key),this.manager.isPaused(o)},isVisible:function(o){return o===void 0&&(o=this.key),this.manager.isVisible(o)},swapPosition:function(o,c){return c===void 0&&(c=this.key),o!==c&&this.manager.swapPosition(o,c),this},moveAbove:function(o,c){return c===void 0&&(c=this.key),o!==c&&this.manager.moveAbove(o,c),this},moveBelow:function(o,c){return c===void 0&&(c=this.key),o!==c&&this.manager.moveBelow(o,c),this},remove:function(o){return o===void 0&&(o=this.key),this.manager.remove(o),this},moveUp:function(o){return o===void 0&&(o=this.key),this.manager.moveUp(o),this},moveDown:function(o){return o===void 0&&(o=this.key),this.manager.moveDown(o),this},bringToTop:function(o){return o===void 0&&(o=this.key),this.manager.bringToTop(o),this},sendToBack:function(o){return o===void 0&&(o=this.key),this.manager.sendToBack(o),this},get:function(o){return this.manager.getScene(o)},getIndex:function(o){return o===void 0&&(o=this.key),this.manager.getIndex(o)},shutdown:function(){var o=this.systems.events;o.off(n.SHUTDOWN,this.shutdown,this),o.off(n.POST_UPDATE,this.step,this),o.off(n.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});h.register("ScenePlugin",r,"scenePlugin"),e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:t(438),List:t(110),Map:t(102),ProcessQueue:t(211),RTree:t(531),Set:t(149),Size:t(416)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=t(1417),n={CanvasTexture:t(423),Events:t(106),FilterMode:u,Frame:t(109),Parsers:t(425),Texture:t(206),TextureManager:t(422),TextureSource:t(424)};n=s(!1,n,u),e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LINEAR:0,NEAREST:1};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=t(1419),n={Components:t(251),Parsers:t(1452),Formats:t(40),ImageCollection:t(576),ParseToTilemap:t(262),Tile:t(85),Tilemap:t(580),TilemapCreator:t(1459),TilemapFactory:t(1460),Tileset:t(122),TilemapLayer:t(581),Orientation:t(29),LayerData:t(120),MapData:t(121),ObjectLayer:t(572)};n=s(!1,n,u.ORIENTATION),e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ORIENTATION:t(29)};e.exports=s},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(63),n=function(a,h,r,o,c,l,f,p){f===void 0&&(f=!0),a<0&&(a=0),h<0&&(h=0);for(var g=s(a,h,r,o,null,p),m=c-a,x=l-h,y=0;y<g.length;y++){var T=g[y].x+m,S=g[y].y+x;T>=0&&T<p.width&&S>=0&&S<p.height&&p.data[S][T]&&p.data[S][T].copy(g[y])}f&&u(c-1,l-1,r+2,o+2,p)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(542),n=function(a,h,r,o,c,l){r||(r={}),Array.isArray(a)||(a=[a]);var f=l.tilemapLayer;o||(o=f.scene),c||(c=o.cameras.main);var p=s(0,0,l.width,l.height,null,l),g=[],m;for(m=0;m<p.length;m++){var x=p[m];if(a.indexOf(x.index)!==-1){var y=f.tileToWorldXY(x.x,x.y,void 0,c,l);r.x=y.x,r.y=y.y,g.push(o.make.sprite(r))}}if(typeof h=="number")for(m=0;m<a.length;m++)u(a[m],h,0,0,l.width,l.height,l);else if(Array.isArray(h))for(m=0;m<a.length;m++)u(a[m],h[m],0,0,l.width,l.height,l);return g};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(63),n=t(72),a=function(h,r,o,c,l,f,p){for(var g=p.collideIndexes.indexOf(h)!==-1,m=s(r,o,c,l,null,p),x=0;x<m.length;x++)m[x].index=h,n(m[x],g);f&&u(r-1,o-1,c+2,l+2,p)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,h,r,o,c,l,f){var p=s(h,r,o,c,l,f);return p.filter(n,a)};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u===void 0&&(u=0),n===void 0&&(n=!1);var h=0,r,o,c;if(n){for(o=a.height-1;o>=0;o--)for(r=a.width-1;r>=0;r--)if(c=a.data[o][r],c&&c.index===s){if(h===u)return c;h+=1}}else for(o=0;o<a.height;o++)for(r=0;r<a.width;r++)if(c=a.data[o][r],c&&c.index===s){if(h===u)return c;h+=1}return null};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,h,r,o,c,l,f){var p=s(h,r,o,c,l,f);return p.find(n,a)||null};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,h,r,o,c,l,f){var p=s(h,r,o,c,l,f);p.forEach(n,a)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(544),n=t(545),a=t(547),h=t(1),r=t(548),o=function(c){return c===s.ORTHOGONAL?u:c===s.HEXAGONAL?n:c===s.STAGGERED?r:c===s.ISOMETRIC?a:h};e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(158),u=t(3),n=new u,a=function(h,r,o,c,l){return l.tilemapLayer.worldToTileXY(h,r,!0,n,c),s(n.x,n.y,o,l)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(483),u=t(26),n=t(484),a=t(1),h=t(3),r=function(p,g){return n.RectangleToTriangle(g,p)},o=new h,c=new h,l=new h,f=function(p,g,m,x){if(p===void 0)return[];var y=a;p instanceof s.Circle?y=n.CircleToRectangle:p instanceof s.Rectangle?y=n.RectangleToRectangle:p instanceof s.Triangle?y=r:p instanceof s.Line&&(y=n.LineToRectangle),x.tilemapLayer.worldToTileXY(p.left,p.top,!0,c,m);var T=c.x,S=c.y;x.tilemapLayer.worldToTileXY(p.right,p.bottom,!0,l,m);var C=Math.ceil(l.x),E=Math.ceil(l.y),P=Math.max(C-T,1),M=Math.max(E-S,1),O=u(T,S,P,M,g,x),A=x.tileWidth,R=x.tileHeight;x.tilemapLayer&&(A*=x.tilemapLayer.scaleX,R*=x.tilemapLayer.scaleY);for(var F=[],I=new s.Rectangle(0,0,A,R),B=0;B<O.length;B++){var N=O[B];x.tilemapLayer.tileToWorldXY(N.x,N.y,o,m),I.x=o.x,I.y=o.y,y(p,I)&&F.push(N)}return F};e.exports=f},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(1),n=t(253),a=function(h){return h===s.ORTHOGONAL?n:u};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(550),n=t(551),a=t(1),h=t(552),r=t(553),o=function(c){return c===s.ORTHOGONAL?r:c===s.ISOMETRIC?n:c===s.HEXAGONAL?u:c===s.STAGGERED?h:a};e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(554),n=t(1),a=t(555),h=t(254),r=function(o){return o===s.ORTHOGONAL?h:o===s.HEXAGONAL?u:o===s.STAGGERED?a:n};e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(1),n=t(255),a=function(h){return h===s.ORTHOGONAL?n:u};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(556),n=t(557),a=t(1),h=t(558),r=t(559),o=function(c){return c===s.ORTHOGONAL?r:c===s.ISOMETRIC?n:c===s.HEXAGONAL?u:c===s.STAGGERED?h:a};e.exports=o},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(560),n=t(1),a=t(561),h=t(256),r=function(o){return o===s.ORTHOGONAL?h:o===s.HEXAGONAL?u:o===s.STAGGERED?a:n};e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(562),u=t(3),n=new u,a=function(h,r,o,c){c.tilemapLayer.worldToTileXY(h,r,!0,n,o);var l=n.x,f=n.y;return s(l,f,c)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(257),u=t(3),n=new u,a=function(h,r,o,c,l,f){return f.tilemapLayer.worldToTileXY(r,o,!0,n,l,f),s(h,n.x,n.y,c,f)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(63),u=t(257),n=function(a,h,r,o,c){if(o===void 0&&(o=!0),!Array.isArray(a))return null;Array.isArray(a[0])||(a=[a]);for(var l=a.length,f=a[0].length,p=0;p<l;p++)for(var g=0;g<f;g++){var m=a[p][g];u(m,h+g,r+p,!1,c)}o&&s(h-1,r-1,f+2,l+2,c)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(210),n=function(a,h,r,o,c,l){var f,p=s(a,h,r,o,{},l);if(!c)for(c=[],f=0;f<p.length;f++)c.indexOf(p[f].index)===-1&&c.push(p[f].index);for(f=0;f<p.length;f++)p[f].index=u(c)};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(563),u=t(3),n=new u,a=function(h,r,o,c,l,f){return f.tilemapLayer.worldToTileXY(h,r,!0,n,l,f),s(n.x,n.y,o,c,f)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(397),n=new u(105,210,231,150),a=new u(243,134,48,200),h=new u(40,39,37,150),r=function(o,c,l){c===void 0&&(c={});var f=c.tileColor!==void 0?c.tileColor:n,p=c.collidingTileColor!==void 0?c.collidingTileColor:a,g=c.faceColor!==void 0?c.faceColor:h,m=s(0,0,l.width,l.height,null,l);o.translateCanvas(l.tilemapLayer.x,l.tilemapLayer.y),o.scaleCanvas(l.tilemapLayer.scaleX,l.tilemapLayer.scaleY);for(var x=0;x<m.length;x++){var y=m[x],T=y.width,S=y.height,C=y.pixelX,E=y.pixelY,P=y.collides?p:f;P!==null&&(o.fillStyle(P.color,P.alpha/255),o.fillRect(C,E,T,S)),C+=1,E+=1,T-=2,S-=2,g!==null&&(o.lineStyle(1,g.color,g.alpha/255),y.faceTop&&o.lineBetween(C,E,C+T,E),y.faceRight&&o.lineBetween(C+T,E,C+T,E+S),y.faceBottom&&o.lineBetween(C,E+S,C+T,E+S),y.faceLeft&&o.lineBetween(C,E,C,E+S))}};e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=t(160),a=function(h,r,o,c,l){r===void 0&&(r=!0),o===void 0&&(o=!0),l===void 0&&(l=!0),Array.isArray(h)||(h=[h]);for(var f=0;f<h.length;f++)n(h[f],r,c);if(l)for(var p=0;p<c.height;p++)for(var g=0;g<c.width;g++){var m=c.data[p][g];m&&h.indexOf(m.index)!==-1&&s(m,r)}o&&u(0,0,c.width,c.height,c)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=t(160),a=function(h,r,o,c,l,f){if(o===void 0&&(o=!0),c===void 0&&(c=!0),f===void 0&&(f=!0),!(h>r)){for(var p=h;p<=r;p++)n(p,o,l);if(f)for(var g=0;g<l.height;g++)for(var m=0;m<l.width;m++){var x=l.data[g][m];x&&x.index>=h&&x.index<=r&&s(x,o)}c&&u(0,0,l.width,l.height,l)}};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=t(160),a=function(h,r,o,c){r===void 0&&(r=!0),o===void 0&&(o=!0),Array.isArray(h)||(h=[h]);for(var l=0;l<c.height;l++)for(var f=0;f<c.width;f++){var p=c.data[l][f];p&&h.indexOf(p.index)===-1&&(s(p,r),n(p.index,r,c))}o&&u(0,0,c.width,c.height,c)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=t(126),a=function(h,r,o,c){r===void 0&&(r=!0),o===void 0&&(o=!0);for(var l=0;l<c.height;l++)for(var f=0;f<c.width;f++){var p=c.data[l][f];if(!!p){for(var g in h)if(!!n(p.properties,g)){var m=h[g];Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)p.properties[g]===m[x]&&s(p,r)}}}o&&u(0,0,c.width,c.height,c)};e.exports=a},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=function(a,h,r){a===void 0&&(a=!0),h===void 0&&(h=!0);for(var o=0;o<r.height;o++)for(var c=0;c<r.width;c++){var l=r.data[o][c];if(!!l){var f=l.getCollisionGroup();f&&f.objects&&f.objects.length>0&&s(l,a)}}h&&u(0,0,r.width,r.height,r)};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){if(typeof s=="number")a.callbacks[s]=u!==null?{callback:u,callbackContext:n}:void 0;else for(var h=0,r=s.length;h<r;h++)a.callbacks[s[h]]=u!==null?{callback:u,callbackContext:n}:void 0};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,h,r,o,c,l){for(var f=s(n,a,h,r,null,l),p=0;p<f.length;p++)f[p].setCollisionCallback(o,c)};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(131),n=function(a,h,r,o,c){var l=s(a,h,r,o,null,c),f=l.map(function(g){return g.index});u(f);for(var p=0;p<l.length;p++)l[p].index=f[p]};e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,h,r,o,c,l){for(var f=s(h,r,o,c,null,l),p=0;p<f.length;p++)f[p]&&(f[p].index===n?f[p].index=a:f[p].index===a&&(f[p].index=n))};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,h,r,o,c){if(!!o){var l,f=s(n,a,h,r,null,c),p=0;for(l=0;l<o.length;l++)p+=o[l].weight;if(!(p<=0))for(l=0;l<f.length;l++){for(var g=Math.random()*p,m=0,x=-1,y=0;y<o.length;y++)if(m+=o[y].weight,g<=m){var T=o[y].index;x=Array.isArray(T)?T[Math.floor(Math.random()*T.length)]:T;break}f[l].index=x}}};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FromOrientationString:t(258),Parse:t(564),Parse2DArray:t(259),ParseCSV:t(565),Impact:t(1454),Tiled:t(1455)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){for(var n=0;n<s.length;n++){var a=s[n],h=n;if(a.name&&a.name!==""&&(h=a.name),Array.isArray(a.wangtiles)&&a.wangtiles.length>0){var r={},o={},c,l,f;if(Array.isArray(a.edgecolors))for(c=0;c<a.edgecolors.length;c++)f=1+c,l=a.edgecolors[c],l.name!==""&&(r[f]=l.name);if(Array.isArray(a.cornercolors))for(c=0;c<a.cornercolors.length;c++)f=1+c,l=a.cornercolors[c],l.name!==""&&(o[f]=l.name);if(Array.isArray(a.colors))for(c=0;c<a.colors.length;c++)l=a.colors[c],f=1+c,l.name!==""&&(r[f]=o[f]=l.name);for(var p=[r,o,r,o,r,o,r,o],g=0;g<a.wangtiles.length;g++){var m=a.wangtiles[g],x=u[m.tileid]||(u[m.tileid]={});x=x.wangid||(x.wangid={});for(var y=[],T=0;T<Math.min(p.length,m.wangid.length);T++){if(l=m.wangid[T],l===0){y.push(void 0);continue}var S=p[T][l];if(S!==void 0){y.push(S);continue}y.push(l)}x[h]=y}}}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ParseTileLayers:t(578),ParseTilesets:t(579),ParseWeltmeister:t(577)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AssignTileProperties:t(567),Base64Decode:t(574),BuildTilesetIndex:t(568),CreateGroupLayer:t(161),ParseGID:t(261),ParseImageLayers:t(569),ParseJSONTiled:t(566),ParseObject:t(260),ParseObjectLayers:t(570),ParseTileLayers:t(573),ParseTilesets:t(575)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1457),u=t(1458),e.exports={renderWebGL:s,renderCanvas:u}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,a,h){var r=a.cull(h),o=r.length,c=h.alpha*a.alpha;if(!(o===0||c<=0)){var l=a.gidMap,f=n.pipelines.set(a.pipeline,a),p=s.getTintAppendFloatAlpha,g=a.scrollFactorX,m=a.scrollFactorY,x=a.x,y=a.y,T=a.scaleX,S=a.scaleY;n.pipelines.preBatch(a);for(var C=0;C<o;C++){var E=r[C],P=l[E.index];if(!!P){var M=P.getTileTextureCoordinates(E.index);if(M!==null){var O=P.glTexture,A=f.setTexture2D(O,a),R=P.tileWidth,F=P.tileHeight,I=M.x,B=M.y,N=P.tileWidth*.5,Y=P.tileHeight*.5,X=p(E.tint,c*E.alpha);f.batchTexture(a,O,O.width,O.height,x+(N+E.pixelX)*T,y+(Y+E.pixelY)*S,E.width,E.height,T,S,E.rotation,E.flipX,E.flipY,g,m,N,Y,I,B,R,F,X,X,X,X,!1,0,0,h,null,!0,A)}}}n.pipelines.postBatch(a)}};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=new s,n=new s,a=new s,h=function(r,o,c,l){var f=o.cull(c),p=f.length,g=c.alpha*o.alpha;if(!(p===0||g<=0)){var m=u,x=n,y=a;x.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),m.copyFrom(c.matrix);var T=r.currentContext,S=o.gidMap;T.save(),l?(m.multiplyWithOffset(l,-c.scrollX*o.scrollFactorX,-c.scrollY*o.scrollFactorY),x.e=o.x,x.f=o.y,m.multiply(x,y),y.copyToContext(T)):(x.e-=c.scrollX*o.scrollFactorX,x.f-=c.scrollY*o.scrollFactorY,x.copyToContext(T)),(!r.antialias||o.scaleX>1||o.scaleY>1)&&(T.imageSmoothingEnabled=!1);for(var C=0;C<p;C++){var E=f[C],P=S[E.index];if(!!P){var M=P.image.getSourceImage(),O=P.getTileTextureCoordinates(E.index);if(O!==null){var A=P.tileWidth,R=P.tileHeight,F=A*.5,I=R*.5;T.save(),T.translate(E.pixelX+F,E.pixelY+I),E.rotation!==0&&T.rotate(E.rotation),(E.flipX||E.flipY)&&T.scale(E.flipX?-1:1,E.flipY?-1:1),T.globalAlpha=g*E.alpha,T.drawImage(M,O.x,O.y,A,R,-F,-I,A,R),T.restore()}}}T.restore()}};e.exports=h},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(262);s.register("tilemap",function(n){var a=n!==void 0?n:{};return u(this.scene,a.key,a.tileWidth,a.tileHeight,a.width,a.height,a.data,a.insertNull)})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(262);s.register("tilemap",function(n,a,h,r,o,c,l){return n===null&&(n=void 0),a===null&&(a=void 0),h===null&&(h=void 0),r===null&&(r=void 0),o===null&&(o=void 0),u(this.scene,n,a,h,r,o,c,l)})},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clock:t(1462),TimerEvent:t(582)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(24),n=t(20),a=t(582),h=t(93),r=new s({initialize:function(c){this.scene=c,this.systems=c.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],c.sys.events.once(n.BOOT,this.boot,this),c.sys.events.on(n.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){var o=this.systems.events;o.on(n.PRE_UPDATE,this.preUpdate,this),o.on(n.UPDATE,this.update,this),o.once(n.SHUTDOWN,this.shutdown,this)},addEvent:function(o){var c;return o instanceof a?(c=o,this.removeEvent(c),c.elapsed=c.startAt,c.hasDispatched=!1,c.repeatCount=c.repeat===-1||c.loop?999999999999:c.repeat):c=new a(o),this._pendingInsertion.push(c),c},delayedCall:function(o,c,l,f){return this.addEvent({delay:o,callback:c,args:l,callbackScope:f})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(o){Array.isArray(o)||(o=[o]);for(var c=0;c<o.length;c++){var l=o[c];h(this._pendingRemoval,l),h(this._pendingInsertion,l),h(this._active,l)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var o=this._pendingRemoval.length,c=this._pendingInsertion.length;if(!(o===0&&c===0)){var l,f;for(l=0;l<o;l++){f=this._pendingRemoval[l];var p=this._active.indexOf(f);p>-1&&this._active.splice(p,1),f.destroy()}for(l=0;l<c;l++)f=this._pendingInsertion[l],this._active.push(f);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(o,c){if(this.now=o,!this.paused){c*=this.timeScale;for(var l=0;l<this._active.length;l++){var f=this._active[l];if(!f.paused&&(f.elapsed+=c*f.timeScale,f.elapsed>=f.delay)){var p=f.elapsed-f.delay;f.elapsed=f.delay,!f.hasDispatched&&f.callback&&(f.hasDispatched=!0,f.callback.apply(f.callbackScope,f.args)),f.repeatCount>0?(f.repeatCount--,f.elapsed=p,f.hasDispatched=!1):this._pendingRemoval.push(f)}}}},shutdown:function(){var o;for(o=0;o<this._pendingInsertion.length;o++)this._pendingInsertion[o].destroy();for(o=0;o<this._active.length;o++)this._active[o].destroy();for(o=0;o<this._pendingRemoval.length;o++)this._pendingRemoval[o].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var c=this.systems.events;c.off(n.PRE_UPDATE,this.preUpdate,this),c.off(n.UPDATE,this.update,this),c.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});u.register("Clock",r,"time"),e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(100),u=t(17),n={Builders:t(1464),Events:t(267),TweenManager:t(1480),Tween:t(266),TweenData:t(268),Timeline:t(588)};n=u(!1,n,s),e.exports=n},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetBoolean:t(99),GetEaseFunction:t(80),GetNewValue:t(162),GetProps:t(583),GetTargets:t(263),GetTweens:t(584),GetValueOp:t(264),NumberTweenBuilder:t(585),StaggerBuilder:t(586),TimelineBuilder:t(587),TweenBuilder:t(163)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="active"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="repeat"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,d){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="yoyo"},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93),u=t(0),n=t(585),a=t(24),h=t(20),r=t(586),o=t(587),c=t(100),l=t(163),f=new u({initialize:function(g){this.scene=g,this.systems=g.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,g.sys.events.once(h.BOOT,this.boot,this),g.sys.events.on(h.START,this.start,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){var p=this.systems.events;p.on(h.PRE_UPDATE,this.preUpdate,this),p.on(h.UPDATE,this.update,this),p.once(h.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(p){return o(this,p)},timeline:function(p){var g=o(this,p);return g.paused||(this._add.push(g),this._toProcess++),g},create:function(p){return l(this,p)},add:function(p){var g=l(this,p);return this._add.push(g),this._toProcess++,g},existing:function(p){return this._add.push(p),this._toProcess++,this},addCounter:function(p){var g=n(this,p);return this._add.push(g),this._toProcess++,g},stagger:function(p,g){return r(p,g)},preUpdate:function(){if(this._toProcess!==0){var p=this._destroy,g=this._active,m=this._pending,x,y;for(x=0;x<p.length;x++){y=p[x];var T=g.indexOf(y);T===-1?(T=m.indexOf(y),T>-1&&(y.state=c.REMOVED,m.splice(T,1))):(y.state=c.REMOVED,g.splice(T,1))}for(p.length=0,p=this._add,x=0;x<p.length;x++)y=p[x],y.state===c.PENDING_ADD&&(y.init()?(y.play(),this._active.push(y)):this._pending.push(y));p.length=0,this._toProcess=0}},update:function(p,g){var m=this._active,x;g*=this.timeScale;for(var y=0;y<m.length;y++)x=m[y],x.update(p,g)&&(this._destroy.push(x),this._toProcess++)},remove:function(p){return s(this._add,p),s(this._pending,p),s(this._active,p),s(this._destroy,p),p.state=c.REMOVED,this},makeActive:function(p){if(this._add.indexOf(p)!==-1||this._active.indexOf(p)!==-1)return this;var g=this._pending.indexOf(p);return g!==-1&&this._pending.splice(g,1),this._add.push(p),p.state=c.PENDING_ADD,this._toProcess++,this},each:function(p,g){for(var m=[null],x=1;x<arguments.length;x++)m.push(arguments[x]);for(var y in this.list)m[0]=this.list[y],p.apply(g,m)},getAllTweens:function(){for(var p=this._active,g=[],m=0;m<p.length;m++)g.push(p[m]);return g},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(p,g){g===void 0&&(g=!1);var m=this._active,x,y=[],T,S;for(Array.isArray(p)||(p=[p]),T=0;T<m.length;T++)for(x=m[T],S=0;S<p.length;S++)x.hasTarget(p[S])&&y.push(x);if(g)for(m=this._pending,T=0;T<m.length;T++)for(x=m[T],S=0;S<p.length;S++)x.hasTarget(p[S])&&y.push(x);return y},isTweening:function(p){for(var g=this._active,m,x=0;x<g.length;x++)if(m=g[x],m.hasTarget(p)&&m.isPlaying())return!0;return!1},killAll:function(){for(var p=this.getAllTweens(),g=0;g<p.length;g++)p[g].stop();return this},killTweensOf:function(p){for(var g=this.getTweensOf(p),m=0;m<g.length;m++)g[m].stop();return this},pauseAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].pause();return this},resumeAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].resume();return this},setGlobalTimeScale:function(p){return this.timeScale=p,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var p=this.systems.events;p.off(h.PRE_UPDATE,this.preUpdate,this),p.off(h.UPDATE,this.update,this),p.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});a.register("TweenManager",f,"tweens"),e.exports=f},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Array:t(208),Base64:t(1482),Objects:t(1484),String:t(1488),NOOP:t(1)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ArrayBufferToBase64:t(1483),Base64ToArrayBuffer:t(433)}},function(e,d){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(u,n){for(var a=new Uint8Array(u),h=a.length,r=n?"data:"+n+";base64,":"",o=0;o<h;o+=3)r+=t[a[o]>>2],r+=t[(a[o]&3)<<4|a[o+1]>>4],r+=t[(a[o+1]&15)<<2|a[o+2]>>6],r+=t[a[o+2]&63];return h%3===2?r=r.substring(0,r.length-1)+"=":h%3===1&&(r=r.substring(0,r.length-2)+"=="),r};e.exports=s},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clone:t(77),DeepCopy:t(175),Extend:t(17),GetAdvancedValue:t(13),GetFastValue:t(2),GetMinMaxValue:t(1485),GetValue:t(6),HasAll:t(1486),HasAny:t(455),HasValue:t(126),IsPlainObject:t(7),Merge:t(127),MergeRight:t(1487),Pick:t(571),SetValue:t(478)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=t(18),n=function(a,h,r,o,c){c===void 0&&(c=r);var l=s(a,h,c);return u(l,r,o)};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){for(var n=0;n<u.length;n++)if(!s.hasOwnProperty(u[n]))return!1;return!0};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=function(n,a){var h=s(n);for(var r in a)h.hasOwnProperty(r)&&(h[r]=a[r]);return h};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Format:t(1489),Pad:t(186),RemoveAt:t(1490),Reverse:t(1491),UppercaseFirst:t(205),UUID:t(222)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.replace(/%([0-9]+)/g,function(n,a){return u[Number(a)-1]})};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===0?s.slice(1):s.slice(0,u-1)+s.slice(u)};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.split("").reverse().join("")};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SoundManagerCreator:t(426),Events:t(70),BaseSound:t(146),BaseSoundManager:t(145),WebAudioSound:t(434),WebAudioSoundManager:t(432),HTML5AudioSound:t(429),HTML5AudioSoundManager:t(427),NoAudioSound:t(431),NoAudioSoundManager:t(430)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Arcade:t(1366),Matter:t(1494)}},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BodyBounds:t(1392),Components:t(249),Events:t(272),Factory:t(1394),MatterGameObject:t(1395),Image:t(1396),Matter:t(594),MatterPhysics:t(1524),PolyDecomp:t(1393),Sprite:t(1397),TileBody:t(593),PhysicsEditorParser:t(589),PhysicsJSONParser:t(590),PointerConstraint:t(1398),World:t(1402)}},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(s){return this.body.restitution=s,this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCollisionCategory:function(s){return this.body.collisionFilter.category=s,this},setCollisionGroup:function(s){return this.body.collisionFilter.group=s,this},setCollidesWith:function(s){var u=0;if(!Array.isArray(s))u=s;else for(var n=0;n<s.length;n++)u|=s[n];return this.body.collisionFilter.mask=u,this},setOnCollide:function(s){return this.body.onCollideCallback=s,this},setOnCollideEnd:function(s){return this.body.onCollideEndCallback=s,this},setOnCollideActive:function(s){return this.body.onCollideActiveCallback=s,this},setOnCollideWith:function(s,u){Array.isArray(s)||(s=[s]);for(var n=0;n<s.length;n++){var a=s[n].hasOwnProperty("body")?s[n].body:s[n];this.body.setOnCollideWith(a,u)}return this}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u={applyForce:function(n){return this._tempVec2.set(this.body.position.x,this.body.position.y),s.applyForce(this.body,this._tempVec2,n),this},applyForceFrom:function(n,a){return s.applyForce(this.body,n,a),this},thrust:function(n){var a=this.body.angle;return this._tempVec2.set(n*Math.cos(a),n*Math.sin(a)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(n){var a=this.body.angle-Math.PI/2;return this._tempVec2.set(n*Math.cos(a),n*Math.sin(a)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(n){var a=this.body.angle+Math.PI/2;return this._tempVec2.set(n*Math.cos(a),n*Math.sin(a)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(n){var a=this.body.angle-Math.PI;return this._tempVec2.set(n*Math.cos(a),n*Math.sin(a)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};e.exports=u},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(s,u,n){return this.body.friction=s,u!==void 0&&(this.body.frictionAir=u),n!==void 0&&(this.body.frictionStatic=n),this},setFrictionAir:function(s){return this.body.frictionAir=s,this},setFrictionStatic:function(s){return this.body.frictionStatic=s,this}};e.exports=t},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setIgnoreGravity:function(s){return this.body.ignoreGravity=s,this}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u=t(3),n={setMass:function(a){return s.setMass(this.body,a),this},setDensity:function(a){return s.setDensity(this.body,a),this},centerOfMass:{get:function(){return new u(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};e.exports=n},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setSensor:function(s){return this.body.isSensor=s,this},isSensor:function(){return this.body.isSensor}};e.exports=t},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n=t(124),a=t(2),h=t(589),r=t(590),o=t(64),c={setRectangle:function(l,f,p){return this.setBody({type:"rectangle",width:l,height:f},p)},setCircle:function(l,f){return this.setBody({type:"circle",radius:l},f)},setPolygon:function(l,f,p){return this.setBody({type:"polygon",sides:f,radius:l},p)},setTrapezoid:function(l,f,p,g){return this.setBody({type:"trapezoid",width:l,height:f,slope:p},g)},setExistingBody:function(l,f){f===void 0&&(f=!0),this.body&&this.world.remove(this.body,!0),this.body=l;for(var p=0;p<l.parts.length;p++)l.parts[p].gameObject=this;var g=this;if(l.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},f&&(this.world.has(l)&&this.world.remove(l,!0),this.world.add(l)),this._originComponent){var m=l.render.sprite.xOffset,x=l.render.sprite.yOffset,y=l.centerOfMass.x,T=l.centerOfMass.y;if(n(y,.5)&&n(T,.5))this.setOrigin(m+.5,x+.5);else{var S=l.centerOffset.x,C=l.centerOffset.y;this.setOrigin(m+S/this.displayWidth,x+C/this.displayHeight)}}return this},setBody:function(l,f){if(!l)return this;var p;typeof l=="string"&&(l={type:l});var g=a(l,"type","rectangle"),m=a(l,"x",this._tempVec2.x),x=a(l,"y",this._tempVec2.y),y=a(l,"width",this.width),T=a(l,"height",this.height);switch(g){case"rectangle":p=s.rectangle(m,x,y,T,f);break;case"circle":var S=a(l,"radius",Math.max(y,T)/2),C=a(l,"maxSides",25);p=s.circle(m,x,S,f,C);break;case"trapezoid":var E=a(l,"slope",.5);p=s.trapezoid(m,x,y,T,E,f);break;case"polygon":var P=a(l,"sides",5),M=a(l,"radius",Math.max(y,T)/2);p=s.polygon(m,x,P,M,f);break;case"fromVertices":case"fromVerts":var O=a(l,"verts",null);if(O)if(typeof O=="string"&&(O=o.fromPath(O)),this.body&&!this.body.hasOwnProperty("temp"))u.setVertices(this.body,O),p=this.body;else{var A=a(l,"flagInternal",!1),R=a(l,"removeCollinear",.01),F=a(l,"minimumArea",10);p=s.fromVertices(m,x,O,f,A,R,F)}break;case"fromPhysicsEditor":p=h.parseBody(m,x,l,f);break;case"fromPhysicsTracer":p=r.parseBody(m,x,l,f);break}return p&&this.setExistingBody(p,l.addToWorld),this}};e.exports=c},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(272),u=t(165),n=t(166),a={setToSleep:function(){return u.set(this.body,!0),this},setAwake:function(){return u.set(this.body,!1),this},setSleepThreshold:function(h){return h===void 0&&(h=60),this.body.sleepThreshold=h,this},setSleepEvents:function(h,r){return this.setSleepStartEvent(h),this.setSleepEndEvent(r),this},setSleepStartEvent:function(h){if(h){var r=this.world;n.on(this.body,"sleepStart",function(o){r.emit(s.SLEEP_START,o,this)})}else n.off(this.body,"sleepStart");return this},setSleepEndEvent:function(h){if(h){var r=this.world;n.on(this.body,"sleepEnd",function(o){r.emit(s.SLEEP_END,o,this)})}else n.off(this.body,"sleepEnd");return this}};e.exports=a},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afteradd"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterremove"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterupdate"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeadd"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeremove"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeupdate"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionactive"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionend"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionstart"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepend"},function(e,d){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepstart"},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u={setStatic:function(n){return s.setStatic(this.body,n),this},isStatic:function(){return this.body.isStatic}};e.exports=u},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u=t(14),n=t(269),a=t(270),h=4,r={x:{get:function(){return this.body.position.x},set:function(o){this._tempVec2.set(o,this.y),s.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(o){this._tempVec2.set(this.x,o),s.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(o){var c=1/this._scaleX,l=1/this._scaleY;this._scaleX=o,this._scaleX===0?this.renderFlags&=~h:this.renderFlags|=h,s.scale(this.body,c,l),s.scale(this.body,o,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(o){var c=1/this._scaleX,l=1/this._scaleY;this._scaleY=o,this._scaleY===0?this.renderFlags&=~h:this.renderFlags|=h,s.scale(this.body,c,l),s.scale(this.body,this._scaleX,o)}},angle:{get:function(){return a(this.body.angle*u.RAD_TO_DEG)},set:function(o){this.rotation=a(o)*u.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(o){this._rotation=n(o),s.setAngle(this.body,this._rotation)}},setPosition:function(o,c){return o===void 0&&(o=0),c===void 0&&(c=o),this._tempVec2.set(o,c),s.setPosition(this.body,this._tempVec2),this},setRotation:function(o){return o===void 0&&(o=0),this._rotation=n(o),s.setAngle(this.body,o),this},setFixedRotation:function(){return s.setInertia(this.body,1/0),this},setAngle:function(o){return o===void 0&&(o=0),this.angle=o,s.setAngle(this.body,this.rotation),this},setScale:function(o,c,l){o===void 0&&(o=1),c===void 0&&(c=o);var f=1/this._scaleX,p=1/this._scaleY;return this._scaleX=o,this._scaleY=c,s.scale(this.body,f,p,l),s.scale(this.body,o,c,l),this}};e.exports=r},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u={setAngularVelocity:function(n){return s.setAngularVelocity(this.body,n),this},setVelocityX:function(n){return this._tempVec2.set(n,this.body.velocity.y),s.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(n){return this._tempVec2.set(this.body.velocity.x,n),s.setVelocity(this.body,this._tempVec2),this},setVelocity:function(n,a){return this._tempVec2.set(n,a),s.setVelocity(this.body,this._tempVec2),this}};e.exports=u},function(e,d,t){var s={};e.exports=s;var u=t(118),n=t(32);(function(){s.create=function(a){var h={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return n.extend(h,!1,a)},s.reset=function(a){a.extended&&(a.narrowDetections=0,a.narrowphaseTests=0,a.narrowReuse=0,a.narrowReuseCount=0,a.midphaseTests=0,a.broadphaseTests=0,a.narrowEff=0,a.midEff=0,a.broadEff=0,a.collisions=0,a.buckets=0,a.pairs=0,a.bodies=0)},s.update=function(a,h){if(a.extended){var r=h.world,o=u.allBodies(r);a.collisions=a.narrowDetections,a.pairs=h.pairs.list.length,a.bodies=o.length,a.midEff=(a.narrowDetections/(a.midphaseTests||1)).toFixed(2),a.narrowEff=(a.narrowDetections/(a.narrowphaseTests||1)).toFixed(2),a.broadEff=(1-a.broadphaseTests/(o.length||1)).toFixed(2),a.narrowReuse=(a.narrowReuseCount/(a.narrowphaseTests||1)).toFixed(2)}}})()},function(e,d,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(123),u=t(271),n=t(86),a=t(41),h=t(1392),r=t(84),o=t(0),c=t(118),l=t(591),f=t(128),p=t(273),g=t(50),m=t(1394),x=t(2),y=t(6),T=t(597),S=t(1525),C=t(1526),E=t(1399),P=t(1527),M=t(127),O=t(250),A=t(598),R=t(595),F=t(24),I=t(1400),B=t(599),N=t(274),Y=t(20),X=t(592),W=t(83),w=t(64),L=t(1402),D=new o({initialize:function(G){this.scene=G,this.systems=G.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=a,this.composite=c,this.detector=p,this.grid=T,this.pair=O,this.pairs=A,this.query=I,this.resolver=B,this.sat=N,this.constraint=f,this.bodies=n,this.composites=l,this.axes=u,this.bounds=r,this.svg=X,this.vector=W,this.vertices=w,this.verts=w,this._tempVec2=W.create(),y(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),y(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),y(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),B._restingThresh=y(this.config,"restingThresh",4),B._restingThreshTangent=y(this.config,"restingThreshTangent",6),B._positionDampen=y(this.config,"positionDampen",.9),B._positionWarming=y(this.config,"positionWarming",.8),B._frictionNormalMultiplier=y(this.config,"frictionNormalMultiplier",5),G.sys.events.once(Y.BOOT,this.boot,this),G.sys.events.on(Y.START,this.start,this)},boot:function(){this.world=new L(this.scene,this.config),this.add=new m(this.world),this.bodyBounds=new h,this.systems.events.once(Y.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new L(this.scene,this.config),this.add=new m(this.world));var b=this.systems.events;b.on(Y.UPDATE,this.world.update,this.world),b.on(Y.POST_UPDATE,this.world.postUpdate,this.world),b.once(Y.SHUTDOWN,this.shutdown,this)},getConfig:function(){var b=this.systems.game.config.physics,G=this.systems.settings.physics,z=M(x(G,"matter",{}),x(b,"matter",{}));return z},enableAttractorPlugin:function(){return R.register(S),R.use(E,S),this},enableWrapPlugin:function(){return R.register(P),R.use(E,P),this},enableCollisionEventsPlugin:function(){return R.register(C),R.use(E,C),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(b,G){this.world.step(b,G)},containsPoint:function(b,G,z){b=this.getMatterBodies(b);var U=W.create(G,z),H=I.point(b,U);return H.length>0},intersectPoint:function(b,G,z){z=this.getMatterBodies(z);var U=W.create(b,G),H=[],$=I.point(z,U);return $.forEach(function(K){H.indexOf(K)===-1&&H.push(K)}),H},intersectRect:function(b,G,z,U,H,$){H===void 0&&(H=!1),$=this.getMatterBodies($);var K={min:{x:b,y:G},max:{x:b+z,y:G+U}},Z=[],k=I.region($,K,H);return k.forEach(function(J){Z.indexOf(J)===-1&&Z.push(J)}),Z},intersectRay:function(b,G,z,U,H,$){H===void 0&&(H=1),$=this.getMatterBodies($);for(var K=[],Z=I.ray($,W.create(b,G),W.create(z,U),H),k=0;k<Z.length;k++)K.push(Z[k].body);return K},intersectBody:function(b,G){G=this.getMatterBodies(G);for(var z=[],U=I.collides(b,G),H=0;H<U.length;H++){var $=U[H];$.bodyA===b?z.push($.bodyB):z.push($.bodyA)}return z},overlap:function(b,G,z,U,H){z===void 0&&(z=null),U===void 0&&(U=null),H===void 0&&(H=z),Array.isArray(b)||(b=[b]),b=this.getMatterBodies(b),G=this.getMatterBodies(G);for(var $=!1,K=0;K<b.length;K++)for(var Z=b[K],k=I.collides(Z,G),J=0;J<k.length;J++){var q=k[J],Q=q.bodyA.id===Z.id?q.bodyB:q.bodyA;if(!U||U.call(H,Z,Q,q)){if($=!0,z)z.call(H,Z,Q,q);else if(!U)return!0}}return $},setCollisionCategory:function(b,G){return b=this.getMatterBodies(b),b.forEach(function(z){z.collisionFilter.category=G}),this},setCollisionGroup:function(b,G){return b=this.getMatterBodies(b),b.forEach(function(z){z.collisionFilter.group=G}),this},setCollidesWith:function(b,G){b=this.getMatterBodies(b);var z=0;if(!Array.isArray(G))z=G;else for(var U=0;U<G.length;U++)z|=G[U];return b.forEach(function(H){H.collisionFilter.mask=z}),this},getMatterBodies:function(b){if(!b)return this.world.getAllBodies();Array.isArray(b)||(b=[b]);for(var G=[],z=0;z<b.length;z++){var U=b[z].hasOwnProperty("body")?b[z].body:b[z];G.push(U)}return G},setVelocity:function(b,G,z){b=this.getMatterBodies(b);var U=this._tempVec2;return U.x=G,U.y=z,b.forEach(function(H){a.setVelocity(H,U)}),this},setVelocityX:function(b,G){b=this.getMatterBodies(b);var z=this._tempVec2;return z.x=G,b.forEach(function(U){z.y=U.velocity.y,a.setVelocity(U,z)}),this},setVelocityY:function(b,G){b=this.getMatterBodies(b);var z=this._tempVec2;return z.y=G,b.forEach(function(U){z.x=U.velocity.x,a.setVelocity(U,z)}),this},setAngularVelocity:function(b,G){return b=this.getMatterBodies(b),b.forEach(function(z){a.setAngularVelocity(z,G)}),this},applyForce:function(b,G){b=this.getMatterBodies(b);var z=this._tempVec2;return b.forEach(function(U){z.x=U.position.x,z.y=U.position.y,a.applyForce(U,z,G)}),this},applyForceFromPosition:function(b,G,z,U){b=this.getMatterBodies(b);var H=this._tempVec2;return b.forEach(function($){U===void 0&&(U=$.angle),H.x=z*Math.cos(U),H.y=z*Math.sin(U),a.applyForce($,G,H)}),this},applyForceFromAngle:function(b,G,z){b=this.getMatterBodies(b);var U=this._tempVec2;return b.forEach(function(H){z===void 0&&(z=H.angle),U.x=G*Math.cos(z),U.y=G*Math.sin(z),a.applyForce(H,{x:H.position.x,y:H.position.y},U)}),this},getConstraintLength:function(b){var G=b.pointA.x,z=b.pointA.y,U=b.pointB.x,H=b.pointB.y;return b.bodyA&&(G+=b.bodyA.position.x,z+=b.bodyA.position.y),b.bodyB&&(U+=b.bodyB.position.x,H+=b.bodyB.position.y),g(G,z,U,H)},alignBody:function(b,G,z,U){b=b.hasOwnProperty("body")?b.body:b;var H;switch(U){case s.TOP_LEFT:case s.LEFT_TOP:H=this.bodyBounds.getTopLeft(b,G,z);break;case s.TOP_CENTER:H=this.bodyBounds.getTopCenter(b,G,z);break;case s.TOP_RIGHT:case s.RIGHT_TOP:H=this.bodyBounds.getTopRight(b,G,z);break;case s.LEFT_CENTER:H=this.bodyBounds.getLeftCenter(b,G,z);break;case s.CENTER:H=this.bodyBounds.getCenter(b,G,z);break;case s.RIGHT_CENTER:H=this.bodyBounds.getRightCenter(b,G,z);break;case s.LEFT_BOTTOM:case s.BOTTOM_LEFT:H=this.bodyBounds.getBottomLeft(b,G,z);break;case s.BOTTOM_CENTER:H=this.bodyBounds.getBottomCenter(b,G,z);break;case s.BOTTOM_RIGHT:case s.RIGHT_BOTTOM:H=this.bodyBounds.getBottomRight(b,G,z);break}return H&&a.setPosition(b,H),this},shutdown:function(){var b=this.systems.events;this.world&&(b.off(Y.UPDATE,this.world.update,this.world),b.off(Y.POST_UPDATE,this.world.postUpdate,this.world)),b.off(Y.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(Y.START,this.start,this),this.scene=null,this.systems=null}});F.register("MatterPhysics",D,"matterPhysics"),e.exports=D},function(e,d,t){var s=t(594),u={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Body.create",function(){u.Body.init(this)}),n.before("Engine.update",function(a){u.Engine.update(a)})},Body:{init:function(n){n.plugin.attractors=n.plugin.attractors||[]}},Engine:{update:function(n){for(var a=s.Composite.allBodies(n.world),h=0;h<a.length;h++){var r=a[h],o=r.plugin.attractors;if(o&&o.length>0)for(var c=0;c<a.length;c++){var l=a[c];if(h!==c)for(var f=0;f<o.length;f++){var p=o[f],g=p;s.Common.isFunction(p)&&(g=p(r,l)),g&&s.Body.applyForce(l,l.position,g)}}}}},Attractors:{gravityConstant:.001,gravity:function(n,a){var h=s.Vector.sub(a.position,n.position),r=s.Vector.magnitudeSquared(h)||1e-4,o=s.Vector.normalise(h),c=-u.Attractors.gravityConstant*(n.mass*a.mass/r),l=s.Vector.mult(o,c);s.Body.applyForce(n,n.position,s.Vector.neg(l)),s.Body.applyForce(a,a.position,l)}}};e.exports=u},function(e,d){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Engine.create",function(){s.Events.on(this,"collisionStart",function(u){u.pairs.map(function(n){var a=n.bodyA,h=n.bodyB;a.gameObject&&a.gameObject.emit("collide",a,h,n),h.gameObject&&h.gameObject.emit("collide",h,a,n),s.Events.trigger(a,"onCollide",{pair:n}),s.Events.trigger(h,"onCollide",{pair:n}),a.onCollideCallback&&a.onCollideCallback(n),h.onCollideCallback&&h.onCollideCallback(n),a.onCollideWith[h.id]&&a.onCollideWith[h.id](h,n),h.onCollideWith[a.id]&&h.onCollideWith[a.id](a,n)})}),s.Events.on(this,"collisionActive",function(u){u.pairs.map(function(n){var a=n.bodyA,h=n.bodyB;a.gameObject&&a.gameObject.emit("collideActive",a,h,n),h.gameObject&&h.gameObject.emit("collideActive",h,a,n),s.Events.trigger(a,"onCollideActive",{pair:n}),s.Events.trigger(h,"onCollideActive",{pair:n}),a.onCollideActiveCallback&&a.onCollideActiveCallback(n),h.onCollideActiveCallback&&h.onCollideActiveCallback(n)})}),s.Events.on(this,"collisionEnd",function(u){u.pairs.map(function(n){var a=n.bodyA,h=n.bodyB;a.gameObject&&a.gameObject.emit("collideEnd",a,h,n),h.gameObject&&h.gameObject.emit("collideEnd",h,a,n),s.Events.trigger(a,"onCollideEnd",{pair:n}),s.Events.trigger(h,"onCollideEnd",{pair:n}),a.onCollideEndCallback&&a.onCollideEndCallback(n),h.onCollideEndCallback&&h.onCollideEndCallback(n)})})})}};e.exports=t},function(e,d,t){var s=t(594),u={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Engine.update",function(){u.Engine.update(this)})},Engine:{update:function(n){for(var a=n.world,h=s.Composite.allBodies(a),r=s.Composite.allComposites(a),o=0;o<h.length;o+=1){var c=h[o];c.plugin.wrap&&u.Body.wrap(c,c.plugin.wrap)}for(o=0;o<r.length;o+=1){var l=r[o];l.plugin.wrap&&u.Composite.wrap(l,l.plugin.wrap)}}},Bounds:{wrap:function(n,a){var h=null,r=null;if(typeof a.min.x!="undefined"&&typeof a.max.x!="undefined"&&(n.min.x>a.max.x?h=a.min.x-n.max.x:n.max.x<a.min.x&&(h=a.max.x-n.min.x)),typeof a.min.y!="undefined"&&typeof a.max.y!="undefined"&&(n.min.y>a.max.y?r=a.min.y-n.max.y:n.max.y<a.min.y&&(r=a.max.y-n.min.y)),h!==null||r!==null)return{x:h||0,y:r||0}}},Body:{wrap:function(n,a){var h=u.Bounds.wrap(n.bounds,a);return h&&s.Body.translate(n,h),h}},Composite:{bounds:function(n){for(var a=s.Composite.allBodies(n),h=[],r=0;r<a.length;r+=1){var o=a[r];h.push(o.bounds.min,o.bounds.max)}return s.Bounds.create(h)},wrap:function(n,a){var h=u.Bounds.wrap(u.Composite.bounds(n),a);return h&&s.Composite.translate(n,h),h}}};e.exports=u},function(e,d,t){(function(s){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=t(33),n=t(17),a={Actions:t(275),Animations:t(723),BlendModes:t(35),Cache:t(735),Cameras:t(738),Core:t(806),Class:t(0),Create:t(888),Curves:t(894),Data:t(896),Display:t(898),DOM:t(917),Events:t(918),Game:t(920),GameObjects:t(1011),Geom:t(483),Input:t(1308),Loader:t(1338),Math:t(193),Physics:t(1493),Plugins:t(1403),Renderer:t(1405),Scale:t(1412),ScaleModes:t(168),Scene:t(418),Scenes:t(1413),Structs:t(1415),Textures:t(1416),Tilemaps:t(1418),Time:t(1461),Tweens:t(1463),Utils:t(1481)};a.Sound=t(1492),a=n(!1,a,u),e.exports=a,s.Phaser=a}).call(this,t(600))}])})})(xl);var le=df(xl.exports);const Pe=class{static isSpecialAction(v){return v===this.TIMEOUT_ACTION||v===this.HIDDEN_ACTION||v===this.NO_ACTION}static convertColorToNumber(v){let i=-1;if(v.startsWith("#")){let e=v.split("#"),d="0x"+e[1];i=Number(d)}else return console.log("convertColorToNumber: wrong color string format"),-1;return i}};let V=Pe;V.TIMEOUT_ACTION="t";V.HIDDEN_ACTION="tau";V.NO_ACTION="";V.COLORPACK_1={blue:"#08D9D6",black:"#252A34",red_pink:"#FF2E63",white:"#EAEAEA"};V.COLORPACK_1_LIGHT={blue:"#3FC1C9",black:"#364F6B",red_pink:"#FC5185",white:"#F5F5F5"};V.COLORS_BLUE_LIGHT={c1:"#00A9BA",c2:"#45A0A5",c3:"#71C9CE",c4:"#A6E3E9"};V.COLORS_RED={c1:"#311D3F",c2:"#522546",c3:"#88304E",c4:"#DB1D49"};V.COLORPACK_2={c1:"#48466D",c2:"#3D84A8",c3:"#46CDCF",c4:"#ABEDD8"};V.COLORS_GREEN={c1:"#00A072",c2:"#00C897",c3:"#0EDDAA",c4:"#ACFFAD"};V.COLORS_GREY={c1:"#413F42",c2:"#7F8487",c3:"#CFD2CF",c4:"#DDDDDD"};V.COLOR_BORDEAUX=Phaser.Display.Color.GetColor(200,Phaser.Display.Color.ColorToRGBA(Pe.convertColorToNumber(Pe.COLORPACK_1.red_pink)).g,Phaser.Display.Color.ColorToRGBA(Pe.convertColorToNumber(Pe.COLORPACK_1.red_pink)).b);V.COLORS_PARALLAX={white:"#9db8b9",dark_blue:"#12273b",lighter_blue:"#085b87",very_dark_blue:"#0f1326"};V.COLORPACK_FINAL={white:"#EEEEEE",white_blue:"#E4F9F5",teal_greenish:"#30E3CA",teal_darker:"#11999E",teal:"#08D9D6",grey_tealish:"#40514E",grey:"#393E46",black:"#222831",red_pink:"#FF2E63",red_purple:"#B91646",red_bordeaux:"#c82e63",green_dark:"#3b845c",green:"#00A97B",green_light:"#00ffd2"};V.textStyle="Monospace";V.UI_height=60;V.UI_offset=60;V.camFadeSpeed=500;V.MAX_WIDTH=4096;V.MAX_HEIGHT=2304;V.MIN_WIDTH=480;V.MIN_HEIGHT=270;V.DEFAULT_WIDTH=1280;V.DEFAULT_HEIGHT=720;V.first_coordinates=new Phaser.Math.Vector2(Pe.DEFAULT_WIDTH/3.5,Pe.DEFAULT_HEIGHT/3.5+50);V.second_coordinates=new Phaser.Math.Vector2(Pe.DEFAULT_WIDTH*2.5/3.5,Pe.DEFAULT_HEIGHT/3.5+50);V.lts_xy_offset=new Phaser.Math.Vector2(Pe.DEFAULT_WIDTH/12,Pe.DEFAULT_WIDTH/8.6);class Ct extends Phaser.Scene{fade(i,e=()=>{},d=V.camFadeSpeed,t=0){i?(this.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_IN_COMPLETE,()=>{t!==0?this.time.delayedCall(t,()=>{e()}):e()}),this.cameras.main.fadeIn(d)):(this.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,()=>{t!==0?this.time.delayedCall(t,()=>{e()}):e()}),this.cameras.main.fadeOut(d))}fadeImage(i,e=0,d=V.camFadeSpeed*2){i.alpha=0;let t;return e!==0?this.time.delayedCall(e,()=>{t=this.tweens.add({targets:i,duration:d,alpha:1})}):t=this.tweens.add({targets:i,duration:d,alpha:1}),t}fadeImageOut(i,e=25,d=!1,t=()=>{}){d?this.tweens.add({targets:i,duration:e,alpha:0,onComplete:t}):this.tweens.add({targets:i,duration:e,alpha:0})}}class ff extends Ct{constructor(){super("MainMenuScene"),this.clickedBtn=!1}preload(){}create(){this.clickedBtn=!1,this.toFadeIn=[];let i=this.add.text(this.renderer.width/2,60,"A Video Game about",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24).setOrigin(.5).setDepth(1),e=this.add.text(this.renderer.width/2,110,"Reactive Bisimilarity",{fontFamily:V.textStyle,fontStyle:"bold",color:V.COLORPACK_1.white}).setResolution(2).setFontSize(50).setOrigin(.5).setDepth(1);this.toFadeIn.push(i),this.toFadeIn.push(e);let d=this.add.text(this.renderer.width/2,this.renderer.height/2-20,"Play",{fontFamily:V.textStyle,fontStyle:"bold",color:V.COLORPACK_1.white}).setResolution(2).setFontSize(50).setOrigin(.5).setDepth(1);this.toFadeIn.push(d);let t=this.add.text(this.renderer.width/2,this.renderer.height/2+45,"Credits",{fontFamily:V.textStyle,fontStyle:"bold",color:V.COLORPACK_1.white}).setResolution(2).setFontSize(38).setOrigin(.5).setDepth(1);this.toFadeIn.push(t);for(let s=0;s<this.toFadeIn.length;s++)this.fadeImage(this.toFadeIn[s],s*100+100);d.setInteractive(),d.on("pointerover",()=>{d.scale=1.1}),d.on("pointerout",()=>{d.scale=1}),d.on("pointerdown",()=>{d.scale=.95}),d.on("pointerup",()=>{d.scale=1.1,this.clickedBtn||(this.clickedBtn=!0,this.fade(!1,()=>{this.scene.stop("ParallaxScene"),this.scene.start("LevelMapScene")},500))}),t.setInteractive(),t.on("pointerover",()=>{t.scale=1.1}),t.on("pointerout",()=>{t.scale=1}),t.on("pointerdown",()=>{t.scale=.95}),t.on("pointerup",()=>{if(t.scale=1.1,!this.clickedBtn){this.clickedBtn=!0,this.tweens.killAll();for(let s=0;s<this.toFadeIn.length-1;s++)this.fadeImageOut(this.toFadeIn[s],s*100+100);this.fadeImageOut(this.toFadeIn[this.toFadeIn.length-1],(this.toFadeIn.length-1)*100+100,!0,()=>{this.scene.start("CreditsScene")})}})}update(i,e){}}class cf extends Phaser.Scene{constructor(){super("PreloaderScene")}preload(){this.load.image("logo","assets/phaser3-logo.png"),this.load.image("link_icon","assets/UI/link.png"),this.load.image("ui_home_btn","assets/UI/Iconsforgamesgameassetpack/icons_128/home.png"),this.load.image("ui_info_btn","assets/UI/Iconsforgamesgameassetpack/icons_128/info_2.png"),this.load.image("ui_settings_btn","assets/UI/Iconsforgamesgameassetpack/icons_128/settings_3.png"),this.load.image("ui_replay_btn","assets/UI/Iconsforgamesgameassetpack/icons_128/replay.png"),this.load.image("ui_leftarrow_btn","assets/UI/Iconsforgamesgameassetpack/icons_128/cursor_left.png"),this.load.image("ui_tick_btn","assets/UI/Iconsforgamesgameassetpack/icons_128/tick.png"),this.load.image("ui_level_map_btn","assets/UI/Iconsforgamesgameassetpack/icons_128/list_bulleted.png"),this.load.image("ui_questionmark_btn","assets/UI/Iconsforgamesgameassetpack/icons_128/help.png"),this.load.image("ui_cross_btn","assets/UI/Iconsforgamesgameassetpack/icons_128/cross.png"),this.load.image("ui_swap_btn","assets/Transition/symmetry_arrow.png"),this.load.image("circle","assets/DemoScene/Circle03.png"),this.load.image("circle_over","assets/DemoScene/Circle02.png"),this.load.image("circle_down","assets/DemoScene/Circle01.png"),this.load.image("arrow_tail","assets/DemoScene/right-arrow_tail.png"),this.load.image("arrow_middle","assets/DemoScene/right-arrow_middle.png"),this.load.image("arrow_head","assets/DemoScene/right-arrow_head.png"),this.load.image("background_demo","assets/dark_blue_sky.jpg"),this.load.image("background_mountain_water","assets/background_parallax/Free-Horizontal-Game-Backgrounds/PNG/game_background_1/game_background_1.png"),this.load.image("background_mountain_desert","assets/background_parallax/Free-Horizontal-Game-Backgrounds/PNG/game_background_2/game_background_2.png"),this.load.image("background_forest","assets/background_parallax/Free-Horizontal-Game-Backgrounds/PNG/game_background_3/game_background_3.1.png"),this.load.image("background_swamp","assets/background_parallax/Free-Horizontal-Game-Backgrounds/PNG/game_background_4/game_background_4.png"),this.load.image("background_dark_gradient","assets/background_parallax/dark_gradient.png"),this.load.image("background_dark_gradient_green","assets/background_parallax/dark_gradient_green.png"),this.load.spritesheet("witch_idle","assets/characters/Blue_witch/B_witch_idle.png",{frameWidth:64,frameHeight:96}),this.load.spritesheet("purple_wizard","assets/characters/tinyPurpleWizard/MAGE.png",{frameWidth:150,frameHeight:150}),this.load.image("purple_wizard_icon","assets/characters/tinyPurpleWizard/mage_icon.png"),this.load.image("witch_icon","assets/characters/Blue_witch/witch_icon.png"),this.load.image("fire_arrow_icon","assets/Transition/fire_arrow_icon.png"),this.load.image("water_arrow_icon","assets/Transition/water_arrow_icon.png"),this.load.image("plant_arrow_icon","assets/Transition/plant_arrow_icon.png"),this.load.image("timeout_arrow_icon","assets/Transition/timeout_arrow_icon.png"),this.load.image("tau_arrow_icon","assets/Transition/tau_arrow_icon.png"),this.load.image("environment_panel","assets/Transition/environment_panel.png"),this.load.image("environment_panel_disabled","assets/Transition/env_panel_disabled.png"),this.load.image("environment_panel_no_spell_possible","assets/Transition/env_no_spell_possible.png"),this.load.image("timeouted_timeouts","assets/Transition/timeouted_timeouts.png"),this.load.image("magic_and_state","assets/Transition/magic_states.png"),this.load.image("timeout_disabling","assets/Transition/timeout_disabling.png"),this.load.image("star","assets/UI/Stars/Star.png"),this.load.image("star_empty","assets/UI/Stars/Empty Star Grey.png"),this.load.image("fire_icon","assets/fire.png"),this.load.image("water_icon","assets/water-drop.png"),this.load.image("leaf_icon","assets/leaf2.png"),this.load.image("sand_clock","assets/Transition/sand_clock.png"),this.load.image("fire_arrow","assets/Transition/fire_arrow.png"),this.load.image("water_arrow","assets/Transition/water_arrow.png"),this.load.image("plant_arrow","assets/Transition/plant_arrow.png"),this.load.image("water_arrow_circle","assets/Transition/water_arrow_circle.png"),this.load.image("right_arrow","assets/Transition/right-arrow.png"),this.load.image("timeout_arrow","assets/Transition/timeout_arrow.png"),this.load.image("tau_arrow","assets/Transition/tau_arrow.png")}create(){let i=this.game.scene.getIndex("PreloaderScene"),e=this.game.scene.getAt(i+1);e!==void 0&&this.scene.start(e)}}class dt{static hasSpecialAction(i){return!!Array.from(i).some(d=>V.isSpecialAction(d))}static isEmpty(i){return i.size===0}static isSubset(i,e){let d=this.toArray(i);if(i.size!==e.size){for(let t of d)if(!e.has(t))return!1}return!0}static isSubsetEq(i,e){return!!(this.isSubset(i,e)||this.areEqual(i,e))}static areEqual(i,e){let d=this.toArray(i),t=this.toArray(e);for(let s of d)if(!e.has(s))return!1;for(let s of t)if(!e.has(s))return!1;return!0}static intersect(i,e){return new Set(this.toArray(i).filter(d=>e.has(d)))}static union(i,e){return new Set([...this.toArray(i),...this.toArray(e)])}static difference(i,e){return new Set(this.toArray(i).filter(d=>!e.has(d)))}static powerSet(i){return i.reduce((e,d)=>e.concat(e.map(t=>[d].concat(t).sort())),[[]])}static toArray(i){let e=[];return i.forEach(d=>{e.push(d)}),e}}class pn{constructor(i,e,d){this.process1=i,this.process2=e,this.activePlayer=d}isSymmetryMove(i){return i.process1===this.process2&&i.process2===this.process1&&this.constructor===i.constructor?this instanceof Ft?!!dt.areEqual(this.environment,i.environment):!0:!1}}var Mt=(v=>(v[v.Attacker=0]="Attacker",v[v.Defender=1]="Defender",v))(Mt||{});class Lt extends pn{constructor(i,e){super(i,e,0)}invertProcesses(){return new Lt(this.process2,this.process1)}toString(){return"("+this.process1+", "+this.process2+")_a"}copy(){return new Lt(this.process1,this.process2)}samePosition(i){return i instanceof Lt&&i.process1===this.process1&&i.process2===this.process2}}class xt extends pn{constructor(i,e,d){super(i,e,1),this.previousAction=d}invertProcesses(){return new xt(this.process2,this.process1,this.previousAction)}toString(){return"("+this.previousAction+", "+this.process1+", "+this.process2+")_d"}copy(){return new xt(this.process1,this.process2,this.previousAction)}samePosition(i){return i instanceof xt&&i.process1===this.process1&&i.process2===this.process2&&i.previousAction===this.previousAction}}class Ft extends pn{constructor(i,e,d){super(i,e,0),this.environment=new Set(d)}invertProcesses(){return new Ft(this.process2,this.process1,this.environment)}toString(){let i="{",e=0;return this.environment.forEach(d=>{e==this.environment.size-1?i=i.concat(d):i=i.concat(d,","),e++}),i=i.concat("}"),"("+this.process1+", "+i+", "+this.process2+")_a"}copy(){return new Ft(this.process1,this.process2,this.environment)}samePosition(i){return!!(i instanceof Ft&&i.process1===this.process1&&i.process2===this.process2&&dt.areEqual(i.environment,this.environment))}}class Pt extends pn{constructor(i,e,d,t){super(i,e,1),this.previousAction=d,this.environment=new Set(t)}invertProcesses(){return new Pt(this.process2,this.process1,this.previousAction,this.environment)}toString(){let i="{",e=0;return this.environment.forEach(d=>{e==this.environment.size-1?i=i.concat(d):i=i.concat(d,","),e++}),i=i.concat("}"),"("+this.previousAction+", "+this.process1+", "+i+", "+this.process2+")_d"}copy(){return new Pt(this.process1,this.process2,this.previousAction,this.environment)}samePosition(i){return!!(i instanceof Pt&&i.process1===this.process1&&i.process2===this.process2&&i.previousAction===this.previousAction&&dt.areEqual(i.environment,this.environment))}}class je{constructor(i,e,d,t=!0,s=!0){this.lts=d,this.environment=new Set,this.play=[],this.reactive=t,this.bisimilar=s,this.startNewGame(i,e,void 0,t,s)}setPlay(i){this.play=[];for(let e=0;e<i.length;e++)this.play.push(i[e].copy())}startNewGame(i,e,d,t=!0,s=!0){if(this.lts.hasState(i)&&this.lts.hasState(e))this.play=[],this.lts.setCurrentState(i,0),this.lts.setCurrentState(e,1),this.environment=this.lts.getVisibleActions(),d!=null&&d.process1===i&&d.process2===e?(this.play.push(d),(d instanceof Ft||d instanceof Pt)&&(this.environment=d.environment)):this.play.push(new Lt(i,e));else return-1;return 0}isMovePossible(i,e,d){let t=this.lts.getVisibleActions();if(d===void 0&&(d=this.play[this.play.length-1]),this.reactive&&!V.isSpecialAction(i)&&!t.has(i))return this.getCodeFromMoveString("Illegal Move");if(d===void 0||d==null||d.process1==null||d.process2==null||!this.lts.hasState(d.process1)||!this.lts.hasState(d.process2))return this.getCodeFromMoveString("IllegalMove");if(e===void 0||e==null||e.process1==null||!this.lts.hasState(e.process1)||e.process2==null||!this.lts.hasState(e.process2))return this.getCodeFromMoveString("IllegalMove");if(this.reactive)if(d instanceof Lt){if(i===V.NO_ACTION&&d.isSymmetryMove(e))return this.getCodeFromMoveString("Symmetry Move");if(i!==V.NO_ACTION&&this.lts.getOutgoingActions(d.process1).has(i)){if(e instanceof xt&&e.previousAction===i&&d.process2===e.process2){if(this.lts.hasTransition(d.process1,e.process1,i)&&(t.has(i)||i===V.HIDDEN_ACTION))return this.getCodeFromMoveString("Simulation Challenge")}else if(e instanceof Pt&&e.previousAction===i&&d.process2===e.process2&&e.previousAction===V.TIMEOUT_ACTION&&this.lts.hasTransition(d.process1,e.process1,i)&&this.initialsEmpty(d.process1,e.environment)&&dt.isSubsetEq(e.environment,t))return this.getCodeFromMoveString("Timeout Simulation Challenge")}}else if(d instanceof xt){if(i!==V.NO_ACTION&&e instanceof Lt&&d.process1===e.process1&&i===d.previousAction&&this.lts.hasTransition(d.process2,e.process2,i))return this.getCodeFromMoveString("Simulation Answer")}else if(d instanceof Ft){if(i===V.NO_ACTION&&d.isSymmetryMove(e))return this.getCodeFromMoveString("Restricted Symmetry Move");if(i!==V.NO_ACTION&&this.lts.getOutgoingActions(d.process1).has(i)){if(e instanceof xt&&e.previousAction===i&&d.process2===e.process2){if(this.lts.hasTransition(d.process1,e.process1,i)&&t.has(i)&&(d.environment.has(i)||this.initialsEmpty(d.process1,d.environment)))return this.getCodeFromMoveString("Restricted Simulation Challenge")}else if(e instanceof Pt&&e.previousAction===i&&i===V.HIDDEN_ACTION&&d.process2===e.process2&&dt.areEqual(d.environment,e.environment)){if(this.lts.hasTransition(d.process1,e.process1,i))return this.getCodeFromMoveString("Invisible Simulation Challenge")}else if(e instanceof Pt&&e.previousAction===i&&i===V.TIMEOUT_ACTION&&d.process2===e.process2&&this.lts.hasTransition(d.process1,e.process1,i)&&this.initialsEmpty(d.process1,dt.union(d.environment,e.environment))&&dt.isSubsetEq(e.environment,t))return this.getCodeFromMoveString("Timeouted Timeout Simulation Challenge")}}else if(d instanceof Pt){if(i!==V.NO_ACTION){if(e instanceof Ft&&d.process1==e.process1&&dt.areEqual(d.environment,e.environment)&&i===d.previousAction&&i===V.HIDDEN_ACTION){if(this.lts.hasTransition(d.process2,e.process2,i))return this.getCodeFromMoveString("Invisible Simulation Answer")}else if(e instanceof Ft&&d.process1==e.process1&&dt.areEqual(d.environment,e.environment)&&i===d.previousAction&&i===V.TIMEOUT_ACTION&&this.lts.hasTransition(d.process2,e.process2,i))return this.getCodeFromMoveString("Timeout Simulation Answer")}}else return this.printError("isMovePossible: unknown game position type"),this.getCodeFromMoveString("Illegal move");else if(d instanceof Lt){if(this.bisimilar&&i===V.NO_ACTION&&d.isSymmetryMove(e))return this.getCodeFromMoveString("Symmetry Move");if(i!==V.NO_ACTION&&e instanceof xt&&e.previousAction===i&&d.process2===e.process2&&this.lts.hasTransition(d.process1,e.process1,i))return this.getCodeFromMoveString("Simulation Challenge")}else if(d instanceof xt){if(i!==V.NO_ACTION&&e instanceof Lt&&d.process1===e.process1&&i===d.previousAction&&this.lts.hasTransition(d.process2,e.process2,i))return this.getCodeFromMoveString("Simulation Answer")}else return this.printError("isMovePossible: unknown game position type "+d.constructor.name),this.getCodeFromMoveString("Illegal Move");return this.getCodeFromMoveString("Illegal move")}getMoveStringFromCode(i){switch(i){case 0:return"Illegal move";case 1:return"Simulation Challenge";case 2:return"Simulation Answer";case 3:return"Symmetry Move";case 4:return"Timeout Simulation Challenge";case 5:return"Timeout Simulation Answer";case 6:return"Restricted Simulation Challenge";case 7:return"Invisible Simulation Challenge";case 8:return"Invisible Simulation Answer";case 9:return"Timeouted Timeout Simulation Challenge";case 10:return"Restricted Symmetry Move";default:return"Unknown move"}}getCodeFromMoveString(i){switch(i){case"Illegal move":return 0;case"Simulation Challenge":return 1;case"Simulation Answer":return 2;case"Symmetry Move":return 3;case"Timeout Simulation Challenge":return 4;case"Timeout Simulation Answer":return 5;case"Restricted Simulation Challenge":return 6;case"Invisible Simulation Challenge":return 7;case"Invisible Simulation Answer":return 8;case"Timeouted Timeout Simulation Challenge":return 9;case"Restricted Symmetry Move":return 10;default:return-1}}performMove(i,e){let d=this.play[this.play.length-1],t=this.isMovePossible(i,e,d),s=d.activePlayer;if(!t)return console.log("performMove: move not possible:"+d.toString()+" --"+i+"-> "+e.toString()),-1;let u=this.lts.getCurrentIndexOf(d.process1),n=this.lts.getCurrentIndexOf(d.process2);return u===-1||n===-1?(this.printError("performMove: current states from LTS differ from current game position."),-1):(this.lts.setCurrentState(e.process1,u),this.lts.setCurrentState(e.process2,n),d instanceof Ft&&e instanceof xt&&this.resetEnvironment(),this.play.push(e),console.log(Mt[s]+" performed "+this.getMoveStringFromCode(t)+" from "+d.toString()+" --"+i+"-> "+e.toString()),0)}setReactive(i){return i?(this.reactive=!0,0):this.play.length===0||this.play[this.play.length-1]instanceof Lt||this.play[this.play.length-1]instanceof xt?(this.reactive=!1,0):this.play[this.play.length-1]instanceof Ft||this.play[this.play.length-1]instanceof Pt?(this.printError("setReactive: Can't disable reactive nature because current game position is restrictive."),-1):(this.printError("setReactive: current position is illegal"),-1)}setBisimilar(i){this.bisimilar=i}isReactive(){return this.reactive}isBisimilar(){return this.bisimilar}getPlay(){return this.play}printError(i){try{throw i}catch(e){console.log(e)}}initialsEmpty(i,e){if(this.reactive===!1&&this.printError("initialsEmpty: method was called but game is not reactive."),this.lts.hasState(i)){let d=this.lts.getInitialActions(i),t=dt.union(e,new Set([V.HIDDEN_ACTION]));if(dt.isEmpty(dt.intersect(d,t)))return!0}return!1}setEnvironment(i,e=!1){if(this.reactive===!1)return this.printError("setEnvironment: method was called but game is not reactive."),-1;if(!i.has(V.HIDDEN_ACTION)&&!i.has(V.NO_ACTION)&&!i.has(V.TIMEOUT_ACTION)){let d=dt.toArray(i).sort();for(let t=0;t<d.length;t++)this.lts.addVisibleActionToA(d[t]);return this.environment=new Set(d),e||console.log("Environment was set to {"+dt.toArray(this.environment)+"}."),0}else return this.printError("setEnvironment: Error: some illegal action in given environment or not attackers turn"),-1}getEnvironment(){return this.reactive===!1&&this.printError("getEnvironment: method was called but game is not reactive."),new Set(this.environment)}getEnvironmentString(){this.reactive===!1&&this.printError("getEnvironmentString: method was called but game is not reactive.");let i=Array.from(this.environment).sort(),e="";for(let d=0;d<i.length-1;d++)e=e.concat(String(i[d]),",");return i.length>=1&&(e=e.concat(String(i[i.length-1]))),e}resetEnvironment(i=!1){return this.reactive===!1?(this.printError("resetEnvironment: method was called but game is not reactive."),-1):(this.environment=new Set(dt.toArray(this.lts.getVisibleActions()).sort()),i||console.log("Environment was reset to {"+dt.toArray(this.environment)+"}."),0)}possibleMoves(i,e=!1){i===void 0&&(i=this.play[this.play.length-1]);let d=[];if(!this.lts.hasState(i.process1)||!this.lts.hasState(i.process2))return this.printError("possibleMoves: some process from given game position does not exist"),d;let t=this.generateMoves(i,e);for(let s=0;s<t.length;s++)i.activePlayer===Mt.Attacker?t[s]instanceof Lt||t[s]instanceof Ft?this.isMovePossible(V.NO_ACTION,t[s],i)&&d.push(t[s]):t[s]instanceof xt||t[s]instanceof Pt?this.isMovePossible(t[s].previousAction,t[s],i)&&d.push(t[s]):this.printError("possibleMoves: type of potential node illegal: "):i.activePlayer===Mt.Defender&&(t[s]instanceof Lt||t[s]instanceof Ft?this.isMovePossible(i.previousAction,t[s],i)&&d.push(t[s]):this.printError("possibleMoves: type of potential node illegal: "+t[s]));return d}getPossibleMovesString(i,e=0,d=!1){let t="",s;i!==void 0?s=this.possibleMoves(i,!0):s=this.possibleMoves(void 0,!0);let u=0;for(let n=0;n<s.length-1;n++){(e>0&&u>=e||d&&n!==0)&&(u=0,t=t.concat(`
`));let a=s[n].toString();t=t.concat(a,", "),u+=a.length+2}return s.length>0&&((e>0&&u>=e||d&&s.length>1)&&(u=0,t=t.concat(`
`)),t=t.concat(s[s.length-1].toString())),t}generateMoves(i,e=!1){let d=[];if(this.lts.getVisibleActions(),!this.lts.hasState(i.process1)||!this.lts.hasState(i.process2))return this.printError("possibleMoves: some process from given game position does not exist"),d;if(this.reactive)if(i instanceof Lt){d.push(i.invertProcesses());let t=this.lts.getActionsAndDestinations(i.process1);for(let s=0;s<t.length;s++)if(t[s][0]!==V.TIMEOUT_ACTION&&t[s][0]!==V.NO_ACTION)d.push(new xt(t[s][1],i.process2,t[s][0]));else if(t[s][0]===V.TIMEOUT_ACTION)if(e){let u=this.generateAllTimeoutEnvironmentCombinations(i.process1);for(let n=0;n<u.length;n++)d.push(new Pt(t[s][1],i.process2,V.TIMEOUT_ACTION,u[n]))}else d.push(new Pt(t[s][1],i.process2,V.TIMEOUT_ACTION,new Set(this.environment)))}else if(i instanceof Ft){d.push(i.invertProcesses());let t=this.lts.getActionsAndDestinations(i.process1);for(let s=0;s<t.length;s++)if(!V.isSpecialAction(t[s][0]))d.push(new xt(t[s][1],i.process2,t[s][0]));else if(t[s][0]===V.HIDDEN_ACTION)d.push(new Pt(t[s][1],i.process2,V.HIDDEN_ACTION,i.environment));else if(t[s][0]===V.TIMEOUT_ACTION)if(e){let u=this.generateAllTimeoutEnvironmentCombinations(i.process1);for(let n=0;n<u.length;n++)d.push(new Pt(t[s][1],i.process2,V.TIMEOUT_ACTION,u[n]))}else d.push(new Pt(t[s][1],i.process2,V.TIMEOUT_ACTION,new Set(this.environment)))}else if(i instanceof xt){let t=this.lts.getActionsAndDestinations(i.process2);for(let s=0;s<t.length;s++)t[s][0]===i.previousAction&&d.push(new Lt(i.process1,t[s][1]))}else if(i instanceof Pt){let t=this.lts.getActionsAndDestinations(i.process2);for(let s=0;s<t.length;s++)t[s][0]===i.previousAction&&d.push(new Ft(i.process1,t[s][1],i.environment))}else this.printError("generateMoves: unknown game position type");else if(i instanceof Lt){this.bisimilar&&d.push(i.invertProcesses());let t=this.lts.getActionsAndDestinations(i.process1);for(let s=0;s<t.length;s++)t[s][0]!==V.NO_ACTION&&d.push(new xt(t[s][1],i.process2,t[s][0]))}else if(i instanceof xt){let t=this.lts.getActionsAndDestinations(i.process2);for(let s=0;s<t.length;s++)t[s][0]===i.previousAction&&d.push(new Lt(i.process1,t[s][1]))}else this.printError("generateMoves: unknown game position type "+i.constructor.name);return d}generateAllTimeoutEnvironmentCombinations(i){let e=this.lts.getOutgoingActions(i),d=dt.toArray(this.lts.getVisibleActions()),t=[];for(let s=0;s<d.length;s++)e.has(d[s])||t.push(d[s]);return dt.powerSet(t)}getCurrent(i){return i===0&&this.lts.current.length>0?this.lts.current[0]:i===1&&this.lts.current.length>1?this.lts.current[1]:""}isVisibleOrHiddenAction(i){return!!(this.lts.getVisibleActions().has(i)||i===V.HIDDEN_ACTION)}copy(){let i=new je(this.play[0].process1,this.play[0].process2,this.lts.copy(),this.reactive,this.bisimilar);return i.setEnvironment(this.environment,!0),i.setPlay(this.play),this.play.length===0&&console.log("Warning: copying uninitialized game."),i}}class Ts{constructor(i){this.nodes=new Map,this.comparator=i}addNode(i){let e=this.nodes.get(i);return e||(e=new vf(i,this.comparator),this.nodes.set(i,e),e)}removeNode(i){const e=this.nodes.get(i);return e?(this.nodes.forEach(d=>{d.removeAdjacent(e.data)}),this.nodes.delete(i),e):null}addEdge(i,e,d){const t=this.nodes.get(i),s=this.nodes.get(e);t&&s?t.addAdjacent(s,d):console.log(`ERROR: addEdge: One or two nodes do not exist
source: `+t+", destination: "+s)}removeEdge(i,e,d){const t=this.nodes.get(i),s=this.nodes.get(e);t&&s?t.removeAdjacentEdge(e,d):console.log(`ERROR: removeEdge: One or two nodes do not exist
source: `+t+", destination: "+s)}getNodeAmount(){return this.nodes.size}getNode(i){let e=this.nodes.get(i);return e||null}getNodes(){let i=[];return this.nodes.forEach(e=>{i.push(e)}),i}hasNode(i){return!!this.getNodes().includes(i)}getEdgesList(){let i=[];return this.nodes.forEach(e=>{i.push(e.adjacent)}),i}getEdgesAsString(){let i=this.getEdgesList(),e="";return i.forEach(d=>{e=e.concat("[ "),d.forEach(t=>{e=e.concat("("+t.edgeLabel+", "+t.node.toString()+") ")}),e=e.concat(`]
`)}),e}print(){console.log("Graph: <Vertex>: <(edgeLabel, destinationNode)> ..."),this.nodes.forEach(i=>{let e="Vertex "+i.data+": ";for(let d=0;d<i.adjacent.length;d++)e=e.concat("(",i.adjacent[d].edgeLabel,", ",i.adjacent[d].node.toString(),"), ");console.log(e)})}getType(i){return typeof i}copy(){let i=new Ts(this.comparator);return this.nodes.forEach(e=>{i.addNode(structuredClone(e.data))}),this.nodes.forEach(e=>{let d=e.adjacent;for(let t=0;t<d.length;t++)i.addEdge(structuredClone(e.data),structuredClone(d[t].node.data),d[t].edgeLabel)}),i}}class vf{constructor(i,e){this.toString=()=>{let d="";return this.getType(this.data)==="string"?d=String(this.data):this.getType(this.data)==="number"?d=Number(this.data).toString():this.getType(this.data)==="boolean"?d=Boolean(this.data).toString():d="<Unknown Type>",d},this.data=i,this.adjacent=[],this.comparator=e}addAdjacent(i,e){this.adjacent.push({node:i,edgeLabel:e})}removeAdjacentEdge(i,e){let d=0;return this.adjacent.forEach(({node:t,edgeLabel:s})=>{if(this.comparator(t.data,i)===0&&s===e)return this.adjacent.splice(d,1)[0].node;d++}),null}removeAdjacent(i){let e=null;for(let d=0;d<this.adjacent.length;d++){let t=this.adjacent[d];this.comparator(t.node.data,i)===0&&(this.adjacent.splice(d,1),d--)}return e}hasEdge(i,e){return e===void 0?this.adjacent.some(d=>d.node.data==i):this.adjacent.some(d=>d.node.data==i&&d.edgeLabel==e)}getType(i){return typeof i}printEdge(i){let e="[";return e.concat(i.edgeLabel,", "),e.concat(i.node.toString(),"]"),e}}class Be{constructor(){this.graph=new Ts((i,e)=>i<e?-1:i>e?1:0),this.current=[],this.A=new Set}addState(i){this.graph.addNode(i)}removeState(i){if(this.graph.removeNode(i)==null)try{throw new Error('removeNode: node "'+i+`" doesn't exist`)}catch(d){console.log(d)}else for(let d=0;d<this.current.length;d++)i==this.current[d]&&(this.current.splice(d,1),d--)}addTransition(i,e,d){if(d!=="")this.graph.addEdge(i,e,d),V.isSpecialAction(d)||this.A.add(d);else try{throw new Error("addTransition: given edgelabel is empty")}catch(t){console.error(t)}}removeTransition(i,e,d){this.graph.removeEdge(i,e,d)}setCurrentState(i,e){if(this.graph.getNode(i)!=null)e!==void 0?this.current[e]=i:this.current[0]=i;else{try{throw new Error('setCurrentState: node "'+i+`" doesn't exist`)}catch(t){console.log(t)}return-1}return 0}performAction(i,e,d){let t=this.current.findIndex(s=>i==s);if(t!==void 0){let s=this.graph.getNode(i);if(s!=null&&s.hasEdge(e,d))return this.current[t]=e,0}return-1}getCurrentIndexOf(i){return this.current.findIndex(e=>e==i)}getInitialActions(i){let e=[],d=this.graph.getNode(i);if(d!=null)for(let t=0;t<d.adjacent.length;t++)d.adjacent[t].edgeLabel!==V.TIMEOUT_ACTION&&e.push(d.adjacent[t].edgeLabel);return new Set(e)}getActionsAndDestinations(i){let e=[],d=[],t=this.graph.getNode(i);if(t!=null)for(let s=0;s<t.adjacent.length;s++)d=[t.adjacent[s].edgeLabel,t.adjacent[s].node.data],e.push(d);return e}getActionBetweenTwoProcesses(i,e){let t=this.getActionsAndDestinations(i).filter(s=>s[1]===e);if(t.length!==0)return t[0][0]}getAllVisibleActions(){let i=this.graph.getEdgesList(),e=[];for(let d=0;d<i.length;d++)for(let t=0;t<i[d].length;t++)i[d][t].edgeLabel!==V.HIDDEN_ACTION&&i[d][t].edgeLabel!==V.TIMEOUT_ACTION&&e.push(i[d][t].edgeLabel);return new Set(e)}getOutgoingActions(i){let e=[],d=this.graph.getNode(i);if(d!=null)for(let t=0;t<d.adjacent.length;t++)e.push(d.adjacent[t].edgeLabel);return new Set(e)}getAllActions(){let i=this.graph.getEdgesList(),e=[];for(let d=0;d<i.length;d++)for(let t=0;t<i[d].length;t++)e.push(i[d][t].edgeLabel);return new Set(e)}hasState(i){return this.graph.getNode(i)!=null}hasTransition(i,e,d){let t=this.graph.getNode(i);return!!(t!=null&&t.hasEdge(e,d))}setVisibleActions(i){let e=this.getAllVisibleActions();dt.isSubsetEq(e,i)&&!dt.hasSpecialAction(i)&&(this.A=i)}addVisibleActionToA(i){V.isSpecialAction(i)||this.A.add(i)}getVisibleActions(){return new Set(this.A)}copy(){let i=new Be;i.graph=this.graph.copy(),i.current=[];for(let e=0;e<this.current.length;e++)i.current.push(this.current[e]);return this.A.forEach(e=>{i.addVisibleActionToA(e)}),i}}const si=Phaser.Utils.Objects.GetValue;class yl{constructor(i,e,d,t,s){this.cornerRadius={},this._width=0,this._height=0,this.setTo(i,e,d,t,s)}setTo(i,e,d,t,s){return this.setPosition(i,e),this.setRadius(s),this.setSize(d,t),this}setPosition(i,e){return i===void 0&&(i=0),e===void 0&&(e=i),this.x=i,this.y=e,this}setRadius(i){return i===void 0&&(i=0),this.radius=i,this}setSize(i,e){return this.width=i,this.height=e,this}get minWidth(){var i=this.cornerRadius;return Math.max(i.tl.x+i.tr.x,i.bl.x+i.br.x)}get minHeight(){var i=this.cornerRadius;return Math.max(i.tl.y+i.bl.y,i.tr.y+i.br.y)}get width(){return this._width}set width(i){i==null&&(i=0),this._width=Math.max(i,this.minWidth)}get height(){return this._height}set height(i){i==null&&(i=0),this._height=Math.max(i,this.minHeight)}get radius(){var i=this.cornerRadius;return Math.max(i.tl.x,i.tl.y,i.tr.x,i.tr.y,i.bl.x,i.bl.y,i.br.x,i.br.y)}set radius(i){var e,d;typeof i=="number"?(e=i,d=i):(e=si(i,"x",0),d=si(i,"y",0));var t=this.cornerRadius;t.tl=ws(si(i,"tl",void 0),e,d),t.tr=ws(si(i,"tr",void 0),e,d),t.bl=ws(si(i,"bl",void 0),e,d),t.br=ws(si(i,"br",void 0),e,d)}get radiusTL(){var i=this.cornerRadius.tl;return Math.max(i.x,i.y)}set radiusTL(i){Ds(this.cornerRadius.tl,i)}get radiusTR(){var i=this.cornerRadius.tr;return Math.max(i.x,i.y)}set radiusTR(i){Ds(this.cornerRadius.tr,i)}get radiusBL(){var i=this.cornerRadius.bl;return Math.max(i.x,i.y)}set radiusBL(i){Ds(this.cornerRadius.bl,i)}get radiusBR(){var i=this.cornerRadius.br;return Math.max(i.x,i.y)}set radiusBR(i){Ds(this.cornerRadius.br,i)}}var ws=function(v,i,e){return v===void 0?{x:i,y:e}:typeof v=="number"?{x:v,y:v}:v},Ds=function(v,i){typeof i=="number"?(v.x=i,v.y=i):(v.x=si(i,"x",0),v.y=si(i,"y",0))},ki=function(v,i,e){var d=e.length;if(d>=2){var t=e[d-2],s=e[d-1];if(v===t&&i===s)return e}return e.push(v,i),e};const Ua=Phaser.Math.DegToRad;var Ji=function(v,i,e,d,t,s,u,n,a){u&&s>t?s-=360:!u&&s<t&&(s+=360);var h=s-t,r=Ua(h)/n;t=Ua(t);for(var o=0;o<=n;o++){var c=t+r*o,l=v+e*Math.cos(c),f=i+d*Math.sin(c);ki(l,f,a)}return a},pf=Phaser.Renderer.WebGL.Utils,Tl=function(v,i,e,d,t,s){for(var u=pf.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*d),n=e.pathData,a=e.pathIndexes,h=0;h<a.length;h+=3){var r=a[h]*2,o=a[h+1]*2,c=a[h+2]*2,l=n[r+0]-t,f=n[r+1]-s,p=n[o+0]-t,g=n[o+1]-s,m=n[c+0]-t,x=n[c+1]-s,y=i.getX(l,f),T=i.getY(l,f),S=i.getX(p,g),C=i.getY(p,g),E=i.getX(m,x),P=i.getY(m,x);v.batchTri(e,y,T,S,C,E,P,0,0,1,1,u,u,u,2)}},gf=Phaser.Renderer.WebGL.Utils,gn=function(v,i,e,d,t){var s=v.strokeTint,u=gf.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*e);s.TL=u,s.TR=u,s.BL=u,s.BR=u;var n=i.pathData,a=n.length-1,h=i.lineWidth,r=h/2,o=n[0]-d,c=n[1]-t;i.closePath||(a-=2);for(var l=2;l<a;l+=2){var f=n[l]-d,p=n[l+1]-t;v.batchLine(o,c,f,p,r,r,h,l-2,i.closePath?l===a-1:!1),o=f,c=p}};const mf=Phaser.GameObjects.GetCalcMatrix;var xf=function(v,i,e,d){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var t=v.pipelines.set(i.pipeline),s=mf(i,e,d),u=t.calcMatrix.copyFrom(s.calc),n=i._displayOriginX,a=i._displayOriginY,h=e.alpha*i.alpha;v.pipelines.preBatch(i),i.isFilled&&Tl(t,u,i,h,n,a),i.isStroked&&gn(t,i,h,n,a),v.pipelines.postBatch(i)},Ss=function(v,i,e,d){var t=e||i.fillColor,s=d||i.fillAlpha,u=(t&16711680)>>>16,n=(t&65280)>>>8,a=t&255;v.fillStyle="rgba("+u+","+n+","+a+","+s+")"},Cs=function(v,i,e,d){var t=e||i.strokeColor,s=d||i.strokeAlpha,u=(t&16711680)>>>16,n=(t&65280)>>>8,a=t&255;v.strokeStyle="rgba("+u+","+n+","+a+","+s+")",v.lineWidth=i.lineWidth};const yf=Phaser.Renderer.Canvas.SetTransform;var Tf=function(v,i,e,d){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var t=v.currentContext;if(yf(v,t,i,e,d)){var s=i._displayOriginX,u=i._displayOriginY,n=i.pathData,a=n.length-1,h=n[0]-s,r=n[1]-u;t.beginPath(),t.moveTo(h,r),i.closePath||(a-=2);for(var o=2;o<a;o+=2){var c=n[o]-s,l=n[o+1]-u;t.lineTo(c,l)}t.closePath(),i.isFilled&&(Ss(t,i),t.fill()),i.isStroked&&(Cs(t,i),t.stroke()),t.restore()}},Sf={renderWebGL:xf,renderCanvas:Tf};const Cf=Phaser.GameObjects.Shape,Ef=Phaser.Utils.Objects.IsPlainObject,Xa=Phaser.Utils.Objects.GetValue,Pf=Phaser.Geom.Polygon.Earcut;class $t extends Cf{constructor(i,e,d,t,s,u,n,a){var h,r,o;if(Ef(e)){var c=e;e=c.x,d=c.y,t=c.width,s=c.height,u=c.radius,n=c.color,a=c.alpha,h=c.strokeColor,r=c.strokeAlpha,o=c.strokeWidth}e===void 0&&(e=0),d===void 0&&(d=0),u===void 0&&(u=0);var l=new yl;super(i,"rexRoundRectangleShape",l);var f=Xa(u,"radius",u);l.setTo(0,0,t,s,f);var p=Xa(u,"iteration",void 0);this.setIteration(p),this.setPosition(e,d),n!==void 0&&this.setFillStyle(n,a),h!==void 0&&(o===void 0&&(o=2),this.setStrokeStyle(o,h,r)),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var i=this.geom,e=this.pathData;e.length=0;var d=i.cornerRadius,t,s=this.iteration+1;if(t=d.br,Bs(t)){var u=i.width-t.x,n=i.height-t.y;Ji(u,n,t.x,t.y,0,90,!1,s,e)}else ki(i.width,i.height,e);if(t=d.bl,Bs(t)){var u=t.x,n=i.height-t.y;Ji(u,n,t.x,t.y,90,180,!1,s,e)}else ki(0,i.height,e);if(t=d.tl,Bs(t)){var u=t.x,n=t.y;Ji(u,n,t.x,t.y,180,270,!1,s,e)}else ki(0,0,e);if(t=d.tr,Bs(t)){var u=i.width-t.x,n=t.y;Ji(u,n,t.x,t.y,270,360,!1,s,e)}else ki(i.width,0,e);return e.push(e[0],e[1]),this.pathIndexes=Pf(e),this}get width(){return this.geom.width}set width(i){this.resize(i,this.height)}get height(){return this.geom.height}set height(i){this.resize(this.width,i)}setSize(i,e){if(e===void 0&&(e=i),this.geom.width===i&&this.geom.height===e)return this;this.geom.setSize(i,e),this.updateDisplayOrigin(),this.dirty=!0;var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=i,d.hitArea.height=e),this}resize(i,e){return this.setSize(i,e),this}get iteration(){return this._iteration}set iteration(i){if(this._iteration===void 0){this._iteration=i;return}this._iteration!==i&&(this._iteration=i,this.dirty=!0)}setIteration(i){return i===void 0&&(i=6),this.iteration=i,this}get radius(){return this.geom.radius}set radius(i){this.geom.setRadius(i),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(i){this.geom.radiusTL=i,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(i){this.geom.radiusTR=i,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(i){this.geom.radiusBL=i,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(i){this.geom.radiusBR=i,this.dirty=!0}setRadius(i){return i===void 0&&(i=0),this.radius=i,this}setRadiusTL(i){return i===void 0&&(i=0),this.radiusTL=i,this}setRadiusTR(i){return i===void 0&&(i=0),this.radiusTR=i,this}setRadiusBL(i){return i===void 0&&(i=0),this.radiuBL=i,this}setRadiusBR(i){return i===void 0&&(i=0),this.radiusBR=i,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(i){this.radius=i}setCornerRadius(i){return this.setRadius(i)}}var Bs=function(v){return v.x!==0&&v.y!==0};Object.assign($t.prototype,Sf);class Mf extends Phaser.GameObjects.Container{constructor(i,e,d,t,s=()=>{},u="",n,a,h=!0){super(i,e,d),this.outImage=i.add.image(0,0,t),n===void 0?this.overImage=i.add.image(0,0,t).setDepth(1):this.overImage=i.add.image(0,0,n).setDepth(1),a===void 0?this.downImage=i.add.image(0,0,t).setDepth(1):this.downImage=i.add.image(0,0,a).setDepth(1),this.text=i.add.text(0,0,u,{fontFamily:V.textStyle,color:V.COLORPACK_1.black,fontStyle:"bold"}).setOrigin(.5).setFontSize(45),this.text.x=Math.round(this.text.x),this.text.y=Math.round(this.text.y),this.text.setVisible(h),this.add(this.outImage),this.add(this.overImage),this.add(this.downImage),this.add(this.text),this.overImage.setVisible(!1),this.downImage.setVisible(!1),i.add.existing(this),this.setSize(this.outImage.width,this.outImage.height),this.x=Math.round(this.x),this.y=Math.round(this.y),this.setDepth(1),this.setInteractive(),this.setScale(.5),this.blinkingRectangle=this.scene.add.graphics({}).fillStyle(V.convertColorToNumber(V.COLORS_RED.c4),1).fillRect(this.x-this.width*this.scale/2,this.y-this.height*this.scale/2,this.width*this.scale,this.height*this.scale).setDepth(10).setAlpha(0);let r=this.scene.make.image({x:this.x,y:this.y,key:t,scale:.5,add:!1}),o=new Phaser.Display.Masks.BitmapMask(this.scene,r);this.blinkingRectangle.mask=o,this.on("pointerover",()=>{this.overImage.setVisible(!0),this.outImage.setVisible(!1),this.downImage.setVisible(!1)}),this.on("pointerdown",()=>{this.overImage.setVisible(!1),this.outImage.setVisible(!1),this.downImage.setVisible(!0)}),this.on("pointerup",()=>{this.overImage.setVisible(!0),this.outImage.setVisible(!1),this.downImage.setVisible(!1),s()}),this.on("pointerout",()=>{this.overImage.setVisible(!1),this.outImage.setVisible(!0),this.downImage.setVisible(!1)})}redBlinking(){this.blinkingRectangle.alpha=0,this.scene.tweens.add({targets:this.blinkingRectangle,alpha:.8,ease:Phaser.Math.Easing.Quintic.InOut,duration:160,repeat:1,onComplete:()=>{this.blinkingRectangle.alpha=0}})}}class Un extends Mf{constructor(i,e,d,t=()=>{},s,u=!0){super(i,e,d,"circle",t,s,"circle_over","circle_down",u)}}class Bt extends Phaser.GameObjects.Container{constructor(i,e,d,t,s=()=>{},u="",n=25){super(i,e,d),this.btnClicked=!1,this.disableAlpha=.4,this.star_scale=1,this.texture=i.add.sprite(0,0,t,0).setScale(1.5),this.clickTexture=i.add.sprite(0,0,t,1).setScale(1.5),this.stars=[],this.star_scale=.055,this.stars[3]=i.add.image(0,-n-4,"star").setOrigin(1.4,.5).setVisible(!1),this.stars[4]=i.add.image(0,-n-4,"star").setVisible(!1),this.stars[5]=i.add.image(0,-n-4,"star").setOrigin(-.4,.5).setVisible(!1),this.stars[0]=i.add.image(0,-n-4,"star_empty").setOrigin(1.4,.5),this.stars[1]=i.add.image(0,-n-4,"star_empty"),this.stars[2]=i.add.image(0,-n-4,"star_empty").setOrigin(-.4,.5);for(let a=0;a<this.stars.length;a++)this.add(this.stars[a].setScale(this.star_scale));this.text=i.add.text(0,-2*n-3,u,{fontFamily:V.textStyle,color:V.COLORPACK_1.white,fontStyle:"bold"}).setOrigin(.5).setFontSize(n),this.text.setStroke("#000000",3).setScale(.9,.9).setResolution(2),this.text.x=Math.round(this.text.x),this.text.y=Math.round(this.text.y),this.add(this.texture),this.add(this.clickTexture),this.add(this.text),this.clickTexture.setVisible(!1),i.add.existing(this),this.setSize(this.texture.width*1.6,this.texture.height*1.6),this.x=Math.round(this.x),this.y=Math.round(this.y),this.setDepth(1),this.setInteractive(),this.on("pointerover",()=>{this.texture.scale=this.texture.scale+.1,this.clickTexture.scale=this.clickTexture.scale+.1;for(let a=0;a<this.stars.length;a++)this.stars[a].scale=this.star_scale+.0075;this.clickTexture.setVisible(!1),this.text.scale=1}),this.on("pointerdown",()=>{this.texture.setVisible(!1),this.clickTexture.setVisible(!0),this.text.scale=.85;for(let a=0;a<this.stars.length;a++)this.stars[a].scale=this.star_scale-.004}),this.on("pointerup",()=>{this.texture.setVisible(!0),this.clickTexture.setVisible(!1),this.text.scale=1;for(let a=0;a<this.stars.length;a++)this.stars[a].scale=this.star_scale+.0075;this.btnClicked||(this.btnClicked=!0,s())}),this.on("pointerout",()=>{this.texture.scale=this.texture.scale-.1,this.clickTexture.scale=this.clickTexture.scale-.1,this.texture.setVisible(!0),this.clickTexture.setVisible(!1),this.text.scale=.9;for(let a=0;a<this.stars.length;a++)this.stars[a].scale=this.star_scale})}disable(){this.disableInteractive(),this.texture.alpha=this.disableAlpha,this.clickTexture.alpha=this.disableAlpha,this.text.alpha=this.disableAlpha;for(let i=0;i<this.stars.length;i++)this.stars[i].setAlpha(this.disableAlpha);return this}enable(){this.setInteractive(),this.texture.alpha=1,this.clickTexture.alpha=1,this.text.alpha=1;for(let i=0;i<this.stars.length;i++)this.stars[i].alpha=1;return this}setStars(i){if(i>=1&&i<=3)for(let e=3;e<i+3;e++)this.stars[e].setVisible(!0);else for(let e=3;e<6;e++)this.stars[e].setVisible(!1)}}class Mi extends Phaser.GameObjects.Container{constructor(i,e,d,t=()=>{},s="",u=!0){super(i,e,V.UI_height),this.clickedBtn=!1,this.image=i.add.image(0,0,d),this.setSize(this.image.width,this.image.height),this.scale=.4,this.text=i.add.text(e,V.UI_height+40,s,{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setOrigin(.5).setFontSize(30).setResolution(2).setStroke("#A3A3A3",1),this.add(this.image),i.add.existing(this),this.image.setTintFill(V.convertColorToNumber(V.COLORPACK_1.white)),this.setDepth(1),this.setInteractive(),this.on("pointerover",()=>{this.image.setTint(V.COLOR_BORDEAUX),this.text.setTint(V.COLOR_BORDEAUX),this.image.scale=1,this.text.scale=1}),this.on("pointerdown",()=>{this.image.setTint(Phaser.Display.Color.GetColor(220,Phaser.Display.Color.ColorToRGBA(V.COLOR_BORDEAUX).g+20,Phaser.Display.Color.ColorToRGBA(V.COLOR_BORDEAUX).b+20)),this.text.setTint(Phaser.Display.Color.GetColor(220,Phaser.Display.Color.ColorToRGBA(V.COLOR_BORDEAUX).g+20,Phaser.Display.Color.ColorToRGBA(V.COLOR_BORDEAUX).b+20)),this.image.scale=.9,this.text.scale=.9}),this.on("pointerup",()=>{this.image.setTint(V.COLOR_BORDEAUX),this.text.setTint(V.COLOR_BORDEAUX),(!this.clickedBtn||!u)&&(this.clickedBtn=!0,t()),this.image.scale=1,this.text.scale=1}),this.on("pointerout",()=>{this.image.setTint(V.convertColorToNumber(V.COLORPACK_1.white)),this.text.setTint(V.convertColorToNumber(V.COLORPACK_1.white)),this.image.scale=1,this.text.scale=1})}}class Af extends Phaser.GameObjects.Container{constructor(i,e,d,t,s=()=>{},u="",n=!1){super(i,e,d),this.clickedBtn=!1,this.image=i.add.image(0,0,t),this.setSize(this.image.width,this.image.height),this.text=i.add.text(e,V.UI_height+40,u,{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setOrigin(.5).setFontSize(30).setResolution(2).setStroke("#A3A3A3",1),this.add(this.image),i.add.existing(this),this.setDepth(1),this.setInteractive(),this.on("pointerover",()=>{this.image.scale=1.15,this.text.scale=1.15}),this.on("pointerdown",()=>{this.image.scale=.95,this.text.scale=.95,this.image.tint}),this.on("pointerup",()=>{(!this.clickedBtn||!n)&&(this.clickedBtn=!0,s()),this.image.scale=1.15,this.text.scale=1.15}),this.on("pointerout",()=>{this.image.scale=1,this.text.scale=1})}}class Of extends Phaser.GameObjects.Container{constructor(i,e,d,t,s=()=>{},u,n=u,a=1){super(i,e,d),this.image=i.add.image(0,0,t).setOrigin(.5).setScale(.8).setTintFill(V.convertColorToNumber(V.COLORPACK_1.white)),this.setSize(this.image.width,this.image.height),this.scale_btn=.32*a,this.setScale(this.scale_btn),this.background=i.add.existing(new $t(i,0,0,this.width,this.height,150*this.scale_btn,V.convertColorToNumber(u))),u!==n&&this.background.setStrokeStyle(4/this.scale_btn,V.convertColorToNumber(n)),this.add(this.background),this.add(this.image),i.add.existing(this),this.setDepth(1),this.setInteractive(),this.on("pointerover",()=>{this.scale=this.scale_btn+.15*this.scale_btn,this.background.setFillStyle(V.convertColorToNumber(u)).setAlpha(.8)}),this.on("pointerdown",()=>{this.scale=this.scale_btn-.0075*this.scale_btn,this.background.setFillStyle(V.convertColorToNumber(u)).setAlpha(.6)}),this.on("pointerup",()=>{s(),this.scale=this.scale_btn+.15*this.scale_btn,this.background.setFillStyle(V.convertColorToNumber(u)).setAlpha(.8)}),this.on("pointerout",()=>{this.scale=this.scale_btn,this.background.setFillStyle(V.convertColorToNumber(u)).setAlpha(1)})}}class Rf extends Phaser.GameObjects.Container{constructor(i,e,d,t,s,u,n,a,h="",r=1,o=0){super(i,e,d);let c=new Phaser.Math.Vector2(t-e,s-d),l=new Phaser.Math.Vector2(e,d).add(c.clone().scale(.5)),f=c.length()-o,p=Phaser.Math.RadToDeg(Phaser.Math.Angle.Normalize(c.angle()));if(e===t&&d===s)this.circle_img=i.add.image(-60,0,"ui_replay_btn").setScale(.45).setTint(V.convertColorToNumber(V.COLORPACK_1.blue)).setRotation(-.5),this.add(this.circle_img),h==="a"?(this.icon=this.scene.add.image(-100,0,"fire_icon").setOrigin(.5).setDepth(2).setScale(.055),this.add(this.icon)):h==="b"?(this.icon=this.scene.add.image(-100,0,"water_icon").setOrigin(.5).setDepth(2).setScale(.05),this.add(this.icon)):h==="c"?(this.icon=this.scene.add.image(-100,0,"leaf_icon").setOrigin(.5).setDepth(2).setScale(.05),this.add(this.icon)):h===V.TIMEOUT_ACTION?(this.text=i.add.text(-100,0,h,{fontFamily:V.textStyle,color:V.COLORPACK_1.red_pink,fontStyle:"bold"}).setOrigin(.5).setFontSize(30*r*5).setDepth(2),this.add(this.text)):h===V.HIDDEN_ACTION?(this.text=i.add.text(-100,0,h,{fontFamily:V.textStyle,color:V.COLORPACK_1.red_pink,fontStyle:"bold"}).setOrigin(.5).setFontSize(30*r*5).setDepth(2),this.add(this.icon)):(this.text=i.add.text(-100,0,h,{fontFamily:V.textStyle,color:V.COLORPACK_1.red_pink,fontStyle:"bold"}).setOrigin(.5).setFontSize(30*r*5).setDepth(2),this.add(this.icon));else{this.tail_img=i.add.image(0,0,u).setDepth(1),this.middle_img=i.add.image(0,0,n).setDepth(1),this.head_img=i.add.image(0,0,a).setDepth(1);let g=this.head_img.width*r,m=this.middle_img.width*r,x=this.tail_img.width*r;if(f<g+x){this.middle_img.setVisible(!1);let T=f-x,S=f-g,C=T/g;this.head_img.scale=C;let E=S/x;this.tail_img.scale=E,this.head_img.x=0+T*this.head_img.scale/2,this.tail_img.x=0-S*this.tail_img.scale/2}else{let T=f-g-x,S=T/m;this.middle_img.scaleX=S,this.middle_img.x=0-this.head_img.width/2+o/5,this.head_img.x=this.middle_img.x+T/(2*r)+this.head_img.width/2,this.tail_img.x=this.middle_img.x-T/(2*r)-this.tail_img.width/2}let y;p>=0&&p<90?(y=l.clone().add(c.clone().rotate(Phaser.Math.DegToRad(270)).normalize().scale(25)),y.y=y.y+c.clone().normalize().scale(10).y,y.x=y.x+c.clone().scale(.07).x):(y=l.clone().add(c.clone().rotate(Phaser.Math.DegToRad(90)).normalize().scale(25)),y.y=y.y+c.clone().scale(.1).y,y.x=y.x+c.clone().scale(.05).x),h==="a"?this.icon=this.scene.add.image(y.x,y.y,"fire_icon").setOrigin(.5).setDepth(2).setScale(.055):h==="b"?this.icon=this.scene.add.image(y.x,y.y,"water_icon").setOrigin(.5).setDepth(2).setScale(.05):h==="c"?this.icon=this.scene.add.image(y.x,y.y,"leaf_icon").setOrigin(.5).setDepth(2).setScale(.05):h===V.TIMEOUT_ACTION?(this.text=i.add.text(0,0,h,{fontFamily:V.textStyle,color:V.COLORPACK_1.red_pink,fontStyle:"bold"}).setOrigin(.5).setFontSize(30*r*5).setDepth(2),this.text.x=Math.round(l.x+c.x*r),this.text.y=Math.round(l.y+c.y*r*.5)):h===V.HIDDEN_ACTION?(this.text=i.add.text(0,0,h,{fontFamily:V.textStyle,color:V.COLORPACK_1.red_pink,fontStyle:"bold"}).setOrigin(.5).setFontSize(30*r*5).setDepth(2),this.text.x=Math.round(l.x+c.x*r),this.text.y=Math.round(l.y+c.y*r*.5)):(this.text=i.add.text(0,0,h,{fontFamily:V.textStyle,color:V.COLORPACK_1.red_pink,fontStyle:"bold"}).setOrigin(.5).setFontSize(30*r*5).setDepth(2),this.text.x=Math.round(l.x+c.x*r),this.text.y=Math.round(l.y+c.y*r*.5)),this.add(this.tail_img),this.add(this.middle_img),this.add(this.head_img),this.angle=p,this.scale=r}this.x=Math.round(l.x),this.y=Math.round(l.y),i.add.existing(this),this.setDepth(1)}}class Lf extends Phaser.GameObjects.Container{constructor(i,e,d,t,s,u="",n=1){super(i,e,d);let a=new Phaser.Math.Vector2(t-e,s-d),h=new Phaser.Math.Vector2(e,d).add(a.clone().scale(.5));a.length();let r=Phaser.Math.RadToDeg(Phaser.Math.Angle.Normalize(a.angle()));e===t&&d===s?u==="a"?console.log("circular fire transition not implemented"):u==="b"?this.arrow=this.scene.add.image(-65,0,"water_arrow_circle").setOrigin(.5).setDepth(2).setScale(.09):u==="c"?console.log("circular plant transition not implemented"):u===V.TIMEOUT_ACTION?console.log("circular timeout transition not implemented"):u===V.HIDDEN_ACTION?console.log("circular tau transition not implemented"):console.log("circular "+u+" transition not implemented"):u==="a"?this.arrow=this.scene.add.image(0,0,"fire_arrow").setOrigin(.5).setDepth(0).setScale(.15):u==="b"?this.arrow=this.scene.add.image(0,0,"water_arrow").setOrigin(.5).setDepth(2).setScale(.15):u==="c"?this.arrow=this.scene.add.image(0,0,"plant_arrow").setOrigin(.5).setDepth(2).setScale(.15):u===V.TIMEOUT_ACTION?this.arrow=this.scene.add.image(0,0,"timeout_arrow").setOrigin(.5).setDepth(2).setScale(.15):u===V.HIDDEN_ACTION?this.arrow=this.scene.add.image(0,0,"tau_arrow").setOrigin(.5).setDepth(2).setScale(.15):console.log(u+" transition not implemented"),this.add(this.arrow),this.text!==void 0&&this.text.setFontSize(25).setResolution(2).setPosition(h.x,h.y),this.angle=r,this.scale=n,this.x=Math.round(h.x),this.y=Math.round(h.y),i.add.existing(this),this.setDepth(1)}}var Qi={setEventEmitter(v,i){return i===void 0&&(i=Phaser.Events.EventEmitter),this._privateEE=v===!0||v===void 0,this._eventEmitter=this._privateEE?new i:v,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(v){return this._eventEmitter&&v&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};const Ff=Phaser.Scene;var sn=function(v){return v instanceof Ff},Sl=function(v){if(v==null||typeof v!="object")return null;if(sn(v))return v;if(v.scene&&sn(v.scene))return v.scene;if(v.parent&&v.parent.scene&&sn(v.parent.scene))return v.parent.scene};const If=Phaser.Utils.Objects.GetValue;class me{constructor(i,e){this.parent=i,this.scene=Sl(i),this.isShutdown=!1,this.setEventEmitter(If(e,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(i){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(i){this.shutdown(i)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(i,e){this.destroy(e)}}Object.assign(me.prototype,Qi);var wf=function(v,i){if(this.scene.sys.scale.autoRound&&(v=Math.floor(v),i=Math.floor(i)),this.width===v&&this.height===i)return this;var e=this.node.style;return e.width=`${v}px`,e.height=`${i}px`,this.updateSize(),this};const Df=Phaser.Utils.Objects.GetValue;var Wa=function(v,i,e){e===void 0&&(e={});var d,t;for(var s in v)d=v[s],t=Df(i,s,d[1]),t!==void 0&&(e[d[0]]=t);return e},Bf=function(v,i,e){for(let d in e)i.addEventListener(d,function(t){v.emit(e[d],v,t)})},bf=function(v){v.addEventListener("touchstart",Fi,!1),v.addEventListener("touchmove",Fi,!1),v.addEventListener("touchend",Fi,!1),v.addEventListener("mousedown",Fi,!1),v.addEventListener("mouseup",Fi,!1),v.addEventListener("mousemove",Fi,!1)},Fi=function(v){v.stopPropagation()};const Gf=Phaser.GameObjects.DOMElement,Ha=Phaser.Utils.Objects.IsPlainObject,Ke=Phaser.Utils.Objects.GetValue;class Cl extends Gf{constructor(i,e,d,t,s,u){Ha(e)?(u=e,e=Ke(u,"x",0),d=Ke(u,"y",0),t=Ke(u,"width",0),s=Ke(u,"height",0)):Ha(t)&&(u=t,t=Ke(u,"width",0),s=Ke(u,"height",0)),u===void 0&&(u={});var n,a=Ke(u,"type","text");a==="textarea"?(n=document.createElement("textarea"),n.style.resize="none"):(n=document.createElement("input"),n.type=a),Wa($a,u,n);var h=Ke(u,"style",void 0);h=Wa(Ka,u,h);var r=n.style;for(var o in u)o in $a||o in Ka||o in r&&(h[o]=u[o]);h["box-sizing"]="border-box",super(i,e,d,n,h),this.type="rexInputText",this.resize(t,s),Bf(this,n,zf),bf(n),Ke(u,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(i){this.node.value=i}setText(i){return this.text=i,this}get maxLength(){return this.node.maxLength}set maxLength(i){this.node.maxLength=i}setMaxLength(i){return this.maxLength=i,this}get minLength(){return this.node.minLength}set minLength(i){this.node.minLength=i}setMinLength(i){return this.minLength=i,this}get placeholder(){return this.node.placeholder}set placeholder(i){this.node.placeholder=i}setPlaceholder(i){return this.placeholder=i,this}selectText(i,e){return i===void 0?this.node.select():this.node.setSelectionRange(i,e),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var i=this.node;return i.value.substring(i.selectionStart,i.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(i){this.node.setSelectionRange(i,i)}setCursorPosition(i){return i===void 0&&(i=0),this.cursorPosition=i,this}get tooltip(){return this.node.title}set tooltip(i){this.node.title=i}setTooltip(i){return this.tooltip=i,this}setTextChangedCallback(i){return this.onTextChanged=i,this}get readOnly(){return this.node.readOnly}set readOnly(i){this.node.readOnly=i}setReadOnly(i){return i===void 0&&(i=!0),this.readOnly=i,this}get spellCheck(){return this.node.spellcheck}set spellCheck(i){this.node.spellcheck=i}setSpellCheck(i){return this.spellCheck=i,this}get fontColor(){return this.node.style.color}set fontColor(i){this.node.style.color=i}setFontColor(i){return this.fontColor=i,this}setStyle(i,e){return this.node.style[i]=e,this}getStyle(i){return this.node.style[i]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(i){return i===void 0&&(i=!0),this.node.disabled=!i,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var Nf={resize:wf};Object.assign(Cl.prototype,Nf);const $a={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},Ka={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},zf={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",focus:"focus",blur:"blur",select:"select"},Vf=Phaser.GameObjects.Text;var El=function(v){return v instanceof Vf};const Ze=Phaser.Utils.Objects.GetValue;var Yf=function(v,i){i===void 0&&(i={});var e=v.scene,d=v.style,t=Ze(i,"backgroundColor",d.backgroundColor);t===null&&(t="transparent"),i.text=Ze(i,"text",v.text),i.fontFamily=Ze(i,"fontFamily",d.fontFamily),i.fontSize=Ze(i,"fontSize",d.fontSize),i.color=Ze(i,"color",d.color),i.backgroundColor=t,i.direction=Ze(i,"rtl",d.rtl)?"rtl":"ltr",i.align=Ze(i,"align",Uf(d)),i.direction==="rtl"&&El(v)&&(i.align="right");var s=new Cl(e,v.x,v.y,Ze(i,"width",v.width),Ze(i,"height",v.height),i);return s.setOrigin(v.originX,v.originY),e.add.existing(s),s},Uf=function(v){return v.hasOwnProperty("align")?v.align:v.hasOwnProperty("halign")?v.halign:"left"},na=function(v){return v&&typeof v=="function"};const bs=Phaser.Utils.Objects.GetValue;var Ii=void 0;class Xf extends me{constructor(i){super(i,{eventEmitter:!1}),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0}shutdown(i){this.isShutdown||(this.close(),Ii===this&&(Ii=void 0),super.shutdown(i))}open(i,e){Ii!==void 0&&Ii.close(),Ii=this,na(i)&&(e=i,i=void 0),e===void 0&&(e=bs(i,"onClose",void 0));var d=bs(i,"onOpen",void 0),t=bs(i,"onTextChanged",void 0);return this.inputText=Yf(this.parent,i).on("textchange",function(s){var u=s.text;t?t(this.parent,u):this.parent.text=u},this).setFocus(),this.parent.setVisible(!1),this.onClose=e,bs(i,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),d&&d(this.parent)},[],this),this}close(){return Ii=void 0,this.inputText?(this.parent.setVisible(!0),this.inputText.destroy(),this.inputText=void 0,this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this):this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}var Wf=function(v){return v===void 0&&(v=Hf),this.getFrameNameCallback=v,this},Hf=function(v,i,e){return e==="__BASE"?`${v},${i}`:`${e}_${v},${i}`},Ur=function(v){var i,e,d;if(typeof v!="object"||v===null)return v;i=Array.isArray(v)?[]:{};for(d in v)e=v[d],i[d]=Ur(e);return i},$f=function(v,i,e,d){Array.isArray(i)&&(d=e,e=i,i=void 0),i===void 0&&(i="__BASE"),e=Ur(e),d=Ur(d),this.textureKey=v,this.baseFrameName=i,this.columns.data=e,this.columns.count=e?e.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=d,this.rows.count=d?d.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var t=this.scene.sys.textures.get(v);if(!t)return this.clear(),this;if(!e||!d)return this.clear(),this;for(var s=t.get(i),u=s.width,n=0,a=0,h=e.length;a<h;a++)e[a]===void 0?n++:typeof e[a]=="number"?u-=e[a]:u-=e[a].width;for(var r=u/n,o=s.height,c=0,a=0,h=d.length;a<h;a++)d[a]===void 0?c++:typeof d[a]=="number"?o-=d[a]:o-=d[a].width;for(var l=o/c,f,p,g,m,x,y=0,T=0,S=0,C=d.length;S<C;S++){d[S]===void 0&&(d[S]=l),typeof d[S]=="number"&&(d[S]={height:d[S],stretch:S%2}),f=d[S],g=f.height,this.rows.stretch+=f.stretch|0,this.rows.minHeight+=f.stretch>0?0:g,y=0;for(var a=0,E=e.length;a<E;a++){if(e[a]===void 0&&(e[a]=r),typeof e[a]=="number"&&(e[a]={width:e[a],stretch:a%2}),p=e[a],m=p.width,S===0&&(this.columns.stretch+=p.stretch|0,this.columns.minWidth+=p.stretch>0?0:m),m>=1&&g>=1){x=this.getFrameNameCallback(a,S,i);var P=typeof x;(P==="string"||P==="number")&&t.add(x,0,y+s.cutX,T+s.cutY,m,g)}y+=m}T+=g}return this.updateTexture(),this},Kf=function(){if(this.clear(),this.textureKey===void 0)return this;var v=this.scene.sys.textures.get(this.textureKey);if(!v)return this;var i=this.columns.minWidth*this.maxFixedPartScaleX,e=this.rows.minHeight*this.maxFixedPartScaleY,d=this.width-i,t=this.height-e,s=d>=0?this.maxFixedPartScaleX:this.width/i,u=t>=0?this.maxFixedPartScaleY:this.height/e;if(this.preserveRatio){var n=Math.min(s,u);if(s>n){var a=(s-n)*i;d>=0?d+=a:d=a,s=n}if(u>n){var h=(u-n)*e;t>=0?t+=h:t=h,u=n}}this.columns.scale=s,this.rows.scale=u;var r;d>0?r=this.columns.stretch>0?d/this.columns.stretch:0:r=0;var o;t>0?o=this.rows.stretch>0?t/this.rows.stretch:0:o=0;for(var c,l,f,p,g,m=0,x=0,y,T=0,S=this.rows.count;T<S;T++){f=this.rows.data[T],g=f.stretch===0?f.height*u:o*f.stretch,m=0;for(var C=0,E=this.columns.count;C<E;C++)l=this.columns.data[C],p=l.stretch===0?l.width*s:r*l.stretch,c=this.getFrameNameCallback(C,T,this.baseFrameName),v.has(c)&&p>0&&g>0&&(f.stretch===0&&l.stretch===0||this.getStretchMode(C,T)===0?y=0:y=1,y===0?this._drawImage(this.textureKey,c,m,x,p,g):this._drawTileSprite(this.textureKey,c,m,x,p,g)),m+=p;x+=g}};const Zf=Phaser.Utils.Objects.IsPlainObject,Za=Phaser.Utils.Objects.GetValue;var kf=function(v){return Zf(v)?(this.stretchMode.edge=Xn(Za(v,"edge",0)),this.stretchMode.internal=Xn(Za(v,"internal",0))):(v=Xn(v),this.stretchMode.edge=v,this.stretchMode.internal=v),this},Xn=function(v){return typeof v=="string"&&(v=Jf[v]),v};const Jf={scale:0,repeat:1};var Qf=function(v,i){return v===0||v===this.columns.count-1||i===0||i===this.rows.count-1},jf=function(v,i){return Qf.call(this,v,i)?this.stretchMode.edge:this.stretchMode.internal},qf=function(v){return v==null&&(v=!0),this.preserveRatio=v,this},_f=function(v,i){return i===void 0&&(i=v),this.maxFixedPartScaleX=v,this.maxFixedPartScaleY=i,this},ri=function(){},tc={_drawImage:ri,_drawTileSprite:ri,setGetFrameNameCallback:Wf,setTexture:$f,updateTexture:Kf,setStretchMode:kf,getStretchMode:jf,setPreserveRatio:qf,setMaxFixedPartScale:_f};const es=Phaser.Utils.Objects.IsPlainObject,pt=Phaser.Utils.Objects.GetValue;var Pl=function(v,i){class e extends v{constructor(t,s,u,n,a,h,r,o,c,l){es(s)?(l=s,s=pt(l,"x",0),u=pt(l,"y",0),n=pt(l,"width",1),a=pt(l,"height",1),h=pt(l,"key",void 0),r=pt(l,"baseFrame",void 0),o=pt(l,"columns",void 0),c=pt(l,"rows",void 0)):es(n)?(l=n,n=pt(l,"width",1),a=pt(l,"height",1),h=pt(l,"key",void 0),r=pt(l,"baseFrame",void 0),o=pt(l,"columns",void 0),c=pt(l,"rows",void 0)):es(h)?(l=h,h=pt(l,"key",void 0),r=pt(l,"baseFrame",void 0),o=pt(l,"columns",void 0),c=pt(l,"rows",void 0)):es(r)?(l=r,r=pt(l,"baseFrame",void 0),o=pt(l,"columns",void 0),c=pt(l,"rows",void 0)):Array.isArray(r)?(l=c,c=o,o=r,r=pt(l,"baseFrame",void 0)):es(o)&&(l=o,o=pt(l,"columns",void 0),c=pt(l,"rows",void 0)),super(t),this.type=i,this.setPosition(s,u).setSize(n,a).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(pt(l,"getFrameNameCallback",void 0)),this.setStretchMode(pt(l,"stretchMode",0)),this.setPreserveRatio(pt(l,"preserveRatio",!0));var f=pt(l,"maxFixedPartScale",1),p=pt(l,"maxFixedPartScaleX",f),g=pt(l,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(p,g),this.setTexture(h,r,o,c)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(t,s){return this.width===t&&this.height===s?this:(super.resize(t,s),this.updateTexture(),this)}}return Object.assign(e.prototype,tc),e},Ml=function(v,i,e){return e===void 0&&(e="image"),v[i]||(v[i]=v.scene.make[e]({add:!1,origin:{x:0,y:0}}),v.once("destroy",function(){v[i]&&(v[i].destroy(),v[i]=void 0)})),v[i]},ec=function(v,i,e,d,t,s){var u=Ml(this,"_image","image").setTexture(v,i).setDisplaySize(t,s);this.draw(u,e,d)},ic=function(v,i,e,d,t,s){var u=Ml(this,"_tileSprite","tileSprite").setTexture(v,i).setSize(t,s);this.draw(u,e,d)},sc={_drawImage:ec,_drawTileSprite:ic};const nc=Phaser.GameObjects.RenderTexture;class rc extends Pl(nc,"rexNinePatch"){}Object.assign(rc.prototype,sc);const ac=Phaser.GameObjects.GetCalcMatrix;var oc=function(v,i,e,d){var t=i.getRenderList();if(t.length!==0){e.addToRenderList(i);var s=v.pipelines.set(i.pipeline),u=i.frame.glTexture,n=s.setGameObject(i),a=e.roundPixels,h=ac(i,e,d),r=s.calcMatrix.copyFrom(h.calc),o=i._displayOriginX,c=i._displayOriginY,l=e.alpha*i.alpha;v.pipelines.preBatch(i);for(var f=0,p=t.length;f<p;f++)t[f].webglRender(s,r,l,o,c,u,n,a);v.pipelines.postBatch(i)}};const hc=Phaser.Renderer.Canvas.SetTransform;var lc=function(v,i,e,d){var t=v.currentContext,s=i.getRenderList();if(!(s.length===0||!hc(v,t,i,e,d))){e.addToRenderList(i);var u=e.roundPixels,n=-i._displayOriginX,a=-i._displayOriginY;t.translate(n,a);for(var h=0,r=s.length;h<r;h++)s[h].canvasRender(t,n,a,u);t.restore()}},uc={renderWebGL:oc,renderCanvas:lc},Al=function(v,i){return this.texture=this.scene.sys.textures.get(v),this.frame=this.texture.get(i),this},ka=function(v,i){if(this.width===v&&this.height===i)return this;this.width=v,this.height=i,this.updateDisplayOrigin();var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=v,e.hitArea.height=i),this},dc=function(v){return this.lastAppendedChildren.length=0,Array.isArray(v)?(this.children.add(v),this.lastAppendedChildren.push(...v)):(this.children.add(v),this.lastAppendedChildren.push(v)),this};const fc=Phaser.Utils.Array.Remove;var cc=function(v){return this.poolManager&&this.poolManager.free(v),fc(this.children.list,v),this.lastAppendedChildren.length=0,this.dirty=!0,this},Ja=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},vc=function(){return this.lastAppendedChildren},pc=function(){return this.children.list},gc={setTint(v){return this.tint=v,this.tintFill=!1,this},setTintFill(v){return this.tint=v,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}},Ol={setTexture:Al,resize:ka,setSize:ka,addChild:dc,removeChild:cc,removeChildren:Ja,clear:Ja,getLastAppendedChildren:vc,getChildren:pc};Object.assign(Ol,gc);class Es{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(i){return this.items.push(i),this}pushMultiple(i){return this.items.push.apply(this.items,i),i.length=0,this}clear(){return this.items.length=0,this}}const mc=Phaser.Utils.Objects.GetValue;var xc={};class yc{constructor(i){this.pools=mc(i,"pools",xc)}destroy(){this.pools=void 0}free(i){if(!this.pools)return this;var e=i.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new Es),this.pools[e].push(i),i.onFree(),this}freeMultiple(i){if(!this.pools)return this;for(var e=0,d=i.length;e<d;e++)this.free(i[e]);return this}allocate(i){return!this.pools||!this.pools.hasOwnProperty(i)?null:this.pools[i].pop()}}const Tc=Phaser.GameObjects.GameObject,Sc=Phaser.Utils.Objects.IsPlainObject,is=Phaser.Utils.Objects.GetValue,Cc=Phaser.Structs.List,Ec=Phaser.Utils.Array.StableSort;class Rl extends Tc{constructor(i,e,d,t,s,u){Sc(e)&&(u=e,e=is(u,"x",0),d=is(u,"y",0),t=is(u,"texture"),s=is(u,"frame")),e===void 0&&(e=0),d===void 0&&(d=0),super(i,"rexBlitter"),this.children=new Cc,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var n=is(u,"reuseBob",!0);this.poolManager=n?new yc(u):void 0,this.setTexture(t,s).setPosition(e,d).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var i=!1,e=this.children.list,d=0,t=e.length;d<t;d++){var s=e[d];Pc(s)&&(this.renderList.push(s),i||(i=s.depth!==0))}i&&Ec(this.renderList,Mc),this.displayListDirty=!1}return this.renderList}}var Pc=function(v){return v.active&&v.visible&&v.alpha>0},Mc=function(v,i){return v._depth-i._depth};const xe=Phaser.GameObjects.Components;Phaser.Class.mixin(Rl,[xe.Alpha,xe.BlendMode,xe.ComputedSize,xe.Depth,xe.GetBounds,xe.Mask,xe.Origin,xe.Pipeline,xe.ScrollFactor,xe.Transform,xe.Visible,uc,Ol]);const Ll="image";/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var ue=function(v,i,e){if(!v||typeof v=="number")return e;if(v.hasOwnProperty(i))return v[i];if(i.indexOf(".")!==-1){for(var d=i.split("."),t=v,s=e,u=0;u<d.length;u++)if(t.hasOwnProperty(d[u]))s=t[d[u]],t=t[d[u]];else{s=e;break}return s}else return e},ni=function(v){if(typeof v!="object"||v===null)return v;if(Array.isArray(v))v.length=0;else for(var i in v)delete v[i];return v},mn={enableData(){return this.data===void 0&&(this.data={}),this},getData(v,i){return this.enableData(),v===void 0?this.data:ue(this.data,v,i)},setData(v,i){if(this.enableData(),arguments.length===1){var e=v;for(v in e)this.data[v]=e[v]}else this.data[v]=i;return this},incData(v,i,e){return e===void 0&&(e=0),this.enableData(),this.setData(v,this.getData(v,e)+i),this},mulData(v,i,e){return e===void 0&&(e=0),this.enableData(),this.setData(v,this.getData(v,e)*i),this},clearData(){return this.data&&ni(this.data),this}};class Fl{constructor(i,e){this.type=e,this.data=void 0,this.setParent(i).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(i){return this.parent=i,this}setDisplayListDirty(i){return i&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(i){this.setDisplayListDirty(this._active!=i),this._active=i}setActive(i){return i===void 0&&(i=!0),this.active=i,this}modifyPorperties(i){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}}Object.assign(Fl.prototype,mn);const Ac=Phaser.Math.DegToRad,Oc=Phaser.Math.RadToDeg,wi=Phaser.Utils.Objects.GetValue;class Rc extends Fl{get visible(){return this._visible}set visible(i){this.setDisplayListDirty(this._visible!=i),this._visible=i}setVisible(i){return i===void 0&&(i=!0),this.visible=i,this}get alpha(){return this._alpha}set alpha(i){this.setDisplayListDirty(!!this._alpha!=!!i),this._alpha=i}setAlpha(i){return this.alpha=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setPosition(i,e){return this.x=i,this.y=e,this}setRotation(i){return this.rotation=i,this}get angle(){return Oc(this.rotation)}set angle(i){this.rotation=Ac(i)}setAngle(i){return this.angle=i,this}setScaleX(i){return this.scaleX=i,this}get width(){return this._width}set width(i){this._width=i}setWidth(i,e){return e===void 0&&(e=!1),this.width=i,e&&(this.scaleY=this.scaleX),this}setScaleY(i){return this.scaleY=i,this}setScale(i,e){return e===void 0&&(e=i),this.scaleX=i,this.scaleY=e,this}get height(){return this._height}set height(i){this._height=i}setHeight(i,e){return e===void 0&&(e=!1),this.height=i,e&&(this.scaleX=this.scaleY),this}setScale(i,e){return e===void 0&&(e=i),this.scaleX=i,this.scaleY=e,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(i){this.scaleX=i/this._width}setDisplayWidth(i,e){return e===void 0&&(e=!1),this.displayWidth=i,e&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(i){this.scaleY=i/this._height}setDisplayHeight(i,e){return e===void 0&&(e=!1),this.displayHeight=i,e&&(this.scaleX=this.scaleY),this}setOriginX(i){return this.originX=i,this._displayOriginX=this.width*i,this}setOriginY(i){return this.originY=i,this._displayOriginY=this.height*i,this}setOrigin(i,e){return e===void 0&&(e=i),this.setOriginX(i).setOriginY(e),this}get depth(){return this._depth}set depth(i){this.setDisplayListDirty(this._depth!=i),this._depth=i}setDepth(i){return i===void 0&&(i=0),this.depth=i,this}modifyPorperties(i){if(!i)return this;i.hasOwnProperty("x")&&this.setX(i.x),i.hasOwnProperty("y")&&this.setY(i.y),i.hasOwnProperty("rotation")?this.setRotation(i.rotation):i.hasOwnProperty("angle")&&this.setAngle(i.angle),i.hasOwnProperty("alpha")&&this.setAlpha(i.alpha);var e=wi(i,"width",void 0),d=wi(i,"height",void 0),t=wi(i,"scale",void 0),s=wi(i,"scaleX",t),u=wi(i,"scaleY",t);e!==void 0?d===void 0&&u===void 0?this.setWidth(e,!0):this.setWidth(e):s!==void 0?this.setScaleX(s):i.hasOwnProperty("displayWidth")&&this.setDisplayWidth(i.displayWidth),d!==void 0?e===void 0&&s===void 0?this.setHeight(d,!0):this.setHeight(d):u!==void 0?this.setScaleY(u):i.hasOwnProperty("displayHeight")&&this.setDisplayHeight(i.displayHeight);var n=wi(i,"origin",void 0);return n!==void 0?this.setOrigin(n):(i.hasOwnProperty("originX")&&this.setOriginX(i.originX),i.hasOwnProperty("originY")&&this.setOriginY(i.originY)),i.hasOwnProperty("depth")&&this.setDepth(i.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(i,e,d,t,s,u,n,a){}canvasRender(i,e,d,t){}}const Lc=Phaser.GameObjects.Components.TransformMatrix,Fc=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var ye=new Lc,Ic=function(v,i,e,d,t,s,u,n){var a=this._width,h=this._height,r=a*this.originX,o=h*this.originY,c=this.x-d,l=this.y-t,f=1,p=1;this.flipX&&(c+=a-r*2,f=-1),this.flipY&&(l+=h-o*2,p=-1),ye.applyITRS(c,l,this.rotation,this.scaleX*f,this.scaleY*p),i.multiply(ye,ye);var g=-r,m=-o,x=g+a,y=m+h,T=ye.getXRound(g,m,n),S=ye.getXRound(g,y,n),C=ye.getXRound(x,y,n),E=ye.getXRound(x,m,n),P=ye.getYRound(g,m,n),M=ye.getYRound(g,y,n),O=ye.getYRound(x,y,n),A=ye.getYRound(x,m,n),R=this.frame.u0,F=this.frame.v0,I=this.frame.u1,B=this.frame.v1,N=Fc(this.tint,this.alpha*e);v.batchQuad(this.parent,T,P,S,M,C,O,E,A,R,F,I,B,N,N,N,N,this.tintFill,s,u)},wc=function(v,i,e,d){v.save();var t=this._width,s=this._height,u=t*this.originX,n=s*this.originY,a=this.x-u,h=this.y-n,r=1,o=1;this.flipX&&(a+=t,r=-1),this.flipY&&(h+=s,o=-1),d&&(a=Math.round(a),h=Math.round(h)),v.translate(a,h),v.rotate(this.rotation),v.scale(this.scaleX*r,this.scaleY*o);var c=this.frame;v.drawImage(c.source.image,c.cutX,c.cutY,t,s,0,0,t,s),v.restore()};const Dc=Phaser.Utils.Objects.IsPlainObject;class Il extends Rc{constructor(i,e){super(i,Ll),this.setFrame(e)}get width(){return this._width}set width(i){}get height(){return this._height}set height(i){}setFrame(i){return arguments.length>0&&!Dc(i)&&(i=this.parent.texture.get(i)),this.frame=i,this._width=i?i.width:0,this._height=i?i.height:0,this}setFlipX(i){return i===void 0&&(i=!0),this.flipX=i,this}setFlipY(i){return i===void 0&&(i=!0),this.flipY=i,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(i){this._tint=i}setTint(i){return this.tint=i,this.tintFill=!1,this}setTintFill(i){return this.tint=i,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(i){this._tintFill=i}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(i){return i?(i.hasOwnProperty("width")&&(i.displayWidth=i.width,delete i.width),i.hasOwnProperty("height")&&(i.displayHeight=i.height,delete i.height),i.hasOwnProperty("frame")&&this.setFrame(i.frame),super.modifyPorperties(i),i.hasOwnProperty("flipX")&&this.setFlipX(i.flipX),i.hasOwnProperty("flipY")&&this.setFlipY(i.flipY),i.hasOwnProperty("tint")&&this.setTint(i.tint),i.hasOwnProperty("tintFill")&&this.setTintFill(i.tintFill),this):this}}var Bc={webglRender:Ic,canvasRender:wc};Object.assign(Il.prototype,Bc);var wl=function(v,i){typeof i=="string"&&(i={frame:i});var e=v.poolManager?v.poolManager.allocate(Ll):null;return e===null?e=new Il(v):e.setParent(v).setActive(),e.modifyPorperties(i),v.addChild(e),e},bc=function(v,i,e,d,t,s){wl(this,{frame:i,x:e,y:d,width:t,height:s})},Gc=function(v,i,e,d,t,s){var u=this.texture.get(i),n=u.width,a=u.height,h=Math.floor(t/n),r=Math.floor(s/a);e+=(t-h*n)/2,d+=(s-r*a)/2;for(var o=0;o<h;o++)for(var c=0;c<r;c++)wl(this,{frame:i,x:e+o*n,y:d+c*a})},Nc={_drawImage:bc,_drawTileSprite:Gc};class zc extends Pl(Rl,"rexNinePatch2"){setTexture(i,e,d,t){return Al.call(this,i,"__BASE"),this.columns?(super.setTexture(i,e,d,t),this):this}}Object.assign(zc.prototype,Nc);const Vc=Phaser.Renderer.WebGL.Utils;var Yc=function(v,i,e,d){if(i.dirty&&(i.updateTexture(),i.dirty=!1),!(i.width===0||i.height===0)){e.addToRenderList(i);var t=i.frame,s=t.width,u=t.height,n=Vc.getTintAppendFloatAlpha,a=v.pipelines.set(i.pipeline,i),h=a.setTexture2D(t.glTexture,i);v.pipelines.preBatch(i),a.batchTexture(i,t.glTexture,s,u,i.x,i.y,s/i.resolution,u/i.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,s,u,n(i.tintTopLeft,e.alpha*i._alphaTL),n(i.tintTopRight,e.alpha*i._alphaTR),n(i.tintBottomLeft,e.alpha*i._alphaBL),n(i.tintBottomRight,e.alpha*i._alphaBR),i.tintFill,0,0,e,d,!1,h),v.pipelines.postBatch(i)}},Uc=function(v,i,e,d){i.dirty&&(i.updateTexture(),i.dirty=!1),!(i.width===0||i.height===0)&&(e.addToRenderList(i),v.batchSprite(i,i.frame,e,d))},Xc={renderWebGL:Yc,renderCanvas:Uc};const Wc=Phaser.Display.Color;var Hc={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(v){return this.context.fillStyle=v,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(v,i){var e=this,d=new Image;return d.onload=function(){e.width!==d.width||e.height!==d.height?e.resize(d.width,d.height):e.clear(),e.context.drawImage(d,0,0),e.updateTexture(),i&&i(),d.onload=null,d.src="",d.remove()},d.src=v,this},loadFromURLPromise(v){var i=this;return new Promise(function(e,d){i.loadFromURL(v,e)})},drawFrame(v,i,e,d,t,s){var u=this.scene.sys.textures.getFrame(v,i);return u?(e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=u.cutWidth),s===void 0&&(s=u.cutHeight),this.context.drawImage(u.source.image,u.cutX,u.cutY,u.cutWidth,u.cutHeight,e,d,t,s),this.dirty=!0,this):this},getDataURL(v,i){return this.canvas.toDataURL(v,i)},getPixel(v,i,e){e===void 0&&(e=new Wc);var d=this.context.getImageData(v,i,1,1);return e.setTo(d.data[0],d.data[1],d.data[2],d.data[3]),e},setPixel(v,i,e,d,t,s){if(typeof e!="number"){var u=e;e=u.red,d=u.green,t=u.blue,s=u.alpha}s===void 0&&(s=e!==0||d!==0||t!==0?255:0);var n=this.context.createImageData(1,1);return n.data[0]=e,n.data[1]=d,n.data[2]=t,n.data[3]=s,this.context.putImageData(n,v,i),this.dirty=!0,this}},$c=function(v,i,e,d,t,s,u){var n=v.sys.textures,a=v.renderer;d===void 0&&(d=0),t===void 0&&(t=0),s===void 0&&(s=i.width),u===void 0&&(u=i.height);var h;n.exists(e)?h=n.get(e):h=n.createCanvas(e,s,u);var r=h.getSourceImage();r.width!==s&&(r.width=s),r.height!==u&&(r.height=u);var o=r.getContext("2d");o.clearRect(0,0,s,u),o.drawImage(i,d,t,s,u),a.gl&&h&&a.canvasToTexture(r,h.source[0].glTexture,!0,0)},Kc={updateTexture(v,i){v&&(i?v.call(i,this.canvas,this.context):v(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},generateTexture(v,i,e,d,t){var s=this.canvas;return d===void 0?d=s.width:d*=this.resolution,t===void 0?t=s.height:t*=this.resolution,$c(this.scene,s,v,i,e,d,t),this},loadTexture(v,i){var e=this.scene.sys.textures.getFrame(v,i);return e?(this.width!==e.cutWidth||this.height!==e.cutHeight?this.setSize(e.cutWidth,e.cutHeight):this.clear(),this.drawFrame(v,i),this.dirty=!0,this):this}};const Qa=Phaser.Display.Canvas.CanvasPool,Zc=Phaser.GameObjects.GameObject;class xn extends Zc{constructor(i,e,d,t,s){e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=1),s===void 0&&(s=1),super(i,"rexCanvas"),this.renderer=i.sys.game.renderer,this.resolution=1,this._width=t,this._height=s,t=Math.max(Math.ceil(t*this.resolution),1),s=Math.max(Math.ceil(s*this.resolution),1),this.canvas=Qa.create(this,t,s),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(e,d),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=i.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0,i.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),Qa.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(i){this.setSize(i,this._height)}get height(){return this._height}set height(i){this.setSize(this._width,i)}setSize(i,e){return this._width===i&&this._height===e?this:(this._width=i,this._height=e,this.updateDisplayOrigin(),i=Math.max(Math.ceil(i*this.resolution),1),e=Math.max(Math.ceil(e*this.resolution),1),this.canvas.width=i,this.canvas.height=e,this.frame.setSize(i,e),this.dirty=!0,this)}get displayWidth(){return this.scaleX*this._width}set displayWidth(i){this.scaleX=i/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(i){this.scaleY=i/this._height}setDisplaySize(i,e){return this.displayWidth=i,this.displayHeight=e,this}getCanvas(i){return i||(this.dirty=!0),this.canvas}getContext(i){return i||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(i,e){return this.setSize(i,e),this}}const ae=Phaser.GameObjects.Components;Phaser.Class.mixin(xn,[ae.Alpha,ae.BlendMode,ae.Crop,ae.Depth,ae.Flip,ae.GetBounds,ae.Mask,ae.Origin,ae.Pipeline,ae.ScrollFactor,ae.Tint,ae.Transform,ae.Visible,Xc,Hc,Kc]);const kc=Phaser.Utils.String.Pad;var ft=function(v,i,e){if(v==null)return v;switch(typeof v){case"string":return v;case"number":return`#${kc(Math.floor(v).toString(16),6,"0",1)}`;case"function":return v(i,e);case"object":return v.hasOwnProperty("r")?v.hasOwnProperty("a")?`rgba(${v.r},${v.g},${v.b},${v.a})`:`rgb(${v.r},${v.g},${v.b})`:v.hasOwnProperty("h")?v.hasOwnProperty("a")?`hsla(${v.h},${v.s},${v.l},${v.a})`:`hsl(${v.h},${v.s},${v.l})`:v;default:return v}};const yn=Phaser.Math.DegToRad,ja=yn(0),qa=yn(90),_a=yn(180),to=yn(270);var Jc=function(v,i,e,d,t,s,u){var n=new yl(i,e,d,t,s),a=n.minWidth,h=n.minHeight,r=d>=a?1:d/a,o=t>=h?1:t/h,c=n.cornerRadius,l,f,p,g,m;v.save(),v.beginPath(),v.translate(i,e),l=c.br,f=l.x*r,p=l.y*o,g=d-f,m=t-p,v.moveTo(d,m),f>0&&p>0?Gs(v,g,m,f,p,ja,qa,u):(v.lineTo(d,t),v.lineTo(g,t)),l=c.bl,f=l.x*r,p=l.y*o,g=f,m=t-p,v.lineTo(f,t),f>0&&p>0?Gs(v,g,m,f,p,qa,_a,u):(v.lineTo(0,t),v.lineTo(0,m)),l=c.tl,f=l.x*r,p=l.y*o,g=f,m=p,v.lineTo(0,m),f>0&&p>0?Gs(v,g,m,f,p,_a,to,u):(v.lineTo(0,0),v.lineTo(g,0)),l=c.tr,f=l.x*r,p=l.y*o,g=d-f,m=p,v.lineTo(g,0),f>0&&p>0?Gs(v,g,m,f,p,to,ja,u):(v.lineTo(d,0),v.lineTo(d,m)),v.closePath(),v.restore()},Gs=function(v,i,e,d,t,s,u,n){if(n==null)v.ellipse(i,e,d,t,0,s,u);else{n+=1;for(var a,h,r,o=(u-s)/n,c=0;c<=n;c++)r=s+o*c,a=i+d*Math.cos(r),h=e+t*Math.sin(r),v.lineTo(a,h)}},Qc=function(v,i,e,d,t,s,u,n,a,h,r,o,c){if(Jc(i,e,d,t,s,u,c),n!=null){if(r!=null){var l;o?l=i.createLinearGradient(0,0,t,0):l=i.createLinearGradient(0,0,0,s),l.addColorStop(0,n),l.addColorStop(1,r),n=l}i.fillStyle=n,i.fill()}a!=null&&h>0&&(i.strokeStyle=a,i.lineWidth=h,i.stroke())},Dl=function(v,i,e,d,t,s,u,n){if(!(i==null&&e==null)){var a=v.canvas.width,h=v.canvas.height;e==null&&(d=0);var r=d/2;a-=d,h-=d,Qc(v.canvas,v.context,r,r,a,h,t,i,e,d,s,u,n)}};Phaser.Utils.Objects.GetValue;/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var jc=Phaser.Renderer.WebGL.Utils,qc=function(v,i,e,d){if(!(i.width===0||i.height===0)){e.addToRenderList(i);var t=i.frame,s=t.width,u=t.height,n=jc.getTintAppendFloatAlpha,a=v.pipelines.set(i.pipeline,i),h=a.setTexture2D(t.glTexture,i);v.pipelines.preBatch(i),a.batchTexture(i,t.glTexture,s,u,i.x,i.y,s/i.style.resolution,u/i.style.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,s,u,n(i.tintTopLeft,e.alpha*i._alphaTL),n(i.tintTopRight,e.alpha*i._alphaTR),n(i.tintBottomLeft,e.alpha*i._alphaBL),n(i.tintBottomRight,e.alpha*i._alphaBR),i.tintFill,0,0,e,d,!1,h),v.pipelines.postBatch(i)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var _c=function(v,i,e,d){i.width===0||i.height===0||(e.addToRenderList(i),v.batchSprite(i,i.frame,e,d))},tv={renderWebGL:qc,renderCanvas:_c};const Wn=Phaser.Display.Canvas.CanvasPool;var ev=function(v,i,e){e===void 0&&(e={});var d=Wn.create(this),t=d.getContext("2d");v.syncFont(d,t);var s=t.measureText(i),u=Math.ceil(s.width*v.baselineX),n=u,a=2*n;if(n=n*v.baselineY|0,d.width=u,d.height=a,t.fillStyle="#f00",t.fillRect(0,0,u,a),t.font=v._font,t.textBaseline="alphabetic",t.fillStyle="#000",t.fillText(v.testString,0,n),e.left=0,u===0||a===0||!t.getImageData(0,0,u,a))return Wn.remove(d),e;for(var h=t.getImageData(0,0,u,a).data,r=!1,o=0;o<u;o++){for(var c=0;c<a;c++){var l=(c*u+o)*4;if(h[l]!==255){e.left=o,r=!0;break}}if(r)break}return Wn.remove(d),e};const iv=Phaser.GameObjects.GameObject;class sv extends iv{setStyle(i){return this.style.setStyle(i)}setFont(i){return this.style.setFont(i)}setFontFamily(i){return this.style.setFontFamily(i)}setFontSize(i){return this.style.setFontSize(i)}setFontStyle(i){return this.style.setFontStyle(i)}setTestString(i){return this.style.setTestString(i)}setFixedSize(i,e){return this.style.setFixedSize(i,e)}setBackgroundColor(i,e,d){return this.style.setBackgroundColor(i,e,d)}setBackgroundStrokeColor(i,e){return this.style.setBackgroundStrokeColor(i,e)}setBackgroundCornerRadius(i,e){return this.style.setBackgroundCornerRadius(i,e)}setFill(i){return this.style.setFill(i)}setColor(i){return this.style.setColor(i)}setStroke(i,e){return this.style.setStroke(i,e)}setShadow(i,e,d,t,s,u){return this.style.setShadow(i,e,d,t,s,u)}setShadowOffset(i,e){return this.style.setShadowOffset(i,e)}setShadowColor(i){return this.style.setShadowColor(i)}setShadowBlur(i){return this.style.setShadowBlur(i)}setShadowStroke(i){return this.style.setShadowStroke(i)}setShadowFill(i){return this.style.setShadowFill(i)}setWrapMode(i){return this.style.setWrapMode(i)}setWrapWidth(i){return this.style.setWrapWidth(i)}setWordWrapWidth(i){return this.style.setWrapWidth(i)}setAlign(i){return this.style.setHAlign(i)}setHAlign(i){return this.style.setHAlign(i)}setVAlign(i){return this.style.setVAlign(i)}setLineSpacing(i){return this.style.setLineSpacing(i)}set lineSpacing(i){this.setLineSpacing(i)}get lineSpacing(){return this.style.lineSpacing}setXOffset(i){return this.style.setXOffset(i)}setMaxLines(i){return this.style.setMaxLines(i)}setResolution(i){return this.style.setResolution(i)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(i,e){return this.style.setTextMetrics(i,e)}measureTextMargins(i,e){return ev(this.style,i,e)}}const te=Phaser.GameObjects.Components;Phaser.Class.mixin(sv,[te.Alpha,te.BlendMode,te.ComputedSize,te.Crop,te.Depth,te.Flip,te.GetBounds,te.Mask,te.Origin,te.Pipeline,te.ScrollFactor,te.Tint,te.Transform,te.Visible,tv]);var nv={backgroundColor:["backgroundColor",null,ft],backgroundColor2:["backgroundColor2",null,ft],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,ft],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",ft],stroke:["stroke","#fff",ft],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",ft],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",ft],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const Ns=Phaser.Display.Canvas.CanvasPool;var eo=function(v){var i=Ns.create(this),e=i.getContext("2d");v.syncFont(i,e);var d=e.measureText(v.testString);if("actualBoundingBoxAscent"in d){var t=d.actualBoundingBoxAscent,s=d.actualBoundingBoxDescent,h={ascent:t,descent:s,fontSize:t+s};return Ns.remove(i),h}var u=Math.ceil(d.width*v.baselineX),n=u,a=2*n;n=n*v.baselineY|0,i.width=u,i.height=a,e.fillStyle="#f00",e.fillRect(0,0,u,a),e.font=v._font,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(v.testString,0,n);var h={ascent:0,descent:0,fontSize:0};if(!e.getImageData(0,0,u,a))return h.ascent=n,h.descent=n+6,h.fontSize=h.ascent+h.descent,Ns.remove(i),h;var r=e.getImageData(0,0,u,a).data,o=r.length,c=u*4,l,f,p=0,g=!1;for(l=0;l<n;l++){for(f=0;f<c;f+=4)if(r[p+f]!==255){g=!0;break}if(!g)p+=c;else break}for(h.ascent=n-l,p=o-c,g=!1,l=a;l>n;l--){for(f=0;f<c;f+=4)if(r[p+f]!==255){g=!0;break}if(!g)p-=c;else break}return h.descent=l-n,h.fontSize=h.ascent+h.descent,Ns.remove(i),h},Nt={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const rv=Phaser.Utils.Objects.GetAdvancedValue,oe=Phaser.Utils.Objects.GetValue;class Bl{constructor(i,e,d){this.parent=i,d===void 0&&(d=nv),this.propertyMap=d,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(e,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Nt.NO_WRAP&&this.wrapWidth===0}setStyle(i,e,d){if(e===void 0&&(e=!0),d===void 0&&(d=!1),i&&i.hasOwnProperty("wrap")){var t=i.wrap;if(t.hasOwnProperty("mode")){var s=t.mode;typeof s=="string"&&(t.mode=io[s])}else t.hasOwnProperty("width")&&(t.mode=1)}i&&i.rtl&&d&&!i.hasOwnProperty("halign")&&(i.halign="right"),i&&i.hasOwnProperty("fontSize")&&typeof i.fontSize=="number"&&(i.fontSize=i.fontSize.toString()+"px");var u=this.propertyMap;for(var n in u){var a=u[n],h=a[0],r=d?a[1]:this[n],o=a[2];if(n==="wrapCallback"||n==="wrapCallbackScope")this[n]=oe(i,h,r);else{var c=rv(i,h,r);o&&(c=o(c)),this[n]=c}}var l=oe(i,"font",null);l===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=l;var f=oe(i,"fill",null);f!==null&&(this.color=ft(f));var p=oe(i,"metrics",!1);return p?this.metrics={ascent:oe(p,"ascent",0),descent:oe(p,"descent",0),fontSize:oe(p,"fontSize",0)}:(e||!this.metrics)&&(this.metrics=eo(this)),e?this.parent.updateText():this.parent}syncFont(i,e){e.font=this._font}syncStyle(i,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}syncShadow(i,e){e?(i.shadowOffsetX=this.shadowOffsetX,i.shadowOffsetY=this.shadowOffsetY,i.shadowColor=this.shadowColor,i.shadowBlur=this.shadowBlur):(i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowColor=0,i.shadowBlur=0)}update(i){return i&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=eo(this)),this.parent.updateText(i)}buildFont(){var i=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return i!==this._font&&(this._font=i),this}setFont(i){return typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=oe(i,"fontFamily","Courier"),this.fontSize=oe(i,"fontSize","16px"),this.fontStyle=oe(i,"fontStyle","")),this.update(!0)}setFontFamily(i){return this.fontFamily=i,this.update(!0)}setFontStyle(i){return this.fontStyle=i,this.update(!0)}setFontSize(i){return typeof i=="number"&&(i=i.toString()+"px"),this.fontSize=i,this.update(!0)}setTestString(i){return this.testString=i,this.update(!0)}setFixedSize(i,e){return this.fixedWidth=i,this.fixedHeight=e,i&&(this.parent.width=i),e&&(this.parent.height=e),this.update(this.isWrapFitMode)}setResolution(i){return this.resolution=i,this.update(!1)}setLineSpacing(i){return this.lineSpacing=i,this.update(!1)}setXOffset(i){return this.xOffset=i,this.update(!1)}setBackgroundColor(i,e,d){return d===void 0&&(d=!0),this.backgroundColor=ft(i,this.parent.canvas,this.parent.context),this.backgroundColor2=ft(e,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=d,this.update(!1)}setBackgroundStrokeColor(i,e){return this.backgroundStrokeColor=ft(i,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=e,this.update(!1)}setBackgroundCornerRadius(i,e){return this.backgroundCornerRadius=i,this.backgroundCornerIteration=e,this.update(!1)}setFill(i){return this.color=ft(i,this.parent.canvas,this.parent.context),this.update(!1)}setColor(i){return this.color=ft(i,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(i,e){return i===void 0?this.strokeThickness=0:(e===void 0&&(e=this.strokeThickness),this.stroke=ft(i,this.parent.canvas,this.parent.context),this.strokeThickness=e),this.update(!0)}setShadow(i,e,d,t,s,u){return i===void 0&&(i=0),e===void 0&&(e=0),d===void 0&&(d="#000"),t===void 0&&(t=0),s===void 0&&(s=!1),u===void 0&&(u=!0),this.shadowOffsetX=i,this.shadowOffsetY=e,this.shadowColor=ft(d,this.parent.canvas,this.parent.context),this.shadowBlur=t,this.shadowStroke=s,this.shadowFill=u,this.update(!1)}setShadowOffset(i,e){return i===void 0&&(i=0),e===void 0&&(e=i),this.shadowOffsetX=i,this.shadowOffsetY=e,this.update(!1)}setShadowColor(i){return i===void 0&&(i="#000"),this.shadowColor=ft(i,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(i){return i===void 0&&(i=0),this.shadowBlur=i,this.update(!1)}setShadowStroke(i){return this.shadowStroke=i,this.update(!1)}setShadowFill(i){return this.shadowFill=i,this.update(!1)}setUnderline(i,e,d){return i===void 0&&(i="#000"),e===void 0&&(e=0),d===void 0&&(d=0),this.underlineColor=ft(i,this.parent.canvas,this.parent.context),this.underlineThickness=e,this.underlineOffset=d,this.update(!1)}setUnderlineColor(i){return i===void 0&&(i="#000"),this.underlineColor=ft(i,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(i){return i===void 0&&(i=0),this.underlineThickness=i,this.update(!1)}setUnderlineOffset(i){return i===void 0&&(i=0),this.underlineOffset=i,this.update(!1)}setWrapMode(i){return typeof i=="string"&&(i=io[i.toLowerCase()]||0),this.wrapMode=i,this.update(!0)}setWrapWidth(i){return this.wrapWidth=i,this.update(!1)}setAlign(i,e){return i===void 0&&(i="left"),e===void 0&&(e="top"),this.halign=i,this.valign=e,this.update(!1)}setHAlign(i){return i===void 0&&(i="left"),this.halign=i,this.update(!1)}setVAlign(i){return i===void 0&&(i="top"),this.valign=i,this.update(!1)}setMaxLines(i){return i===void 0&&(i=0),this.maxLines=i,this.update(!1)}getTextMetrics(){var i=this.metrics;return{ascent:i.ascent,descent:i.descent,fontSize:i.fontSize}}setTextMetrics(i,e){return this.metrics.ascent=i.ascent,this.metrics.descent=i.descent,this.metrics.fontSize=i.fontSize,e&&(typeof e=="string"?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=oe(e,"fontFamily",this.fontFamily),this.fontSize=oe(e,"fontSize",this.fontSize),this.fontStyle=oe(e,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var i={},e=this.propertyMap;for(var d in e)i[d]=this[d];return i.metrics=this.getTextMetrics(),i}destroy(){this.parent=void 0}}const io={none:Nt.NO_WRAP,word:Nt.WORD_WRAP,char:Nt.CHAR_WRAP,character:Nt.CHAR_WRAP};var av={draw(v,i,e,d){var t=this.penManager;this.hitAreaManager.clear();var s=this.context;s.save();var u=this.defaultStyle;this.clear(),Dl(this,u.backgroundColor,u.backgroundStrokeColor,u.backgroundStrokeLineWidth,u.backgroundCornerRadius,u.backgroundColor2,u.backgroundHorizontalGradient,u.backgroundCornerIteration),v+=this.startXOffset,i+=this.startYOffset;var n=u.halign,a=u.valign,h,r=u.lineHeight,o=t.lines,c=o.length,l=u.maxLines,f,p,g;l>0&&c>l?(f=l,a==="center"?p=Math.floor((c-f)/2):a==="bottom"?p=c-f:p=0):(f=c,p=0),g=p+f;var m,x,y=this.rtl,T=y?this.parent.width:void 0;a==="center"?x=Math.max((d-f*r)/2,0):a==="bottom"?x=Math.max(d-f*r-2,0):x=0,x+=i;for(var S=p;S<g;S++)if(h=t.getLineWidth(S),h!==0){for(var C=o[S],E=C.length,P=n,M=0;M<E;M++){var O=C[M].prop.align;if(O!==void 0){P=O;break}}P==="center"?m=(e-h)/2:P==="right"?m=y?0:e-h:m=y?e-h:0,m+=v;for(var M=0;M<E;M++)this.drawPen(C[M],m,x,T)}s.restore()},drawPen(v,i,e,d){i+=v.x,e+=v.y+(v.prop.y||0),d!==void 0&&(i=d-i);var t=this.canvas,s=this.context;s.save();var u=this.parser.propToContextStyle(this.defaultStyle,v.prop);u.buildFont(),u.syncFont(t,s),u.syncStyle(t,s),u.underlineThickness>0&&v.width>0&&this.drawUnderline(i,e,v.width,u),v.isTextPen&&this.drawText(i,e,v.text,u),v.isImagePen&&this.drawImage(i,e,v.prop.img,u),s.restore(),v.hasAreaMarker&&v.width>0&&this.hitAreaManager.add(v.prop.area,i,e-this.startYOffset,v.width,this.defaultStyle.lineHeight)},clear(){var v=this.canvas;this.context.clearRect(0,0,v.width,v.height)},drawUnderline(v,i,e,d){i+=d.underlineOffset-d.underlineThickness/2,this.autoRound&&(v=Math.round(v),i=Math.round(i));var t=this.context,s=t.lineCap;t.lineCap="butt",t.strokeStyle=d.underlineColor,t.lineWidth=d.underlineThickness,t.beginPath(),t.moveTo(v,i),t.lineTo(v+e,i),t.stroke(),t.lineCap=s},drawText(v,i,e,d){this.autoRound&&(v=Math.round(v),i=Math.round(i));var t=this.context;d.stroke&&d.stroke!=="none"&&d.strokeThickness>0&&(d.syncShadow(t,d.shadowStroke),t.strokeText(e,v,i)),d.color&&d.color!=="none"&&(d.syncShadow(t,d.shadowFill),t.fillText(e,v,i))},drawImage(v,i,e,d){i-=this.startYOffset,this.parent.imageManager.draw(e,this.context,v,i,this.autoRound)}};const ui=Phaser.Utils.Objects.GetValue,ov=Nt.NO_NEWLINE,so=Nt.RAW_NEWLINE;class hv{constructor(i){this.prop={},this.resetFromJSON(i)}resetFromJSON(i){this.text=ui(i,"text",""),this.x=ui(i,"x",0),this.y=ui(i,"y",0),this.width=ui(i,"width",0);var e=ui(i,"prop",null);e===null&&(e={}),this.prop=e,this.newLineMode=ui(i,"newLineMode",0),this.startIndex=ui(i,"startIndex",0)}get plainText(){var i=this.text;return this.newLineMode===so&&(i+=`
`),i}get wrapText(){var i=this.text;return this.newLineMode!==ov&&(i+=`
`),i}get rawTextLength(){var i=this.text.length;return this.newLineMode===so&&(i+=1),i}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}var Ai=function(v,i){var e=Array.isArray(v);if(i===void 0?i=e?[]:{}:ni(i),e){i.length=v.length;for(var d=0,t=v.length;d<t;d++)i[d]=v[d]}else for(var s in v)i[s]=v[s];return i};const no=Phaser.Utils.Objects.GetFastValue,ro=Nt.NO_NEWLINE,lv=Nt.WRAPPED_NEWLINE;class ra{constructor(i){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=i.pensPool,this.linesPool=i.linesPool,this.tagToText=no(i,"tagToText",ri),this.tagToTextScope=no(i,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var i=0,e=this.lines.length;i<e;i++)this.lines[i].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(i,e,d,t,s,u){var n=this.pensPool.pop();return n==null&&(n=new hv),di.text=i,di.x=e,di.y=d,di.width=t,di.prop=s,di.newLineMode=u,n.resetFromJSON(di),this.addPen(n),this}addImagePen(i,e,d,t){return this.addTextPen("",i,e,d,t,ro),this}addNewLinePen(){var i=this.lastPen,e=i?i.lastX:0,d=i?i.y:0,t=i?Ai(i.prop):null;return this.addTextPen("",e,d,0,t,lv),this}addPen(i){var e=this.lastPen;e==null?i.startIndex=0:i.startIndex=e.endIndex,this.pens.push(i);var d=this.lastLine;d==null&&(d=this.linesPool.pop()||[],this.lines.push(d)),d.push(i),i.newLineMode!==ro&&(d=this.linesPool.pop()||[],this.lines.push(d)),this.maxLinesWidth=void 0}clone(i){i==null&&(i=new ra),i.clear();for(var e=0,d=this.lines.length;e<d;e++)for(var t=this.lines[e],s=0,u=t.length;s<u;s++){var n=t[s];i.addPen(n.text,n.x,n.y,n.width,Ai(n.prop),n.newLineMode)}return i}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(i){if(i>=this.lines.length)return this.getLineEndIndex(i);var e=this.lines[i];return e&&e[0]?e[0].startIndex:0}getLineEndIndex(i){i>=this.lines.length&&(i=this.lines.length-1);var e,d=!1,t;for(e=i;e>=0&&(t=this.lines[e],d=t!=null&&t.length>0,!d);e--);if(!d)return 0;var s=t[t.length-1];return s.endIndex}getLineWidth(i){var e=this.lines[i];if(!e)return 0;var d=e[e.length-1];if(d==null)return 0;var t=d.lastX;return t}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var i,e=0,d=0,t=this.lines.length;d<t;d++)i=this.getLineWidth(d),i>e&&(e=i);return this.maxLinesWidth=e,e}getLineWidths(){for(var i=[],e=0,d=this.lines.length;e<d;e++)i.push(this.getLineWidth(e));return i}get linesCount(){return this.lines.length}get plainText(){for(var i="",e=this.pens,d=0,t=e.length;d<t;d++)i+=e[d].plainText;return i}get rawTextLength(){for(var i=0,e=this.pens,d=0,t=this.pens.length;d<t;d++)i+=e[d].rawTextLength;return i}getSliceTagText(i,e,d){if(i===void 0&&(i=0),e===void 0){var t=this.lastPen;if(t==null)return"";e=t.endIndex}d===void 0&&(d=!1);for(var s="",u,n,a,h,r,o,c,l=0,f=this.pens.length;l<f&&(u=this.pens[l],h=u.endIndex,!(!(h<=i)&&(u=this.pens[l],n=d?u.wrapText:u.plainText,o=u.prop,a=u.startIndex,r=a>=i&&h<=e,r||(n=n.substring(i-a,e-a)),this.tagToTextScope?s+=this.tagToText.call(this.tagToTextScope,n,o,c):s+=this.tagToText(n,o,c),c=o,h>=e)));l++);return s}get length(){return this.lines.length}set length(i){this.clear()}}var di={};const uv=Phaser.Geom.Rectangle;var ao=new Es;class dv{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return ao.pushMultiple(this.hitAreas),this}add(i,e,d,t,s){var u=ao.pop();return u===null?u=new uv(e,d,t,s):u.setTo(e,d,t,s),u.key=i,this.hitAreas.push(u),this}getFirst(i,e){for(var d=0,t=this.hitAreas.length;d<t;d++){var s=this.hitAreas[d];if(s.contains(i,e))return s}return null}drawBounds(i,e,d){e===void 0&&(e=16777215),d&&i.save().scaleCanvas(d.scaleX,d.scaleY).rotateCanvas(d.rotation).translateCanvas(d.x,d.y);for(var t=0,s=this.hitAreas.length;t<s;t++){var u=this.hitAreas[t];i.lineStyle(1,e).strokeRect(u.x,u.y,u.width,u.height)}return d&&i.restore(),this}}var fv=function(){this.parent.on("pointerdown",cv,this).on("pointerup",vv,this).on("pointermove",Hn,this).on("pointerover",Hn,this).on("pointerout",function(v,i){Hn.call(this,v,null,null,i)},this)},cv=function(v,i,e,d){var t=this.hitAreaManager.getFirst(i,e);t!==null&&gs.call(this,"areadown",t.key,v,i,e,d)},vv=function(v,i,e,d){var t=this.hitAreaManager.getFirst(i,e);t!==null&&gs.call(this,"areaup",t.key,v,i,e,d)},Hn=function(v,i,e,d){if(i===null){this.lastHitAreaKey!==null&&gs.call(this,"areaout",this.lastHitAreaKey,v,i,e,d),this.lastHitAreaKey=null;return}var t=this.hitAreaManager.getFirst(i,e),s=t?t.key:null;this.lastHitAreaKey!==s&&(this.lastHitAreaKey!==null&&gs.call(this,"areaout",this.lastHitAreaKey,v,i,e,d),s!==null&&gs.call(this,"areaover",s,v,i,e,d),this.lastHitAreaKey=s)},gs=function(v,i,e,d,t,s){this.parent.emit(`${v}-${i}`,e,d,t,s),this.parent.emit(v,i,e,d,t,s)};const pv=Nt.NO_NEWLINE,gv=Nt.RAW_NEWLINE,$n=Nt.WRAPPED_NEWLINE,oo=Nt.NO_WRAP,mv=Nt.WORD_WRAP,xv=Nt.CHAR_WRAP,yv=Nt.SPLITREGEXP;var bl=function(v,i,e,d,t,s){d<=0&&(e=oo);var u=[];if(!v||!v.length)return u;for(var n=e===oo,a=e===mv,h=v.split(yv),r,o,c,l=0,f=h.length;l<f;l++){if(r=h[l],c=l===f-1?pv:gv,n){var p=i(r);u.push(s.getLine(r,p,c));continue}if(o=l===0?d-t:d,r.length<=100){var p=i(r);if(p<=o){u.push(s.getLine(r,p,c));continue}}var g,m;a?(g=r.split(" "),m=g[g.length-1]==="",m&&(g.length-=1)):g=r;for(var x,y,T,S="",C=0,E,P=a?i(" "):void 0,M=0,O=g.length;M<O;M++){if(x=g[M],y=i(x),T=M===O-1,a&&(!T||m)&&(x+=" ",y+=P),a&&y>d){S!==""?u.push(s.getLine(S,C,$n)):M===0&&t>0&&u.push(s.getLine("",0,$n)),u.push(...bl(x,i,xv,d,0,s));var A=u.pop();S=A.text,C=A.width,s.freeLine(A),S===" "&&(S="",C=0);continue}E=C+y,E>o?(u.push(s.getLine(S,C,$n)),S=x,C=y,o=d):(S+=x,C=E),T&&u.push(s.getLine(S,C,c))}}return u};const Kn=Phaser.Utils.Objects.GetValue,Tv=Nt.NO_WRAP,Sv=Nt.NO_NEWLINE;class Cv{constructor(i){this.parent=i.parent,this.context=Kn(i,"context",null),this.canvas=this.context.canvas,this.parser=Kn(i,"parser",null),this.defaultStyle=Kn(i,"style",null),this.autoRound=!0,this.pensPool=i.pensPool,this.linesPool=i.linesPool,this.wrapTextLinesPool=i.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new dv,this.lastHitAreaKey=null;var e=this.context;this.getTextWidth=function(d){return e.measureText(d).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(i,e,d,t,s){if(s===void 0&&(s=this.penManager),s.clear(),i==="")return s;var u=this.parent.style;if(u.isWrapFitMode){var n=this.parent.padding;d=u.fixedWidth-n.left-n.right}for(var a=this.canvas,h=this.context,r=function(B){return h.measureText(B).width},o=0,c=0,l=u.wrapCallback,f=u.wrapCallbackScope,p=!0,g,m,x,y=this.parser.splitText(i),T,S,C=this.wrapTextLinesPool,E=0,P=y.length;E<P;E++)if(T=this.parser.tagTextToProp(y[E],m),g=T.plainText,m=T.prop,m.img){var M=this.imageManager.getOuterWidth(m.img);d>0&&e!==Tv&&d<o+M&&(s.addNewLinePen(),c+=t,o=0),s.addImagePen(o,c,M,Ai(m)),o+=M}else if(g!==""){if(h.save(),x=this.parser.propToContextStyle(this.defaultStyle,m),x.buildFont(),x.syncFont(a,h),x.syncStyle(a,h),!l)S=bl(g,r,e,d,o,C);else{S=l.call(f,g,r,d,o),typeof S=="string"&&(S=S.split(`
`));for(var R,O=0,A=S.length;O<A;O++)R=S[O],typeof R=="string"?S[O]=C.getLine(R,r(R),O<A-1?2:0):p=!1}for(var R,O=0,A=S.length;O<A;O++)R=S[O],s.addTextPen(R.text,o,c,R.width,Ai(m),R.newLineMode),R.newLineMode!==Sv?(o=0,c+=t):o+=R.width;p&&C.freeLines(S),S=null,h.restore()}for(var E=0,P=this.lines.length;E<P;E++){var F=this.lines[E],I=F[F.length-1];I&&(I.width+=this.parser.getStrokeThinkness(this.defaultStyle,I.prop))}return s}get startXOffset(){var i=this.defaultStyle;return i.strokeThickness/2+i.xOffset}get startYOffset(){var i=this.defaultStyle;return i.strokeThickness/2+i.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var i=this.penManager.linesCount,e=this.defaultStyle.maxLines;return e>0&&i>e&&(i=e),i}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var i=this.desplayLinesCount,e=this.defaultStyle.lineHeight*i;return i>0&&(e-=this.defaultStyle.lineSpacing),e}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new ra({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(i,e,d){var t;if(i==null)t=this.penManager.plainText;else{var s=this.parser.splitText(i,1);t="";for(var u=0,n=s.length;u<n;u++)t+=s[u]}return(e!=null||d!=null)&&(e==null&&(e=0),d==null&&(d=t.length),t=t.substring(e,d)),t}getPenManager(i,e){if(i===void 0)return this.copyPenManager(e,this.penManager);e===void 0&&(e=this.newPenManager());var d=this.defaultStyle;return this.updatePenManager(i,d.wrapMode,d.wrapWidth,d.lineHeight,e),e}getText(i,e,d,t){if(i==null)return this.penManager.getSliceTagText(e,d,t);var s=this.tmpPenManager,u=this.defaultStyle;return this.updatePenManager(i,u.wrapMode,u.wrapWidth,u.lineHeight,s),s.getSliceTagText(e,d,t)}copyPenManager(i,e){return e===void 0&&(e=this.penManager),e.copy(i)}getTextWidth(i){return i===void 0&&(i=this.penManager),i.getMaxLineWidth()}getLastPen(i){return i===void 0&&(i=this.penManager),i.lastPen}}var Ev={setInteractive:fv};Object.assign(Cv.prototype,av,Ev);const Zn=Phaser.Utils.Objects.GetValue;var kn=function(v,i){i===void 0&&(i={key:v}),i.hasOwnProperty("key")||(i.key=v);var e=i.key,d=i.frame,t=i.width,s=i.height;if(t===void 0||s===void 0){var u=this.textureManager.getFrame(e,d),n=u?u.cutWidth:0,a=u?u.cutHeight:0;t===void 0&&s===void 0?(t=n,s=a):t===void 0?t=n*(s/a):s===void 0&&(s=a*(t/n))}this.images[v]={key:e,frame:d,width:t,height:s,y:Zn(i,"y",0),left:Zn(i,"left",0),right:Zn(i,"right",0)}},Pv=function(v,i,e,d,t){var s=this.get(v);e+=s.left,d+=s.y,t&&(e=Math.round(e),d=Math.round(d));var u=this.textureManager.getFrame(s.key,s.frame);i.drawImage(u.source.image,u.cutX,u.cutY,u.cutWidth,u.cutHeight,e,d,s.width,s.height)};class Gl{constructor(i){this.textureManager=i.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(i,e){if(typeof i=="string")kn.call(this,i,e);else if(Array.isArray(i))for(var d=i,t=0,s=d.length;t<s;t++)kn.call(this,d[t]);else{var d=i;for(var i in d)kn.call(this,i,d[i])}return this}has(i){return this.images.hasOwnProperty(i)}remove(i){return this.has(i)&&delete this.images[i],this}get(i){return this.has(i)||this.textureManager.exists(i)&&this.add(i),this.images[i]}getOuterWidth(i){var e=this.get(i);return e?e.width+e.left+e.right:0}getFrame(i){var e=this.get(i);return e?this.textureManager.getFrame(e.key,e.frame):void 0}hasTexture(i){return!!this.getFrame(i)}}var Mv={draw:Pv};Object.assign(Gl.prototype,Mv);Phaser.Utils.Objects.IsPlainObject;Phaser.DOM.AddToDOM;Phaser.Display.Canvas.CanvasPool;Phaser.GameObjects.GameObject;Phaser.Utils.Objects.GetValue;Phaser.DOM.RemoveFromDOM;var kt=function(v,i){return i===void 0?`\\[${v}\\]`:`\\[${v}=(${i})\\]`},re=function(v){return`\\[/${v}\\]`};const aa="[-.0-9]+",oa="[a-z]+|#[0-9abcdef]+",ha="[^\\]]+",Nl="esc",zl=kt(Nl),Vl=re(Nl),Yl="raw",Ul=kt(Yl),Xl=re(Yl),Wl="b",Hl=kt(Wl),$l=re(Wl),Kl="i",Zl=kt(Kl),kl=re(Kl),Jl="weight",Ql=kt(Jl,aa),jl=re(Jl),ql="size",_l=kt(ql,aa),tu=re(ql),eu="color",iu=kt(eu,oa),su=re(eu),la="u",nu=kt(la),ru=kt(la,oa),au=re(la),ou="shadow",hu=kt(ou),lu=re(ou),ua="stroke",uu=kt(ua),du=kt(ua,oa),fu=re(ua),cu="y",vu=kt(cu,aa),pu=re(cu),gu="img",mu=kt(gu,ha),xu=re(gu),yu="area",Tu=kt(yu,ha),Su=re(yu),Cu="align",Eu=kt(Cu,ha),Pu=re(Cu),Mu=new RegExp(zl,"i"),Xr=new RegExp(Vl,"i"),Au=new RegExp(Ul,"i"),Wr=new RegExp(Xl,"i"),Av=new RegExp(Hl,"i"),Ov=new RegExp($l,"i"),Rv=new RegExp(Zl,"i"),Lv=new RegExp(kl,"i"),ho=new RegExp(Ql,"i"),Fv=new RegExp(jl,"i"),lo=new RegExp(_l,"i"),Iv=new RegExp(tu,"i"),uo=new RegExp(iu,"i"),wv=new RegExp(su,"i"),Dv=new RegExp(nu,"i"),fo=new RegExp(ru,"i"),Bv=new RegExp(au,"i"),bv=new RegExp(hu,"i"),Gv=new RegExp(lu,"i"),Nv=new RegExp(uu,"i"),co=new RegExp(du,"i"),zv=new RegExp(fu,"i"),vo=new RegExp(vu,"i"),Vv=new RegExp(pu,"i"),po=new RegExp(mu,"i"),Yv=new RegExp(xu,"i"),go=new RegExp(Tu,"i"),Uv=new RegExp(Su,"i"),mo=new RegExp(Eu,"i"),Xv=new RegExp(Pu,"i"),xo=new RegExp([Ul,Xl,zl,Vl,Hl,$l,Zl,kl,Ql,jl,_l,tu,iu,su,nu,ru,au,hu,lu,uu,du,fu,vu,pu,mu,xu,Tu,Su,Eu,Pu].join("|"),"ig");var Wv=function(v,i){for(var e=[],d=0,t=!1,s=!1;;){var u=xo.exec(v);if(!u)break;var n=u[0];if(s)if(Xr.test(n))s=!1;else continue;else if(t)if(Wr.test(n))t=!1;else continue;else Mu.test(n)?s=!0:Au.test(n)&&(t=!0);var a=xo.lastIndex,h=a-n.length;if(d<h){var r=v.substring(d,h);e.push(r)}i===void 0&&e.push(n),d=a}var o=v.length;return d<o&&e.push(v.substring(d,o)),e};const zt=!1,Vt=!0;var Hv={plainText:null,prevProp:null},$v=function(v,i){i==null&&(i={});var e="";if(i.img&&ut(i,zt,"img"),i.esc)Xr.test(v)?ut(i,zt,"esc"):e=v;else if(i.raw)Wr.test(v)?ut(i,zt,"raw"):e=v;else if(Mu.test(v))ut(i,Vt,"esc",!0);else if(Xr.test(v))ut(i,zt,"esc");else if(Au.test(v))ut(i,Vt,"raw",!0);else if(Wr.test(v))ut(i,zt,"raw");else if(Av.test(v))ut(i,Vt,"b",!0);else if(Ov.test(v))ut(i,zt,"b");else if(Rv.test(v))ut(i,Vt,"i",!0);else if(Lv.test(v))ut(i,zt,"i");else if(ho.test(v)){var d=v.match(ho);ut(i,Vt,"weight",d[1])}else if(Fv.test(v))ut(i,zt,"weight");else if(lo.test(v)){var d=v.match(lo);ut(i,Vt,"size",`${d[1]}px`)}else if(Iv.test(v))ut(i,zt,"size");else if(uo.test(v)){var d=v.match(uo);ut(i,Vt,"color",d[1])}else if(wv.test(v))ut(i,zt,"color");else if(Dv.test(v))ut(i,Vt,"u",!0);else if(fo.test(v)){var d=v.match(fo);ut(i,Vt,"u",d[1])}else if(Bv.test(v))ut(i,zt,"u");else if(bv.test(v))ut(i,Vt,"shadow",!0);else if(Gv.test(v))ut(i,zt,"shadow");else if(Nv.test(v))ut(i,Vt,"stroke",!0);else if(co.test(v)){var d=v.match(co);ut(i,Vt,"stroke",d[1])}else if(zv.test(v))ut(i,zt,"stroke");else if(vo.test(v)){var d=v.match(vo);ut(i,Vt,"y",parseFloat(d[1]))}else if(Vv.test(v))ut(i,zt,"y");else if(po.test(v)){var d=v.match(po);ut(i,Vt,"img",d[1])}else if(Yv.test(v))ut(i,zt,"img");else if(go.test(v)){var d=v.match(go);ut(i,Vt,"area",d[1])}else if(Uv.test(v))ut(i,zt,"area");else if(mo.test(v)){var d=v.match(mo);ut(i,Vt,"align",d[1])}else Xv.test(v)?ut(i,zt,"align"):e=v;var t=Hv;return t.plainText=e,t.prop=i,t},ut=function(v,i,e,d){return i===Vt?v[e]=d:v.hasOwnProperty(e)&&delete v[e],v},Kv=function(v,i){var e=kv;if(i.hasOwnProperty("img"))e.image=i.img;else{if(e.image=null,i.hasOwnProperty("family")?e.fontFamily=i.family:e.fontFamily=v.fontFamily,i.hasOwnProperty("size")){var d=i.size;typeof d=="number"&&(d=`${d}px`),e.fontSize=d}else e.fontSize=v.fontSize;e.fontStyle=Zv(i),i.hasOwnProperty("color")?e.color=i.color:e.color=v.color,i.hasOwnProperty("stroke")?i.stroke===!0?(e.stroke=v.stroke,e.strokeThickness=v.strokeThickness):(e.stroke=i.stroke,e.strokeThickness=v.strokeThickness):(e.stroke=v.stroke,e.strokeThickness=0)}return i.hasOwnProperty("shadow")?i.shadow===!0?(e.shadowColor=v.shadowColor,e.shadowOffsetX=v.shadowOffsetX,e.shadowOffsetY=v.shadowOffsetY,e.shadowBlur=v.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor=i.shadow,e.shadowOffsetX=v.shadowOffsetX,e.shadowOffsetY=v.shadowOffsetY,e.shadowBlur=v.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor="#000",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowStroke=!1,e.shadowFill=!1),i.hasOwnProperty("u")?i.u===!0?(e.underlineColor=v.underlineColor,e.underlineThickness=v.underlineThickness,e.underlineOffset=v.underlineOffset):(e.underlineColor=i.u,e.underlineThickness=v.underlineThickness,e.underlineOffset=v.underlineOffset):(e.underlineColor="#000",e.underlineThickness=0,e.underlineOffset=0),e},Zv=function(v){var i=v.b,e=v.weight,d=v.i;return i||e||d?d?i?"bold italic":e?`${e} italic`:"italic":i?"bold":e.toString():""},kv=new Bl,Jv=function(v,i,e){e==null&&(e=Qv);var d=[];for(var t in e)i.hasOwnProperty(t)||d.push(`[/${t}]`);for(var t in i){var s=i[t];if(e[t]!==s)switch(t){case"size":d.push(`[size=${s.replace("px","")}]`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"align":d.push(`[${t}=${s}]`);break;case"u":s===!0?d.push("[u]"):d.push(`[u=${s}]`);break;default:d.push(`[${t}]`);break}}return d.push(v),d.join("")},Qv={};class jv{getStrokeThinkness(i,e){var d;return e.hasOwnProperty("stroke")?d=i.strokeThickness:d=0,d}}var qv={splitText:Wv,tagTextToProp:$v,propToContextStyle:Kv,propToTagText:Jv};Object.assign(jv.prototype,qv);new Bl;Phaser.Utils.Objects.GetValue;var _v=function(v,i,e,d){if(i)return!(e&&!e(v,i)||!yo(v,i)||d&&!d(v,i));for(var t=v.scene.input.manager,s=t.pointersTotal,u=t.pointers,i,n=0;n<s;n++)if(i=u[n],!(e&&!e(v,i))&&!!yo(v,i)&&!(d&&!d(v,i)))return!0;return!1},yo=function(v,i){for(var e=v.scene,d=e.input.cameras.getCamerasBelowPointer(i),t=e.input.manager,s=[v],u,n=0,a=d.length;n<a;n++)if(u=t.hitTest(i,s,d[n]),u.length>0)return!0;return!1};Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const tp=Phaser.GameObjects.Zone,ep=Phaser.Utils.Array.Add,ip=Phaser.Utils.Array.Remove;class Ps extends tp{constructor(i,e,d,t,s){e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=1),s===void 0&&(s=1),super(i,e,d,t,s),this.children=[]}destroy(i){if(!!this.scene){if(i)for(var e,d=this.children.length-1;d>=0;d--)e=this.children[d],!e.parentContainer&&!e.displayList&&e.destroy(i);this.clear(!i),super.destroy(i)}}contains(i){return this.children.indexOf(i)!==-1}add(i){var e=this;return ep(this.children,i,0,function(d){d.once("destroy",e.onChildDestroy,e)},this),this}remove(i,e){var d=this;return ip(this.children,i,function(t){t.off("destroy",d.onChildDestroy,d),e&&t.destroy()}),this}onChildDestroy(i,e){this.remove(i,!1)}clear(i){for(var e=this,d,t=0,s=this.children.length;t<s;t++)d=this.children[t],d.off("destroy",e.onChildDestroy,e),i&&d.destroy();return this.children.length=0,this}}const To=Phaser.GameObjects.Components;Phaser.Class.mixin(Ps,[To.Alpha,To.Flip]);var qe=function(v,i){var e;if(i===void 0)v.hasOwnProperty("rexContainer")&&(e=v.rexContainer.parent);else for(e=qe(v);e&&e.name!==i;)e=qe(e);return e},sp=function(v){for(var i=qe(v);i;)v=i,i=qe(i);return v};const np=Phaser.Math.DegToRad,rp=Phaser.Math.RadToDeg;var ct=function(v){if(!v.hasOwnProperty("rexContainer")){var i={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(i,"angle",{get:function(){return rp(this.rotation)},set:function(e){this.rotation=np(e)}}),Object.defineProperty(i,"displayWidth",{get:function(){return v.width*this.scaleX},set:function(e){this.scaleX=e/v.width}}),Object.defineProperty(i,"displayHeight",{get:function(){return v.height*this.scaleY},set:function(e){this.scaleY=e/v.height}}),v.rexContainer=i}return v.rexContainer},ap={setParent(v,i){i===void 0&&(i=this);var e=ct(v);return i?(e.parent=i,e.self=v):(e.parent=null,e.self=null),this},getParent(v,i){return typeof v=="string"&&(i=v,v=void 0),v===void 0&&(v=this),qe(v,i)},getTopmostParent(v){return v===void 0&&(v=this),sp(v)}};const zs=Phaser.Utils.Objects.GetValue,Ou=Ps.prototype.add;var Jn=function(v,i){this.setParent(v);var e=ct(v);return Ru(e,i),this.resetChildState(v).updateChildVisible(v).updateChildActive(v).updateChildScrollFactor(v).updateChildMask(v),Ou.call(this,v),this.addToRenderLayer(v),this},Qn=function(v,i){this.setParent(v);var e=ct(v);return Ru(e,i),e.x=v.x,e.y=v.y,e.rotation=v.rotation,e.scaleX=v.scaleX,e.scaleY=v.scaleY,e.alpha=v.alpha,e.visible=v.visible,e.active=v.active,this.updateChildPosition(v).updateChildAlpha(v).updateChildVisible(v).updateChildActive(v).updateChildScrollFactor(v).updateChildMask(v),Ou.call(this,v),this.addToRenderLayer(v),this},Ru=function(v,i){v.syncPosition=zs(i,"syncPosition",!0),v.syncRotation=zs(i,"syncRotation",!0),v.syncScale=zs(i,"syncScale",!0),v.syncAlpha=zs(i,"syncAlpha",!0)},op={add(v){return Array.isArray(v)?this.addMultiple(v):Jn.call(this,v),this},pin(v,i){return Array.isArray(v)?this.addMultiple(v,i):Jn.call(this,v,i),this},addMultiple(v){for(var i=0,e=v.length;i<e;i++)Jn.call(this,v[i]);return this},addLocal(v){return Array.isArray(v)?this.addMultiple(v):Qn.call(this,v),this},pinLocal(v,i){return Array.isArray(v)?this.addMultiple(v,i):Qn.call(this,v,i),this},addLocalMultiple(v){for(var i=0,e=v.length;i<e;i++)Qn.call(this,v[i]);return this}};const hp=Ps.prototype.remove,lp=Ps.prototype.clear;var up={remove(v,i){return qe(v)!==this?this:(this.setParent(v,null),i||this.removeFromRenderLayer(v),hp.call(this,v,i),this)},clear(v){for(var i=this.children,e=0,d=i.length;e<d;e++){var t=i[e];this.setParent(t,null),v||this.removeFromRenderLayer(t)}return lp.call(this,v),this}},dp={getLocalState(v){return ct(v)},resetChildState(v){return this.resetChildPositionState(v).resetChildVisibleState(v).resetChildAlphaState(v).resetChildActiveState(v),this},resetChildrenState(v){for(var i=0,e=v.length;i<e;i++)this.resetChildState(v[i]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}};const So=Phaser.Math.RotateAround;var fp={worldToLocal(v){return v.x-=this.x,v.y-=this.y,So(v,0,0,-this.rotation),v.x/=this.scaleX,v.y/=this.scaleY,v},localToWorld(v){return v.x*=this.scaleX,v.y*=this.scaleY,So(v,0,0,this.rotation),v.x+=this.x,v.y+=this.y,v}},ms=function(v,i){return v===i?1:v/i},cp={updateChildPosition(v){v.isRexContainerLite&&(v.syncChildrenEnable=!1);var i=ct(v),e=i.parent;return i.syncPosition&&(v.x=i.x,v.y=i.y,e.localToWorld(v)),i.syncRotation&&(v.rotation=i.rotation+e.rotation),i.syncScale&&(v.scaleX=i.scaleX*e.scaleX,v.scaleY=i.scaleY*e.scaleY),v.isRexContainerLite&&(v.syncChildrenEnable=!0,v.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(v){var i=ct(v),e=i.parent;return i.x=v.x,i.y=v.y,e.worldToLocal(i),i.scaleX=ms(v.scaleX,e.scaleX),i.scaleY=ms(v.scaleY,e.scaleY),i.rotation=v.rotation-e.rotation,this},setChildPosition(v,i,e){return v.x=i,v.y=e,this.resetChildPositionState(v),this},setChildLocalPosition(v,i,e){var d=ct(v);return d.x=i,d.y=e,this.updateChildPosition(v),this},resetLocalPositionState(){var v=ct(this).parent;return v&&v.resetChildPositionState(this),this}};const vp=Phaser.Math.DegToRad;var pp={updateChildRotation(v){var i=ct(v),e=i.parent;return i.syncRotation&&(v.rotation=e.rotation+i.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(v){var i=ct(v),e=i.parent;return i.rotation=v.rotation-e.rotation,this},setChildRotation(v,i){return v.rotation=i,this.resetChildRotationState(v),this},setChildAngle(v,i){return v.angle=i,this.resetChildRotationState(v),this},setChildLocalRotation(v,i){var e=ct(v);return e.rotation=i,this.updateChildRotation(v),this},setChildLocalAngle(v,i){var e=ct(v);return e.rotation=vp(i),this.updateChildRotation(v),this},resetLocalRotationState(){var v=ct(this).parent;return v&&v.resetChildRotationState(this),this}},gp={updateChildScale(v){var i=ct(v),e=i.parent;return i.syncScale&&(v.scaleX=e.scaleX*i.scaleX,v.scaleY=e.scaleY*i.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(v){var i=ct(v),e=i.parent;return i.scaleX=ms(v.scaleX,e.scaleX),i.scaleY=ms(v.scaleY,e.scaleY),this},setChildScale(v,i,e){return e===void 0&&(e=i),v.scaleX=i,v.scaleY=e,this.resetChildScaleState(v),this},setChildLocalScale(v,i,e){e===void 0&&(e=i);var d=ct(v);return d.scaleX=i,d.scaleY=e,this.updateChildScale(v),this},setChildDisplaySize(v,i,e){return v.setDisplaySize(i,e),this.resetChildScaleState(v),this},resetLocalScaleState(){var v=ct(this).parent;return v&&v.resetChildScaleState(this),this}},mp={updateChildVisible(v){var i=ct(v),e=i.parent,d=i.hasOwnProperty("maskVisible")?i.maskVisible:!0;return v.visible=e.visible&&i.visible&&d,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(v){var i=ct(v);return i.hasOwnProperty("maskVisible")&&delete i.maskVisible,i.visible=v.visible,this},setChildVisible(v,i){return this.setChildLocalVisible(v,i),this},setChildLocalVisible(v,i){i===void 0&&(i=!0);var e=ct(v);return e.visible=i,this.updateChildVisible(v),this},setChildMaskVisible(v,i){i===void 0&&(i=!0);var e=ct(v);return e.maskVisible=i,this.updateChildVisible(v),this},resetLocalVisibleState(){var v=ct(this).parent;return v&&v.resetChildVisibleState(this),this}},xp={updateChildAlpha(v){var i=ct(v),e=i.parent;return i.syncAlpha&&(v.alpha=e.alpha*i.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(v){var i=ct(v),e=i.parent;return i.alpha=ms(v.alpha,e.alpha),this},setChildAlpha(v,i){return v.alpha=i,this.resetChildAlphaState(v),this},setChildLocalAlpha(v,i){var e=ct(v);return e.alpha=i,this.updateChildAlpha(v),this},resetLocalAlphaState(){var v=ct(this).parent;return v&&v.resetChildAlphaState(this),this}},yp={updateChildActive(v){var i=ct(v),e=i.parent;return v.active=e.active&&i.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(v){var i=ct(v);return i.active=v.active,this},setChildActive(v,i){return v.active=i,this.resetChildActiveState(v),this},setChildLocalActive(v,i){i===void 0&&(i=!0);var e=ct(v);return e.active=i,this.updateChildActive(v),this},resetLocalActiveState(){var v=ct(this).parent;return v&&v.resetChildActiveState(this),this}},Tp={updateChildScrollFactor(v){var i=ct(v),e=i.parent;return v.setScrollFactor(e.scrollFactorX,e.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},Sp={updateChildMask(v){if(this.mask==null)return this;var i=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return i!==v&&(v.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(v){return this.mask=v,this},clearMask(v){return v===void 0&&(v=!1),this._mask=null,this.children.forEach(function(i){i.clearMask(!1)}),v&&this.mask&&this.mask.destroy(),this}},ln=function(v,i){if(v.length===0)return v;i===void 0&&(i=!1);var e=v[0].scene,d=e.sys.displayList;return d.depthSort(),i?v.sort(function(t,s){return d.getIndex(s)-d.getIndex(t)}):v.sort(function(t,s){return d.getIndex(t)-d.getIndex(s)}),v},Cp={setDepth(v,i){if(this.depth=v,!i&&this.children)for(var e=this.getAllChildren(),d=0,t=e.length;d<t;d++)e[d].depth=v;return this},swapDepth(v){var i=this.depth,e=v.depth;return this.setDepth(e),v.setDepth(i),this},incDepth(v){if(this.depth+=v,this.children)for(var i=this.getAllChildren(),e=0,d=i.length;e<d;e++)i[e].depth+=v;return this},moveDepthBelow(v){var i=this.displayList;if(v.displayList!==i)return this;var e=this.getAllChildren([this]);ln(e);for(var d=0,t=e.length;d<t;d++){var s=e[d];if(i.exists(s)){i.moveBelow(v,s);break}}return this},moveDepthAbove(v){var i=this.displayList;if(v.displayList!==i)return this;var e=this.getAllChildren([this]);ln(e,!0);for(var d=0,t=e.length;d<t;d++){var s=e[d];if(i.exists(s)){i.moveAbove(v,s);break}}return this}},Lu=function(v,i){var e=i(v);if(!e&&v.isRexContainerLite)for(var d=v.children,t=0,s=d.length;t<s;t++)Lu(d[t],i)},jn=function(v,i){for(var e=[v];e.length>0;){var d=e.shift(),t=i(d);!t&&d.isRexContainerLite&&e.push(...d.children)}};const fi=Phaser.Utils.Array;var Ep={getChildren(v){if(!v)v=this.children;else for(var i=0,e=this.children.length;i<e;i++)v.push(this.children[i]);return v},getAllChildren(v){v===void 0&&(v=[]);var i=this;return jn(i,function(e){e!==i&&v.push(e)}),v},getAllVisibleChildren(v){v===void 0&&(v=[]);var i=this;return jn(i,function(e){if(e!==i){if(!e.visible)return!0;v.push(e)}}),v},bfs(v,i){return i===void 0&&(i=this),jn(i,v),this},dfs(v,i){return i===void 0&&(i=this),Lu(i,v),this},contains(v){var i=qe(v);return i?i===this?!0:this.contains(i):!1},getByName(v,i){if(i){for(var e=[this],d,t;e.length;){d=e.shift();for(var s=0,u=d.children.length;s<u;s++){if(t=d.children[s],t.name===v)return t;t.isRexContainerLite&&e.push(t)}}return null}else return fi.GetFirst(this.children,"name",v)},getRandom(v,i){return fi.GetRandom(this.children,v,i)},getFirst(v,i,e,d){return fi.GetFirstElement(this.children,v,i,e,d)},getAll(v,i,e,d){return fi.GetAll(this.children,v,i,e,d)},count(v,i,e,d){return fi.CountAllMatching(this.children,v,i,e,d)},swap(v,i){return fi.Swap(this.children,v,i),this},setAll(v,i,e,d){return fi.SetAll(this.children,v,i,e,d),this}},qn=function(v){for(var i=[],e=0,d=v.length;e<d;e++){var t=v[e];!t.hasOwnProperty("rexContainer")||i.push(t.rexContainer)}return i},Pp=function(v){for(var i=0,e=v.length;i<e;i++){var d=v[i].scene;if(d)return d}return null},Co=function(v,i,e){if(!e.parent){v.remove();return}var d=e.parent,t=e.self;switch(i){case"x":case"y":d.updateChildPosition(t);break;case"angle":case"rotation":d.updateChildRotation(t);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":d.updateChildScale(t);break;case"alpha":d.updateChildAlpha(t);break;default:d.updateChildPosition(t),d.updateChildRotation(t),d.updateChildScale(t),d.updateChildAlpha(t);break}},Mp={tweenChild(v){var i=v.targets;Array.isArray(i)||(i=[i]);var e=this.scene||Pp(i);if(!!e){v.targets=qn(i);var d=e.tweens.add(v);return d.on("update",Co),d}},createTweenChildConfig(v){var i=v.targets;i&&(Array.isArray(i)||(i=[i]),v.targets=qn(i));var e=v.onUpdate;return v.onUpdate=function(d,t){e&&e(d,t),Co(d,void 0,t)},v},tween(v){var i=this.scene;return v.targets||(v.targets=this),i.tweens.add(v)},timelineChild(v){var i=v.targets;i&&(Array.isArray(i)||(i=[i]),v.targets=qn(i));for(var e=v.tweens,d=0,t=e.length;d<t;d++)e[d]=this.createTweenChildConfig(e[d]);var s=this.scene.tweens.timeline(v);return s}},Eo=function(v){var i=this.getAllChildren([this]);return ln(i),v.add(i),this},Ap={addToLayer:Eo,addToContainer:Eo},Op={enableLayer(){if(this.layer)return this;var v=this.scene.add.layer();return this.moveDepthBelow(v),this.once("destroy",function(){v.list.length=0,v.destroy()}),this.addToLayer(v),this.layer=v,this},getLayer(){return this.layer||this.enableLayer(),this.layer},getRenderLayer(){if(this.layer)return this.layer;for(var v=this.getParent();v;){var i=v.layer;if(i)return i;v=v.getParent()}return null},addToRenderLayer(v){if(!v.displayList)return this;var i=this.getRenderLayer();if(!i)return this;v.isRexContainerLite?v.addToLayer(i):i.add(v);var e=ct(v);return e.layer=i,this},removeFromRenderLayer(v){var i=ct(v),e=i.layer;return e?(e.remove(v),i.layer=null,this):this}},gt=function(v){return v.displayWidth!==void 0?v.displayWidth:v.width},vt=function(v){return v.displayHeight!==void 0?v.displayHeight:v.height};const Po=Phaser.Geom.Rectangle,ai=Phaser.Math.Vector2,Rp=Phaser.Math.RotateAround;var da=function(v,i){if(i===void 0?i=new Po:i===!0&&(_n===void 0&&(_n=new Po),i=_n),v.getBounds)return v.getBounds(i);var e,d,t,s,u,n,a,h;if(v.parentContainer){var r=v.parentContainer.getBoundsTransformMatrix();Mo(v,i),r.transformPoint(i.x,i.y,i),e=i.x,d=i.y,Ao(v,i),r.transformPoint(i.x,i.y,i),t=i.x,s=i.y,Oo(v,i),r.transformPoint(i.x,i.y,i),u=i.x,n=i.y,Ro(v,i),r.transformPoint(i.x,i.y,i),a=i.x,h=i.y}else Mo(v,i),e=i.x,d=i.y,Ao(v,i),t=i.x,s=i.y,Oo(v,i),u=i.x,n=i.y,Ro(v,i),a=i.x,h=i.y;return i.x=Math.min(e,t,u,a),i.y=Math.min(d,s,n,h),i.width=Math.max(e,t,u,a)-i.x,i.height=Math.max(d,s,n,h)-i.y,i},_n=void 0,Mo=function(v,i,e){return i===void 0?i=new ai:i===!0&&(pe===void 0&&(pe=new ai),i=pe),v.getTopLeft?v.getTopLeft(i):(i.x=v.x-gt(v)*v.originX,i.y=v.y-vt(v)*v.originY,Tn(v,i,e))},Ao=function(v,i,e){return i===void 0?i=new ai:i===!0&&(pe===void 0&&(pe=new ai),i=pe),v.getTopRight?v.getTopRight(i):(i.x=v.x-gt(v)*v.originX+gt(v),i.y=v.y-vt(v)*v.originY,Tn(v,i,e))},Oo=function(v,i,e){return i===void 0?i=new ai:i===!0&&(pe===void 0&&(pe=new ai),i=pe),v.getBottomLeft?v.getBottomLeft(i):(i.x=v.x-gt(v)*v.originX,i.y=v.y-vt(v)*v.originY+vt(v),Tn(v,i,e))},Ro=function(v,i,e){return i===void 0?i=new ai:i===!0&&(pe===void 0&&(pe=new ai),i=pe),v.getBottomRight?v.getBottomRight(i):(i.x=v.x-gt(v)*v.originX+gt(v),i.y=v.y-vt(v)*v.originY+vt(v),Tn(v,i,e))},pe=void 0,Tn=function(v,i,e){if(e===void 0&&(e=!1),v.rotation!==0&&Rp(i,v.x,v.y,v.rotation),e&&v.parentContainer){var d=v.parentContainer.getBoundsTransformMatrix();d.transformPoint(i.x,i.y,i)}return i};const Lo=Phaser.Geom.Rectangle,Lp=Phaser.Geom.Rectangle.Union;var Fp=function(v,i){i===void 0?i=new Lo:i===!0&&(tr===void 0&&(tr=new Lo),i=tr);for(var e,d=!0,t=0,s=v.length;t<s;t++)if(e=v[t],!!e.getBounds){var u=da(e,!0);d?(i.setTo(u.x,u.y,u.width,u.height),d=!1):Lp(u,i,i)}return i},tr,ci=Phaser.Utils.Objects.GetValue,Fu=function(v){if(!!v){var i=v.gameObjects,e=v.renderTexture;if(i.length===0)return e&&e.setSize(1,1).clear(),e;var d=ci(v,"x",void 0),t=ci(v,"y",void 0),s=ci(v,"width",void 0),u=ci(v,"height",void 0),n=ci(v,"originX",0),a=ci(v,"originY",0),h=ci(v,"padding",0),r,o;if(s===void 0||u===void 0||d===void 0||t===void 0){var c=Fp(i,!0),l=d!==void 0&&t!==void 0;l?(s=Math.max(d-c.left,c.right-d)*2,u=Math.max(t-c.top,c.bottom-t)*2,n=.5,a=.5):(d=c.x,t=c.y,s=c.width,u=c.height,n=0,a=0),r=c.x,o=c.y}else r=d+(0-n)*s,o=t+(0-a)*u;if(r-=h,o-=h,s+=h*2,u+=h*2,e)e.setPosition(d,t),(e.width!==s||e.height!==u)&&e.setSize(s,u);else{var f=i[0].scene;e=f.add.renderTexture(d,t,s,u)}return e.setOrigin(n,a),e.camera.setScroll(r,o),i=ln(Ai(i)),e.draw(i),e}},Ip={snapshot(v){return v===void 0&&(v={}),v.gameObjects=this.getAllVisibleChildren(),v.x=this.x,v.y=this.y,v.originX=this.originX,v.originY=this.originY,Fu(v)}};const wp=Phaser.Math.RotateAround;var Dp=function(v,i,e){e===void 0&&(e=i);var d={x:(i-v.originX)*v.displayWidth,y:(e-v.originY)*v.displayHeight};return wp(d,0,0,v.rotation),v.originX=i,v.originY=e,v.x=v.x+d.x,v.y=v.y+d.y,v},Bp=function(v,i){this.syncChildrenEnable=!1,Dp(this,v,i),this.syncChildrenEnable=!0;for(var e=this.getAllChildren(),d=0,t=e.length;d<t;d++)this.resetChildPositionState(e[d]);return this},Iu={changeOrigin:Bp};Object.assign(Iu,ap,op,up,dp,fp,cp,pp,gp,mp,xp,yp,Tp,Sp,Cp,Ep,Mp,Ap,Op,Ip);class ze extends Ps{constructor(i,e,d,t,s,u){super(i,e,d,t,s),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,u&&this.add(u)}destroy(i){!this.scene||(this.syncChildrenEnable=!1,super.destroy(i))}resize(i,e){return this.setSize(i,e),this}get x(){return this._x}set x(i){this._x!==i&&(this._x=i,this.syncPosition())}get y(){return this._y}set y(i){this._y!==i&&(this._y=i,this.syncPosition())}get rotation(){return super.rotation}set rotation(i){this.rotation!==i&&(super.rotation=i,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(i){this.scaleX!==i&&(super.scaleX=i,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(i){this.scaleY!==i&&(super.scaleY=i,this.syncPosition())}get scale(){return super.scale}set scale(i){this.scale!==i&&(super.scale=i,this.syncPosition())}get visible(){return super.visible}set visible(i){super.visible!==i&&(super.visible=i,this.syncVisible())}get alpha(){return super.alpha}set alpha(i){super.alpha!==i&&(super.alpha=i,this.syncAlpha())}get active(){return this._active}set active(i){this._active!==i&&(this._active=i,this.syncActive())}get mask(){return this._mask}set mask(i){this._mask!==i&&(this._mask=i,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(i){this._scrollFactorX!==i&&(this._scrollFactorX=i,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(i){this._scrollFactorY!==i&&(this._scrollFactorY=i,this.syncScrollFactor())}get list(){return this.children}static GetParent(i){return qe(i)}}Object.assign(ze.prototype,Iu);Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;class fa{constructor(i,e){this.setParent(i),this.type=e,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(i){return this.parent=i,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(i){return i&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(i){this.setDirty(this._active!=i),this._active=i}setActive(i){return i===void 0&&(i=!0),this.active=i,this}modifyPorperties(i){return this}onFree(){this.reset().setParent()}reset(){return this}}Object.assign(fa.prototype,mn);const bp=Phaser.Math.DegToRad,Gp=Phaser.Math.RadToDeg,Vs=Phaser.Utils.Objects.GetValue;class Sn extends fa{constructor(i,e){super(i,e),this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(i){this.setDirty(this._visible!=i),this._visible=i}setVisible(i){return i===void 0&&(i=!0),this.visible=i,this}get alpha(){return this._alpha}set alpha(i){this.setDirty(this._alpha!=i),this._alpha=i}setAlpha(i){return this.alpha=i,this}get x(){return this._x}set x(i){this.setDirty(this._x!=i),this._x=i}setX(i){return this.x=i,this}get y(){return this._y}set y(i){this.setDirty(this._y!=i),this._y=i}setY(i){return this.y=i,this}setPosition(i,e){return this.x=i,this.y=e,this}get rotation(){return this._rotation}set rotation(i){this.setDirty(this._rotation!=i),this._rotation=i}setRotation(i){return this.rotation=i,this}get angle(){return Gp(this._rotation)}set angle(i){this.rotation=bp(i)}setAngle(i){return this.angle=i,this}get scaleX(){return this._scaleX}set scaleX(i){this.setDirty(this._scaleX!==i),this._scaleX=i}setScaleX(i){return this.scaleX=i,this}get width(){return 0}set width(i){}setWidth(i,e){return e===void 0&&(e=!1),this.width=i,e&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(i){this.setDirty(this._leftSpace!==i),this._leftSpace=i}setLeftSpace(i){return this.leftSpace=i,this}get rightSpace(){return this._rightSpace}set rightSpace(i){this.setDirty(this._rightSpace!==i),this._rightSpace=i}setRightSpace(i){return this.rightSpace=i,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(i){this.setDirty(this._scaleY!==i),this._scaleY=i}setScaleY(i){return this.scaleY=i,this}get height(){return 0}set height(i){}setHeight(i,e){return e===void 0&&(e=!1),this.height=i,e&&(this.scaleX=this.scaleY),this}setScale(i,e){return e===void 0&&(e=i),this.scaleX=i,this.scaleY=e,this}setOrigin(i){return this.originX=i,this}setAlign(i){return this.align=i,this}modifyPorperties(i){if(!i)return this;i.hasOwnProperty("x")&&this.setX(i.x),i.hasOwnProperty("y")&&this.setY(i.y),i.hasOwnProperty("rotation")?this.setRotation(i.rotation):i.hasOwnProperty("angle")&&this.setAngle(i.angle),i.hasOwnProperty("alpha")&&this.setAlpha(i.alpha);var e=Vs(i,"width",void 0),d=Vs(i,"height",void 0),t=Vs(i,"scaleX",void 0),s=Vs(i,"scaleY",void 0);return e!==void 0?d===void 0&&s===void 0?this.setWidth(e,!0):this.setWidth(e):t!==void 0&&this.setScaleX(t),d!==void 0?e===void 0&&t===void 0?this.setHeight(d,!0):this.setHeight(d):s!==void 0&&this.setScaleY(s),i.hasOwnProperty("leftSpace")&&this.setLeftSpace(i.leftSpace),i.hasOwnProperty("rightSpace")&&this.setRightSpace(i.rightSpace),i.hasOwnProperty("align")&&this.setAlign(i.align),this}setDrawBelowCallback(i){return this.drawBelowCallback=i,this}setDrawAboveCallback(i){return this.drawAboveCallback=i,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}drawContent(){}draw(){var i=this.context;i.save();var e=this.x+this.leftSpace+this.offsetX-this.originX*this.width,d=this.y+this.offsetY;this.autoRound&&(e=Math.round(e),d=Math.round(d)),i.translate(e,d),i.globalAlpha=this.alpha,i.scale(this.scaleX,this.scaleY),i.rotate(this.rotation),this.drawBelowCallback&&this.drawBelowCallback(this),this.drawContent(),this.drawAboveCallback&&this.drawAboveCallback(this),i.restore()}}const vi=Phaser.Utils.Objects.GetValue;class Np extends Sn{constructor(i,e){super(i,"background"),this.setColor(vi(e,"color",null),vi(e,"color2",null),vi(e,"horizontalGradient",!0)),this.setStroke(vi(e,"stroke",null),vi(e,"strokeThickness",2)),this.setCornerRadius(vi(e,"cornerRadius",0),vi(e,"cornerIteration",null))}set color(i){i=ft(i,this.canvas,this.context),this.setDirty(this._color!=i),this._color=i}get color(){return this._color}set color2(i){i=ft(i,this.canvas,this.context),this.setDirty(this._color2!=i),this._color2=i}get color2(){return this._color2}set horizontalGradient(i){this.setDirty(this._horizontalGradient!=i),this._horizontalGradient=i}get horizontalGradient(){return this._horizontalGradient}setColor(i,e,d){return d===void 0&&(d=!0),this.color=i,this.color2=e,this.horizontalGradient=d,this}set stroke(i){i=ft(i,this.canvas,this.context),this.setDirty(this._stroke!=i),this._stroke=i}get stroke(){return this._stroke}set strokeThickness(i){this.setDirty(this._strokeThickness!=i),this._strokeThickness=i}get strokeThickness(){return this._strokeThickness}setStroke(i,e){return this.stroke=i,this.strokeThickness=e,this}set cornerRadius(i){this.setDirty(this._cornerRadius!=i),this._cornerRadius=i}get cornerRadius(){return this._cornerRadius}set cornerIteration(i){this.setDirty(this._cornerIteration!=i),this._cornerIteration=i}get cornerIteration(){return this._cornerIteration}setCornerRadius(i,e){return this.cornerRadius=i,this.cornerIteration=e,this}drawContent(){Dl(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const ss=Phaser.Utils.Objects.GetValue;class zp extends Sn{constructor(i,e){super(i,"background"),this.setColor(ss(e,"color",null),ss(e,"color2",null),ss(e,"horizontalGradient",!0)),this.setStroke(ss(e,"stroke",null),ss(e,"strokeThickness",2))}set color(i){i=ft(i,this.canvas,this.context),this.setDirty(this._color!=i),this._color=i}get color(){return this._color}set color2(i){i=ft(i,this.canvas,this.context),this.setDirty(this._color2!=i),this._color2=i}get color2(){return this._color2}set horizontalGradient(i){this.setDirty(this._horizontalGradient!=i),this._horizontalGradient=i}get horizontalGradient(){return this._horizontalGradient}setColor(i,e,d){return d===void 0&&(d=!0),this.color=i,this.color2=e,this.horizontalGradient=d,this}set stroke(i){i=ft(i,this.canvas,this.context),this.setDirty(this._stroke!=i),this._stroke=i}get stroke(){return this._stroke}set strokeThickness(i){this.setDirty(this._strokeThickness!=i),this._strokeThickness=i}get strokeThickness(){return this._strokeThickness}setStroke(i,e){return this.stroke=i,this.strokeThickness=e,this}drawContent(){var i=this.parent.padding,e=i.left,d=i.top,t=this.parent.width-i.left-i.right,s=this.parent.height-i.top-i.bottom,u=this.context;if(this.color!=null){var n;if(this.color2!=null){var a;this.horizontalGradient?a=u.createLinearGradient(0,0,t,0):a=u.createLinearGradient(0,0,0,s),a.addColorStop(0,this.color),a.addColorStop(1,this.color2),n=a}else n=this.color;u.fillStyle=n,u.fillRect(e,d,t,s)}this.stroke!=null&&this.strokeThickness>0&&(u.strokeStyle=this.stroke,u.lineWidth=this.strokeThickness,u.strokeRect(e,d,t,s))}}var Ys=function(v,i,e){return i.hasOwnProperty(v)?i[v]:e[v]};const Yt=Phaser.Utils.Objects.GetValue;class Cn{constructor(i){this.set(i)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,align:this.align}}set(i){return this.setBold(Yt(i,"bold",!1)),this.setItalic(Yt(i,"italic",!1)),this.setFontSize(Yt(i,"fontSize","16px")),this.setFontFamily(Yt(i,"fontFamily","Courier")),this.setColor(Yt(i,"color","#fff")),this.setStrokeStyle(Yt(i,"stroke",null),Yt(i,"strokeThickness",0)),this.setShadow(Yt(i,"shadowColor",null),Yt(i,"shadowOffsetX",0),Yt(i,"shadowOffsetY",0),Yt(i,"shadowBlur",0)),this.setOffset(Yt(i,"offsetX",0),Yt(i,"offsetY",0)),this.setSpace(Yt(i,"leftSpace",0),Yt(i,"rightSpace",0)),this.setAlign(Yt(i,"align",void 0)),this}modify(i){return i.hasOwnProperty("bold")&&this.setBold(i.bold),i.hasOwnProperty("italic")&&this.setItalic(i.italic),i.hasOwnProperty("fontSize")&&this.setFontSize(i.fontSize),i.hasOwnProperty("fontFamily")&&this.setFontFamily(i.fontFamily),i.hasOwnProperty("color")&&this.setColor(i.color),(i.hasOwnProperty("stroke")||i.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(Ys("stroke",i,this),Ys("strokeThickness",i,this)),i.hasOwnProperty("shadowColor")&&this.setShadowColor(i.shadowColor),(i.hasOwnProperty("shadowOffsetX")||i.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(Ys("shadowOffsetX",i,this),Ys("shadowOffsetY",i,this)),i.hasOwnProperty("shadowBlur")&&this.setShadowBlur(i.shaodwBlur),i.hasOwnProperty("offsetX")&&this.setOffsetX(i.offsetX),i.hasOwnProperty("offsetY")&&this.setOffsetY(i.offsetY),i.hasOwnProperty("leftSpace")&&this.setLeftSpace(i.leftSpace),i.hasOwnProperty("rightSpace")&&this.setRightSpace(i.rightSpace),i.hasOwnProperty("align")&&this.setAlign(i.align),this}clone(){return new Cn(this.toJSON())}copyFrom(i){return this.set(i.toJSON()),this}copyTo(i){return i.set(this.toJSON()),this}setBold(i){return i===void 0&&(i=!0),this.bold=i,this}setItalic(i){return i===void 0&&(i=!0),this.italic=i,this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(i){return typeof i=="number"&&(i=`${i}px`),this.fontSize=i,this}setFontFamily(i){return this.fontFamily=i,this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(i){return this.color=ft(i),this}get hasFill(){return this.color!=null}setStrokeStyle(i,e){return this.stroke=ft(i),e!==void 0&&(this.strokeThickness=e),this}setStrokeThickness(i){return this.strokeThickness=i,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(i){return this.shadowColor=ft(i),this}setShadowOffset(i,e){return i===void 0&&(i=0),e===void 0&&(e=0),this.shadowOffsetX=i,this.shadowOffsetY=e,this}setShadowBlur(i){return i===void 0&&(i=0),this.shaodwBlur=i,this}setShadow(i,e,d,t){return this.setShadowColor(i).setShadowOffset(e,d).setShadowBlur(t),this}setOffsetX(i){return i===void 0&&(i=0),this.offsetX=i,this}setOffsetY(i){return i===void 0&&(i=0),this.offsetY=i,this}setOffset(i,e){return this.setOffsetX(i).setOffsetY(e),this}setLeftSpace(i){return i===void 0&&(i=0),this.leftSpace=i,this}setRightSpace(i){return i===void 0&&(i=0),this.rightSpace=i,this}setSpace(i,e){return this.setLeftSpace(i).setRightSpace(e),this}setAlign(i){return this.align=i,this}syncFont(i){return i.font=this.font,this}syncStyle(i){i.textBaseline="alphabetic";var e=this.hasFill,d=this.hasStroke;return i.fillStyle=e?this.color:"#000",i.strokeStyle=d?this.stroke:"#000",i.lineWidth=d?this.strokeThickness:0,i.lineCap="round",i.lineJoin="round",this}syncShadow(i){i.shadowColor!=null?(i.shadowColor=this.shadowColor,i.shadowOffsetX=this.shadowOffsetX,i.shadowOffsetY=this.shadowOffsetY,i.shadowBlur=this.shadowBlur):(i.shadowColor=0,i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0)}getTextMetrics(i,e){return this.syncFont(i).syncStyle(i),i.measureText(e)}}var Vp=function(v,i){return v===void 0&&(v=0),i===void 0&&(i=0),v>0&&i>0?(this.fixedWidth!==v||this.fixedHeight!==i)&&(this.dirty=!0):this.dirty=!0,this.fixedWidth=v,this.fixedHeight=i,this};const Us=Phaser.Utils.Objects.GetValue;var nn=function(v,i){return i===void 0?v:v[i]},rn=function(v,i,e){var d=typeof i;d==="string"?v[i]=e:d==="number"?(v.left=i,v.right=i,v.top=i,v.bottom=i):(v.left=Us(i,"left",0),v.right=Us(i,"right",0),v.top=Us(i,"top",0),v.bottom=Us(i,"bottom",0))},Yp=function(v,i){var e=this.padding,d=e.left,t=e.right,s=e.top,u=e.bottom;return rn(e,v,i),this.dirty=this.dirty||d!=e.left||t!=e.right||s!=e.top||u!=e.bottom,this},Up=function(v){return nn(this.padding,v)},Xp=function(v){return this.textStyle.modify(v),this},Wp=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},Hp=function(v){return this.poolManager.free(v),RemoveItem(this.children.list,v),this.lastAppendedChildren.length=0,this.dirty=!0,this},$p=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},Kp=function(){return this.setText(),this},Zp=function(v){return this.lastAppendedChildren.length=0,Array.isArray(v)?(this.children.push(...v),this.lastAppendedChildren.push(...v)):(this.children.push(v),this.lastAppendedChildren.push(v)),this};const Ms="text",ca="image",va="command";var As=function(v){var i=v.type;return i===Ms||i===ca},wu=function(v){return v.type===Ms&&v.text===`
`},kp=function(v){return v.type===va};class Jp extends Sn{constructor(i,e,d){super(i,Ms),this.style=new Cn(d),this.setText(e)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(i){this.style&&(this.style.offsetX=i)}get offsetY(){return this.style.offsetY}set offsetY(i){this.style&&(this.style.offsetY=i)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(i){this.style&&(this.style.leftSpace=i),super.leftSpace=i}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(i){this.style&&(this.style.rightSpace=i),super.rightSpace=i}get align(){return this.style.align}set align(i){this.style&&(this.style.align=i)}modifyStyle(i){return this.setDirty(!0),this.style.modify(i),this}modifyPorperties(i){return i?(this.modifyStyle(i),super.modifyPorperties(i),this):this}setText(i){return this.setDirty(this.text!=i),this.text=i,this.updateTextSize(),this}updateTextSize(){if(this.text===`
`||this.text==="")this.textWidth=0,this.textHeight=0;else{var i=this.style.getTextMetrics(this.context,this.text);this.textWidth=i.width;var e,d;i.hasOwnProperty("actualBoundingBoxAscent")?(e=i.actualBoundingBoxAscent,d=i.actualBoundingBoxDescent):(e=0,d=0),this.textHeight=e+d}return this}get width(){return this.textWidth*this.scaleX}set width(i){this.textWidth>0?this.scaleX=i/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(i){this.textHeight>0?this.scaleY=i/this.textHeight:this.scaleY=1}drawContent(){var i=this.style,e=i.hasFill,d=i.hasStroke;if(!(!e&&!d)){var t=this.context;i.syncFont(t).syncStyle(t),d&&(i.syncShadow(t),t.strokeText(this.text,0,0)),e&&(i.syncShadow(t),t.fillText(this.text,0,0))}}draw(){if(!this.visible||this.text===""||this.text===`
`)return this;super.draw()}}var En=function(v,i){i&&this.textStyle.modify(i);for(var e=[],d=0,t=v.length;d<t;d++){var s=v.charAt(d),u=this.poolManager.allocate(Ms);u===null?u=new Jp(this,s,this.textStyle):u.setParent(this).setActive().modifyStyle(this.textStyle).setText(s),e.push(u)}return this.addChild(e),this},Qp=function(v,i){return v===void 0&&(v=""),this.removeChildren(),En.call(this,v,i),this.dirty=!0,this};class jp extends Sn{constructor(i,e,d){super(i,ca),this.setTexture(e,d)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(i){}get key(){return this._key}set key(i){this.setDirty(this._key!=i),this._key=i}get frame(){return this._frame}set frame(i){this.setDirty(this._frame!=i),this._frame=i}setTexture(i,e){return this.key=i,this.frame=e,this.frameObj=this.scene.sys.textures.getFrame(i,e),this}get width(){return this.frameWidth*this.scaleX}set width(i){this.setDirty(this.width!==i),this.scaleX=i/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(i){this.setDirty(this.height!==i),this.scaleY=i/this.frameHeight}setHeight(i,e){return e===void 0&&(e=!1),this.height=i,e&&(this.scaleX=this.scaleY),this}drawContent(){var i=this.context,e=this.frameObj,d=this.frameWidth,t=this.frameHeight;i.drawImage(e.source.image,e.cutX,e.cutY,d,t,0,0,d,t)}draw(){if(!this.visible)return this;super.draw()}}var Du=function(v,i,e){var d=this.poolManager.allocate(ca);return d===null?d=new jp(this,v,i):d.setParent(this).setActive().setTexture(v,i),d.modifyPorperties(e),this.addChild(d),this};class qp extends fa{constructor(i,e,d,t,s){super(i,va),this.setName(e).setParameter(t).setCallback(d,s)}setName(i){return this.name=i,this}setParameter(i){return this.param=i,this}setCallback(i,e){return this.callback=i,this.scope=e,this}exec(){var i;return this.scope?i=this.callback.call(this.scope,this.param,this.name):i=this.callback(this.param,this.name),i}draw(){}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var ht=function(v,i,e,d){var t=this.poolManager.allocate(va);return t===null?t=new qp(this,v,i,e,d):t.setParent(this).setActive().setName(v).setCallback(i,d).setParameter(e),this.addChild(t),this},_p=function(v){return v===void 0&&(v={}),this.wrapConfig=v,this},tg=function(v,i,e,d){d===void 0&&(d={word:[],width:0}),d.word.length=0;for(var t=v.length,s=i,u=d.word,n=0;s<t;){var a=v[s];if(!As(a)){u.push(a),s++;continue}if(a.type===Ms&&a.text!==" "&&a.text!==`
`)u.push(a),n+=a.outerWidth,s++;else{s===i&&(u.push(a),n+=a.outerWidth);break}if(e)break}return d.width=n,d},Bu=function(v,i,e){if(!(i===0&&e===0))for(var d=0,t=v.length;d<t;d++){var s=v[d];!As(s)||(s.x+=i,s.y+=e)}},eg=function(v){for(var i=0,e=v.length;i<e;i++){var d=v[i];if(d.align!==void 0)return d.align}},ig=function(v,i,e){var d=v.hAlign,t=v.vAlign,s,u,n=v.linesHeight;switch(t){case 1:case"center":u=(e-n)/2;break;case 2:case"bottom":u=e-n;break;default:u=0;break}for(var a=v.lines,h=0,r=a.length;h<r;h++){var o=a[h],c=o.width,l=o.children,f=eg(l);switch(f===void 0&&(f=d),f){case 1:case"center":s=(i-c)/2;break;case 2:case"right":s=i-c;break;default:s=0;break}Bu(l,s,u)}};const de=Phaser.Utils.Objects.GetValue;var sg=function(v){var i=de(v,"start",0),e=de(v,"padding.top",0),d=de(v,"padding.bottom",0),t=de(v,"lineHeight",void 0),s;if(t===void 0)if(s=de(v,"maxLines",0),this.fixedHeight>0){var D=this.fixedHeight-this.padding.top-this.padding.bottom-e-d;t=D/s}else t=0;else if(this.fixedHeight>0){if(s=de(v,"maxLines",void 0),s===void 0){var D=this.fixedHeight-this.padding.top-this.padding.bottom-e-d;s=Math.floor(D/t)}}else s=de(v,"maxLines",0);var u=s===0,n=de(v,"wrapWidth",void 0);n===void 0&&(this.fixedWidth>0?n=this.fixedWidth-this.padding.left-this.padding.right:n=1/0);for(var a=de(v,"letterSpacing",0),h=de(v,"hAlign",0),r=de(v,"vAlign",0),o=de(v,"charWrap",!1),c={start:i,isLastPage:!1,padding:{top:e,bottom:d},lineHeight:t,maxLines:s,wrapWidth:n,letterSpacing:a,hAlign:h,vAlign:r,charWrap:o,children:[],lines:[],maxLineWidth:0,linesHeight:0},l=this.children,f=0,p=l.length;f<p;f++)l[f].setActive(!1);n+=a;for(var g=this.padding.left,m=this.padding.top+t+e,x=g,y=m,T=n,S=i,C=l.length,E=c.children,P=c.lines,M=[],O=0,A=0,R;S<C;){R=tg(l,S,o,R);var F=R.word,I=F.length,B=R.width+I*a;S+=I;var N=wu(F[0]);if(T<B||N){if(N){var Y=F[0];Y.setActive().setPosition(x,y),E.push(Y),M.push(Y)}if(x=g,y+=t,T=n,P.push({children:M,width:O}),A=Math.max(A,O),O=0,M=[],!u&&P.length===s)break;if(N)continue}T-=B,O+=B;for(var f=0,p=F.length;f<p;f++){var X=F[f];X.setActive(),E.push(X),M.push(X),As(X)&&(X.setPosition(x,y),x+=X.outerWidth+a)}}M.length>0&&(P.push({children:M,width:O}),A=Math.max(A,O)),c.start+=E.length,c.isLastPage=c.start===C,c.maxLineWidth=A,c.linesHeight=P.length*t+e+d;var W=this.fixedWidth>0?this.fixedWidth:c.maxLineWidth+this.padding.left+this.padding.right,w=this.fixedHeight>0?this.fixedHeight:c.linesHeight+this.padding.top+this.padding.bottom,L=W-this.padding.left-this.padding.right,D=w-this.padding.top-this.padding.bottom-e-d;return ig(c,L,D),this.setSize(W,w),c};const ng=Phaser.Utils.Objects.Merge;var rg=function(v){return v===void 0&&(v={}),sg.call(this,ng(v,this.wrapConfig))},ag=function(v,i,e){var d=v.hAlign,t=v.vAlign,s,u,n=v.rtl,a=v.lines,h=v.lineWidth,r=v.linesWidth;switch(d){case 1:case"center":s=(i-r)/2;break;case 2:case"right":s=i-r;break;default:s=0;break}n&&(s+=h);for(var o=0,c=a.length;o<c;o++){var l=a[n?c-o-1:o],f=l.children,p=l.height,g=GetChildrenAlign(f);switch(g===void 0&&(g=t),g){case 1:case"center":u=(e-p)/2;break;case 2:case"bottom":u=e-p;break;default:u=0;break}Bu(f,s,u),s+=h}};const Ut=Phaser.Utils.Objects.GetValue;var og=function(v){var i=Ut(v,"start",0),e=Ut(v,"padding.top",0),d=Ut(v,"padding.bottom",0),t=Ut(v,"padding.left",0),s=Ut(v,"padding.right",0),u=Ut(v,"lineWidth",void 0),n;if(u===void 0)if(n=Ut(v,"maxLines",0),this.fixedWidth>0){var L=this.fixedWidth-this.padding.left-this.padding.right-t-s;u=L/n}else u=0;else if(this.fixedWidth>0){if(n=Ut(v,"maxLines",void 0),n===void 0){var L=this.fixedWidth-this.padding.left-this.padding.right;n=Math.floor(L/u)}}else n=Ut(v,"maxLines",0);var a=n===0,h=Ut(v,"fixedChildHeight",void 0);if(h===void 0){var r=Ut(v,"charPerLine",void 0);if(r!==void 0){var D=this.fixedHeight-this.padding.top-this.padding.bottom-e-d;h=Math.floor(D/r)}}var o=Ut(v,"wrapHeight",void 0);o===void 0&&(this.fixedHeight>0?o=this.fixedHeight-this.padding.top-this.padding.bottom:o=1/0);for(var c=Ut(v,"letterSpacing",0),l=Ut(v,"rtl",!0),f=Ut(v,"hAlign",l?2:0),p=Ut(v,"vAlign",0),g={start:i,isLastPage:!1,padding:{top:e,bottom:d,left:t,right:s},lineWidth:u,maxLines:n,fixedChildHeight:h,wrapHeight:o,letterSpacing:c,hAlign:f,vAlign:p,rtl:l,children:[],lines:[],maxLineHeight:0,linesWidth:0},m=this.children,x=0,y=m.length;x<y;x++)m[x].setActive(!1);o+=c;for(var T=this.padding.left+t,S=this.padding.top+e,C=T,E=S,P=o,M=i,O=m.length,A=g.children,R=g.lines,F=[],I=0,B=0;M<O;){var N=m[M];if(M++,!As(N)){N.setActive(),A.push(N),F.push(N);continue}var Y=(h!==void 0?h:N.height)+c,X=wu(N);if(P<Y||X){if(X&&(N.setActive().setPosition(C,E).setOrigin(.5),A.push(N),F.push(N)),C=T,E=S,P=o,R.push({children:F,height:I}),B=Math.max(B,I),I=0,F=[],!a&&R.length===n)break;if(X)continue}P-=Y,I+=Y,N.setActive().setPosition(C,E).setOrigin(.5),A.push(N),F.push(N),E+=Y}F.length>0&&(R.push({children:F,height:I}),B=Math.max(B,I)),g.start+=A.length,g.isLastPage=g.start===O,g.maxLineHeight=B,g.linesWidth=R.length*u+t+s;var W=this.fixedWidth>0?this.fixedWidth:g.linesWidth+this.padding.left+this.padding.right,w=this.fixedHeight>0?this.fixedHeight:g.maxLineHeight+this.padding.top+this.padding.bottom,L=W-this.padding.left-this.padding.right-t-s,D=w-this.padding.top-this.padding.bottom-e-d;return ag(g,L,D),this.setSize(W,w),g};const hg=Phaser.Utils.Objects.Merge;var lg=function(v){return v===void 0&&(v={}),og.call(this,hg(v,this.wrapConfig))},ug=function(){this.clear();var v=this.fixedWidth>0?this.fixedWidth:this.width,i=this.fixedHeight>0?this.fixedHeight:this.height;this.setSize(v,i),this.background.active&&this.background.draw();for(var e,d=0,t=this.children.length;d<t;d++)e=this.children[d],e.active&&e.visible&&e.draw();this.innerBounds.active&&this.innerBounds.draw()},dg=function(){return this.children},fg=function(){return this.lastAppendedChildren};const cg=Phaser.Utils.Array.GetAll;var vg=function(){return cg(this.children,"active",!0)},pg={setFixedSize:Vp,setPadding:Yp,getPadding:Up,modifyTextStyle:Xp,resetTextStyle:Wp,removeChild:Hp,removeChildren:$p,clearContent:Kp,addChild:Zp,setText:Qp,appendText:En,appendImage:Du,appendCommand:ht,setWrapConfig:_p,runWordWrap:rg,runVerticalWrap:lg,drawContent:ug,getChildren:dg,getLastAppendedChildren:fg,getActiveChildren:vg};const gg=Phaser.Utils.Objects.GetFastValue;var mg={};class xg{constructor(i){this.pools=gg(i,"pools",mg)}free(i){if(!this.pools)return this;var e=i.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new Es),this.pools[e].push(i),i.onFree(),this}freeMultiple(i){if(!this.pools)return this;for(var e=0,d=i.length;e<d;e++)this.free(i[e]);return this}allocate(i){return!this.pools||!this.pools.hasOwnProperty(i)?null:this.pools[i].pop()}}const Fo=Phaser.Utils.Objects.IsPlainObject,fe=Phaser.Utils.Objects.GetValue;class bu extends xn{constructor(i,e,d,t,s,u){Fo(e)?(u=e,e=fe(u,"x",0),d=fe(u,"y",0),t=fe(u,"width",0),s=fe(u,"height",0)):Fo(t)&&(u=t,t=fe(u,"width",0),s=fe(u,"height",0));var n=t===0?1:t,a=s===0?1:s;super(i,e,d,n,a),this.type="rexDynamicText",this.autoRound=!0,this.padding={};var h=fe(u,"style",void 0);this.defaultTextStyle=new Cn(h),this.textStyle=this.defaultTextStyle.clone(),this.background=new Np(this,fe(u,"background",void 0)),this.innerBounds=new zp(this,fe(u,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.poolManager=new xg(u),this.setFixedSize(t,s),this.setPadding(fe(u,"padding",0)),this.setWrapConfig(fe(u,"wrap",void 0));var r=fe(u,"text",void 0);r&&this.setText(r)}updateTexture(){return this.drawContent(),super.updateTexture(),this}}Object.assign(bu.prototype,pg);var Di=function(v){return v.replace(yg,"\\$&").replace(Tg,"\\x2d")},yg=/[|\\{}()[\]^$+*?.]/g,Tg=/-/g,Sg=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,Cg=function(v){return typeof v!="string"||(v===""?v=null:Sg.test(v)?v=parseFloat(v):v==="false"?v=!1:v==="true"&&(v=!0)),v},Eg=function(v,i){if(v==null)return[];for(var e=v.split(","),d=0,t=e.length;d<t;d++)e[d]=i(e[d]);return e};const Pg="[a-z0-9-_.]+",Mg="[ #a-z-_.0-9,|&]+",Ag=function(v){return v};class Gu{constructor(i){this.setEventEmitter(ue(i,"eventEmitter",void 0)),this.setTagExpression(ue(i,"regex.tag",Pg)),this.setValueExpression(ue(i,"regex.value",Mg)),this.setValueConverter(ue(i,"valueConvert",!0));var e=ue(i,"delimiters","<>");this.setDelimiters(e[0],e[1]),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setTagExpression(i){return this.tagExpression=i,this}setValueExpression(i){return this.valueExpression=i,this}setValueConverter(i){return i===!0?i=Cg:i||(i=Ag),this.valueConverter=i,this}setDelimiters(i,e){e===void 0&&(e=i[1],i=i[0]),this.delimiterLeft=i,this.delimiterRight=e,i=Di(i),e=Di(e);var d=`${i}(${this.tagExpression})(=(${this.valueExpression}))?${e}`,t=`${i}/(${this.tagExpression})${e}`;return this.reTagOn=RegExp(d,"i"),this.reTagOff=RegExp(t,"i"),this.reSplit=RegExp(`${d}|${t}`,"gi"),this}setSource(i){return this.source=i,this}resetIndex(i){return i===void 0&&(i=0),this.progressIndex=i,this.reSplit.lastIndex=i,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this}start(i){return this.setSource(i).restart(),this}restart(){this.resetIndex().next()}next(){this.isPaused&&this.onResume(),this.reSplit.lastIndex===0&&this.onStart();for(var i=this.source,e=i.length;!this.isPaused;){var d=this.reSplit.exec(i);if(!d){this.progressIndex<e&&this.onContent(i.substring(this.progressIndex,e)),this.onComplete();return}var t=d[0],s=this.reSplit.lastIndex-t.length;this.progressIndex<s&&this.onContent(i.substring(this.progressIndex,s)),this.reTagOff.test(t)?this.onTagEnd(t):this.onTagStart(t),this.progressIndex=this.reSplit.lastIndex}}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}onContent(i){this.skipEventFlag=!1,this.emit("content",i),this.lastContent=i}onTagStart(i){var e=i.match(this.reTagOn),d=e[1],t=Eg(e[3],this.valueConverter);this.skipEventFlag=!1,this.emit(`+${d}`,...t),this.skipEventFlag||this.emit("+",d,...t),this.lastTagStart=d}onTagEnd(i){var e=i.match(this.reTagOff)[1];this.skipEventFlag=!1,this.emit(`-${e}`),this.skipEventFlag||this.emit("-",e),this.lastTagEnd=e}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.emit("complete",this),this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}getTagOnRegString(i,e){return i===void 0&&(i=this.tagExpression),e===void 0&&(e=this.valueExpression),`${Di(this.delimiterLeft)}(${i})(=(${e}))?${Di(this.delimiterRight)}`}getTagOffRegString(i){return i===void 0&&(i=this.tagExpression),`${Di(this.delimiterLeft)}/(${i})${Di(this.delimiterRight)}`}}Object.assign(Gu.prototype,Qi);var Og=function(v,i,e){var d="color",t;i.on("start",function(){t=v.textStyle.color}).on(`+${d}`,function(s){v.textStyle.setColor(s),i.skipEvent()}).on(`-${d}`,function(){v.textStyle.setColor(t),i.skipEvent()}).on("complete",function(){v.textStyle.setColor(t)})},Rg=function(v,i,e){var d="stroke",t;i.on("start",function(){t=v.textStyle.stroke,v.textStyle.setStrokeStyle(null)}).on(`+${d}`,function(s){s===void 0&&(s=t),v.textStyle.setStrokeStyle(s),i.skipEvent()}).on(`-${d}`,function(){v.textStyle.setStrokeStyle(null),i.skipEvent()}).on("complete",function(){v.textStyle.setStrokeStyle(t)})},Lg=function(v,i,e){var d="b";i.on("start",function(){v.textStyle.setBold(!1)}).on(`+${d}`,function(){v.textStyle.setBold(!0),i.skipEvent()}).on(`-${d}`,function(){v.textStyle.setBold(!1),i.skipEvent()})},Fg=function(v,i,e){var d="i";i.on("start",function(){v.textStyle.setItalic(!1)}).on(`+${d}`,function(){v.textStyle.setItalic(!0),i.skipEvent()}).on(`-${d}`,function(){v.textStyle.setItalic(!1),i.skipEvent()})},Ig=function(v,i,e){var d="size",t;i.on("start",function(){t=v.textStyle.fontSize}).on(`+${d}`,function(s){v.textStyle.setFontSize(s),i.skipEvent()}).on(`-${d}`,function(){v.textStyle.setFontSize(t),i.skipEvent()}).on("complete",function(){v.textStyle.setFontSize(t)})},wg=function(v,i,e){var d="y",t;i.on("start",function(){t=v.textStyle.offsetY,v.textStyle.setOffsetY(0)}).on(`+${d}`,function(s){s===void 0&&(s=t),v.textStyle.setOffsetY(s),i.skipEvent()}).on(`-${d}`,function(){v.textStyle.setOffsetY(0),i.skipEvent()}).on("complete",function(){v.textStyle.setOffsetY(0)})},Dg=function(v,i,e){var d="x",t;i.on("start",function(){t=v.textStyle.offsetY,v.textStyle.setOffsetX(0)}).on(`+${d}`,function(s){s===void 0&&(s=t),v.textStyle.setOffsetX(s),i.skipEvent()}).on(`-${d}`,function(){v.textStyle.setOffsetX(0),i.skipEvent()}).on("complete",function(){v.textStyle.setOffsetX(0)})},Bg=function(v,i,e){var d="left",t;i.on("start",function(){t=v.textStyle.leftSpace,v.textStyle.setLeftSpace(0)}).on(`+${d}`,function(s){s===void 0&&(s=t),v.textStyle.setLeftSpace(s),i.skipEvent()}).on(`-${d}`,function(){v.textStyle.setLeftSpace(0),i.skipEvent()}).on("complete",function(){v.textStyle.setLeftSpace(0)})},bg=function(v,i,e){var d="right",t;i.on("start",function(){t=v.textStyle.rightSpace,v.textStyle.setRightSpace(0)}).on(`+${d}`,function(s){s===void 0&&(s=t),v.textStyle.setRightSpace(s),i.skipEvent()}).on(`-${d}`,function(){v.textStyle.setRightSpace(0),i.skipEvent()}).on("complete",function(){v.textStyle.setRightSpace(0)})},Gg=function(v,i,e){var d="shadow",t;i.on("start",function(){t=v.textStyle.shadowColor,v.textStyle.setShadowColor(null)}).on(`+${d}`,function(s){s===void 0&&(s=t),v.textStyle.setShadowColor(s),i.skipEvent()}).on(`-${d}`,function(){v.textStyle.setShadowColor(null),i.skipEvent()}).on("complete",function(){v.textStyle.setShadowColor(t)})},Ng=function(v,i,e){var d="align";i.on(`+${d}`,function(t){v.textStyle.setAlign(t),i.skipEvent()}).on(`-${d}`,function(){v.textStyle.setAlign(),i.skipEvent()}).on("complete",function(){v.textStyle.setAlign()})},zg=function(v,i,e){var d="img";i.on(`+${d}`,function(t){var s=v.imageManager.get(t);Du.call(v,s.key,s.frame,{width:s.width,hieght:s.height,leftSpace:s.left,rightSpace:s.right}),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},Vg=function(v,i,e){var d="speed";i.on(`+${d}`,function(t){Io(v,t),i.skipEvent()}).on(`-${d}`,function(){Io(v,void 0),i.skipEvent()})},Yg=function(v){this.typeWriter.setTypingSpeed(v)},Io=function(v,i){ht.call(v,"speed",Yg,i,v)},Ug=function(v,i,e){var d="se";i.on(`+${d}`,function(t,s){ht.call(v,"se",Xg,[t,s],v),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},Xg=function(v){if(!this.skipSoundEffect){var i=v[0],e=v[1];this.soundManager.playSoundEffect(i),e&&this.soundManager.fadeInSoundEffect(e)}},Wg=function(v,i,e){var d="se.fadein";i.on(`+${d}`,function(t){ht.call(v,"se.fadein",Hg,t,v),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},Hg=function(v){this.soundManager.fadeInSoundEffect(v)},$g=function(v,i,e){var d="se.fadeout";i.on(`+${d}`,function(t,s){s=s==="stop",ht.call(v,"se.fadeout",Kg,[t,s],v),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},Kg=function(v){this.soundManager.fadeOutSoundEffect(...v)},Zg=function(v,i,e){var d="se.volume";i.on(`+${d}`,function(t){ht.call(v,"se.volume",kg,t,v),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},kg=function(v){this.soundManager.setSoundEffectVolume(v)},Jg=function(v,i,e){var d="bgm";i.on(`+${d}`,function(t,s){ht.call(v,"bgm",Qg,[t,s],v),i.skipEvent()}).on(`-${d}`,function(){ht.call(v,"bgm.stop",jg,void 0,v),i.skipEvent()})},Qg=function(v){var i=v[0],e=v[1];this.soundManager.playBackgroundMusic(i),e&&this.soundManager.fadeInBackgroundMusic(e)},jg=function(){this.soundManager.stopBackgroundMusic()},qg=function(v,i,e){var d="bgm.fadein";i.on(`+${d}`,function(t){ht.call(v,"bgm.fadein",_g,t,v),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},_g=function(v){this.soundManager.fadeInBackgroundMusic(v)},t0=function(v,i,e){var d="bgm.fadeout";i.on(`+${d}`,function(t,s){s=s==="stop",ht.call(v,"bgm.fadeout",e0,[t,s],v),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},e0=function(v){this.soundManager.fadeOutBackgroundMusic(...v)},i0=function(v,i,e){var d="bgm.cross";i.on(`+${d}`,function(t,s){ht.call(v,"bgm.cross",s0,[t,s],v),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},s0=function(v){this.soundManager.crossFadeBackgroundMusic(...v)};Phaser.Utils.Objects.GetValue;var n0=function(v,i,e){var d="bgm.pause";i.on(`+${d}`,function(){ht.call(v,"bgm.pause",r0,void 0,v),i.skipEvent()}).on(`-${d}`,function(){ht.call(v,"bgm.resume",a0,void 0,v),i.skipEvent()})},r0=function(){this.soundManager.pauseBackgroundMusic()},a0=function(){this.soundManager.resumeBackgroundMusic()},o0=function(v,i,e){var d="camera.fadein";i.on(`+${d}`,function(t,s,u,n){ht.call(v,"camera.fadein",h0,[t,s,u,n],v),i.skipEvent()})},h0=function(v){this.camera.fadeIn(...v)},l0=function(v,i,e){var d="camera.fadeout";i.on(`+${d}`,function(t,s,u,n){ht.call(v,"camera.fadeout",u0,[t,s,u,n],v),i.skipEvent()})},u0=function(v){this.camera.fadeOut(...v)},d0=function(v,i,e){var d="camera.shake";i.on(`+${d}`,function(t,s){ht.call(v,"camera.shake",f0,[t,s],v),i.skipEvent()})},f0=function(v){this.camera.shake(...v)},c0=function(v,i,e){var d="camera.flash";i.on(`+${d}`,function(t,s,u,n){ht.call(v,"camera.flash",v0,[t,s,u,n],v),i.skipEvent()})},v0=function(v){this.camera.flash(...v)},p0=function(v,i,e){var d="camera.zoom";i.on(`+${d}`,function(t){ht.call(v,"camera.zoom",g0,t,v),i.skipEvent()}).on(`+${d}.to`,function(t,s,u){ht.call(v,"camera.zoom.to",m0,[t,s,u],v),i.skipEvent()})},g0=function(v){this.camera.setZoom(v)},m0=function(v){this.camera.zoomTo(...v)};const wo=Phaser.Math.DegToRad;var x0=function(v,i,e){var d="camera.rotate";i.on(`+${d}`,function(t){t=wo(t),ht.call(v,"camera.rotate",y0,t,v),i.skipEvent()}).on(`+${d}.to`,function(t,s,u){t=wo(t),ht.call(v,"camera.rotate.to",T0,[t,s,u],v),i.skipEvent()})},y0=function(v){this.camera.setRotation(v)},T0=function(v){var i=v[0],e=v[1],d=v[2];this.camera.rotateTo(i,!1,e,d)},S0=function(v,i,e){var d="camera.scroll";i.on(`+${d}`,function(t,s){ht.call(v,"camera.scroll",C0,[t,s],v),i.skipEvent()}).on(`+${d}.to`,function(t,s,u,n){ht.call(v,"camera.scroll.to",E0,[t,s,u,n],v),i.skipEvent()})},C0=function(v){this.camera.setScroll(...v)},E0=function(v){var i=v[0],e=v[1],d=v[2],t=v[3],s=this.camera,u=s.scrollX,n=s.scrollY;s.setScroll(i,e),i+=s.centerX,e+=s.centerY,s.setScroll(u,n),s.pan(i,e,d,t)},P0=function(v,i,e){var d="wait",t="click";i.on(`+${d}`,function(s){Do(v,s),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()}).on(`+${t}`,function(){Do(v,"click"),i.skipEvent()}).on(`-${t}`,function(){i.skipEvent()})},M0=function(v){this.typeWriter.wait(v)},Do=function(v,i){ht.call(v,"wait",M0,i,v)},Bo=function(v,i){return v.length===2&&v[0]===i},A0=function(v,i,e){var d="sprite";i.on("+",function(t,...s){if(!i.skipEventFlag){var u=t.split(".");if(Bo(u,d)){var n=u[1];ht.call(v,"sprite.add",O0,[n,...s],v)}else return;i.skipEvent()}}).on("-",function(t){if(!i.skipEventFlag){var s=t.split(".");if(Bo(s,d)){var u=s[1];ht.call(v,"sprite.remove",R0,u,v)}else return;i.skipEvent()}})},O0=function(v){this.spriteManager.add(...v)},R0=function(v){this.spriteManager.remove(v)},L0=function(v,i,e){var d="sprite";i.on("-",function(t){if(!i.skipEventFlag){if(t===d)ht.call(v,"sprite.removeall",F0,void 0,v);else return;i.skipEvent()}})},F0=function(){this.spriteManager.removeAll()},I0=function(v,i){return v.length===3&&v[0]===i&&v[2]==="texture"},w0=function(v,i,e){var d="sprite";i.on("+",function(t,s,u){if(!i.skipEventFlag){var n=t.split(".");if(I0(n,d)){var a=n[1];ht.call(v,"sprite.texture",D0,[a,s,u],v)}else return;i.skipEvent()}})},D0=function(v){this.spriteManager.setTexture(...v)},bo=function(v,i){return v.length===3&&v[0]===i&&v[2]==="play"},B0=function(v,i){return v.length===3&&v[0]===i&&v[2]==="stop"},b0=function(v,i,e){var d="sprite";i.on("+",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(bo(s,d))u=s[1];else return;var n=Array.prototype.slice.call(arguments,1);ht.call(v,"sprite.play",G0,[u,n],v),i.skipEvent()}}).on("+",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(B0(s,d))u=s[1];else return;ht.call(v,"sprite.stop",Go,u,v),i.skipEvent()}}).on("-",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(bo(s,d))u=s[1];else return;ht.call(v,"sprite.stop",Go,u,v),i.skipEvent()}})},G0=function(v){var i=v[0],e=v[1],d=e.shift();this.spriteManager.playAnimation(i,d),e.length>0&&this.spriteManager.chainAnimation(i,e)},Go=function(v){this.spriteManager.stopAnimation(v)},N0=function(v,i){return v.length===3&&v[0]===i&&v[2]==="chain"},z0=function(v,i,e){var d="sprite";i.on("+",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(N0(s,d))u=s[1];else return;var n=Array.prototype.slice.call(arguments,1);ht.call(v,"sprite.chain",V0,[u,n],v),i.skipEvent()}})},V0=function(v){this.spriteManager.chainAnimation(...v)},Y0=function(v,i){return v.length===3&&v[0]===i&&v[2]==="pause"},U0=function(v,i,e){var d="sprite";i.on("+",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(Y0(s,d))u=s[1];else return;ht.call(v,"sprite.pause",X0,u,v),i.skipEvent()}})},X0=function(v){this.spriteManager.pauseAnimation(v)},W0=function(v,i){return v.length===3&&v[0]===i},H0=function(v,i,e){var d="sprite";i.on("+",function(t,s){if(!i.skipEventFlag){var u=t.split("."),n,a;if(W0(u,d))n=u[1],a=u[2];else return;ht.call(v,"sprite.set",$0,[n,a,s],v),i.skipEvent()}})},$0=function(v){this.spriteManager.setProperty(...v)},K0={to:!0,yoyo:!0},Z0=function(v,i){return v.length===4&&v[0]===i&&K0[v[3]]},k0=function(v,i,e){var d="sprite";i.on("+",function(t,s,u,n,a){if(!i.skipEventFlag){var h=t.split("."),r,o,c;if(Z0(h,d))r=h[1],o=h[2],c=h[3]==="yoyo";else return;typeof n=="number"&&(a=n,n=void 0),ht.call(v,"sprite.ease",J0,[r,o,s,u,n,a,c],v),i.skipEvent()}})},J0=function(v){this.spriteManager.easeProperty(...v)},Q0=function(v,i,e){var d="r";i.on(`+${d}`,function(){En.call(v,`
`),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},j0=function(v,i,e){var d="content.off";i.on(`+${d}`,function(){i.setContentOutputEnable(!1),i.skipEvent()})},q0=function(v,i,e){var d="content.on";i.on(`+${d}`,function(){i.setContentOutputEnable(),i.skipEvent()})},_0=function(v,i,e){i.on("content",function(d){if(i.contentOutputEnable)En.call(v,d);else{var t=`+${i.lastTagStart}`;v.emit(`parser.${t}#content`,i,d)}})},tm=function(v,i,e){i.on("start",function(){v.emit("parser.start",i)}).on("+",function(d,...t){if(!i.skipEventFlag){var s=`+${d}`,u=t;v.emit(`parser.${s}`,i,...t,u),No(v,s,u)}}).on("-",function(d){if(!i.skipEventFlag){var t=`-${d}`,s=[];v.emit(`parser.${t}`,i,s),No(v,t,s)}}).on("complete",function(){v.emit("parser.complete",i)})},em=function(v,i){var e=`tag.${i}`;v==null?this.emit(e):this.emit(e,...v)},No=function(v,i,e){ht.call(v,i,em,e,v)};const zo=[Og,Rg,Lg,Fg,Ig,Gg,Ng,wg,Dg,Bg,bg,zg,Vg,Ug,Wg,$g,Zg,Jg,qg,t0,i0,n0,o0,l0,d0,c0,p0,x0,S0,P0,A0,L0,w0,b0,z0,U0,H0,k0,Q0,j0,q0,_0,tm];var im=function(v,i,e){for(var d=0,t=zo.length;d<t;d++)zo[d](v,i,e)},sm=function(v,i){for(var e=v.commentLineStart,d=i.split(`
`),t=0,s=d.length;t<s;t++){var u=d[t];u===""||(u.trim().length===0||e&&u.startsWith(e))&&(d[t]="")}return d.join("")};const nm=Phaser.Utils.Objects.GetValue;class rm extends Gu{constructor(i,e){e===void 0&&(e={}),e.hasOwnProperty("delimiters")||(e.delimiters="[]"),super(e),im(i,this,e),this.setCommentLineStartSymbol(nm(e,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(i){return this.commentLineStart=i,this}setContentOutputEnable(i){return i===void 0&&(i=!0),this.contentOutputEnable=i,this}start(i){return super.start(sm(this,i)),this}}var am={setDefaultTypingSpeed(v){return this.defaultSpeed=v,this},setTypingSpeed(v){return v===void 0&&(v=this.defaultSpeed),this.speed=v,this}},Nu=function(v,i){return new Promise(function(e,d){v.once(i,function(){e()})})},Kt=function(v){return Nu(v,"complete")},om=function(v){return this.children=v,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(v),this.typing(),Kt(this)};const hm="delay",zu="anim";var Vu=function(v){v===void 0&&(v=0);var i=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var e=this.getNextChild();if(!e){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(As(e)){var d=this.animationConfig;if(d.duration>0){var t=this.timeline.addTimer({name:zu,target:e,duration:d.duration,yoyo:d.yoyo,onStart:d.onStart,onProgress:d.onProgress,onComplete:d.onComplete});this.skipTypingAnimation&&t.seek(1)}else d.onStart&&d.onStart(e,0);this.textPlayer.emit("typing",e),i+=this.speed+v,v=0;var s=this.index===this.children.length;if(i>0&&!s){this.typingTimer=this.timeline.addTimer({name:hm,target:this,duration:i,onComplete:function(u,n,a){u.typingTimer=void 0,Vu.call(u,a.remainder)}});break}}else kp(e)&&e.exec()}this.inTypingProcessLoop=!1},lm=function(){return this.timeline.pause(),this},um=function(){return this.timeline.resume(),this},dm=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},fm=function(v){return this.isTypingPaused?(v===void 0&&(v=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=v):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(v)),this):this};const be="_remove.wait",Hr="_remove.play",Vo=[be,Hr];var hi=function(v,i,e,d,t){return function(){v.emit(be,t),i.apply(d,e)}},Yo=function(v,i,e,d,t){var s=hi(v,e,d,t,"custom"),u=i?`wait.${i}`:"wait";v.emit(u,s)},cm=function(v,i,e,d,t){return v.typeWriter.timeline.delayCall(i,e,d,t)},vm=function(v,i,e,d,t){var s=hi(v,e,d,t,"time"),u;v.once(be,function(){u&&(u.remove(),u=void 0)}),u=cm(v,i,s),v.emit("wait.time",i)},pm=function(v,i,e,d){var t=v.clickEE;if(!!t){var s=hi(v,i,e,d,"click");v.once(be,function(){t.off("pointerdown",s,v)}),t.once("pointerdown",s,v),v.emit("wait.click")}},Uo=function(v,i,e,d,t){var s=hi(v,e,d,t,"music");i&&(v.once(be,function(){i.off("complete",s,v)}),i.once("complete",s,v)),v.emit("wait.music",i),i||s()},gm=function(v){switch(v){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},mm=function(v,i,e,d,t){var s=hi(v,e,d,t,`camera.${i}`),u=v.camera,n,a;switch(i){case"camera.fadein":n=u.fadeEffect,a="camerafadeincomplete";break;case"camera.fadeout":n=u.fadeEffect,a="camerafadeoutcomplete";break;case"camera.flash":n=u.flashEffect,a="cameraflashcomplete";break;case"camera.shake":n=u.shakeEffect,a="camerashakecomplete";break;case"camera.zoom":n=u.zoomEffect,a="camerazoomcomplete";break;case"camera.rotate":n=u.rotateToEffect,a="camerarotatecomplete";break;case"camera.scroll":n=u.panEffect,a="camerapancomplete";break}n.isRunning?(v.once(be,function(h){u.off(a,s,v)}),u.once(a,s,v),v.emit("wait.camera",i)):(v.emit("wait.camera",i),s())},xm=function(v,i,e,d,t){var s=hi(v,e,d,t,"keydown"),u=`keydown-${i.toUpperCase()}`,n=v.scene.input.keyboard;v.once(be,function(){n.off(u,s,v)}),n.once(u,s,v),v.emit("wait.keydown",i)},ym=function(v){var i=v.split(".");return i[0]==="sprite"&&i.length<=3},Tm=function(v,i,e,d,t){var s=hi(v,e,d,t),u=i.split("."),n=v.spriteManager;switch(u.length){case 1:n.isEmpty?(v.emit("wait.sprite"),s()):(v.once(be,function(l){n.off("empty",s,v)}),n.once("empty",s,v),v.emit("wait.sprite"));break;case 2:var r=u[1];if(n.has(r)){var a=v.spriteManager.get(r),h=a.sprite;v.once(be,function(){h.off("destroy",s,v)}),h.once("destroy",s,v),v.emit("wait.sprite",r)}else v.emit("wait.sprite",r),s();break;case 3:var r=u[1],o=u[2],c=v.spriteManager.getTweenTask(r,o);c?(v.once(be,function(){c.off("complete",s,v)}),c.once("complete",s,v),v.emit("wait.sprite",r,o)):(v.emit("wait.sprite",r,o),s());break}};const Sm=Phaser.Input.Keyboard.KeyCodes;var Yu=function(v,i,e,d,t){typeof i=="string"&&i.length>1&&i.indexOf("|")!==-1?i=i.split("|"):i=[i];for(var s=0,u=i.length;s<u;s++){var n=i[s];if(n==null||n==="wait")Yo(v,void 0,e,d,t);else if(typeof n=="number"||!isNaN(n))vm(v,parseFloat(n),e,d,t);else if(n==="click")pm(v,e,d,t);else if(n==="se"){var a=v.soundManager.getLastSoundEffect();Uo(v,a,e,d,t)}else if(n==="bgm"){var a=v.soundManager.getBackgroundMusic();Uo(v,a,e,d,t)}else Sm.hasOwnProperty(n.toUpperCase())?xm(v,n,e,d,t):gm(n)?mm(v,n,e,d,t):ym(n)?Tm(v,n,e,d,t):Yo(v,n,e,d,t)}},Cm=function(v){return this.ignoreWait?this:(this.pauseTyping(),Yu(this.textPlayer,v,this.resumeTyping,[],this),this)},Em=function(v){return this.timeScale=v,this},Pm=function(v){return v===void 0&&(v=!0),this.ignoreWait=v,this},Mm=function(v){if(v===void 0&&(v=!0),this.skipTypingAnimation=v,v)for(var i=this.timeline.getTimers(zu),e=0,d=i.length;e<d;e++)i[e].seek(1);return this},Am=function(v){if(v===void 0&&(v=!0),this.skipSoundEffect=v,v){var i=this.textPlayer._soundManager;i&&i.fadeOutAllSoundEffects(100,!0)}return this},Om=function(){return this.typingTimer&&this.typingTimer.seek(1),this},Uu={start:om,typing:Vu,pause:lm,resume:um,pauseTyping:dm,resumeTyping:fm,wait:Cm,setTimeScale:Em,setIgnoreWait:Pm,setSkipTypingAnimation:Mm,setSkipSoundEffect:Am,skipCurrentTypingDelay:Om};Object.assign(Uu,am);const Rm=Phaser.Utils.Objects.GetValue;class Pn extends me{constructor(i,e){super(i,e),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(Rm(e,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(i){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(i))}setTickingMode(i){typeof i=="string"&&(i=Lm[i]),this.tickingMode=i}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(i){this._isRunning!==i&&(this._isRunning=i,this.tickingMode===1&&i!=this.tickingState&&(i?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const Lm={no:0,lazy:1,always:2},er=Phaser.Utils.Objects.GetValue;class Fm extends Pn{constructor(i,e){super(i,e),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.isRunning=er(i,"isRunning",!1),this.timeScale=er(i,"timeScale",1),this.now=er(i,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(i){return i===void 0&&(i=0),this.delta=0,this.now=i,super.start(),this}seek(i){return this.now=i,this}setTimeScale(i){return this.timeScale=i,this}tick(i){return i*=this.timeScale,this.now+=i,this.delta=i,this.emit("update",this.now,this.delta),this}}class Im extends Fm{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(i,e){return!this.isRunning||this.timeScale===0?this:(this.tick(e),this)}}var wm=function(v,i){return i===void 0&&(i=.5),v<=i?v=v/i:v=1-(v-i)/(1-i),v};const Xo=Phaser.Math.Clamp;class Dm{constructor(i,e){this.setTimeline(i).reset(e)}setTimeline(i){return this.timeline=i,this}setName(i){return this.name=i,this}setCallbacks(i,e,d,t){return this.target=i,this.onStart=e,this.onProgress=d,this.onComplete=t,this}setDuration(i,e){return e===void 0&&(e=!1),this.duration=i,this.remainder=i,this.t=0,this.yoyo=e,this}setPaused(i){return this.isPaused=i,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(i){return this.removed=i,this}remove(){return this.removed=!0,this}seek(i){return this.remainder=this.duration*(1-i),this}reset(i){return this.setName(i.name).setDuration(i.duration,i.yoyo).setCallbacks(i.target,i.onStart,i.onProgress,i.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var i=1-this.remainder/this.duration;return i=Xo(i,0,1),this.yoyo&&(i=wm(i)),i}setProgress(i){i=Xo(i,0,1),this.remainder=this.duration*(1-i)}runCallback(i){!i||i(this.target,this.t,this)}update(i,e){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=e,this.t=this.getProgress(),this.runCallback(this.onProgress);var d=this.remainder<=0;return d&&this.runCallback(this.onComplete),d}}class Bm extends Es{allocate(){return this.pop()}free(i){i.onFree(),this.push(i)}freeMultiple(i){for(var e=0,d=i.length;e<d;e++)this.free(i[e]);return this}}const bm=Phaser.Utils.Objects.GetValue,Gm=new Bm;class Nm extends Im{constructor(i,e){super(i,e),this.addedTimers=[],this.timers=[],this.timerPool=bm(e,"pool",Gm)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(i){var e=this.timerPool.allocate();return e?e.setTimeline(this).reset(i):e=new Dm(this,i),this.addedTimers.push(e),e.runCallback(e.onStart),this.isRunning||this.start(),e}delayCall(i,e,d,t){var s=this.addTimer({duration:i,onComplete:function(u,n,a){d===void 0&&(d=[]),d.push(a),e.apply(t,d)}});return s}getTimers(i){for(var e=[],d=[this.addedTimers,this.timers],t=0,s=d.length;t<s;t++)for(var u=d[t],n=0,a=u.length;n<a;n++){var h=u[n];h.name===i&&e.push(h)}return e}update(i,e){super.update(i,e),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var d=[],t=0,s=this.timers.length;t<s;t++){var u=this.timers[t],n=u.update(this.now,this.delta);n?this.timerPool.free(u):d.push(u)}this.timers=d,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}const ir=Phaser.Utils.Objects.GetValue;class Xu{constructor(i,e){this.setEventEmitter(),this.textPlayer=i,this.isPageTyping=!1,this.timeline=new Nm(i),this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(ir(e,"onTypingStart",Vm)),this.setDefaultTypingSpeed(ir(e,"speed",250)),this.setTypingSpeed(),this.setAnimationConfig(ir(e,"animation",void 0))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.timeline.destroy(),this.timeline=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}set timeScale(i){this.timeline.timeScale=i}get timeScale(){return this.timeline.timeScale}setTypingStartCallback(i){return this.onTypeStart=i,this}setAnimationConfig(i){return i||(i={}),i.hasOwnProperty("duration")||(i.duration=0),i.hasOwnProperty("onStart")||(i.onStart=zm),this.animationConfig=i,this}getNextChild(){var i=this.children[this.index];return this.index=Math.min(this.index+1,this.children.length),i}}var zm=function(v){v.setVisible&&v.setVisible()},Vm=function(v){for(var i=0,e=v.length;i<e;i++){var d=v[i];d.setVisible&&d.setVisible(!1)}};Object.assign(Xu.prototype,Qi,Uu);const Ym=Phaser.Utils.Objects.GetValue;class Um extends Pn{constructor(i,e){super(i,e),this.tickEventName=Ym(e,"tickEventName","update")}startTicking(){super.startTicking(),this.scene.sys.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off(this.tickEventName,this.update,this)}}const ei=Phaser.Utils.Objects.GetValue,Wo=Phaser.Math.Clamp;class Wu{constructor(i){this.resetFromJSON(i)}resetFromJSON(i){this.state=ei(i,"state",ns),this.timeScale=ei(i,"timeScale",1),this.delay=ei(i,"delay",0),this.repeat=ei(i,"repeat",0),this.repeatCounter=ei(i,"repeatCounter",0),this.duration=ei(i,"duration",0),this.nowTime=ei(i,"nowTime",0),this.justRestart=ei(i,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(i){return this.timeScale=i,this}setDelay(i){return i===void 0&&(i=0),this.delay=i,this}setDuration(i){return this.duration=i,this}setRepeat(i){return this.repeat=i,this}setRepeatInfinity(){return this.repeat=-1,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?bi:Bi,this.repeatCounter=0,this}stop(){return this.state=ns,this}update(i,e){this.state===ns||this.state===Xs||e===0||this.timeScale===0||(this.nowTime+=e*this.timeScale,this.state=this.nowTime>=0?bi:Bi,this.justRestart=!1,this.nowTime>=this.duration&&(this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=Xs)))}get t(){var i;switch(this.state){case ns:case Bi:i=0;break;case bi:i=this.nowTime/this.duration;break;case Xs:i=1;break}return Wo(i,0,1)}set t(i){i=Wo(i,-1,1),i<0?(this.state=Bi,this.nowTime=-this.delay*i):(this.state=bi,this.nowTime=this.duration*i,i===1&&this.repeat!==0&&this.repeatCounter++)}setT(i){return this.t=i,this}get isIdle(){return this.state===ns}get isDelay(){return this.state===Bi}get isCountDown(){return this.state===bi}get isRunning(){return this.state===Bi||this.state===bi}get isDone(){return this.state===Xs}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}}const ns=0,Bi=1,bi=2,Xs=-1;class Xm extends Um{constructor(i,e){super(i,e),this.timer=new Wu}shutdown(i){this.isShutdown||(super.shutdown(i),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const rs=Phaser.Utils.Objects.GetValue,Ho=Phaser.Utils.Objects.GetAdvancedValue,Wm=Phaser.Tweens.Builders.GetEaseFunction;class ji extends Xm{resetFromJSON(i){return this.timer.resetFromJSON(rs(i,"timer")),this.setEnable(rs(i,"enable",!0)),this.setTarget(rs(i,"target",this.parent)),this.setDelay(Ho(i,"delay",0)),this.setDuration(Ho(i,"duration",1e3)),this.setEase(rs(i,"ease","Linear")),this.setRepeat(rs(i,"repeat",0)),this}setEnable(i){return i==null&&(i=!0),this.enable=i,this}setTarget(i){return i===void 0&&(i=this.parent),this.target=i,this}setDelay(i){return this.delay=i,this}setDuration(i){return this.duration=i,this}setEase(i){return i===void 0&&(i="Linear"),this.ease=i,this.easeFn=Wm(i),this}setRepeat(i){return this.repeat=i,this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(i){return i===void 0&&(i=!1),super.stop(),i&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(i,e){if(!this.isRunning||!this.enable||!this.parent.active)return this;var d=this.target,t=this.timer;return t.update(i,e),t.isDelay||this.updateGameObject(d,t),this.emit("update",d,this),t.isDone&&this.complete(),this}updateGameObject(i,e){}}const $o=Phaser.Utils.Objects.GetValue,Ko=Phaser.Utils.Objects.GetAdvancedValue,Hm=Phaser.Math.Linear;class Hu extends ji{constructor(i,e,d){e.scene=i,e.active=!0,super(e,d),this.volume={},this.resetFromJSON(d)}resetFromJSON(i){return super.resetFromJSON(i),this.setMode($o(i,"mode",0)),this.setEnable($o(i,"enable",!0)),this.setVolumeRange(Ko(i,"volume.start",this.parent.volume),Ko(i,"volume.end",0)),this}setMode(i){return typeof i=="string"&&(i=$m[i]),this.mode=i,this}setVolumeRange(i,e){return this.volume.start=i,this.volume.end=e,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(i,e){i.volume=Hm(this.volume.start,this.volume.end,e.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}}const $m={stop:1,destroy:2};var Zo=function(v,i,e,d,t){d===void 0&&(d=1),t===void 0&&(t=0);var s={mode:0,volume:{start:t,end:d},duration:e};typeof i=="string"&&(i=v.sys.sound.add(i));var u;return i.hasOwnProperty("_fade")?(u=i._fade,u.stop().resetFromJSON(s)):(u=new Hu(v,i,s),i._fade=u),u.start(),i.isPlaying||i.setVolume(t).play(),i},sr=function(v,i,e,d){d===void 0&&(d=!0);var t={mode:d?2:1,volume:{start:i.volume,end:0},duration:e},s;return i.hasOwnProperty("_fade")?(s=i._fade,s.stop().resetFromJSON(t)):(s=new Hu(v,i,t),i._fade=s),s.start(),i.isPlaying||i.play(),i};const nr=Phaser.Utils.Objects.GetValue,ko=Phaser.Utils.Array.Remove;class Jo{constructor(i,e){this.scene=i,this.soundEffects=[],this.backgroundMusic=void 0,this.setBackgroundMusicLoopValue(nr(e,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(nr(e,"bgm.fade",500));var d=nr(e,"bgm.initial",void 0);d&&this.setCurrentBackgroundMusic(d)}destroy(i){if(this.soundEffects.length&&!i)for(var e=this.soundEffects.length-1;e>=0;e--)this.soundEffects[e].destroy();this.soundEffects.length=0,this.backgroundMusic&&!i&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.scene=void 0}setBackgroundMusicLoopValue(i){return this.backgroundMusicLoopValue=i,this}setBackgroundMusicFadeTime(i){return this.backgroundMusicFadeTime=i,this}getSoundEffects(){return this.soundEffects}getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]}getBackgroundMusic(){return this.backgroundMusic}playSoundEffect(i){var e=this.scene.sys.sound.add(i);return this.soundEffects.push(e),e.once("complete",function(){e.destroy(),this.scene&&ko(this.soundEffects,e)},this).once("destroy",function(){!this.scene||ko(this.soundEffects,e)},this).play(),this}setSoundEffectVolume(i){var e=this.getLastSoundEffect();return e&&e.setVolume(i),this}fadeInSoundEffect(i){var e=this.getLastSoundEffect();return e&&Zo(this.scene,e,i),this}fadeOutSoundEffect(i,e){var d=this.getLastSoundEffect();return d&&sr(this.scene,d,i,e),this}fadeOutAllSoundEffects(i,e){for(var d=this.soundEffects.length-1;d>=0;d--)sr(this.scene,this.soundEffects[d],i,e);return this}setCurrentBackgroundMusic(i){this.backgroundMusic=i,i&&(i.setLoop(this.backgroundMusicLoopValue),i.once("complete",function(){this.backgroundMusic.destroy(),this.backgroundMusic=void 0},this).once("destroy",function(){this.backgroundMusic=void 0},this),i.isPlaying||i.play())}playBackgroundMusic(i){return this.backgroundMusic&&this.backgroundMusic.key===i?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.scene.sys.sound.add(i)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)}pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this}resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this}stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this}fadeInBackgroundMusic(i){return this.backgroundMusic&&Zo(this.scene,this.backgroundMusic,i),this}fadeOutBackgroundMusic(i,e){return this.backgroundMusic&&sr(this.scene,this.backgroundMusic,i,e),this}crossFadeBackgroundMusic(i,e){var d=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(e,!0).playBackgroundMusic(i).fadeInBackgroundMusic(e),this.backgroundMusicFadeTime=d,this}}class $u{constructor(i,e,d){this.GOManager=i,this.tweens={},this.setGO(e,d)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeTweens(){var i=this.tweens;for(var e in i)i[e].remove(),delete i[e];return this}freeGO(){return this.freeTweens(),this.gameObject.destroy(),this.gameObject=void 0,this}setGO(i,e){return this.gameObject=i.setName(e),this.name=e,this.freeTweens(),this}setProperty(i,e){return this.gameObject[i]=e,this}easeProperty(i,e,d,t,s,u,n){var a=this.tweens;a.hasOwnProperty(i)&&a[i].remove();var h=this.gameObject,r={targets:h,duration:d,ease:t,repeat:s,yoyo:u,onComplete:function(){a[i].remove(),delete a[i],n&&n(h,i)},onCompleteScope:this};r[i]=e;var o=this.scene.tweens.add(r);return o.timeScale=this.timeScale,a[i]=o,this}setTimeScale(i){var e=this.tweens;for(var d in e)e[d].timeScale=i;return this}}var Km=function(v){for(var i in v)return!1;return!0},Qo=function(v){return v>>16&255},jo=function(v){return v>>8&255},qo=function(v){return v&255};const Zm=~(255<<16)&16777215,km=~(255<<8)&16777215,Jm=16776960;var Qm=function(v,i){return(i&255)<<16|v&Zm},jm=function(v,i){return(i&255)<<8|v&km},qm=function(v,i){return i&255|v&Jm},_m=function(v,i,e,d){return(i&255)<<16|(e&255)<<8|d&255},tx=function(v,i){if(v.hasOwnProperty("tintR"))return v;i===void 0&&(i=16777215);var e=Qo(i),d=jo(i),t=qo(i);return Object.defineProperty(v,"tint",{get:function(){return i},set:function(s){s=Math.floor(s)&16777215,v.setTint(s),i!==s&&(i=s,e=Qo(i),d=jo(i),t=qo(i))}}),Object.defineProperty(v,"tintR",{get:function(){return e},set:function(s){s=Math.floor(s)&255,e!==s&&(e=s,v.tint=Qm(i,s))}}),Object.defineProperty(v,"tintG",{get:function(){return d},set:function(s){s=Math.floor(s)&255,d!==s&&(d=s,v.tint=jm(i,s))}}),Object.defineProperty(v,"tintB",{get:function(){return t},set:function(s){s=Math.floor(s)&255,t!==s&&(t=s,v.tint=qm(i,s))}}),Object.defineProperty(v,"tintGray",{get:function(){return Math.floor((e+d+t)/3)},set:function(s){s=Math.floor(s)&255,(e!==s||d!==s||t!==s)&&(e=s,d=s,t=s,v.tint=_m(i,s,s,s))}}),v.tint=i,v};const ex=Phaser.Events.EventEmitter;var ix=function(v){if(v.events)return v;var i=new ex,e=v.x;Object.defineProperty(v,"x",{get:function(){return e},set:function(u){e!==u&&(e=u,i.emit("update",v))}});var d=v.y;Object.defineProperty(v,"y",{get:function(){return d},set:function(u){d!==u&&(d=u,i.emit("update",v))}});var t=v.width;Object.defineProperty(v,"width",{get:function(){return t},set:function(u){t!==u&&(t=u,i.emit("update",v))}});var s=v.height;return Object.defineProperty(v,"height",{get:function(){return s},set:function(u){s!==u&&(s=u,i.emit("update",v))}}),v.events=i,v},sx=function(v,i,e,d,t){if(v.hasOwnProperty("vp"))return v;e===void 0&&(e=.5),d===void 0&&(d=.5),t===void 0&&(t=nx),ix(i);var s=i.events;v.vp=i;var u=function(){t(v,i,e,d)};s.on("update",u),v.once("destroy",function(){s.off("update",u),v.vp=void 0}),Object.defineProperty(v,"vpx",{get:function(){return e},set:function(n){e!==n&&(e=n,u())}}),Object.defineProperty(v,"vpy",{get:function(){return d},set:function(n){d!==n&&(d=n,u())}}),u()},nx=function(v,i,e,d){v.x=i.x+i.width*e,v.y=i.y+i.height*d};const rx=Phaser.Utils.Array.Remove;var ax={has(v){return this.bobs.hasOwnProperty(v)},get(v){return this.bobs[v]},getGO(v){return this.get(v).gameObject},add(v,...i){this.remove(v);var e=this.createGameObjectCallback(this.scene,...i),d=!!e.setTint&&this.fadeTime>0,t=!!e.setAlpha&&this.fadeTime>0;d&&tx(e),this.viewportCoordinateEnable&&sx(e),e.once("destroy",function(){rx(this.removedGOs,e),this.isEmpty&&this.emit("empty")},this);var s=new this.BobClass(this,e,v);return this.bobs[v]=s,d?s.setProperty("tintGray",0).easeProperty("tintGray",255,this.fadeTime):t&&s.setProperty("alpha",0).easeProperty("alpha",1,this.fadeTime),this}},ox={remove(v){if(!this.has(v))return this;var i=this.get(v);delete this.bobs[v],this.removedGOs.push(i.gameObject);var e=!!i.gameObject.setTint&&this.fadeTime>0,d=!!gameObject.setAlpha&&this.fadeTime>0;return e?i.easeProperty("tintGray",0,this.fadeTime,"Linear",0,!1,function(){i.destroy()}):d?i.easeProperty("alpha",0,this.fadeTime,"Linear",0,!1,function(){i.destroy()}):i.destroy(),this},removeAll(){var v=this.bobs;for(var i in v)this.remove(i);return this},clear(v){v===void 0&&(v=!0);var i=this.bobs;for(var e in i)v&&i[e].destroy(),delete i[e];return this.removedGOs.length=0,this}},hx={setProperty(v,i,e){return this.has(v)?(this.get(v).setProperty(i,e),this):this},easeProperty(v,i,e,d,t,s,u,n){return this.has(v)?(d===void 0&&(d=1e3),t===void 0&&(t="Linear"),s===void 0&&(s=0),u===void 0&&(u=!1),this.get(v).easeProperty(i,e,d,t,s,u,n),this):this},getTweenTask(v,i){if(this.has(v)){var e=this.get(v).tweens;if(e.hasOwnProperty(i))return e[i]}return null}},Ku={};Object.assign(Ku,ax,ox,hx);const as=Phaser.Utils.Objects.GetValue;class Zu{constructor(i,e){this.scene=i,this.BobClass=as(e,"BobClass",$u),this.setCreateGameObjectCallback(as(e,"createGameObject")),this.setEventEmitter(as(e,"eventEmitter",void 0)),this.setGOFadeTime(as(e,"fade",500)),this.setViewportCoordinateEnable(as(e,"viewportCoordinate",!1)),this.bobs={},this.removedGOs=[],this._timeScale=1}destroy(i){this.clear(!i),this.createGameObjectCallback=void 0,this.scene=void 0}set timeScale(i){if(this._timeScale!==i){this._timeScale=i;var e=this.bobs;for(var d in e)e[d].setTimeScale(i)}}get timeScale(){return this._timeScale}setTimeScale(i){return this.timeScale=i,this}setCreateGameObjectCallback(i){return this.createGameObjectCallback=i,this}setGOFadeTime(i){return this.fadeTime=i,this}setViewportCoordinateEnable(i){return i===void 0&&(i=!0),this.viewportCoordinateEnable=i,this}get isEmpty(){return Km(this.bobs)&&this.removedGOs.length===0}}Object.assign(Zu.prototype,Qi,Ku);class lx extends $u{setTexture(i,e){return this.gameObject.setTexture(i,e),this}playAnimation(i){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(i),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(i){return this.gameObject.chain(i),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(i){return super.setTimeScale(i),this.gameObject.anims&&(this.gameObject.anims.timeScale=i),this}}var ux={playAnimation(v,i){return this.has(v)||this.add(v),this.get(v).playAnimation(i),this},stopAnimation(v){return this.has(v)?(this.get(v).stopAnimation(),this):this},chainAnimation(v,i){return this.has(v)?(this.get(v).chainAnimation(i),this):this},pauseAnimation(v){return this.has(v)?(this.get(v).pauseAnimation(),this):this},setTexture(v,i,e){return this.has(v)?(this.get(v).setTexture(i,e),this):this}},ku={};Object.assign(ku,ux);class $r extends Zu{constructor(i,e){e===void 0&&(e={}),e.BobClass=lx,super(i,e)}setCreateGameObjectCallback(i){return!i||i==="sprite"?i=dx:i==="image"&&(i=fx),super.setCreateGameObjectCallback(i),this}}var dx=function(v,i,e){return v.add.sprite(0,0,i,e)},fx=function(v,i,e){return v.add.image(0,0,i,e)};Object.assign($r.prototype,ku);var cx=function(v){return this.clickTarget=v,v?sn(v)?this.clickEE=v.input:this.clickEE=v.setInteractive():this.clickEE=null,this},vx=function(v){return this.camera=v,this},px=function(v){var i=this;v?typeof v=="function"?this.nextPageInput=function(e,d,t){var s=hi(i,e,d,t);v.call(i,s)}:this.nextPageInput=function(e,d,t){Yu(i,v,e,d,t)}:this.nextPageInput=null},gx=function(v,i){return this.imageManager.add(v,i),this},mx=function(v){return this.isPlaying?this:(this.removeChildren(),this.parser.start(v),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},xx=function(v){var i=Kt(this);return this.play(v),i};const yx=Phaser.Utils.Objects.GetValue;var Kr=function(){if(!this.isPlaying||this.isPageTyping)return this;var v=yx(this.wrapConfig,"callback",this.runWordWrap);typeof v=="string"&&(v=this[v]);var i=v.call(this,this.lastWrapResult);this.lastWrapResult=i,this.emit("page.start");var e=function(){this.emit(Hr),i.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?Kr.call(this):this.nextPageInput&&this.nextPageInput(Kr,[],this))};this.once(Hr,function(){this.typeWriter.off("complete",e,this)}),this.typeWriter.once("complete",e,this).start(i.children)},Tx=function(){return this.typeWriter.pauseTyping().pause(),this},Sx=function(){return this.typeWriter.pauseTyping(),this},Cx=function(){return this.typeWriter.resume().resumeTyping(),this},Ex=function(v){return this.typeWriter.wait(v),this},Px={setDefaultTypingSpeed(v){return this.defaultTypingSpeed=v,this},setTypingSpeed(v){return this.typingSpeed=v,this}},Mx=function(v){return this.timeScale=v,this},Ax=function(v){return this.typeWriter.setIgnoreWait(v),this},Ox=function(v){return v===void 0&&(v=!0),this.ignoreNextPageInput=v,this},Rx=function(){if(!this.isPlaying||!this.isPageTyping)return this;var v=this.typeWriter.speed,i=this.typeWriter.ignoreWait,e=this.typeWriter.skipTypingAnimation,d=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(v).setIgnoreWait(i).setSkipTypingAnimation(e).setSkipSoundEffect(d)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},Ju={setClickTarget:cx,setTargetCamera:vx,setNextPageInput:px,addImage:gx,play:mx,playPromise:xx,typingNextPage:Kr,pause:Tx,pauseTyping:Sx,resume:Cx,wait:Ex,setTimeScale:Mx,setIgnoreWait:Ax,setIgnoreNextPageInput:Ox,showPage:Rx};Object.assign(Ju,Px);var Lx=function(v){for(var i=0,e=Vo.length;i<e;i++)v.emit(Vo[i])};const _o=Phaser.Utils.Objects.IsPlainObject,ke=Phaser.Utils.Objects.GetValue;class Fx extends bu{constructor(i,e,d,t,s,u){_o(e)?u=e:_o(t)&&(u=t),u===void 0&&(u={});var n=u.text;delete u.text,super(i,e,d,t,s,u),this.type="rexTextPlayer",this.parser=new rm(this,ke(u,"parser",void 0)),this.typeWriter=new Xu(this,ke(u,"typing",void 0)),this._imageManager=void 0;var a=ke(u,"images",void 0);a&&this.addImage(a),this._soundManager=void 0;var h=ke(u,"sounds",void 0);h&&(this._soundManager=new Jo(this.scene,h)),this.setTargetCamera(ke(u,"camera",this.scene.sys.cameras.main)),this._spriteManager=void 0;var r=ke(u,"sprites",void 0);r&&(this._spriteManager=new $r(this.scene,r)),this.setIgnoreNextPageInput(ke(u,"ignoreNextPageInput",!1)),this.setClickTarget(ke(u,"clickTarget",this)),this.setNextPageInput(ke(u,"nextPageInput",null)),this.isPlaying=!1,n&&this.play(n)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new Gl(this.scene)),this._imageManager}get soundManager(){return this._soundManager===void 0&&(this._soundManager=new Jo(this.scene)),this._soundManager}get spriteManager(){return this._spriteManager===void 0&&(this._spriteManager=new $r(this.scene)),this._spriteManager}destroy(i){!this.scene||(Lx(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(i),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(i),this._imageManager=void 0,this._soundManager&&this._soundManager.destroy(i),this._soundManager=void 0,this.camera=void 0,this._spriteManager&&this._spriteManager.destroy(i),this._spriteManager=void 0,this.clickEE=void 0,super.destroy(i))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(i){this.typeWriter.setDefaultTypingSpeed(i)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(i){this.typeWriter.setTypingSpeed(i)}get typingSpeed(){return this.typeWriter.speed}set timeScale(i){this.typeWriter.timeScale=i,this._spriteManager!==void 0&&this._spriteManager.setTimeScale(i)}get timeScale(){return this.typeWriter.timeScale}}Object.assign(Fx.prototype,Ju);var rr=function(v,i,e,d,t,s,u,n,a,h,r,o){h===void 0&&(h=0),r===void 0&&(r=2*Math.PI),o===void 0&&(o=!1),i.beginPath(),i.ellipse(e,d,t,s,0,h,r,o),u!=null&&(i.fillStyle=u,i.fill()),n!=null&&(i.strokeStyle=n,i.lineWidth=a,i.stroke())},Ix=function(v,i,e,d,t,s,u,n,a,h,r){a===void 0&&n!=null&&(a=2),h===void 0&&(h="start"),r===void 0&&(r="alphabetic"),i.font=s,i.textAlign=h,i.textBaseline=r,i.fillStyle=u,i.strokeStyle=n,i.lineWidth=a,i.lineCap="round",i.lineJoin="round",n!=null&&n!=="none"&&a>0&&i.strokeText(t,e,d),u!=null&&u!=="none"&&i.fillText(t,e,d)},wx=function(){var v=this.radius,i=this.thickness*this.radius,e=this.radius-i/2,d=this.radius-i,t=this.canvas,s=this.context;if(this.trackColor&&i>0&&(s.save(),rr(t,s,v,v,e,e,void 0,this.trackColor,i),s.restore()),this.barColor&&e>0){var u,n,a;if(this.value===1)u=!1,n=0,a=2*Math.PI;else{u=this.anticlockwise,n=this.startAngle;var h=2*Math.PI*(u?1-this.value:this.value);a=h+n}s.save(),rr(t,s,v,v,e,e,void 0,this.barColor,i,n,a,u),s.restore()}if(this.centerColor&&d>0){var r;this.centerColor2?(r=this.context.createRadialGradient(v,v,0,v,v,d),r.addColorStop(0,this.centerColor),r.addColorStop(1,this.centerColor2)):r=this.centerColor,s.save(),rr(t,s,v,v,d,d,r),s.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(s.save(),Ix(t,s,v,v,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),s.restore())};const os=Phaser.Utils.Objects.GetValue,Dx=Phaser.Math.Linear;class pa extends ji{constructor(i,e){super(i,e),this.resetFromJSON(),this.boot()}start(i){if(this.timer.isRunning)return this;var e=this.target;this.propertyKey=os(i,"key","value");var d=e[this.propertyKey];return this.fromValue=os(i,"from",d),this.toValue=os(i,"to",d),this.setEase(os(i,"ease",this.ease)),this.setDuration(os(i,"duration",this.duration)),this.timer.setDuration(this.duration),e[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(i,e){var d=e.t;d=this.easeFn(d),i[this.propertyKey]=Dx(this.fromValue,this.toValue,d)}}const Bx=Phaser.Math.Percent;var bx=function(v){return this.easeValuePropName=v,this},Gx=function(v){return this.easeValueDuration=v,this},Nx=function(v){return this.easeFunction=v,this},zx=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},Vx=function(v,i,e){return v==null?this:(i!==void 0&&(v=Bx(v,i,e)),this.easeValueTask===void 0&&(this.easeValueTask=new pa(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:v,duration:this.easeValueDuration,ease:this.easeFunction}),this)},Os={setEaseValuePropName:bx,setEaseValueDuration:Gx,setEaseValueFunction:Nx,stopEaseValue:zx,easeValueTo:Vx};const Tt=Phaser.Utils.Objects.GetValue,Yx=Phaser.Utils.Objects.IsPlainObject,th=Phaser.Math.Clamp,Ux=Phaser.Math.Linear,eh=Phaser.Math.Percent,Xx=Phaser.Math.DegToRad(270);class Wx extends xn{constructor(i,e,d,t,s,u,n){Yx(e)&&(n=e,e=Tt(n,"x",0),d=Tt(n,"y",0),t=Tt(n,"radius",1),s=Tt(n,"barColor",void 0),u=Tt(n,"value",0));var a=t*2;super(i,e,d,a,a),this.type="rexCircularProgressCanvas",this.eventEmitter=Tt(n,"eventEmitter",this),this.setRadius(t),this.setTrackColor(Tt(n,"trackColor",void 0)),this.setBarColor(s),this.setCenterColor(Tt(n,"centerColor",void 0)),this.setThickness(Tt(n,"thickness",.2)),this.setStartAngle(Tt(n,"startAngle",Xx)),this.setAnticlockwise(Tt(n,"anticlockwise",!1)),this.setTextColor(Tt(n,"textColor",void 0)),this.setTextStrokeColor(Tt(n,"textStrokeColor",void 0),Tt(n,"textStrokeThickness",void 0));var h=Tt(n,"textFont",void 0);h?this.setTextFont(h):this.setTextFont(Tt(n,"textSize","16px"),Tt(n,"textFamily","Courier"),Tt(n,"textStyle","")),this.setTextFormatCallback(Tt(n,"textFormatCallback",void 0),Tt(n,"textFormatCallbackScope",void 0));var r=Tt(n,"valuechangeCallback",null);if(r!==null){var o=Tt(n,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",r,o)}this.setEaseValuePropName("value").setEaseValueDuration(Tt(n,"easeValue.duration",0)).setEaseValueFunction(Tt(n,"easeValue.ease","Linear")),this.setValue(u)}resize(i,e){return i=Math.floor(Math.min(i,e)),i===this.width?this:(super.resize(i,i),this.setRadius(i/2),this)}get value(){return this._value}set value(i){i=th(i,0,1);var e=this._value,d=e!=i;this.dirty=this.dirty||d,this._value=i,d&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(i,e,d){return i==null?this:(e!==void 0&&(i=eh(i,e,d)),this.value=i,this)}addValue(i,e,d){return e!==void 0&&(i=eh(i,e,d)),this.value+=i,this}getValue(i,e){var d=this.value;return i!==void 0&&(d=Ux(i,e,d)),d}get radius(){return this._radius}set radius(i){this.dirty=this.dirty||this._radius!=i,this._radius=i;var e=i*2;this.resize(e,e)}setRadius(i){return this.radius=i,this}get trackColor(){return this._trackColor}set trackColor(i){i=ft(i,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=i,this._trackColor=i}setTrackColor(i){return this.trackColor=i,this}get barColor(){return this._barColor}set barColor(i){i=ft(i,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=i,this._barColor=i}setBarColor(i){return this.barColor=i,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!=i,this._startAngle=i}setStartAngle(i){return this.startAngle=i,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!=i,this._anticlockwise=i}setAnticlockwise(i){return i===void 0&&(i=!0),this.anticlockwise=i,this}get thickness(){return this._thickness}set thickness(i){i=th(i,0,1),this.dirty=this.dirty||this._thickness!=i,this._thickness=i}setThickness(i){return this.thickness=i,this}get centerColor(){return this._centerColor}set centerColor(i){i=ft(i,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=i,this._centerColor=i}get centerColor2(){return this._centerColor2}set centerColor2(i){i=ft(i,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=i,this._centerColor2=i}setCenterColor(i,e){return this.centerColor=i,this.centerColor2=e,this}get textColor(){return this._textColor}set textColor(i){i=ft(i,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=i,this._textColor=i}setTextColor(i){return this.textColor=i,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(i){i=ft(i,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=i,this._textStrokeColor=i}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(i){this.dirty=this.dirty||this._textStrokeThickness!=i,this._textStrokeThickness=i}setTextStrokeColor(i,e){return e===void 0&&(e=2),this.textStrokeColor=i,this.textStrokeThickness=e,this}get textFont(){return this._textFont}set textFont(i){this.dirty=this.dirty||this._textFont!=i,this._textFont=i}setTextFont(i,e,d){var t;return e===void 0?t=i:t=d+" "+i+" "+e,this.textFont=t,this}setTextFormatCallback(i,e){return this.textFormatCallback=i,this.textFormatCallbackScope=e,this}updateTexture(){return this.clear(),wx.call(this),super.updateTexture(),this}getFormatText(i){i===void 0&&(i=this.value);var e;return this.textFormatCallbackScope?e=this.textFormatCallback(i):e=this.textFormatCallback.call(this.textFormatCallbackScope,i),e}}Object.assign(Wx.prototype,Os);const Hx=Phaser.GameObjects.GetCalcMatrix;var $x=function(v,i,e,d){i.updateData(),e.addToRenderList(i);var t=v.pipelines.set(i.pipeline),s=Hx(i,e,d),u=t.calcMatrix.copyFrom(s.calc),n=i._displayOriginX,a=i._displayOriginY,h=e.alpha*i.alpha;v.pipelines.preBatch(i);for(var r=i.geom,o=0,c=r.length;o<c;o++)r[o].webglRender(t,u,h,n,a);v.pipelines.postBatch(i)};const Kx=Phaser.Renderer.Canvas.SetTransform;var Zx=function(v,i,e,d){i.updateData(),e.addToRenderList(i);var t=v.currentContext;if(Kx(v,t,i,e,d)){for(var s=i._displayOriginX,u=i._displayOriginY,n=i.geom,a=0,h=n.length;a<h;a++)n[a].canvasRender(t,s,u);t.restore()}},kx={renderWebGL:$x,renderCanvas:Zx};const Jx=Phaser.GameObjects.Shape,Qx=Phaser.Utils.Array.Remove;class ga extends Jx{constructor(i,e,d,t,s){e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=0),s===void 0&&(s=t),super(i,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(e,d),this.setSize(t,s),this.updateDisplayOrigin()}get width(){return this._width}set width(i){this.setSize(i,this._height)}get height(){return this._height}set height(i){this.setSize(this._width,i)}setDirty(i){return i===void 0&&(i=!0),this.dirty=i,this}setSize(i,e){this.isSizeChanged=this.isSizeChanged||this._width!==i||this._height!==e,this.dirty=this.dirty||this.isSizeChanged,this._width=i,this._height=e,this.updateDisplayOrigin();var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=i,d.hitArea.height=e),this}resize(i,e){return this.setSize(i,e),this}get fillColor(){return this._fillColor}set fillColor(i){this.setFillStyle(i,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(i){this.setFillStyle(this._fillColor,i)}setFillStyle(i,e){return e===void 0&&(e=1),this.dirty=this.dirty||this.fillColor!==i||this.fillAlpha!==e,this._fillColor=i,this._fillAlpha=e,this}get lineWidth(){return this._lineWidth}set lineWidth(i){this.setStrokeStyle(i,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(i){this.setStrokeStyle(this._lineWidth,i,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(i){this.setStrokeStyle(this._lineWidth,this._strokeColor,i)}setStrokeStyle(i,e,d){return d===void 0&&(d=1),this.dirty=this.dirty||this.lineWidth!==i||this.strokeColor!==e||this.strokeAlpha!==d,this._lineWidth=i,this._strokeColor=e,this._strokeAlpha=d,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var i=this.geom,e=0,d=i.length;e<d;e++){var t=i[e];t.dirty&&t.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,ni(this.shapes),this}getShape(i){return this.shapes[i]}getShapes(){return this.geom}addShape(i){this.geom.push(i);var e=i.name;return e&&(this.shapes[e]=i),this.dirty=!0,this}deleteShape(i){var e=this.getShape(i);return e&&(delete this.shapes[i],Qx(this.geom,e)),this}}Object.assign(ga.prototype,kx);var jx=function(v,i){return v===void 0?this.isFilled=!1:(i===void 0&&(i=1),this.isFilled=!0,this.fillColor=v,this.fillAlpha=i),this},qx=function(v,i,e){return v===void 0||i===void 0?this.isStroked=!1:(e===void 0&&(e=1),this.isStroked=!0,this.lineWidth=v,this.strokeColor=i,this.strokeAlpha=e),this},_x={fillStyle:jx,lineStyle:qx};class Mn{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(i){return this.name=i,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(i,e,d,t,s){}canvasRender(i,e,d){}updateData(){this.dirty=!1}}Object.assign(Mn.prototype,_x,mn);const ty=Phaser.Geom.Polygon.Earcut;class An extends Mn{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=ty(this.pathData),super.updateData(),this}webglRender(i,e,d,t,s){this.isFilled&&Tl(i,e,this,d,t,s),this.isStroked&&gn(i,this,d,t,s)}canvasRender(i,e,d){var t=this.pathData,s=t.length-1,u=t[0]-e,n=t[1]-d;i.beginPath(),i.moveTo(u,n),this.closePath||(s-=2);for(var a=2;a<s;a+=2){var h=t[a]-e,r=t[a+1]-d;i.lineTo(h,r)}this.closePath&&i.closePath(),this.isFilled&&(Ss(i,this),i.fill()),this.isStroked&&(Cs(i,this),i.stroke())}}const ih=Phaser.Math.DegToRad;class On extends An{constructor(i,e,d,t,s,u,n,a){i===void 0&&(i=0),e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=0),s===void 0&&(s=0),u===void 0&&(u=360),n===void 0&&(n=!1),a===void 0&&(a=!1),super(),this.setCenterPosition(i,e),this.setRadius(d,t),this.setAngle(s,u,n),this.setPie(a),this.setIterations(32)}get x(){return this._x}set x(i){this.dirty=this.dirty||this._x!==i,this._x=i}get y(){return this._y}set y(i){this.dirty=this.dirty||this._y!==i,this._y=i}setCenterPosition(i,e){return e===void 0&&(e=i),this.x=i,this.y=e,this}get radiusX(){return this._radiusX}set radiusX(i){this.dirty=this.dirty||this._radiusX!==i,this._radiusX=i}get radiusY(){return this._radiusY}set radiusY(i){this.dirty=this.dirty||this._radiusY!==i,this._radiusY=i}setRadius(i,e){return e===void 0&&(e=i),this.radiusX=i,this.radiusY=e,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!==i,this._startAngle=i}get endAngle(){return this._endAngle}set endAngle(i){this.dirty=this.dirty||this._endAngle!==i,this._endAngle=i}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!==i,this._anticlockwise=i}setAngle(i,e,d){return d===void 0&&(d=!1),this.startAngle=i,this.endAngle=e,this.anticlockwise=d,this}get pie(){return this._pie}set pie(i){this.dirty=this.dirty||this._pie!==i,this._pie=i}setPie(i){return i===void 0&&(i=!0),this.pie=i,this}get iterations(){return this._iterations}set iterations(i){this.dirty=this.dirty||this._iterations!==i,this._iterations=i}setIterations(i){return this.iterations=i,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),Ji(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(i,e,d){i.beginPath();var t=this.x-e,s=this.y-d,u=ih(this.startAngle),n=ih(this.endAngle);this.pie&&(i.moveTo(t,s),i.lineTo(t+Math.cos(u)*this.radiusX,s+Math.sin(u)*this.radiusY)),i.ellipse(t,s,this.radiusX,this.radiusY,0,u,n,this.anticlockwise),this.pie&&i.lineTo(t,s),this.isFilled&&(Ss(i,this),i.fill()),this.isStroked&&(Cs(i,this),i.stroke())}}class Zr extends On{constructor(i,e,d){super(i,e,d,d,0,360)}}class ey extends An{constructor(i){super(),this.setCurve(i),this.setIterations(32)}get curve(){return this._curve}set curve(i){this.dirty=this.dirty||this._curve!==i,this._curve=i}setCurve(i){return this.curve=i,this}get iterations(){return this._iterations}set iterations(i){this.dirty=this.dirty||this._iterations!==i,this._iterations=i}setIterations(i){return this.iterations=i,this}updateData(){this.pathData.length=0;for(var i=this.curve.getPoints(this.iterations),e=0,d=i.length;e<d;e++)this.pathData.push(i[e].x,i[e].y);return this.pathData.push(i[0].x,i[0].y),super.updateData(),this}}class iy extends On{constructor(i,e,d,t){super(i,e,d,t,0,360)}}class sy extends An{constructor(i,e,d,t){i===void 0&&(i=0),e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=0),super(),this.setP0(i,e),this.setP1(d,t)}get x0(){return this._x0}set x0(i){this.dirty=this.dirty||this._x0!==i,this._x0=i}get y0(){return this._y0}set y0(i){this.dirty=this.dirty||this._y0!==i,this._y0=i}setP0(i,e){return this.x0=i,this.y0=e,this}get x1(){return this._x1}set x1(i){this.dirty=this.dirty||this._x1!==i,this._x1=i}get y1(){return this._y1}set y1(i){this.dirty=this.dirty||this._y1!==i,this._y1=i}setP1(i,e){return this.x1=i,this.y1=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var ny=function(v,i,e){return e.length=0,v!=null&&e.push(v,i),e};const sh=Phaser.Math.Interpolation.QuadraticBezier;var nh=function(v,i,e,d,t,s){for(var u=s.length,n=s[u-2],a=s[u-1],h=1,r=t-1;h<=r;h++){var o=h/r;s.push(sh(o,n,v,e),sh(o,a,i,d))}return s};const ry=Phaser.Math.RotateAround;var ay=function(v,i,e,d){for(var t={x:0,y:0},s=0,u=d.length-1;s<u;s+=2)t.x=d[s],t.y=d[s+1],ry(t,v,i,e),d[s]=t.x,d[s+1]=t.y;return d},oy=function(v,i,e){for(var d=0,t=e.length-1;d<t;d+=2)e[d]+=v,e[d+1]+=i;return e},hy=function(v,i){i===void 0&&(i=[]);for(var e=0,d=v.length-1;e<d;e+=2)i.push({x:v[e],y:v[e+1]});return i};const ly=Phaser.Geom.Polygon;var uy=function(v,i){return i===void 0&&(i=new ly),i.setTo(v),i};const dy=Phaser.Math.DegToRad;class fy{constructor(i){i===void 0&&(i=[]),this.pathData=i,this.closePath=!1,this.setIterations(32),this.lastPointX=void 0,this.lastPointY=void 0}setIterations(i){return this.iterations=i,this}start(){return this.startAt(),this}startAt(i,e){return ny(i,e,this.pathData),this.lastPointX=i,this.lastPointY=e,this}lineTo(i,e,d){return d===void 0&&(d=!1),d&&(i+=this.lastPointX,e+=this.lastPointY),ki(i,e,this.pathData),this.lastPointX=i,this.lastPointY=e,this}verticalLineTo(i,e){return this.lineTo(i,this.lastPointY,e),this}horizontalLineTo(i,e){return this.lineTo(this.lastPointX,i,e),this}ellipticalArc(i,e,d,t,s,u,n){n===void 0&&(n=!1),Ji(i,e,d,t,s,u,n,this.iterations,this.pathData);var a=this.pathData.length;return this.lastPointX=this.pathData[a-2],this.lastPointY=this.pathData[a-1],this}arc(i,e,d,t,s,u){return this.ellipticalArc(i,e,d,d,t,s,u),this}quadraticBezierTo(i,e,d,t){return nh(i,e,d,t,this.iterations,this.pathData),this.lastPointX=d,this.lastPointY=t,this.lastCX=i,this.lastCY=e,this}smoothQuadraticBezierTo(i,e){var d=this.lastPointX*2-this.lastCX,t=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(d,t,i,e),this}cubicBezierCurveTo(i,e,d,t,s,u){return nh(i,e,d,t,s,u,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=u,this.lastCX=d,this.lastCY=t,this}smoothCubicBezierCurveTo(i,e,d,t){var s=this.lastPointX*2-this.lastCX,u=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(s,u,i,e,d,t),this}close(){return this.closePath=!0,this}end(){return this.pathData.push(this.lastPointX,this.lastPointY),this}rotateAround(i,e,d){if(this.pathData.length===0)return this;d=dy(d),ay(i,e,d,this.pathData);var t=this.pathData.length;if(this.lastPointX=this.pathData[t-2],this.lastPointY=this.pathData[t-1],this.lastCX!==void 0){var s={x:this.lastCX,y:this.lastCY};PointRotateAround(s,i,e,d),this.lastCX=s.x,this.lastCY=s.y}return this}offset(i,e){return oy(i,e,this.pathData),this}toPoints(){return hy(this.pathData)}toPolygon(i){return uy(this.pathData,i)}draw(i,e,d){var t=this.toPoints();return e&&i.fillPoints(t,this.closePath,this.closePath),d&&i.strokePoints(t,this.closePath,this.closePath),this}}class cy extends An{constructor(){super(),this.builder=new fy(this.pathData)}get iterations(){return this.builder.iterations}set iterations(i){this.dirty=this.dirty||this.builder.iterations!==i,this.builder.setIterations(i)}setIterations(i){return this.iterations=i,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(i,e){return this.builder.startAt(i,e),this.dirty=!0,this}lineTo(i,e,d){return this.builder.lineTo(i,e,d),this.dirty=!0,this}verticalLineTo(i,e){return this.builder.verticalLineTo(i,e),this.dirty=!0,this}horizontalLineTo(i,e){return this.builder.horizontalLineTo(i,e),this.dirty=!0,this}ellipticalArc(i,e,d,t,s,u,n){return this.builder.ellipticalArc(i,e,d,t,s,u,n),this.dirty=!0,this}arc(i,e,d,t,s,u){return this.builder.arc(i,e,d,t,s,u),this.dirty=!0,this}quadraticBezierTo(i,e,d,t){return this.builder.quadraticBezierTo(i,e,d,t),this.dirty=!0,this}smoothQuadraticBezierTo(i,e){return this.builder.smoothQuadraticBezierTo(i,e),this.dirty=!0,this}cubicBezierCurveTo(i,e,d,t,s,u){return this.builder.cubicBezierCurveTo(i,e,d,t,s,u),this.dirty=!0,this}smoothCubicBezierCurveTo(i,e,d,t){return this.builder.smoothCubicBezierCurveTo(i,e,d,t),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(i,e,d){return this.builder.rotateAround(i,e,d),this.dirty=!0,this}offset(i,e){return this.builder.offset(i,e),this.dirty=!0,this}toPolygon(i){return this.builder.toPolygon(i)}}const vy=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class py extends Mn{constructor(i,e,d,t){i===void 0&&(i=0),e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=d),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(i,e),this.setSize(d,t)}get x(){return this._x}set x(i){this.dirty=this.dirty||this._x!==i,this._x=i}get y(){return this._y}set y(i){this.dirty=this.dirty||this._y!==i,this._y=i}setTopLeftPosition(i,e){return this.x=i,this.y=e,this}get width(){return this._width}set width(i){this.dirty=this.dirty||this._width!==i,this._width=i}get height(){return this._height}set height(i){this.dirty=this.dirty||this._height!==i,this._height=i}setSize(i,e){return this.width=i,this.height=e,this}updateData(){this.pathData.length=0;var i=this.x,e=i+this.width,d=this.y,t=d+this.height;return this.pathData.push(i,d),this.pathData.push(e,d),this.pathData.push(e,t),this.pathData.push(i,t),this.pathData.push(i,d),super.updateData(),this}webglRender(i,e,d,t,s){if(this.isFilled){var u=i.fillTint,n=vy(this.fillColor,this.fillAlpha*d);u.TL=n,u.TR=n,u.BL=n,u.BR=n,i.batchFillRect(-t+this.x,-s+this.y,this.width,this.height)}this.isStroked&&gn(i,this,d,t,s)}canvasRender(i,e,d){this.isFilled&&(Ss(i,this),i.fillRect(-e,-d,this.width,this.height)),this.isStroked&&(Cs(i,this),i.beginPath(),i.rect(-e,-d,this.width,this.height),i.stroke())}}const gy=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class my extends Mn{constructor(i,e,d,t,s,u){i===void 0&&(i=0),e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=0),s===void 0&&(s=0),u===void 0&&(u=0),super(),this.pathData=[],this.closePath=!0,this.setP0(i,e),this.setP1(d,t),this.setP2(s,u)}get x0(){return this._x0}set x0(i){this.dirty=this.dirty||this._x0!==i,this._x0=i}get y0(){return this._y0}set y0(i){this.dirty=this.dirty||this._y0!==i,this._y0=i}setP0(i,e){return this.x0=i,this.y0=e,this}get x1(){return this._x1}set x1(i){this.dirty=this.dirty||this._x1!==i,this._x1=i}get y1(){return this._y1}set y1(i){this.dirty=this.dirty||this._y1!==i,this._y1=i}setP1(i,e){return this.x1=i,this.y1=e,this}get x2(){return this._x2}set x2(i){this.dirty=this.dirty||this._x2!==i,this._x2=i}get y2(){return this._y2}set y2(i){this.dirty=this.dirty||this._y2!==i,this._y2=i}setP2(i,e){return this.dirty=this.dirty||this.x2!==i||this.y2!==e,this.x2=i,this.y2=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(i,e,d,t,s){if(this.isFilled){var u=gy(this.fillColor,this.fillAlpha*d),n=this.x0-t,a=this.y0-s,h=this.x1-t,r=this.y1-s,o=this.x2-t,c=this.y2-s,l=e.getX(n,a),f=e.getY(n,a),p=e.getX(h,r),g=e.getY(h,r),m=e.getX(o,c),x=e.getY(o,c);i.batchTri(l,f,p,g,m,x,u,u,u)}this.isStroked&&gn(i,this,d,t,s)}canvasRender(i,e,d){var t=this.x1-e,s=this.y1-d,u=this.x2-e,n=this.y2-d,a=this.x3-e,h=this.y3-d;i.beginPath(),i.moveTo(t,s),i.lineTo(u,n),i.lineTo(a,h),i.closePath(),this.isFilled&&(Ss(i,this),i.fill()),this.isStroked&&(Cs(i,this),i.stroke())}}const Jt=Phaser.Utils.Objects.GetValue,xy=Phaser.Utils.Objects.IsPlainObject,rh=Phaser.Math.Clamp,yy=Phaser.Math.Linear,ah=Phaser.Math.Percent,Ty=Phaser.Math.DegToRad(270),Sy=Phaser.Math.RadToDeg;class Qu extends ga{constructor(i,e,d,t,s,u,n){xy(e)&&(n=e,e=Jt(n,"x",0),d=Jt(n,"y",0),t=Jt(n,"radius",1),s=Jt(n,"barColor",void 0),u=Jt(n,"value",0));var a=t*2;super(i,e,d,a,a),this.type="rexCircularProgress",this.eventEmitter=Jt(n,"eventEmitter",this),this.addShape(new Zr().setName("track")).addShape(new On().setName("bar")).addShape(new Zr().setName("center")),this.setRadius(t),this.setTrackColor(Jt(n,"trackColor",void 0)),this.setBarColor(s),this.setCenterColor(Jt(n,"centerColor",void 0)),this.setThickness(Jt(n,"thickness",.2)),this.setStartAngle(Jt(n,"startAngle",Ty)),this.setAnticlockwise(Jt(n,"anticlockwise",!1));var h=Jt(n,"valuechangeCallback",null);if(h!==null){var r=Jt(n,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",h,r)}this.setEaseValuePropName("value").setEaseValueDuration(Jt(n,"easeValue.duration",0)).setEaseValueFunction(Jt(n,"easeValue.ease","Linear")),this.setValue(u)}resize(i,e){return i=Math.floor(Math.min(i,e)),i===this.width?this:(super.resize(i,i),this.setRadius(i/2),this)}get value(){return this._value}set value(i){i=rh(i,0,1);var e=this._value,d=e!=i;this.dirty=this.dirty||d,this._value=i,d&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(i,e,d){return i==null?this:(e!==void 0&&(i=ah(i,e,d)),this.value=i,this)}addValue(i,e,d){return e!==void 0&&(i=ah(i,e,d)),this.value+=i,this}getValue(i,e){var d=this.value;return i!==void 0&&(d=yy(i,e,d)),d}get radius(){return this._radius}set radius(i){this.dirty=this.dirty||this._radius!=i,this._radius=i;var e=i*2;this.resize(e,e)}setRadius(i){return this.radius=i,this}get trackColor(){return this._trackColor}set trackColor(i){this.dirty=this.dirty||this._trackColor!=i,this._trackColor=i}setTrackColor(i){return this.trackColor=i,this}get barColor(){return this._barColor}set barColor(i){this.dirty=this.dirty||this._barColor!=i,this._barColor=i}setBarColor(i){return this.barColor=i,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!=i,this._startAngle=i}setStartAngle(i){return this.startAngle=i,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!=i,this._anticlockwise=i}setAnticlockwise(i){return i===void 0&&(i=!0),this.anticlockwise=i,this}get thickness(){return this._thickness}set thickness(i){i=rh(i,0,1),this.dirty=this.dirty||this._thickness!=i,this._thickness=i}setThickness(i){return this.thickness=i,this}get centerColor(){return this._centerColor}set centerColor(i){this.dirty=this.dirty||this._centerColor!=i,this._centerColor=i}setCenterColor(i){return this.centerColor=i,this}updateShapes(){var i=this.radius,e=this.thickness*this.radius,d=this.radius-e/2,t=this.radius-e,s=this.getShape("track");this.trackColor!=null&&e>0?s.setCenterPosition(i,i).setRadius(d).lineStyle(e,this.trackColor):s.reset();var u=this.getShape("bar");if(this.barColor!=null&&d>0){var n,a,h;if(this.value===1)n=!1,a=0,h=361;else{n=this.anticlockwise,a=Sy(this.startAngle);var r=360*(n?1-this.value:this.value);h=r+a}u.setCenterPosition(i,i).setRadius(d).setAngle(a,h,n).lineStyle(e,this.barColor)}else u.reset();var o=this.getShape("center");this.centerColor&&t>0?o.setCenterPosition(i,i).setRadius(t).fillStyle(this.centerColor):o.reset()}}Object.assign(Qu.prototype,Os);var Rn=function(v){return v.hasOwnProperty("rexSizer")||(v.rexSizer={}),v.rexSizer},Cy=function(v){var i=Rn(v);return i.hasOwnProperty("prevState")||(i.prevState={}),i.prevState};const Ey=Phaser.Cameras.Scene2D.BaseCamera;var Py=function(v){return v instanceof Ey};const ju=Phaser.Geom.Rectangle;var Ln=function(v,i,e){Py(i)||(e=i,i=void 0),e===void 0?e=new ju:e===!0&&(e=My);var d=v.sys.scale,t=d.baseSize,s=d.parentSize,u=d.canvasBounds,n=d.displayScale,a=u.x>=0?0:-(u.x*n.x),h=u.y>=0?0:-(u.y*n.y),r;s.width>=u.width?r=t.width:r=t.width-(u.width-s.width)*n.x;var o;if(s.height>=u.height?o=t.height:o=t.height-(u.height-s.height)*n.y,e.setTo(a,h,r,o),i){var c=i.scrollX,l=i.scrollY,f=1/i.zoomX,p=1/i.zoomY;e.width*=f,e.height*=p,e.centerX=i.centerX+c,e.centerY=i.centerY+l}return e},My=new ju,Ay=function(v){return v===void 0&&(v=Ln(this.scene)),this.left=Math.max(this.left,v.left),this.right=Math.min(this.right,v.right),this.top=Math.max(this.top,v.top),this.bottom=Math.min(this.bottom,v.bottom),this};const ee=Phaser.Display.Align;var Fn={center:ee.CENTER,left:ee.LEFT_CENTER,right:ee.RIGHT_CENTER,top:ee.TOP_CENTER,bottom:ee.BOTTOM_CENTER,"left-top":ee.TOP_LEFT,"left-center":ee.LEFT_CENTER,"left-bottom":ee.BOTTOM_LEFT,"center-top":ee.TOP_CENTER,"center-center":ee.CENTER,"center-bottom":ee.BOTTOM_CENTER,"right-top":ee.TOP_RIGHT,"right-center":ee.RIGHT_CENTER,"right-bottom":ee.BOTTOM_RIGHT},kr=new Phaser.GameObjects.Zone({sys:{queueDepthSort:ri,events:{once:ri}}},0,0,1,1);kr.setOrigin(0);var ti={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},ma=function(v){var i=vt(v);return v.y+i-i*v.originY},xa=function(v){var i=gt(v);return v.x-i*v.originX+i*.5},ya=function(v,i){var e=vt(v);return v.y=i-e+e*v.originY,v},Ta=function(v,i){var e=gt(v),d=e*v.originX;return v.x=i+d-e*.5,v},Oy=function(v,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Ta(v,xa(i)+e),ya(v,ma(i)+d),v},Sa=function(v){var i=gt(v);return v.x-i*v.originX},Ca=function(v,i){var e=gt(v);return v.x=i+e*v.originX,v},Ry=function(v,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Ca(v,Sa(i)-e),ya(v,ma(i)+d),v},Ea=function(v){var i=gt(v);return v.x+i-i*v.originX},Pa=function(v,i){var e=gt(v);return v.x=i-e+e*v.originX,v},Ly=function(v,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Pa(v,Ea(i)+e),ya(v,ma(i)+d),v},Ma=function(v,i){var e=vt(v),d=e*v.originY;return v.y=i+d-e*.5,v},Fy=function(v,i,e){return Ta(v,i),Ma(v,e)},Aa=function(v){var i=vt(v);return v.y-i*v.originY+i*.5},Iy=function(v,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Fy(v,xa(i)+e,Aa(i)+d),v},wy=function(v,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Ca(v,Sa(i)-e),Ma(v,Aa(i)+d),v},Dy=function(v,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Pa(v,Ea(i)+e),Ma(v,Aa(i)+d),v},Oa=function(v){var i=vt(v);return v.y-i*v.originY},Ra=function(v,i){var e=vt(v);return v.y=i+e*v.originY,v},By=function(v,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Ta(v,xa(i)+e),Ra(v,Oa(i)-d),v},by=function(v,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Ca(v,Sa(i)-e),Ra(v,Oa(i)-d),v},Gy=function(v,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Pa(v,Ea(i)+e),Ra(v,Oa(i)-d),v},Ve=[];Ve[ti.BOTTOM_CENTER]=Oy;Ve[ti.BOTTOM_LEFT]=Ry;Ve[ti.BOTTOM_RIGHT]=Ly;Ve[ti.CENTER]=Iy;Ve[ti.LEFT_CENTER]=wy;Ve[ti.RIGHT_CENTER]=Dy;Ve[ti.TOP_CENTER]=By;Ve[ti.TOP_LEFT]=by;Ve[ti.TOP_RIGHT]=Gy;var qu=function(v,i,e,d,t){return Ve[e](v,i,d,t)},In=function(v,i,e,d,t,s){kr.setPosition(i,e).setSize(d,t),qu(v,kr,s)};const hs=Phaser.Utils.Objects.GetValue,Ny=Phaser.GameObjects.Group;var zy=function(v,i){var e=v.scene,d,t,s,u;if(typeof i=="number")d=i;else{d=hs(i,"color",16777215);var n=hs(i,"name",!1);n&&(t=hs(n,"createTextCallback",Vy),s=hs(n,"createTextCallbackScope",void 0),u=hs(n,"align","left-top"),typeof u=="string"&&(u=Fn[u]))}if(t&&!v.children){v.children=new Ny(e),v.once("destroy",function(f,p){f.children.destroy(!p),f.children=void 0});var a=v.clear.bind(v);v.clear=function(){a(),v.children.clear(!1,!0)}}for(var h=this.getAllShownChildren([this]),r,o,c=0,l=h.length;c<l;c++){if(r=h[c],r.getBounds||r.width!==void 0&&r.height!==void 0)pi=da(r,pi);else continue;d!=null&&v.lineStyle(1,d).strokeRectShape(pi),r.name&&t&&(s?o=t.call(s,e):o=t(e),o&&(o.setText(r.name),v.children.add(o),In(o,pi.x,pi.y,pi.width,pi.height,u)))}return this},Vy=function(v,i,e){return v.add.text(0,0,"")},pi=void 0;const Ws=Phaser.Utils.Objects.GetValue;var qi=function(v,i){return i===void 0&&(i={}),typeof v=="number"?(i.left=v,i.right=v,i.top=v,i.bottom=v):(i.left=Ws(v,"left",0),i.right=Ws(v,"right",0),i.top=Ws(v,"top",0),i.bottom=Ws(v,"bottom",0)),i};const Yy=ze.prototype.add;var Rs=function(v){return Yy.call(this,v),this.sizerEventsEnable&&(v.emit("sizer.add",v,this),this.emit("add",v,this)),this},Uy={addBackground(v,i,e){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof i=="string"&&(e=i,i=void 0),i===void 0&&(i=0),Rs.call(this,v),this.backgroundChildren.push(v);var d=this.getSizerConfig(v);return d.padding=qi(i),e!==void 0&&this.addChildrenMap(e,v),this},isBackground(v){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(v)!==-1}},Xy={removeFromParentSizer(){var v=this.getParentSizer();return v&&v.remove(this),this}},oh=function(v,i){return this.childrenMap[v]=i,this},Wy=function(v){if(typeof v=="object"){var i=v;for(var v in this.childrenMap)if(this.childrenMap[v]===i)return delete this.childrenMap[v],this}return delete this.childrenMap[v],this},Hy=function(v,i){if(typeof v=="string"&&(v=v.split(".")),v.length!==0){var e=v.shift(),d=null;if(e.charAt(0)==="#")e=e.substring(1),d=this.getByName(e,i);else if(e.indexOf("[")===-1)this.childrenMap&&(d=this.childrenMap[e]);else{var t=e.match($y);if(t!=null&&this.childrenMap){var s=this.childrenMap[t[1]];s&&(d=s[t[2]])}}return v.length===0?d:d&&d.childrenMap?d.getElement(v):null}};const $y=/(\S+)\[(\d+)\]/i;var Ky={getInnerPadding(v){return nn(this.space,v)},setInnerPadding(v,i){return rn(this.space,v,i),this},getOuterPadding(v){return nn(this.getSizerConfig(this).padding,v)},setOuterPadding(v,i){return rn(this.getSizerConfig(this).padding,v,i),this},getChildOuterPadding(v,i){return typeof v=="string"&&(v=this.getElement(v)),nn(this.getSizerConfig(v).padding,i)},setChildOuterPadding(v,i,e){return typeof v=="string"&&(v=this.getElement(v)),rn(this.getSizerConfig(v).padding,i,e),this}},La=function(v){return v===void 0&&(v=Math.max(this.childrenWidth,this.minWidth)),v},Zy=function(v){var i,e;for(var d in this.sizerChildren)i=this.sizerChildren[d],i&&i.isRexSizer&&!i.ignoreLayout&&(e=this.getExpandedChildWidth(i,v),e=i.resolveWidth(e),i.resolveChildrenWidth(e))},Fa=function(v){var i=Math.max(this.childrenHeight,this.minHeight);return v===void 0&&(v=i),v},ky=function(v){var i;return v.isRexSizer?i=Math.max(v.minWidth,v.childrenWidth):v.minWidth!==void 0?i=v.minWidth:i=gt(v),i},Jy=function(v){var i;return v.isRexSizer?i=Math.max(v.minHeight,v.childrenHeight):v.minHeight!==void 0?i=v.minHeight:i=vt(v),i},Qy=function(v,i){return i},jy=function(v,i){return i},qy=function(){return 0},_y=function(){return 0},tT=function(v){v===void 0&&(v=[]);for(var i=v.length,e=this.getChildrenSizers(v),d=v.length,t=i;t<d;t++)e[t].getAllChildrenSizers(v);return v},eT=function(v){return v===void 0&&(v=[]),v},iT={getShownChildren(v){v===void 0&&(v=[]);for(var i=this.children,e,d=0,t=i.length;d<t;d++)e=i[d],!(e.rexSizer&&e.rexSizer.hidden)&&v.push(e);return v},getAllShownChildren(v){v===void 0&&(v=[]);for(var i=this.children,e,d=0,t=i.length;d<t;d++)e=i[d],!(e.rexSizer&&e.rexSizer.hidden)&&(v.push(e),e.hasOwnProperty("isRexContainerLite")&&v.push(...e.getAllShownChildren()));return v}},Ls=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var v=this.getChildrenSizers(),i,e=0,d=v.length;e<d;e++)i=v[e],!i.ignoreLayout&&i.preLayout()},sT=function(){var v=this.scaleX,i=this.scaleY,e=v===1&&i===1;return e||this.setScale(1),this.runLayout(),e||this.setScale(v,i),this},nT=function(v,i,e){if(this.ignoreLayout)return this;var d=!v;return d&&this.preLayout(),i=this.resolveWidth(i),d&&(this.resolveChildrenWidth(i),this.runWidthWrap(i)),e=this.resolveHeight(e),this.resize(i,e),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},rT=function(){},aT=function(v,i,e){return this._anchor&&this._anchor.updatePosition(),this},_u=function(v){var i,e;for(var d in this.sizerChildren)i=this.sizerChildren[d],!(!i||i.isRexSizer&&i.ignoreLayout||!i.runWidthWrap)&&(e=this.getExpandedChildWidth(i,v),i.isRexSizer&&(e=i.resolveWidth(e)),i.runWidthWrap(e));return this};class oT extends me{constructor(i,e){super(i,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(e)}resetFromJSON(i){i===void 0&&(i={});var e,d;i.x!==void 0?(e=null,d=i.x):i.left!==void 0?(e=0,d=i.left):i.right!==void 0?(e=1,d=i.right):i.centerX!==void 0&&(e=.5,d=i.centerX);var t,s;i.y!==void 0?(t=null,s=i.y):i.top!==void 0?(t=0,s=i.top):i.bottom!==void 0?(t=1,s=i.bottom):i.centerY!==void 0&&(t=.5,s=i.centerY);var u,n;d!==void 0&&(d=d.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),u=parseFloat(d[0])/100,n=d[1]===""?0:parseFloat(d[1]));var a,h;s!==void 0&&(s=s.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),a=parseFloat(s[0])/100,h=s[1]===""?0:parseFloat(s[1]));var r=i.width,o,c;r!==void 0&&(r=r.split("%"),o=parseFloat(r[0])/100,c=r[1]===""?0:parseFloat(r[1]));var l=i.height,f,p;l!==void 0&&(l=l.split("%"),f=parseFloat(l[0])/100,p=l[1]===""?0:parseFloat(l[1])),this.setAlign(e,t),this.setPercentage(u,a),this.setOffset(n,h),this.setSizePercentage(o,f),this.setSizePadding(c,p);var g=i.onResizeCallback,m=i.onResizeCallbackScope;g!==void 0&&this.setResizeCallback(g,m);var x=i.onUpdateViewportCallback,y=i.onUpdateViewportCallbackScope;return x!==void 0&&this.setUpdateViewportCallback(x,y),this.autoAnchor(i.enable),this}shutdown(i){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(i))}autoAnchor(i){return i===void 0&&(i=!0),i=!!i,this.autoAnchorEnable===i?this:(i?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=i,this)}setAlign(i,e){return this.alignX=i,this.alignY=e,this}setPercentage(i,e){return this.percentageX=i,this.percentageY=e,this}setOffset(i,e){return this.offsetX=i,this.offsetY=e,this}setSizePercentage(i,e){return this.percentageWidth=i,this.percentageHeight=e,this}setSizePadding(i,e){return this.paddingWidth=i,this.paddingHeight=e,this}setResizeCallback(i,e){return this.onResizeCallback=i,this.onResizeCallbackScope=e,this}setUpdateViewportCallback(i,e){return this.onUpdateViewportCallback=i,this.onUpdateViewportCallbackScope=e,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var i=this.onResizeCallback,e=this.onResizeCallbackScope,d=this.anchorWidth,t=this.anchorHeight;if(!(d===void 0&&t===void 0||!i)){var s=this.parent;d===void 0&&(d=s.width),t===void 0&&(t=s.height),e?i.call(e,d,t,s,this):i(d,t,s,this)}}updatePosition(){var i=this.parent;return this.alignX===null?i.x=this.anchorX:this.alignX!==void 0&&(i.x=this.anchorX+i.displayWidth*(i.originX-this.alignX)),this.alignY===null?i.y=this.anchorY:this.alignY!==void 0&&(i.y=this.anchorY+i.displayHeight*(i.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var i=this.parent.scene.cameras.main;this.viewport=Ln(this.scene,i,this.viewport);var e=this.viewport,d=this.onUpdateViewportCallback,t=this.onUpdateViewportCallbackScope;d&&(t?d.call(t,e,this.parent,this):d(e,this.parent,this))}}var hT=function(v){v===void 0&&(v={});var i=v.hasOwnProperty("width"),e=v.hasOwnProperty("height"),d=v.hasOwnProperty("onResizeCallback");return(i||e)&&!d&&(v.onResizeCallback=function(t,s,u){i&&u.setMinWidth(t),e&&u.setMinHeight(s),u.layout()}),this._anchor===void 0?this._anchor=new oT(this,v):this._anchor.resetFromJSON(v),this};const lT=Phaser.Utils.Objects.GetValue,Gi=Phaser.Utils.Objects.GetAdvancedValue,hh=Phaser.Math.Linear;class un extends ji{constructor(i,e){super(i,e),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(e),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(lT(i,"mode",0)),this.setScaleRange(Gi(i,"start",void 0),Gi(i,"end",0)),this}setMode(i){return typeof i=="string"&&(i=uT[i]),this.mode=i,this}setScaleRange(i,e){return typeof i=="number"?(this.startX=i,this.startY=i):(this.startX=Gi(i,"x",this.parent.scaleX),this.startY=Gi(i,"y",this.parent.scaleY)),typeof e=="number"?(this.endX=e,this.endY=e):(this.endX=Gi(e,"x",void 0),this.endY=Gi(e,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var i=this.parent;this.hasScaleX&&(i.scaleX=this.startX),this.hasScaleY&&(i.scaleY=this.startY);var e=this.repeat;return this.mode===2&&e!==-1&&(e=(e+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(e),super.start(),this}updateGameObject(i,e){var d=e.t;e.isOddIteration&&(d=1-d),d=this.easeFn(d),this.hasScaleX&&(i.scaleX=hh(this.startX,this.endX,d)),this.hasScaleY&&(i.scaleY=hh(this.startY,this.endY,d))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const uT={stop:0,destroy:1,yoyo:2};var dT=function(v,i,e,d,t){d===void 0&&(d="Cubic");var s,u;switch(e){case 0:case"x":s={x:0},u={x:v.scaleX};break;case 1:case"y":s={y:0},u={y:v.scaleY};break;default:s=0,u=v.scale;break}var n={mode:0,start:s,end:u,duration:i,ease:d};return t===void 0?t=new un(v,n):t.resetFromJSON(n),t.restart(),t},fT=function(v,i,e,d,t,s){d===void 0&&(d="Linear"),t instanceof un&&(s=t,t=void 0),t===void 0&&(t=!0);var u={};switch(u.mode=t?1:0,e){case 0:case"x":u.end={x:0};break;case 1:case"y":u.end={y:0};break;default:u.end=0;break}return u.duration=i,u.ease=d,s===void 0?s=new un(v,u):s.resetFromJSON(u),s.restart(),s},cT=function(v,i,e,d,t,s,u){e===void 0&&(e=1.2),d===void 0&&(d=0),s===void 0&&(s="Cubic");var n,a;switch(t){case 0:case"x":n={x:v.scaleX},a={x:e};break;case 1:case"y":n={y:v.scaleX},a={y:e};break;default:n=v.scaleX,a=e;break}var h={mode:2,start:n,end:a,duration:i/2,ease:s,repeat:d};return u===void 0?u=new un(v,h):u.resetFromJSON(h),u.restart(),u};const ar=Phaser.Utils.Objects.IsPlainObject;var or=function(v,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(v.emit(i.completeEventName,v),i.completeEventName=void 0)}),i.on("update",function(){var e=v.getParentSizer();e&&e.resetChildPositionState(v)})},vT={popUp(v,i,e){if(ar(v)){var d=v;v=d.duration,i=d.orientation,e=d.ease}var t=this._scale===void 0;return this._scale=dT(this,v,i,e,this._scale),t&&or(this,this._scale),this._scale.completeEventName="popup.complete",this},popUpPromise(v,i,e){return this.popUp(v,i,e),Kt(this._scale)},scaleDownDestroy(v,i,e,d){if(ar(v)){var t=v;v=t.duration,i=t.orientation,e=t.ease,d=t.destroy}var s=this._scale===void 0;return this._scale=fT(this,v,i,e,d,this._scale),s&&or(this,this._scale),this._scale.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(v,i,e,d){return this.scaleDownDestroy(v,i,e,d),Kt(this._scale)},scaleDown(v,i,e){return this.scaleDownDestroy(v,i,e,!1),this},scaleDownPromise(v,i,e){return this.scaleDown(v,i,e),Kt(this._scale)},scaleYoyo(v,i,e,d,t){if(ar(v)){var s=v;v=s.duration,i=s.peakValue,e=s.repeat,d=s.orientation,t=s.ease}var u=this._scale===void 0;return this._scale=cT(this,v,i,e,d,t,this._scale),u&&or(this,this._scale),this._scale.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(v,i,e,d,t){return this.scaleYoyo(v,i,e,d,t),Kt(this._scale)}};const pT=Phaser.Utils.Objects.GetValue,lh=Phaser.Utils.Objects.GetAdvancedValue,gT=Phaser.Math.Linear;class Jr extends ji{constructor(i,e){super(i,e),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(pT(i,"mode",0)),this.setAlphaRange(lh(i,"start",this.parent.alpha),lh(i,"end",0)),this}setMode(i){return typeof i=="string"&&(i=mT[i]),this.mode=i,this}setAlphaRange(i,e){return this.alphaStart=i,this.alphaEnd=e,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return i.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,e){var d=e.t;e.isOddIteration&&(d=1-d),i.alpha=gT(this.alphaStart,this.alphaEnd,d)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const mT={stop:0,destroy:1,yoyo:2},xT=Phaser.Utils.Objects.IsPlainObject;var yT=function(v,i,e,d){var t,s;xT(e)?(t=e.start,s=e.end):s=e,t===void 0&&(t=0),s===void 0&&(s=1);var u={mode:0,start:t,end:s,duration:i};return d===void 0?d=new Jr(v,u):d.resetFromJSON(u),d.restart(),d},TT=function(v,i,e,d){e instanceof Jr&&(d=e,e=void 0),e===void 0&&(e=!0);var t={mode:e?1:0,end:0,duration:i};return d===void 0?d=new Jr(v,t):d.resetFromJSON(t),d.restart(),d};const uh=Phaser.Utils.Objects.IsPlainObject;var dh=function(v,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(v.emit(i.completeEventName,v),i.completeEventName=void 0)}),i.on("update",function(){var e=v.getParentSizer();e&&e.resetChildAlphaState(v)})},ST={fadeIn(v,i){if(uh(v)){var e=v;v=e.duration,i=e.alpha}var d=this._fade===void 0;return this._fade=yT(this,v,i,this._fade),d&&dh(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(v,i){return this.fadeIn(v,i),Kt(this._fade)},fadeOutDestroy(v,i){if(uh(v)){var e=v;v=e.duration,i=e.destroy}var d=this._fade===void 0;return this._fade=TT(this,v,i,this._fade),d&&dh(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(v,i){return this.fadeOutDestroy(v,i),Kt(this._fade)},fadeOut(v){return this.fadeOutDestroy(v,!1),this},fadeOutPromise(v){return this.fadeOut(v),Kt(this._fade)}};const CT=Phaser.Utils.Objects.GetValue,Ni=Phaser.Utils.Objects.GetAdvancedValue,fh=Phaser.Math.Linear;class dn extends ji{constructor(i,e){super(i,e),this.resetFromJSON(e),this.boot()}resetFromJSON(i){if(super.resetFromJSON(i),this.setMode(CT(i,"mode",0)),i&&(i.hasOwnProperty("x")||i.hasOwnProperty("y"))){var e=Ni(i,"x",void 0),d=Ni(i,"y",void 0);this.setTargetPosition(e,d)}else this.setTargetPosition(i);return this}setMode(i){return typeof i=="string"&&(i=ET[i]),this.mode=i,this}setTargetPosition(i,e){if(typeof i=="number"||typeof e=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=i,this.endY=e;else{var d=i;this.startX=Ni(d,"startX",void 0),this.startY=Ni(d,"startY",void 0),this.endX=Ni(d,"endX",void 0),this.endY=Ni(d,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return this.hasMoveX&&(i.x=this.startX),this.hasMoveY&&(i.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,e){var d=e.t;e.isOddIteration&&(d=1-d),d=this.easeFn(d),this.hasMoveX&&(i.x=fh(this.startX,this.endX,d)),this.hasMoveY&&(i.y=fh(this.startY,this.endY,d))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const ET={stop:0,destroy:1,yoyo:2};var fn=function(v,i){if(typeof v=="number")return v;var e=v[0],d=parseFloat(v.substr(2));switch(e){case"+":return i+d;case"-":return i-d;case"*":return i*d;case"/":return i/d}},PT=function(v,i,e,d,t,s,u){s instanceof dn&&(u=s,s=void 0),s===void 0&&(s=!1);var n={};return n.mode=s?1:0,e!==void 0&&(n.startX=v.x,n.endX=fn(e,v.x)),d!==void 0&&(n.startY=v.y,n.endY=fn(d,v.y)),n.duration=i,n.ease=t===void 0?"Linear":t,u===void 0?u=new dn(v,n):u.resetFromJSON(n),u.restart(),u},MT=function(v,i,e,d,t,s,u){s instanceof dn&&(u=s,s=void 0),s===void 0&&(s=!1);var n={};return n.mode=s?1:0,e!==void 0&&(n.startX=fn(e,v.x),n.endX=v.x),d!==void 0&&(n.startY=fn(d,v.y),n.endY=v.y),n.duration=i,n.ease=t===void 0?"Linear":t,u===void 0?u=new dn(v,n):u.resetFromJSON(n),u.restart(),u};const ch=Phaser.Utils.Objects.IsPlainObject,vh=Phaser.Math.Distance.Between;var ph=function(v,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(v.emit(i.completeEventName,v),i.completeEventName=void 0)}),i.on("update",function(){var e=v.getParentSizer();e&&e.resetChildPositionState(v)})},AT={moveFrom(v,i,e,d,t){if(ch(v)){var s=v;i=s.x,e=s.y,s.hasOwnProperty("speed")?v=vh(i,e,this.x,this.y)*1e3/s.speed:v=s.duration,d=s.ease}var u=this._easeMove===void 0;return this._easeMove=MT(this,v,i,e,d,t,this._easeMove),u&&ph(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(v,i,e,d,t){return this.moveFrom(v,i,e,d,t),Kt(this._easeMove)},moveFromDestroy(v,i,e,d){return this.moveFrom(v,i,e,d,!0),this},moveFromDestroyPromise(v,i,e,d){return this.moveFromDestroy(v,i,e,d),Kt(this._easeMove)},moveTo(v,i,e,d,t){if(ch(v)){var s=v;i=s.x,e=s.y,s.hasOwnProperty("speed")?v=vh(i,e,this.x,this.y)*1e3/s.speed:v=s.duration,d=s.ease}var u=this._easeMove===void 0;return this._easeMove=PT(this,v,i,e,d,t,this._easeMove),u&&ph(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(v,i,e,d,t){return this.moveTo(v,i,e,d,t),Kt(this._easeMove)},moveToDestroy(v,i,e,d){return this.moveTo(v,i,e,d,!0),this},moveToDestroyPromise(v,i,e,d){return this.moveToDestroy(v,i,e,d,!0),Kt(this._easeMove)},moveStop(v){return this._easeMove?(this._easeMove.stop(v),this):this}};const Te=Phaser.Utils.Objects.GetValue;class OT extends Pn{constructor(i,e){super(i,e),this.timer=new Wu,this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.timer.resetFromJSON(Te(i,"timer")),this.setEnable(Te(i,"enable",!0)),this.setMode(Te(i,"mode",1)),this.isRunning=Te(i,"isRunning",!1),this.setMagnitudeMode(Te(i,"magnitudeMode",1)),this.setDuration(Te(i,"duration",500)),this.setMagnitude(Te(i,"magnitude",10)),this.ox=Te(i,"ox",void 0),this.oy=Te(i,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(i){this.isShutdown||(super.shutdown(i),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(i){return i==null&&(i=!0),this.enable=i,this}setMode(i){return typeof i=="string"&&(i=RT[i]),this.mode=i,this}setMagnitudeMode(i){return typeof i=="string"&&(i=LT[i]),this.magnitudeMode=i,this}setDuration(i){return this.duration=i,this}setMagnitude(i){return this.magnitude=i,this}start(i,e){if(typeof i!="number"){var d=i;e=Te(d,"magnitude",void 0),i=Te(d,"duration",void 0)}return e!==void 0&&this.setMagnitude(e),i!==void 0&&this.setDuration(i),this.timer.setDuration(this.duration).start(),super.start(),this}shake(i,e){return this.start(i,e),this}update(i,e){if(!this.isRunning||!this.enable)return this;var d=this.parent;if(!d.active)return this;if(this.timer.update(i,e),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=d.x,this.oy=d.y);var t=this.magnitude;this.magnitudeMode===1&&(t*=1-this.timer.t);var s=Math.random()*Math.PI*2,u=Math.cos(s)*t,n=Math.sin(s)*t;d.setPosition(this.ox+u,this.oy+n)}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var i=this.parent;return this.ox===i.x&&this.oy===i.y?this:(i.setPosition(this.ox,this.oy),this.ox=void 0,this.oy=void 0,this)}}const RT={effect:0,behavior:1},LT={constant:0,decay:1},FT=Phaser.Utils.Objects.IsPlainObject;var IT=function(v,i){i.on("complete",function(){v.emit("shake.complete",v)})},wT={shake(v,i,e){if(FT(v)){var d=v;v=d.duration,i=d.magnitude,e=d.magnitudeMode}return this._shake===void 0&&(this._shake=new OT(this,{mode:0,magnitudeMode:1}),IT(this,this._shake)),v!==void 0&&this._shake.setDuration(v),i!==void 0&&this._shake.setMagnitude(i),e!==void 0&&this._shake.setMagnitudeMode(e),this._shake.shake(),this},shakePromise(v,i){return this.shake(v,i),Kt(this._shake)}};const gh=Phaser.Utils.Objects.IsPlainObject;class DT extends me{constructor(i,e){super(i,e),this.parent.setDataEnabled(),this.easeTasks={}}complete(i){this.emit(`complete-${i}`,this.parent,this),this.emit("complete",i,this.parent,this)}getEaseTask(i){var e=this.easeTasks[i];return e===void 0&&(e=new pa(this.parent),this.easeTasks[i]=e,e.setTarget(this.parent.data.values).on("complete",function(){this.complete(i)},this)),e}easeTo(i,e,d,t){if(gh(i)){var s=i;i=s.key,e=s.value,d=s.duration,t=s.ease;var u=s.speed;d===void 0&&u!==void 0&&(d=Math.abs(e-this.parent.data.values[i])/u*1e3)}d===void 0&&(d=1e3),t===void 0&&(t="Linear");var n=this.getEaseTask(i);return n.restart({key:i,to:e,duration:d,ease:t}),this}easeFrom(i,e,d,t){if(gh(i)){var s=i;i=s.key,e=s.value,d=s.duration,t=s.ease;var u=s.speed;d===void 0&&u!==void 0&&(d=Math.abs(e-this.parent.data.values[i])/u*1e3)}d===void 0&&(d=1e3),t===void 0&&(t="Linear");var n=this.getEaseTask(i);return n.restart({key:i,from:e,duration:d,ease:t}),this}stopEase(i,e){e===void 0&&(e=!0);var d=this.easeTasks[i];return d&&d.stop(e),this}stopAll(i){i===void 0&&(i=!0);for(var e in this.easeTasks)this.stopEase(e,i);return this}}var BT=function(v,i){i.on("complete",function(e){v.emit(`easedata.${e}.complete`,v),v.emit("easedata.complete",e,v)})},bT={easeDataTo(v,i,e,d){return this._easeData||(this._easeData=new DT(this),BT(this,this._easeData)),this._easeData.easeTo(v,i,e,d),this},easeDataToPromise(v,i,e,d){return this.easeDataTo(v,i,e,d),Nu(this._easeData,`complete-${v}`)},stopEaseData(v,i){return this._easeData?(this._easeData.stopEase(v,i),this):this},stopAllEaseData(v){return this._easeData?(this._easeData.stopAll(v),this):this}},Ci=function(v){ed(v,!1)},Ei=function(v){ed(v,!0)},td=function(v){if(!v)return!1;var i=Rn(v);return!i.hidden},ed=function(v,i){if(!!v){var e=Rn(v);e.hidden=i;var d=qe(v);d?d.setChildVisible(v,!i):v.setVisible(!i)}},GT={show(v){return v===void 0&&(v=this),Ci(v),this},hide(v){return v===void 0&&(v=this),Ei(v),this},isShow(v){return v===void 0&&(v=this),td(v)}},Qr=function(v,i,e,d,t){if(!v||!v.getBounds||d&&!d(v,i,e))return!1;var s=da(v,!0);return!(!s.contains(i,e)||t&&!t(v,i,e))},id=function(v,i,e,d){if(i)return Qr(v,i.worldX,i.worldY,e,d);for(var t=v.scene.input.manager,s=t.pointersTotal,u=t.pointers,n=0;n<s;n++)if(i=u[n],Qr(v,i.worldX,i.worldY,e,d))return!0;return!1},NT=function(v,i){return i===void 0&&(i=this),id(i,v)},_e=function(v){return Object.prototype.toString.call(v)==="[object Array]"},jr=function(v,i,e,d,t){return Qr(v,i,e,zT(d),VT(t))},mh=function(v){var i=v.rexSizer&&v.rexSizer.hidden;return!i},zT=function(v){return v?function(i,e,d){return mh(i)?(v(i,e,d),!0):!1}:mh},VT=function(v){return v},YT=function(v,i,e,d,t){if(na(e)||(t=e,e=void 0,d=void 0),t===void 0&&(this.sizerChildren?t=this.sizerChildren:t=this.children),_e(t)){for(var s,u=0,n=t.length;u<n;u++)if(s=t[u],jr(s,v,i,e,d))return s}else{var s;for(var a in t)if(s=t[a],jr(s,v,i,e,d))return s}return null},UT={getParentSizer(v,i){return this.getParent(v,i)},getTopmostSizer(v){return this.getTopmostParent(v)}},oi=function(v,i,e){!v||i===void 0&&e===void 0||(v.resize?(i===void 0&&(i=v.width),e===void 0&&(e=v.height),v.resize(i,e)):(i!==void 0&&(v.displayWidth=i),e!==void 0&&(v.displayHeight=e)))},XT=function(v,i){return i===void 0?i={}:i===!0&&(i=WT),i.x=v.x,i.y=v.y,i.scaleX=v.scaleX,i.scaleY=v.scaleY,i.width=v.width,i.height=v.height,i.displayWidth=v.displayWidth,i.displayHeight=v.displayHeight,i},WT={},Fs=function(v){this.sizerEventsEnable&&(XT(v,this.getChildPrevState(v)),this.layoutedChildren.push(v))},Is=function(v,i,e,d,t,s,u,n){In(v,i,e,d,t,s),u!==void 0&&(v.x+=u),n!==void 0&&(v.y+=n),this.resetChildPositionState(v),this.sizerEventsEnable&&v.emit("sizer.postlayout",v,this)};const HT=Phaser.Display.Align.CENTER;var $T=function(){if(this.backgroundChildren!==void 0)for(var v=this.backgroundChildren,i=this.left,e=this.top,d=this.width,t=this.height,s,u,n,a,h,r,o,c=0,l=v.length;c<l;c++)s=v[c],u=s.rexSizer,!u.hidden&&(n=u.padding,Fs.call(this,s),a=i+n.left,h=e+n.top,r=d-n.left-n.right,o=t-n.top-n.bottom,oi(s,r,o),Is.call(this,s,a,h,r,o,HT))},KT=function(v,i){var e=typeof v;return e==="string"?v=this.getElement(v):(v===void 0||e!="object")&&(i=v,v=this),i===void 0&&(i=!0),v.input&&v.input.hasOwnProperty("draggable")?v.input.draggable=i:i&&(v.setInteractive(),v.scene.input.setDraggable(v),v.on("drag",function(d,t,s){var u=this.getTopmostSizer();u.x+=t-v.x,u.y+=s-v.y,u.emit("sizer.drag",d,t,s)},this).on("dragstart",function(d,t,s){var u=this.getTopmostSizer();u.emit("sizer.dragstart",d,t,s)},this).on("dragend",function(d,t,s,u){var n=this.getTopmostSizer();n.emit("sizer.dragend",d,t,s,u)},this)),this};const ls=Phaser.Utils.Objects.GetValue;class wn extends me{constructor(i,e){super(i,e),this._enable=void 0,i.setInteractive(ls(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(ls(i,"enable",!0)),this.setMode(ls(i,"mode",1)),this.setClickInterval(ls(i,"clickInterval",100)),this.setDragThreshold(ls(i,"threshold",void 0)),this}boot(){var i=this.parent;i.on("pointerdown",this.onPress,this),i.on("pointerup",this.onRelease,this),i.on("pointerout",this.onPointOut,this),i.on("pointermove",this.onMove,this),i.on("pointerover",this.onOver,this),i.on("pointeroutr",this.onOut,this)}shutdown(i){this.isShutdown||(this.pointer=null,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i){i||this.cancel(),this._enable=i;var e=i?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(i){return typeof i=="string"&&(i=ZT[i]),this.mode=i,this}setClickInterval(i){return this.clickInterval=i,this}setDragThreshold(i){return this.dragThreshold=i,this}onPress(i,e,d,t){this.pointer===void 0&&(this.pointer=i,this.mode===0&&this.click(i.downTime,i,t))}onRelease(i,e,d,t){this.pointer===i&&(this.mode===1&&this.click(i.upTime,i,t),this.pointer=void 0)}onPointOut(i,e){this.pointer===i&&this.cancel()}onMove(i,e,d,t){this.pointer===i&&this.dragThreshold!==void 0&&i.getDistance()>=this.dragThreshold&&this.cancel()}click(i,e,d){if(!this.enable)return this;if(i===void 0)return this.emit("click",this,this.parent,e,d),this;this.pointer=void 0;var t=this.lastClickTime;return t!==void 0&&i-t<=this.clickInterval?this:(this.lastClickTime=i,this.emit("click",this,this.parent,e,d),this)}cancel(){return this.pointer=void 0,this}onOver(i,e,d,t){return this.enable?(this.emit("over",this,this.parent,i,t),this):this}onOut(i,e){return this.enable?(this.emit("out",this,this.parent,i,e),this):this}}const ZT={press:0,pointerdown:0,release:1,pointerup:1};var kT={onClick(v,i,e){return v?(this._click===void 0&&(this._click=new wn(this,e)),this._click.on("click",v,i),this):this},offClick(v,i){return this._click===void 0?this:(this._click.off("click",v,i),this)},enableClick(v){return this._click===void 0?this:(this._click.setEnable(v),this)},disableClick(){return this._click===void 0?this:(this._click.setEnable(!1),this)}};const Hs=Phaser.Utils.Objects.GetValue;class JT extends me{constructor(i,e){super(i,e),this._enable=void 0;var d=Hs(e,"inputConfig",void 0);d&&i.setInteractive(d),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.setEnable(Hs(i,"enable",!0)),this.setMode(Hs(i,"mode",1)),this.setClickInterval(Hs(i,"clickInterval",100)),this}boot(){var i=this.parent.scene;i.input.on("pointerdown",this.onPress,this),i.input.on("pointerup",this.onRelease,this)}shutdown(i){if(!this.isShutdown){var e=this.parent.scene;e.input.off("pointerdown",this.onPress,this),e.input.off("pointerup",this.onRelease,this),super.shutdown(i)}}get enable(){return this._enable}set enable(i){if(this._enable!==i){this._enable=i;var e=i?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(i){return typeof i=="string"&&(i=QT[i]),this.mode=i,this}setClickInterval(i){return this.clickInterval=i,this}isPointerInside(i){var e=this.parent,d=e.input?_v:id;return d(e,i)}onPress(i){if(this.mode===0){if(!this.parent.willRender(i.camera))return;this.isPointerInside(i)||this.click(i.downTime,i)}}onRelease(i){if(this.mode===1){if(!this.parent.willRender(i.camera))return;this.isPointerInside(i)||this.click(i.upTime,i)}}click(i,e){if(!this.enable)return this;if(i===void 0)return this.emit("clickoutside",this,this.parent,e),this;var d=this.lastClickTime;return d!==void 0&&i-d<=this.clickInterval?this:(this.lastClickTime=i,this.emit("clickoutside",this,this.parent,e),this)}}const QT={press:0,pointerdown:0,release:1,pointerup:1};var jT={onClickOutside(v,i,e){return v?(this._clickOutside===void 0&&(this._clickOutside=new JT(this,e)),this._clickOutside.on("clickoutside",v,i),this):this},offClickOutside(v,i){return this._clickOutside===void 0?this:(this._clickOutside.off("clickoutside",v,i),this)},enableClickOutside(v){return this._clickOutside===void 0?this:(this._clickOutside.setEnable(v),this)},disableClickOutside(){return this._clickOutside===void 0?this:(this._clickOutside.setEnable(!1),this)}};class Oi{constructor(i){var e=ue(i,"states",void 0);e&&this.addStates(e);var d=ue(i,"extend",void 0);if(d)for(var t in d)(!this.hasOwnProperty(t)||this[t]===void 0)&&(this[t]=d[t]);var s=ue(i,"eventEmitter",void 0),u=ue(i,"EventEmitterClass",void 0);this.setEventEmitter(s,u),this._stateLock=!1,this.resetFromJSON(i)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(i){this.setEnable(ue(i,"enable",!0)),this.start(ue(i,"start",void 0));var e=ue(i,"init",void 0);return e&&e.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(i){if(!(!this.enable||this._stateLock)&&this._state!==i){if(this._prevState=this._state,this._state=i,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var e="exit_"+this._prevState,d=this[e];d&&d.call(this),this.emit(e,this)}if(this._stateLock=!1,this._state!=null){var t="enter_"+this._state,s=this[t];s&&s.call(this),this.emit(t,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(i){return this._start=i,this._prevState=void 0,this._state=i,this}goto(i){return i!=null&&(this.state=i),this}next(){var i,e=this["next_"+this.state];return e&&(typeof e=="string"?i=e:i=e.call(this)),this.goto(i),this}addState(i,e){typeof i!="string"&&(e=i,i=e.name);var d=e.next;d&&(this["next_"+i]=d);var t=e.exit;t&&(this["exit_"+i]=t);var s=e.enter;return s&&(this["enter_"+i]=s),this}addStates(i){if(Array.isArray(i))for(var e=0,d=i.length;e<d;e++)this.addState(i[e]);else for(var t in i)this.addState(t,i[t]);return this}runMethod(i,e,d,t,s,u){var n=this[i+"_"+this.state];if(!!n){var a=arguments.length;switch(a){case 1:return n.call(this);case 2:return n.call(this,e);case 3:return n.call(this,e,d);case 4:return n.call(this,e,d,t);case 5:return n.call(this,e,d,t,s);case 6:return n.call(this,e,d,t,s,u)}for(var h=new Array(a-1),r=1;r<a;r++)h[r-1]=arguments[r];return n.apply(this,h)}}update(i,e){this.runMethod("update",i,e)}preupdate(i,e){this.runMethod("preupdate",i,e)}postupdate(i,e){this.runMethod("postupdate",i,e)}}Object.assign(Oi.prototype,Qi);class qT extends Oi{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(i){return this.cooldownTime=i,this.cooldownMode=i!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(i,e){this.remainderTime-=e,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>e?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const hr=Phaser.Utils.Objects.GetValue;class qr extends me{constructor(i,e){super(i,e),this._enable=void 0,this.cooldown=new qT,this.parent.setInteractive(hr(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.isInTouching=!1,this.setEnable(hr(i,"enable",!0)),this.setCooldown(hr(i,"cooldown",void 0)),this}boot(){var i=this.parent;i.on("pointerdown",this.onPointIn,this),i.on("pointerover",this.onPointIn,this),i.on("pointerup",this.onPointOut,this),i.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(i){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||(this.isInTouching=!1,this.pointer=void 0),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(i){this.cooldown.setCooldownTime(i)}setCooldown(i){return this.cooldownTime=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(i,e,d){!this.enable||!i.isDown||this.pointer!==void 0||(this.pointer=i,this.isInTouching=!0)}onPointOut(i){!this.enable||this.pointer!==i||(this.pointer=void 0,this.isInTouching=!1)}preupdate(i,e){this.cooldown.update(i,e),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer)}}var _T={onTouching(v,i,e){return v?(this._inTouching===void 0&&(this._inTouching=new qr(this,e)),this._inTouching.on("intouch",v,i),this):this},offTouching(v,i){return this._inTouching===void 0?this:(this._inTouching.off("intouch",v,i),this)},enableTouching(v){return this._inTouching===void 0?this:(this._inTouching.setEnable(v),this)},disableTouching(){return this._inTouching===void 0?this:(this._inTouching.setEnable(!1),this)}},sd=function(v,i,e){for(var d,t=0,s=v.length;t<s;t++)if(d=v[t],!!jr(d,i,e))return d.pointToChild(i,e);return null},Ge=function(v,i,e,d,t,s,u){var n;t===void 0?n=d:n=sd(e,d,t),n&&v.emit(i,n,s,u)};const t1=Phaser.Utils.Objects.GetValue;var e1=function(v){var i=t1(v,"down",void 0);i!==!1&&this.on("pointerdown",i1,this)},i1=function(v,i,e,d){var t=this._childrenInteractive;Ge(t.eventEmitter,`${t.eventNamePrefix}down`,t.targetSizers,v.worldX,v.worldY,v,d)};const s1=Phaser.Utils.Objects.GetValue;var n1=function(v){var i=s1(v,"up",void 0);i!==!1&&this.on("pointerup",r1,this)},r1=function(v,i,e,d){var t=this._childrenInteractive;Ge(t.eventEmitter,`${t.eventNamePrefix}up`,t.targetSizers,v.worldX,v.worldY,v,d)};const a1=Phaser.Utils.Objects.GetValue;var o1=function(v){var i=a1(v,"over",void 0);i!==!1&&this.on("pointermove",xh,this).on("pointerover",xh,this).on("pointerout",h1,this)},xh=function(v,i,e,d){var t=this._childrenInteractive,s=sd(t.targetSizers,v.worldX,v.worldY),u=t.lastOverChild;s&&u&&s===u||(t.lastOverChild=s,Ge(t.eventEmitter,`${t.eventNamePrefix}out`,t.targetSizers,u,void 0,v,d),Ge(t.eventEmitter,`${t.eventNamePrefix}over`,t.targetSizers,s,void 0,v,d))},h1=function(v,i){var e=this._childrenInteractive,d=e.lastOverChild;e.lastOverChild=null,Ge(e.eventEmitter,`${e.eventNamePrefix}out`,e.targetSizers,d,void 0,v,i)};const l1=Phaser.Utils.Objects.GetValue;var u1=function(v){var i=l1(v,"click",void 0);if(i!==!1){i===void 0&&(i={}),i.hasOwnProperty("threshold")||(i.threshold=10);var e=this._childrenInteractive;this._click=new wn(this,i),this._click.on("click",function(d,t,s,u){Ge(e.eventEmitter,`${e.eventNamePrefix}click`,e.targetSizers,s.worldX,s.worldY,s,u)},this)}};const lr=Phaser.Utils.Objects.GetValue;class Ia extends Pn{constructor(i,e){var d=Sl(i);d===i&&(i=void 0),super(d,e),this.gameObject=i,i&&i.setInteractive(lr(e,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.setEnable(lr(i,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(lr(i,"bounds",void 0)):this.setDetectBounds(),this.tracerState=ur,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(i){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||this.dragCancel(),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setDetectBounds(i){return this.bounds=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(i,e){if(!!this.enable&&this.pointer===void 0){var d=this.bounds?this.bounds.contains(i.x,i.y):!0;!d||this.pointer!==i&&(this.pointer=i,this.lastPointer=i,this.movedState=!1,this.tracerState=yh,this.gameObject===void 0&&(this.isTouchingAnyObject=e.length>0),this.onDragStart())}}onPointerUp(i){if(!!this.enable){var e=this.bounds?this.bounds.contains(i.x,i.y):!0;!e||this.pointer===i&&(this.pointer=void 0,this.movedState=!1,this.tracerState=ur,this.onDragEnd())}}onPointerMove(i){if(!!this.enable&&i.isDown){var e=this.bounds?this.bounds.contains(i.x,i.y):!0,d=this.pointer===i;!d&&e||(d&&!e?this.onPointerUp(i):(this.movedState||(this.movedState=i.x!==i.downX||i.y!==i.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===yh&&this.onDragEnd(),this.pointer=void 0,this.tracerState=ur,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(i,e){}postUpdate(i,e){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(i){return this.recongizedState=i,this}get state(){return this.recongizedState.state}set state(i){this.recongizedState.state=i}cancel(){return this.state=d1,this}}const ur=0,yh=1,d1="IDLE",gi=Phaser.Utils.Objects.GetValue,f1=Phaser.Math.Distance.Between;class nd extends Ia{constructor(i,e){super(i,e);var d=this,t={states:{IDLE:{enter:function(){d.stop(),d.tapsCount=0,d.x=0,d.y=0,d.worldX=0,d.worldY=0},exit:function(){var s=d.lastPointer;d.x=s.x,d.y=s.y,d.worldX=s.worldX,d.worldY=s.worldY}},BEGIN:{enter:function(){d.start(),d.tapsCount=0,d.emit("tappingstart",d,d.gameObject,d.lastPointer)}},RECOGNIZED:{enter:function(){d.start(),d.emit("tap",d,d.gameObject,d.lastPointer),d.emit(`${d.tapsCount}tap`,d,d.gameObject,d.lastPointer)}}},init:function(){this.state=mi},eventEmitter:!1};this.setRecongizedStateObject(new Oi(t))}resetFromJSON(i){super.resetFromJSON(i),this.setHoldTime(gi(i,"time",250)),this.setTapInterval(gi(i,"tapInterval",200)),this.setDragThreshold(gi(i,"threshold",9)),this.setTapOffset(gi(i,"tapOffset",10));var e=gi(i,"taps",void 0);return e!==void 0?this.setTaps(e):(this.setMaxTaps(gi(i,"maxTaps",void 0)),this.setMinTaps(gi(i,"minTaps",void 0))),this}onDragStart(){switch(this.state){case mi:this.state=zi;break;case zi:var i=this.lastPointer,e=f1(i.upX,i.upY,i.x,i.y);e>this.tapOffset&&(this.state=Vi,this.state=zi);break;case Vi:this.state=zi;break}}onDragEnd(){this.state===zi&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Vi))}onDrag(){this.state!==mi&&this.pointer.getDistance()>this.dragThreshold&&(this.state=mi)}preUpdate(i,e){if(!(!this.isRunning||!this.enable)&&this.state===zi){var d=this.lastPointer;if(d.isDown){var t=i-d.downTime;t>this.holdTime&&(this.state=mi)}else{var s=i-d.upTime;s>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Vi:this.state=mi)}}}postUpdate(i,e){!this.isRunning||!this.enable||this.state===Vi&&(this.state=mi)}get isTapped(){return this.state===Vi}setHoldTime(i){return this.holdTime=i,this}setTapInterval(i){return this.tapInterval=i,this}setDragThreshold(i){return this.dragThreshold=i,this}setTapOffset(i){return this.tapOffset=i,this}setMaxTaps(i){return this.maxTaps=i,this}setMinTaps(i){return this.minTaps=i,this}setTaps(i,e){return e===void 0&&(e=i),this.setMinTaps(i).setMaxTaps(e),this}}const mi="IDLE",zi="BEGIN",Vi="RECOGNIZED",Th=Phaser.Utils.Objects.GetValue;class rd extends Ia{constructor(i,e){super(i,e);var d=this,t={states:{IDLE:{enter:function(){d.x=0,d.y=0,d.worldX=0,d.worldY=0},exit:function(){var s=d.lastPointer;d.x=s.x,d.y=s.y,d.worldX=s.worldX,d.worldY=s.worldY}},BEGIN:{enter:function(){d.start()},exit:function(){d.stop()}},RECOGNIZED:{enter:function(){d.emit("pressstart",d,d.gameObject,d.lastPointer)},exit:function(){d.emit("pressend",d,d.gameObject,d.lastPointer)}}},init:function(){this.state=$s},eventEmitter:!1};this.setRecongizedStateObject(new Oi(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(Th(i,"threshold",9)),this.setHoldTime(Th(i,"time",251)),this}onDragStart(){this.state=Sh,this.holdTime===0&&(this.state=dr)}onDragEnd(){this.state=$s}onDrag(){this.state!==$s&&this.pointer.getDistance()>this.dragThreshold&&(this.state=$s)}preUpdate(i,e){if(!(!this.isRunning||!this.enable)&&this.state===Sh){var d=i-this.pointer.downTime;d>=this.holdTime&&(this.state=dr)}}get isPressed(){return this.state===dr}setHoldTime(i){return this.holdTime=i,this}setDragThreshold(i){return this.dragThreshold=i,this}}const $s="IDLE",Sh="BEGIN",dr="RECOGNIZED";Phaser.Utils.Objects.GetValue;const c1=Phaser.Math.Distance.Between,v1=Phaser.Math.Angle.Between;var p1={getDt:function(){var v=this.scene.sys.game,i=v.loop.delta;return i},getVelocity:function(){var v=this.pointer.position,i=this.pointer.prevPosition,e=c1(i.x,i.y,v.x,v.y),d=e/(this.getDt()*.001);return d},getVelocityX:function(){var v=this.pointer.position,i=this.pointer.prevPosition,e=Math.abs(v.x-i.x),d=e/(this.getDt()*.001);return d},getVelocityY:function(){var v=this.pointer.position,i=this.pointer.prevPosition,e=Math.abs(v.y-i.y),d=e/(this.getDt()*.001);return d},getVelocityAngle:function(){var v=this.pointer.position,i=this.pointer.prevPosition,e=v1(i.x,i.y,v.x,v.y);return e}},g1={"up&down":0,"left&right":1,"4dir":2,"8dir":3},m1=function(v,i,e){switch(e===void 0?e={}:e===!0&&(e=x1),e.left=!1,e.right=!1,e.up=!1,e.down=!1,v=(v+360)%360,i){case 0:v<180?e.down=!0:e.up=!0;break;case 1:v>90&&v<=270?e.left=!0:e.right=!0;break;case 2:v>45&&v<=135?e.down=!0:v>135&&v<=225?e.left=!0:v>225&&v<=315?e.up=!0:e.right=!0;break;case 3:v>22.5&&v<=67.5?(e.down=!0,e.right=!0):v>67.5&&v<=112.5?e.down=!0:v>112.5&&v<=157.5?(e.down=!0,e.left=!0):v>157.5&&v<=202.5?e.left=!0:v>202.5&&v<=247.5?(e.left=!0,e.up=!0):v>247.5&&v<=292.5?e.up=!0:(v>292.5&&v<=337.5&&(e.up=!0),e.right=!0);break}return e},x1={};const fr=Phaser.Utils.Objects.GetValue,y1=Phaser.Math.RadToDeg;class wa extends Ia{constructor(i,e){super(i,e);var d=this,t={states:{IDLE:{enter:function(){d.x=0,d.y=0,d.worldX=0,d.worldY=0},exit:function(){var s=d.lastPointer;d.x=s.x,d.y=s.y,d.worldX=s.worldX,d.worldY=s.worldY}},BEGIN:{enter:function(){d.validDrag=!1}},RECOGNIZED:{enter:function(){d.start(),d.updateDirectionStates(),d.emit("swipe",d,d.gameObject,d.lastPointer)},exit:function(){d.stop(),d.clearDirectionStates()}}},init:function(){this.state=cr},eventEmitter:!1};this.setRecongizedStateObject(new Oi(t)),this.clearDirectionStates()}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(fr(i,"threshold",10)),this.setVelocityThreshold(fr(i,"velocityThreshold",1e3)),this.setDirectionMode(fr(i,"dir","8dir")),this}onDragStart(){this.state=Ch}onDragEnd(){this.state=cr}onDrag(){this.state===Ch&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=vr))}postUpdate(i,e){!this.isRunning||!this.enable||this.state===vr&&(this.state=cr)}get isSwiped(){return this.state===vr}get dragVelocity(){var i;switch(this.dirMode){case 0:i=this.getVelocityY();break;case 1:i=this.getVelocityX();break;default:i=this.getVelocity();break}return i}setDragThreshold(i){return this.dragThreshold=i,this}setVelocityThreshold(i){return this.velocityThreshold=i,this}setDirectionMode(i){return typeof i=="string"&&(i=g1[i]),this.dirMode=i,this}updateDirectionStates(){var i=y1(this.getVelocityAngle());return m1(i,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(wa.prototype,p1);const cr="IDLE",Ch="BEGIN",vr="RECOGNIZED",pr=Phaser.Utils.Objects.GetValue,T1=Phaser.Utils.Array.SpliceOne,S1=Phaser.Math.Distance.Between,C1=Phaser.Math.Angle.Between;class ad{constructor(i,e){var d=i.input.manager.pointersTotal-1;d<2&&i.input.addPointer(2-d),this.scene=i,this.setEventEmitter(pr(e,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.setEnable(pr(i,"enable",!0)),this.bounds=pr(i,"bounds",void 0),this.tracerState=Ks,this.pointers.length=0,ni(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,ni(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||this.dragCancel(),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(i){if(!!this.enable&&this.pointers.length!==2){var e=this.bounds?this.bounds.contains(i.x,i.y):!0;if(!!e){var d=this.pointers.indexOf(i);if(d===-1)switch(this.movedState[i.id]=!1,this.pointers.push(i),this.tracerState){case Ks:this.tracerState=ds,this.onDrag1Start();break;case ds:this.tracerState=Oe,this.onDrag2Start();break}}}}onPointerUp(i){if(!!this.enable){var e=this.bounds?this.bounds.contains(i.x,i.y):!0;if(!!e){var d=this.pointers.indexOf(i);if(d!==-1)switch(delete this.movedState[i.id],T1(this.pointers,d),this.tracerState){case ds:this.tracerState=Ks,this.onDrag1End();break;case Oe:this.tracerState=ds,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(i){if(!!this.enable&&i.isDown){var e=this.bounds?this.bounds.contains(i.x,i.y):!0,d=this.pointers.indexOf(i)!==-1;if(!(!d&&e)){if(d&&!e)this.onPointerUp(i);else if(this.movedState[i.id]||(this.movedState[i.id]=i.x!==i.downX||i.y!==i.downY),this.movedState[i.id])switch(this.tracerState){case ds:this.onDrag1();break;case Oe:this.onDrag2();break}}}}dragCancel(){return this.tracerState===Oe&&this.onDrag2End(),this.pointers.length=0,ni(this.movedState),this.tracerState=Ks,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==Oe)return 0;var i=this.pointers[0],e=this.pointers[1];return S1(i.x,i.y,e.x,e.y)}get angleBetween(){if(this.tracerState!==Oe)return 0;var i=this.pointers[0],e=this.pointers[1];return C1(i.x,i.y,e.x,e.y)}get drag1Vector(){var i=this.pointers[0];if(i&&this.movedState[i.id]){var e=i.position,d=i.prevPosition;us.x=e.x-d.x,us.y=e.y-d.y}else us.x=0,us.y=0;return us}get centerX(){if(this.tracerState!==Oe)return 0;var i=this.pointers[0].position,e=this.pointers[1].position;return(i.x+e.x)/2}get centerY(){if(this.tracerState!==Oe)return 0;var i=this.pointers[0].position,e=this.pointers[1].position;return(i.y+e.y)/2}get prevCenterX(){if(this.tracerState!==Oe)return 0;var i=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(i.x+e.x)/2}get prevCenterY(){if(this.tracerState!==Oe)return 0;var i=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(i.y+e.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(i){return this.recongizedState=i,this}get state(){return this.recongizedState.state}set state(i){this.recongizedState.state=i}cancel(){return this.state=E1,this}}Object.assign(ad.prototype,Qi);var us={};const Ks=0,ds=1,Oe=2,E1="IDLE";Phaser.Utils.Objects.GetValue;const P1=Phaser.Math.RotateAround;var Eh=function(v,i,e,d){return P1(v,i,e,d),v.rotation+=d,v},M1=function(v,i,e,d){return d===void 0?d={}:d===!0&&(d=A1),e.getWorldPoint(v,i,d),d},A1={},O1=function(v,i){if(!this.isRotation)return this;i===void 0&&(i=this.pointers[0].camera);var e=this.movementCenterX,d=this.movementCenterY,t=M1(this.centerX,this.centerY,i,!0),s=t.x,u=t.y,n=this.rotation;if(Array.isArray(v))for(var a=v,h=0,r=a.length;h<r;h++)v=a[h],v.x+=e,v.y+=d,Eh(v,s,u,n);else v.x+=e,v.y+=d,Eh(v,s,u,n);return this};const R1=Phaser.Utils.Objects.GetValue,gr=Phaser.Math.Angle.WrapDegrees,Ph=Phaser.Math.Angle.ShortestBetween,mr=Phaser.Math.RadToDeg,L1=Phaser.Math.DegToRad;class F1 extends ad{constructor(i,e){super(i,e);var d=this,t={states:{IDLE:{enter:function(){d.prevAngle=void 0,d.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){d.emit("rotatestart",d)},exit:function(){d.emit("rotateend",d)}}},init:function(){this.state=Mh},eventEmitter:!1};this.setRecongizedStateObject(new Oi(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(R1(i,"threshold",0)),this}onDrag2Start(){this.prevAngle=gr(mr(this.angleBetween)),this.state=Ah,this.dragThreshold===0&&(this.state=Zs)}onDrag2End(){this.state=Mh}onDrag2(){switch(this.state){case Ah:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var i=gr(mr(this.angleBetween));this.angle=Ph(this.prevAngle,i),this.prevAngle=i,this.state=Zs}break;case Zs:var i=gr(mr(this.angleBetween));this.angle=Ph(this.prevAngle,i),this.prevAngle=i,this.emit("rotate",this);break}}get isRotated(){return this.state===Zs}get rotation(){return L1(this.angle)}setDragThreshold(i){return this.dragThreshold=i,this}}var I1={spinObject:O1};Object.assign(F1.prototype,I1);const Mh="IDLE",Ah="BEGIN",Zs="RECOGNIZED",w1=Phaser.Utils.Objects.GetValue;var D1=function(v){var i=w1(v,"tap",void 0);if(i!==!1){var e=this._childrenInteractive;this._tap=new nd(this,i),this._tap.on("tap",function(d,t,s){Ge(e.eventEmitter,`${e.eventNamePrefix}${d.tapsCount}tap`,e.targetSizers,d.worldX,d.worldY,s)},this)}};const B1=Phaser.Utils.Objects.GetValue;var b1=function(v){var i=B1(v,"press",void 0);if(i!==!1){var e=this._childrenInteractive;this._press=new rd(this,i),this._press.on("pressstart",function(d,t,s){Ge(e.eventEmitter,`${e.eventNamePrefix}pressstart`,e.targetSizers,d.worldX,d.worldY,s)},this).on("pressend",function(d,t,s){Ge(e.eventEmitter,`${e.eventNamePrefix}pressend`,e.targetSizers,d.worldX,d.worldY,s)},this)}};const G1=Phaser.Utils.Objects.GetValue;var N1=function(v){var i=G1(v,"swipe",void 0);if(i!==!1){i===void 0&&(i={}),i.hasOwnProperty("dir")||(i.dir="4dir");var e=this._childrenInteractive;this._swipe=new wa(this,i),this._swipe.on("swipe",function(d,t,s){var u=d.left?"left":d.right?"right":d.up?"up":"down";Ge(e.eventEmitter,`${e.eventNamePrefix}swipe${u}`,e.targetSizers,d.worldX,d.worldY,s)},this)}};const xr=Phaser.Utils.Objects.GetValue;var od=function(v,i){return v.setInteractive(),v._childrenInteractive={targetSizers:xr(i,"targets",[v]),eventEmitter:xr(i,"eventEmitter",v),eventNamePrefix:xr(i,"inputEventPrefix","child.")},e1.call(v,i),n1.call(v,i),o1.call(v,i),u1.call(v,i),D1.call(v,i),b1.call(v,i),N1.call(v,i),v},z1=function(v){return od(this,v),this},V1=function(){for(var v=this.getAllChildren([this]),i=0,e=v.length;i<e;i++){var d=v[i];d.emit.apply(d,arguments)}return this},hd={getSizerConfig:Rn,getChildPrevState:Cy,pushIntoBounds:Ay,drawBounds:zy,resolveWidth:La,resolveChildrenWidth:Zy,resolveHeight:Fa,getChildWidth:ky,getChildHeight:Jy,getExpandedChildWidth:Qy,getExpandedChildHeight:jy,getChildrenWidth:qy,getChildrenHeight:_y,addChildrenMap:oh,addElement:oh,removeChildrenMap:Wy,getElement:Hy,getAllChildrenSizers:tT,getChildrenSizers:eT,preLayout:Ls,layout:sT,runLayout:nT,layoutChildren:rT,runWidthWrap:_u,layoutBackgrounds:$T,postLayout:aT,setAnchor:hT,isInTouching:NT,pointToChild:YT,setDraggable:KT,setChildrenInteractive:z1,broadcastEvent:V1};Object.assign(hd,Ky,Uy,Xy,UT,vT,ST,AT,wT,bT,kT,jT,_T,GT,iT);const Yi=Phaser.Utils.Objects.GetValue;class Ri extends ze{constructor(i,e,d,t,s,u){super(i,e,d,2,2),this.isRexSizer=!0,this.setMinSize(t,s),this.setName(Yi(u,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0;var n=Yi(u,"anchor",void 0);n&&this.setAnchor(n),this.setInnerPadding(Yi(u,"space",0)),this.setDraggable(Yi(u,"draggable",!1)),this.setSizerEventsEnable(Yi(u,"sizerEvents",!1)),this.setDirty(!0),Yi(u,"enableLayer",!1)&&this.enableLayer()}destroy(i){if(!!this.scene){if(i)for(var e=this.getAllChildrenSizers([this]),d=0,t=e.length;d<t;d++)e[d].sizerEventsEnable=!1;super.destroy(i),ni(this.backgroundChildren),ni(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(i,e){return this.setMinWidth(i).setMinHeight(e),this}setMinWidth(i){return i==null&&(i=0),this.minWidth=i,this}setMinHeight(i){return i==null&&(i=0),this.minHeight=i,this}setDirty(i){return i===void 0&&(i=!0),this.dirty=i,this}setSizerEventsEnable(i){return i===void 0&&(i=!0),this.sizerEventsEnable=i,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-gt(this)*this.originX}set left(i){this.x+=i-this.left}alignLeft(i){return this.left=i,this}get right(){return this.left+gt(this)}set right(i){this.x+=i-this.right}alignRight(i){return this.right=i,this}get centerX(){return this.left+gt(this)/2}set centerX(i){this.x+=i-this.centerX}alignCenterX(i){return this.centerX=i,this}get top(){return this.y-vt(this)*this.originY}set top(i){this.y+=i-this.top}alignTop(i){return this.top=i,this}get bottom(){return this.top+vt(this)}set bottom(i){this.y+=i-this.bottom}alignBottom(i){return this.bottom=i,this}get centerY(){return this.top+vt(this)/2}set centerY(i){this.y+=i-this.centerY}alignCenterY(i){return this.centerY=i,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var i=this.minWidth-this.space.left-this.space.right;return Math.max(i,0)}get minInnerHeight(){var i=this.minHeight-this.space.top-this.space.bottom;return Math.max(i,0)}}Object.assign(Ri.prototype,hd);var Y1=function(){if(this.rexSizer.hidden)return 0;var v=0,i=this.sizerChildren,e,d,t;for(var s in i)e=i[s],d=e.rexSizer.padding,t=this.getChildWidth(e)+d.left+d.right,v=Math.max(t,v);return v+this.space.left+this.space.right},U1=function(){if(this.rexSizer.hidden)return 0;var v=0,i=this.sizerChildren,e,d,t;for(var s in i)e=i[s],t=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.minHeight!==void 0?e.minHeight:vt(e),d=e.rexSizer.padding,t+=d.top+d.bottom,v=Math.max(t,v);return v+this.space.top+this.space.bottom},X1=function(v,i){i===void 0&&(i=this.width);var e,d=v.rexSizer;if(d.expandWidth){var t=i-this.space.left-this.space.right,s=d.padding;e=t-s.left-s.right}return e},W1=function(v,i){i===void 0&&(i=this.height);var e,d=v.rexSizer;if(d.expandHeight){var t=i-this.space.top-this.space.bottom,s=d.padding;e=t-s.top-s.bottom}return e},H1=function(v){v===void 0&&(v=[]);var i=this.sizerChildren,e;for(var d in i)e=i[d],e.isRexSizer&&v.push(e);return v},Da=function(v,i){v.width<v.childrenWidth&&console.warn(`Layout width error: Parent=${i.constructor.name}, Child=${v.constructor.name}`),v.height<v.childrenHeight&&console.warn(`Layout height error: Parent=${i.constructor.name}, Child=${v.constructor.name}`)},$1=function(){var v,i,e,d=this.innerLeft,t=this.innerTop,s=this.innerWidth,u=this.innerHeight,n,a,h,r,o,c,l=this.sizerChildren;for(var f in l)v=l[f],!v.rexSizer.hidden&&(i=v.rexSizer,e=i.padding,Fs.call(this,v),v.isRexSizer?(v.runLayout(this,this.getExpandedChildWidth(v),this.getExpandedChildHeight(v)),Da(v,this)):(o=void 0,c=void 0,i.expandWidth&&(o=s-e.left-e.right),i.expandHeight&&(c=u-e.top-e.bottom),oi(v,o,c)),n=d+e.left,h=s-e.left-e.right,a=t+e.top,r=u-e.top-e.bottom,Is.call(this,v,n,a,h,r,i.align,i.alignOffsetX,i.alignOffsetY))};const Oh=Phaser.Utils.Objects.IsPlainObject,Re=Phaser.Utils.Objects.GetValue,Rh=Phaser.Display.Align.CENTER,K1=Phaser.Utils.String.UUID;var Z1=function(v,i,e,d,t,s,u,n,a){if(Rs.call(this,v),Oh(i)){var r=i;i=Re(r,"key",void 0),e=Re(r,"align",Rh),n=Re(r,"offsetX",0),a=Re(r,"offsetY",0),d=Re(r,"padding",0),t=Re(r,"expand",!0),v.isRexSizer||(s=Re(r,"minWidth",v._minWidth),u=Re(r,"minHeight",v._minHeighted))}var h=i!==void 0;h||(i=K1()),typeof e=="string"&&(e=Fn[e]),e===void 0&&(e=Rh),n===void 0&&(n=0),a===void 0&&(a=0),d===void 0&&(d=0),t===void 0&&(t=!0),v.isRexSizer||(s===void 0&&(s=v._minWidth),u===void 0&&(u=v._minHeight));var r=this.getSizerConfig(v);return r.align=e,r.alignOffsetX=n,r.alignOffsetY=a,r.padding=qi(d),Oh(t)?(r.expandWidth=Re(t,"width",!1),r.expandHeight=Re(t,"height",!1)):(r.expandWidth=t,r.expandHeight=t),v.isRexSizer||(r.expandWidth&&(v.minWidth=s===void 0?gt(v):s),r.expandHeight&&(v.minHeight=u===void 0?vt(v):u)),this.sizerChildren.hasOwnProperty(i)&&this.sizerChildren[i].destroy(),this.sizerChildren[i]=v,h&&this.addChildrenMap(i,v),this},k1={add:Z1};const J1=Phaser.Utils.Array.Remove,Q1=ze.prototype.remove;var Dn=function(v,i){return this.isBackground(v)&&J1(this.backgroundChildren,v),Q1.call(this,v,i),!i&&this.sizerEventsEnable&&(v.emit("sizer.remove",v,this),this.emit("remove",v,this)),this};const j1=ze.prototype.clear;var Bn=function(v){this.backgroundChildren&&(this.backgroundChildren.length=0);var i=!v&&this.sizerEventsEnable,e;if(i&&(e=this.getChildren([])),j1.call(this,v),i)for(var d,t=0,s=e.length;t<s;t++)d=e[t],d.emit("sizer.remove",d,this),this.emit("remove",d,this);return this},q1={remove(v,i){var e;if(typeof v=="string"){if(e=v,v=this.sizerChildren[e],!v)return this}else{if(this.getParentSizer(v)!==this)return this;e=this.childToKey(v)}return e&&(delete this.sizerChildren[e],this.childrenMap.hasOwnProperty(e)&&delete this.childrenMap[e]),Dn.call(this,v,i),this},removeAll(v){for(var i in this.sizerChildren)this.remove(i,v);return this},clear(v){for(var i in this.sizerChildren)delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i];return Bn.call(this,v),this}},ld={getChildrenWidth:Y1,getChildrenHeight:U1,getExpandedChildWidth:X1,getExpandedChildHeight:W1,getChildrenSizers:H1,layoutChildren:$1};Object.assign(ld,k1,q1);var bn=function(v,i){if(Array.isArray(v))return v.indexOf(i);for(var e in v)if(v[e]===i)return e;return null};const Lh=Phaser.Utils.Objects.IsPlainObject,Ui=Phaser.Utils.Objects.GetValue;class Li extends Ri{constructor(i,e,d,t,s,u){Lh(e)?(u=e,e=Ui(u,"x",0),d=Ui(u,"y",0),t=Ui(u,"width",void 0),s=Ui(u,"height",void 0)):Lh(t)&&(u=t,t=Ui(u,"width",void 0),s=Ui(u,"height",void 0)),super(i,e,d,t,s,u),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(i){if(typeof i=="string"){var e=i;if(this.sizerChildren.hasOwnPropery(e))return e}else return bn(this.sizerChildren,i);return null}}Object.assign(Li.prototype,ld);var _1=Phaser.Math.Distance.Between,cn=function(v,i,e){var d=v.width/2;return _1(d,d,i,e)<=d};const tS=Phaser.Math.Angle.Between,eS=Phaser.Math.Angle.Normalize;var Fh=function(v,i,e){if(!!this.enable&&!!v.isDown){var d=this.sizerChildren.knob;if(!!cn(d,i,e)){var t=d.width/2,s=d.startAngle,u=tS(t,t,i,e),n=d.anticlockwise?s-u:u-s,a=eS(n)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-a)<.1?this.value=a:this.easeValueTo(a)}}},iS=function(){var v=this.sizerChildren.knob;v.setInteractive().on("pointerdown",Fh,this).on("pointermove",Fh,this)};const Ih=Phaser.Math.Angle.Between,sS=Phaser.Math.Angle.Wrap;var nS=function(v,i,e){if(!(!this.enable||this.panPointer)){var d=this.sizerChildren.knob;!cn(d,i,e)||ud.call(this,v)}},rS=function(v,i,e){if(!!this.enable&&!!v.isDown){var d=this.sizerChildren.knob;switch(this.panState){case Ba:cn(d,i,e)&&ud.call(this,v);break;case fd:cn(d,i,e)?oS.call(this):dd.call(this);break}}},aS=function(v,i,e){!this.enable||this.panPointer!==v||dd.call(this)},ud=function(v){this.panPointer=v,this.panState=fd},dd=function(){this.panPointer=void 0,this.panState=Ba},oS=function(){var v=this.panPointer.prevPosition,i=this.panPointer.position,e=this.sizerChildren.knob,d=Ih(e.x,e.y,v.x,v.y),t=Ih(e.x,e.y,i.x,i.y),s=e.anticlockwise?d-t:t-d,u=sS(s)/(Math.PI*2);this.stopEaseValue(),this.value+=u};const Ba=0,fd=1;var hS=function(){var v=this.sizerChildren.knob;v.setInteractive().on("pointerdown",nS,this).on("pointermove",rS,this).on("pointerup",aS,this),this.panPointer=void 0,this.panState=Ba},lS=function(v,i){return this.textFormatCallback=v,this.textFormatCallbackScope=i,this},cd=function(v){v===void 0&&(v=this.value);var i;return this.textFormatCallbackScope?i=this.textFormatCallback(v):i=this.textFormatCallback.call(this.textFormatCallbackScope,v),i},uS=function(){var v=this.sizerChildren.text;return v&&this.textFormatCallback&&(v.setText(cd.call(this)),v.layout&&v.layout()),this},dS={setTextFormatCallback:lS,getFormatText:cd,updateText:uS};const Xt=Phaser.Utils.Objects.GetValue,fS=Phaser.Math.Linear,wh=Phaser.Math.Percent,cS=Phaser.Math.Snap.To;class vS extends Li{constructor(i,e){e===void 0&&(e={}),super(i,e),this.type="rexKnob",this.eventEmitter=Xt(e,"eventEmitter",this);var d=Xt(e,"background",void 0),t=Xt(e,"text",void 0);d&&this.addBackground(d),t&&(e.textColor=void 0,e.textStrokeColor=void 0,this.setTextFormatCallback(Xt(e,"textFormatCallback",void 0),Xt(e,"textFormatCallbackScope",void 0)));var s=new Qu(i,e);s.setDepth(Xt(e,"knobDepth",0)),s._value=-1,i.add.existing(s),this.add(s,"knob"),t&&(this.add(t,"text","center",0,!1),i.children.moveBelow(s,t)),this.addChildrenMap("background",d),this.addChildrenMap("knob",s),this.addChildrenMap("text",t);var u=Xt(e,"valuechangeCallback",null);if(u!==null){var n=Xt(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",u,n)}this.setEnable(Xt(e,"enable",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Xt(e,"easeValue.duration",0)).setEaseValueFunction(Xt(e,"easeValue.ease","Linear")),this.setGap(Xt(e,"gap",void 0)),this.setValue(Xt(e,"value",0),Xt(e,"min",void 0),Xt(e,"max",void 0));var a=Xt(e,"input",0);switch(typeof a=="string"&&(a=pS[a]),a){case 0:hS.call(this);break;case 1:iS.call(this);break}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setGap(i){return this.gap=i,this}get value(){return this.sizerChildren.knob.value}set value(i){this.gap!==void 0&&(i=cS(i,this.gap));var e=this.value;this.sizerChildren.knob.value=i;var d=this.value;e!==d&&(this.updateText(),this.eventEmitter.emit("valuechange",d,e,this.eventEmitter))}setValue(i,e,d){return i==null?this:(e!==void 0&&(i=wh(i,e,d)),this.value=i,this)}addValue(i,e,d){return e!==void 0&&(i=wh(i,e,d)),this.value+=i,this}getValue(i,e){var d=this.value;return i!==void 0&&(d=fS(i,e,d)),d}}const pS={pan:0,drag:0,click:1,none:-1};Object.assign(vS.prototype,dS,Os);const gS={arc:On,circle:Zr,curve:ey,ellipse:iy,line:sy,lines:cy,rectangle:py,triangle:my},Dh=Phaser.Utils.Objects.GetValue,mS=Phaser.Utils.Objects.IsPlainObject,xS=function(){for(var v=this.getShapes(),i=0,e=v.length;i<e;i++)v[i].lineStyle().fillStyle()};var yS={createShape(v,i){var e=gS[v],d=new e;return i&&d.setName(i),d},buildShapes(v){var i=Dh(v,"create",void 0);if(mS(i)){var e=i;for(var d in e){var t=e[d];switch(typeof t){case"number":for(var s=0;s<t;s++)this.addShape(this.createShape(d));break;case"string":this.addShape(this.createShape(d,t));break;default:for(var u=t,s=0,n=u.length;s<n;s++)this.addShape(this.createShape(d,u[s]));break}}}else if(Array.isArray(i))for(var e=i,s=0,n=e.length;s<n;s++){var a=e[s];this.addShape(this.createShape(a.type,a.name))}else typeof i=="function"&&i.call(this);this.setUpdateShapesCallback(Dh(v,"update"))},setUpdateShapesCallback(v){return v===void 0&&(v=xS),this.dirty=this.dirty||this.updateCallback!==v,this.updateCallback=v,this},updateShapes(){this.updateCallback.call(this)}};const fs=Phaser.Utils.Objects.GetValue,TS=Phaser.Utils.Objects.IsPlainObject;class vd extends ga{constructor(i,e,d,t,s,u){TS(e)&&(u=e,e=fs(u,"x",0),d=fs(u,"y",0),t=fs(u,"width",2),s=fs(u,"height",2)),super(i,e,d,t,s),this.type=fs(u,"type","rexCustomShapes"),this.buildShapes(u)}}Object.assign(vd.prototype,yS);const Le=Phaser.Utils.Objects.GetValue,SS=Phaser.Utils.Objects.IsPlainObject,CS=Phaser.Math.Clamp,ES=Phaser.Math.Linear,Bh=Phaser.Math.Percent;class PS extends vd{constructor(i,e,d,t,s,u){SS(e)&&(u=e,e=Le(u,"x",0),d=Le(u,"y",0),t=Le(u,"width",2),s=Le(u,"height",2)),u===void 0&&(u={}),u.type||(u.type="rexCustomProgress"),super(i,e,d,t,s,u),this.eventEmitter=Le(u,"eventEmitter",this);var n=Le(u,"valuechangeCallback",null);if(n!==null){var a=Le(u,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",n,a)}this.setEaseValuePropName("value").setEaseValueDuration(Le(u,"easeValue.duration",0)).setEaseValueFunction(Le(u,"easeValue.ease","Linear")),this.setValue(Le(u,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get value(){return this._value}set value(i){i=CS(i,0,1);var e=this._value,d=e!=i;this.dirty=this.dirty||d,this._value=i,d&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(i,e,d){return i==null?this:(e!==void 0&&(i=Bh(i,e,d)),this.value=i,this)}addValue(i,e,d){return e!==void 0&&(i=Bh(i,e,d)),this.value+=i,this}getValue(i,e){var d=this.value;return i!==void 0&&(d=ES(i,e,d)),d}}Object.assign(PS.prototype,Os);var MS={setTransitionStartCallback(v,i){return this.onStartCallback=v,this.onStartCallbackScope=i,this},setTransitionProgressCallback(v,i){return this.onProgressCallback=v,this.onProgressCallbackScope=i,this},setTransitionCompleteCallback(v,i){return this.onCompleteCallback=v,this.onCompleteCallbackScope=i,this}};const AS=Phaser.Utils.Objects.IsPlainObject,ce=Phaser.Utils.Objects.GetValue;var OS={out:0,in:1},RS={setTransitionDirection(v){return typeof v=="string"&&(v=OS[v]),this.dir=v,this},setDuration(v){return this.duration=v,this},setEaseFunction(v){return this.easeFunction=v,this},setNextTexture(v,i){return this.nextImage.setTexture(v,i),this},transit(v,i){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),AS(v)){var e=v;v=ce(e,"key",void 0),i=ce(e,"frame",void 0),this.setDuration(ce(e,"duration",this.duration)).setEaseFunction(ce(e,"ease",this.easeFunction)).setTransitionDirection(ce(e,"dir",this.dir));var d=ce(e,"mask",void 0);d&&this.setMaskGameObject(d),this.setMaskEnable(d===!0);var t=ce(e,"onStart",void 0),s=ce(e,"onProgress",void 0),u=ce(e,"onComplete",void 0);(t!==void 0||s!==void 0||u!==void 0)&&this.setTransitionStartCallback(t,ce(e,"onStartScope",void 0)).setTransitionProgressCallback(s,ce(e,"onProgressScope",void 0)).setTransitionCompleteCallback(u,ce(e,"onCompleteScope",void 0))}return this.setNextTexture(v,i),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new pa(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},bh=function(v,i,e,d,t){switch(this.clear().fillStyle(16777215),this.shape){case 1:var s=Math.min(v,i)/2;this.fillCircle(-v*(d-.5),-i*(t-.5),s+e);break;default:this.fillRect(-(v*d)-e,-(i*t)-e,v+2*e,i+2*e);break}};const LS=Phaser.GameObjects.Graphics;class _r extends LS{constructor(i,e,d){e===void 0&&(e=0),typeof e=="string"&&(e=FS[e]),d===void 0&&(d=0),super(i.scene),this.parent=i,this.shape=e,this.padding=d,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(i,e){var d=this.parent;return i===void 0&&(i=d.x),e===void 0&&(e=d.y),super.setPosition(i,e),this}resize(i,e,d){var t=this.parent;return i===void 0&&(i=t.width),e===void 0&&(e=t.height),d===void 0&&(d=this.padding),this.widthSave===i&&this.heightSave===e&&this.paddingSave===d?this:(this.widthSave=i,this.heightSave=e,this.paddingSave=d,this.originXSave=t.originX,this.originYSave=t.originY,bh.call(this,i,e,d,t.originX,t.originY),this)}setOrigin(i,e){e===void 0&&(e=i);var d=this.parent;return i===void 0&&(i=d.originX),e===void 0&&(e=d.originY),this.originXSave===i&&this.originYSave===e?this:(this.originXSave=i,this.originYSave=e,bh.call(this,this.widthSave,this.heightSave,this.paddingSave,i,e),this)}}const FS={rectangle:0,circle:1};var IS={setMaskGameObject(v){if(!v)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(v===!0&&this.maskGameObject instanceof _r)return this;if(this.maskGameObject===v)return this;this.removeMaskGameObject()}return v===!0&&(v=new _r(this)),this.maskGameObject=v,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(v,i,e){return i===void 0&&(i=!0),this.childrenMask||this.setMaskGameObject(!0),i?(v.setMask(this.childrenMask),e&&this.childrenMask.setInvertAlpha()):v.clearMask(),this},setCurrentImageMaskEnable(v,i){return this.setImageMaskEnable(this.currentImage,v,i),this},setNextImageMaskEnable(v,i){return this.setImageMaskEnable(this.nextImage,v,i),this},setCellImagesMaskEnable(v,i){for(var e=this.getCellImages(),d=0,t=e.length;d<t;d++)this.setImageMaskEnable(e[d],v,i);return this},setMaskEnable(v,i){return this.setImageMaskEnable(this.backImage,v,i),this.setImageMaskEnable(this.frontImage,v,i),this.setCellImagesMaskEnable(v,i),this}},wS=function(v,i){i===void 0&&(i=",");var e;return v==="__BASE"?e=function(d,t){return`${d}${i}${t}`}:e=function(d,t){return`${v}_${d}${i}${t}`},e},DS=function(v,i,e,d,t,s){e==null&&(e="__BASE"),s||(s=wS(e,s));for(var u=v.sys.textures.get(i),n=u.source[0].isRenderTexture,a=typeof e=="object"?e:u.get(e),h=a.width,r=a.height,o,c,l,f=h/d,p=r/t,g=0,m=0,x=0;x<t;x++){g=0;for(var y=0;y<d;y++)l=s(y,x),o=g+a.cutX,n?c=r-m-p+a.cutY:c=m+a.cutY,u.add(l,0,o,c,f,p),g+=f;m+=p}return{getFrameNameCallback:s,cellWidth:f,cellHeight:p,columns:d,rows:t}};const Je=Phaser.Utils.Objects.GetValue,BS=Phaser.GameObjects.Image,bS=Phaser.Utils.Objects.IsPlainObject,GS=Phaser.Math.RotateAround;var NS=function(v,i,e,d){bS(i)&&(d=i,i=Je(d,"columns",1),e=Je(d,"rows",1));var t=Je(d,"onCreateImage");if(!t){var s=Je(d,"ImageClass",BS);t=function(Y,X,W){return new s(Y,0,0,X,W)}}for(var u=Je(d,"originX",.5),n=Je(d,"originY",.5),a=Je(d,"add",!0),h=Je(d,"align",a),r=Je(d,"objectPool",void 0),o=v.scene,c=v.texture,l=v.frame,f=DS(o,c,l,i,e),p=f.getFrameNameCallback,g=v.scaleX,m=v.scaleY,x=v.rotation,y=v.getTopLeft(),T=y.x,S=y.y,C=[],E=f.cellWidth*g,P=f.cellHeight*m,M=0;M<e;M++)for(var O=0;O<i;O++){var A,R=p(O,M);r&&r.length>0?A=r.pop().setTexture(c,R):A=t(o,c,R),a&&o.add.existing(A);var F=T+E*O,I=S+P*M,B=F+u*E,N=I+n*P;h&&(A.setOrigin(u,n).setPosition(B,N).setScale(g,m).setRotation(x),GS(A,T,S,x)),C.push(A)}return C},zS={gridCutImage(v,i,e,d){d===void 0&&(d={}),d.objectPool=this.imagesPool;for(var t=NS(v,i,e,d),s,u=0,n=t.length;u<n;u++)s=t[u],s.setVisible(!0),this.add(s);return this.cellImages=t,this.setChildLocalVisible(v,!1),t},gridCutCurrentImage(v,i,e){return this.gridCutImage(this.currentImage,v,i,e)},gridCutNextImage(v,i,e){return this.gridCutImage(this.nextImage,v,i,e)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var v=this.cellImages[0].texture,i=this.cellImages,e,d,t=0,s=i.length;t<s;t++)e=i[t],this.setChildLocalAlpha(e,1).setChildLocalScale(e,1).setChildLocalVisible(e,!1),e.clearMask(),d=e.frame.name,e.setTexture(),v.remove(d);return this.imagesPool.push(...i),i.length=0,this}},pd={};Object.assign(pd,MS,RS,IS,zS);var VS=function(v,i,e,d){},YS=function(v,i,e,d){v.setChildLocalAlpha(i,1-d).setChildLocalAlpha(e,d)},US=function(v,i,e,d){v.setChildLocalAlpha(i,1)};const Gh=Phaser.Utils.Objects.IsPlainObject,bt=Phaser.Utils.Objects.GetValue,XS=Phaser.Math.Clamp;class WS extends ze{constructor(i,e,d,t,s,u){Gh(e)?(u=e,e=bt(u,"x",0),d=bt(u,"y",0),t=bt(u,"key",void 0),s=bt(u,"frame",void 0)):Gh(s)&&(u=s,s=void 0);var n=bt(u,"back",void 0),a=bt(u,"front",void 0);n||(n=i.add.image(e,d,t,s)),a||(a=i.add.image(e,d,t,s));var h=bt(u,"width",a.width),r=bt(u,"height",a.height);super(i,e,d,h,r),n.setVisible(!1),this.addMultiple([n,a]),this.type="rexTransitionImage",this.backImage=n,this.frontImage=a,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var o=bt(u,"onStart",void 0),c=bt(u,"onProgress",void 0),l=bt(u,"onComplete",void 0),f=bt(u,"dir",0);o===void 0&&c===void 0&&l===void 0&&(o=VS,c=YS,l=US,f=0),this.setTransitionStartCallback(o,bt(u,"onStartScope",void 0)).setTransitionProgressCallback(c,bt(u,"onProgressScope",void 0)).setTransitionCompleteCallback(l,bt(u,"onCompleteScope",void 0)).setTransitionDirection(f).setDuration(bt(u,"duration",1e3)).setEaseFunction(bt(u,"ease","Linear"));var p=bt(u,"mask",void 0);p&&this.setMaskGameObject(p),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(i){!this.scene||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(i),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get t(){return this._t}set t(i){if(i=XS(i,0,1),this._t!==i){this._t=i;var e=this.currentImage,d=this.nextImage;if(i===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),yr(this.onStartCallback,this.onStartCallbackScope,this,e,d,i)),yr(this.onProgressCallback,this.onProgressCallbackScope,this,e,d,i),i===1){yr(this.onCompleteCallback,this.onCompleteCallbackScope,this,e,d,i);var t=d.texture.key,s=d.frame.name;this.frontImage.setTexture(t,s),this.backImage.setTexture(t,s),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}i===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(i){return this.t=i,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(i,e){return super.setOrigin(i,e),this.backImage.setOrigin(i,e),this.frontImage.setOrigin(i,e),this.maskGameObject&&this.maskGameObject.setOrigin(i,e),this}setTexture(i,e){return this.frontImage.setTexture(i,e),this.backImage.setTexture(i,e).setVisible(!1),this}}var yr=function(v,i,e,d,t,s){!v||(i?v.call(i,e,d,t,s):v(e,d,t,s))};Object.assign(WS.prototype,pd);Phaser.GameObjects.Rectangle;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;var HS=function(v){if(!window.Chart){var i=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(i),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,$S(this,v)),this},$S=function(v,i){i===void 0&&(i={}),i.options===void 0&&(i.options={});var e=i.options;e.responsive=!1,e.maintainAspectRatio=!1,e.hasOwnProperty("devicePixelRatio")||(e.devicePixelRatio=1);var d=!1;e.animation===void 0?e.animation={}:e.animation===!1&&(d=!0,e.animation={});var t=e.animation;d&&(t.duration=0);var s=t.onProgress;t.onProgress=function(n){s&&s(n),v.needRedraw()};var u=t.onComplete;return t.onComplete=function(n){u&&u(n),v.needRedraw()},i},KS=function(v){if(this.chart!==void 0)if(typeof v=="string"){for(var i=this.chart.data.datasets,e,d=0,t=i.length;d<t;d++)if(e=i[d],e.label===v)return e}else return this.chart.data.datasets[v]},ZS=function(v,i){var e=this.getChartDataset(v);if(e!==void 0){if(typeof i=="string"){var d=this.chart.data.labels;if(i=d.indexOf(i),i===-1)return}return e.data[i]}},kS=function(v,i,e){if(this.chart===void 0)return this;var d=this.getChartDataset(v);if(typeof i=="string"){var t=this.chart.data.labels;if(i=t.indexOf(i),i===-1)return this}return d.data[i]=e,this},JS=function(){return this.chart===void 0?this:(this.chart.update(),this)};class QS extends xn{constructor(i,e,d,t,s,u){super(i,e,d,t,s),this.type="rexChart",this.chart=void 0,u!==void 0&&this.setChart(u)}destroy(i){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(i))}resize(i,e){if(i===this.width&&e===this.height)return this;if(super.resize(i,e),this.chart){var d=this.chart;d.height=this.canvas.height,d.width=this.canvas.width,d.aspectRatio=d.height?d.width/d.height:null,d.update()}return this}}var jS={setChart:HS,getChartDataset:KS,getChartData:ZS,setChartData:kS,updateChart:JS};Object.assign(QS.prototype,jS);var qS=function(v){if(this.rexSizer.hidden)return 0;v===void 0&&(v=!0);var i=0,e=this.sizerChildren,d,t,s;if(this.orientation===0)for(var u=0,n=e.length;u<n;u++)d=e[u],!d.rexSizer.hidden&&(d.rexSizer.proportion===0||v?s=this.getChildWidth(d):s=0,t=d.rexSizer.padding,s+=t.left+t.right,u>0&&(s+=this.space.item),i+=s);else for(var u=0,n=e.length;u<n;u++)d=e[u],d.hasOwnProperty("rexSizer")&&(d.rexSizer.hidden||(t=d.rexSizer.padding,s=this.getChildWidth(d)+t.left+t.right,i=Math.max(s,i)));return i+this.space.left+this.space.right},_S=function(v){if(this.rexSizer.hidden)return 0;v===void 0&&(v=!0);var i=0,e=this.sizerChildren,d,t,s;if(this.orientation===0)for(var u=0,n=e.length;u<n;u++)d=e[u],!d.rexSizer.hidden&&(t=d.rexSizer.padding,s=this.getChildHeight(d)+t.top+t.bottom,i=Math.max(s,i));else for(var u=0,n=e.length;u<n;u++)d=e[u],d.hasOwnProperty("rexSizer")&&(d.rexSizer.hidden||(d.rexSizer.proportion===0||v?s=this.getChildHeight(d):s=0,t=d.rexSizer.padding,s+=t.top+t.bottom,u>0&&(s+=this.space.item),i+=s));return i+this.space.top+this.space.bottom},tC=function(v,i){i===void 0&&(i=this.width);var e,d=v.rexSizer,t=d.padding;if(this.orientation===0)d.proportion>0&&this.proportionLength>0&&(e=d.proportion*this.proportionLength);else if(d.expand){var s=i-this.space.left-this.space.right;e=s-t.left-t.right}return e},eC=function(v,i){i===void 0&&(i=this.height);var e,d=v.rexSizer,t=d.padding;if(this.orientation===0){if(d.expand){var s=i-this.space.top-this.space.bottom;e=s-t.top-t.bottom}}else d.proportion>0&&this.proportionLength>0&&(e=d.proportion*this.proportionLength);return e},iC=function(v){v===void 0&&(v=[]);for(var i=this.sizerChildren,e,d=0,t=i.length;d<t;d++)e=i[d],e.isRexSizer&&v.push(e);return v},sC=function(){return this._childrenProportion=void 0,this.proportionLength=void 0,Ls.call(this),this};const nC=Phaser.Math.Wrap;var rC=function(){for(var v=this.sizerChildren,i,e,d,t=this.innerLeft,s=this.innerTop,u=this.innerWidth,n=this.innerHeight,a=t,h=s,r,o,c,l,f,p,g,m=this.startChildIndex,x=0,y=v.length;x<y;x++)m===0?g=x:g=nC(x+m,0,y),this.rtl&&(g=y-g-1),i=v[g],!i.rexSizer.hidden&&(e=i.rexSizer,d=e.padding,Fs.call(this,i),i.isRexSpace?(f=0,p=0):(f=this.getExpandedChildWidth(i),p=this.getExpandedChildHeight(i)),i.isRexSizer?(i.runLayout(this,f,p),Da(i,this)):oi(i,f,p),f===void 0&&(f=gt(i)),p===void 0&&(p=vt(i)),this.orientation===0?(r=a+d.left,e.proportion===0||this.proportionLength===0?c=f:c=e.proportion*this.proportionLength,o=h+d.top,l=n-d.top-d.bottom):(r=a+d.left,c=u-d.left-d.right,o=h+d.top,e.proportion===0||this.proportionLength===0?l=p:l=e.proportion*this.proportionLength),Is.call(this,i,r,o,c,l,e.align),this.orientation===0?a+=c+d.left+d.right+this.space.item:h+=l+d.top+d.bottom+this.space.item)},aC=function(i){var i=La.call(this,i);if(this.proportionLength===void 0&&this.orientation===0){var e=i-this.childrenWidth;e>0?(e=i-this.getChildrenWidth(!1),this.proportionLength=e/this.childrenProportion):this.proportionLength=0}return i},oC=function(v,e){var e=Fa.call(this,v,e);if(this.proportionLength===void 0&&this.orientation===1){var d=e-this.childrenHeight;d>0?(d=e-this.getChildrenHeight(!1),this.proportionLength=d/this.childrenProportion):this.proportionLength=0}return e};const hC=Phaser.GameObjects.Zone;class lC extends hC{constructor(i){super(i,0,0,1,1),this.isRexSpace=!0}}var uC=function(v,i){var e=this.sizerChildren;if(e.length===0)return-1;for(var d=-1,t=1/0,s=0,u=e.length;s<u;s++){var n=e[s],a;this.orientation===0?a=Math.abs(n.left-v):a=Math.abs(n.top-i),t>a&&(t=a,d=s)}var n=e[e.length-1],a;return this.orientation===0?a=Math.abs(n.right-v):a=Math.abs(n.bottom-i),t>a&&(t=a,d=s+1),d};const gd=Phaser.Utils.Objects.IsPlainObject,ii=Phaser.Utils.Objects.GetValue,Nh=Phaser.Display.Align.CENTER,dC={min:0,full:-1};var Tr=function(v,i,e,d,t,s,u,n,a){Rs.call(this,v);var h=v.isRexSpace,r=typeof i;if(i===null)return this;if(r!=="number"){if(r==="string")i=dC[i];else if(gd(i)){var o=i;i=ii(o,"proportion",void 0),e=ii(o,"align",Nh),d=ii(o,"padding",0),t=ii(o,"expand",!1),s=ii(o,"key",void 0),u=ii(o,"index",void 0),v.isRexSizer||(n=ii(o,"minWidth",void 0),a=ii(o,"minHeight",void 0))}}typeof e=="string"&&(e=Fn[e]),i===void 0&&(i=h?1:0),e===void 0&&(e=Nh),d===void 0&&(d=0),t===void 0&&(t=!1),n===void 0&&(h?n=0:v.isRexSizer||(n=v._minWidth)),a===void 0&&(h?a=0:v.isRexSizer||(a=v._minHeight));var o=this.getSizerConfig(v);return o.proportion=i,o.align=e,o.padding=qi(d),o.expand=t,u===void 0||u>=this.sizerChildren.length?this.sizerChildren.push(v):this.sizerChildren.splice(u,0,v),v.isRexSizer||(i>0&&(this.orientation===0?v.minWidth=n===void 0?gt(v):n:v.minHeight=a===void 0?vt(v):a),t&&(this.orientation===0?v.minHeight=a:v.minWidth=n)),s!==void 0&&this.addChildrenMap(s,v),this},fC={add:Tr,addSpace(v){return this.insertSpace(void 0,v),this},insertSpace(v,i){return i===void 0&&(i=1),Tr.call(this,new lC(this.scene),{proportion:i,minWidth:0,minHeight:0,index:v}),this},insert(v,i,e,d,t,s,u,n){return gd(e)&&(e.index=v),Tr.call(this,i,e,d,t,s,u,v,n),this},insertAtPosition(v,i,e,d,t,s,u,n,a){var h=uC.call(this,v,i);return h===-1&&(h=void 0),this.insert(h,e,d,t,s,u,n,a),this}};const cC=Phaser.Utils.Array.Remove;var vC={remove(v,i){return this.getParentSizer(v)!==this?this:(cC(this.sizerChildren,v),Dn.call(this,v,i),this)},removeAll(v){for(var i=this.sizerChildren.length-1;i>=0;i--)this.remove(this.sizerChildren[i],v);return this},clear(v){return this.sizerChildren.length=0,Bn.call(this,v),this}},md={getChildrenWidth:qS,getChildrenHeight:_S,getExpandedChildWidth:tC,getExpandedChildHeight:eC,getChildrenSizers:iC,preLayout:sC,layoutChildren:rC,resolveWidth:aC,resolveHeight:oC};Object.assign(md,fC,vC);var pC=function(){for(var v=0,i=this.sizerChildren,e,d,t=0,s=i.length;t<s;t++)e=i[t],!e.rexSizer.hidden&&(d=e.rexSizer.proportion,d>0&&(v+=d));return v},gC={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},ba=function(v){return typeof v=="string"&&(v=gC[v]),v};const Sr=Phaser.Utils.Objects.IsPlainObject,ve=Phaser.Utils.Objects.GetValue;class rt extends Ri{constructor(i,e,d,t,s,u,n){Sr(e)?(n=e,e=ve(n,"x",0),d=ve(n,"y",0),t=ve(n,"width",void 0),s=ve(n,"height",void 0),u=ve(n,"orientation",0)):Sr(t)?(n=t,t=ve(n,"width",void 0),s=ve(n,"height",void 0),u=ve(n,"orientation",0)):Sr(u)&&(n=u,u=ve(n,"orientation",0)),u===void 0&&(u=0),super(i,e,d,t,s,n),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(u),this.setItemSpacing(ve(n,"space.item",0)),this.setStartChildIndex(ve(n,"startChildIndex",0)),this.setRTL(ve(n,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(i){return this.orientation=ba(i),this}setItemSpacing(i){return this.space.item=i,this}setStartChildIndex(i){return this.startChildIndex=i,this}setRTL(i){return i===void 0&&(i=!0),this.rtl=i,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=pC.call(this)),this._childrenProportion}}Object.assign(rt.prototype,md);var xd=function(){return Array.prototype.reduce.call(arguments,mC,0)},mC=function(v,i){return v+i},xC=function(v){if(this.rexSizer.hidden)return 0;v===void 0&&(v=!0);for(var i=0,e,d=this.sizerChildren,t,s,u,n,a=0;a<this.columnCount;a++){if(n=this.columnProportions[a],e=0,n===0||v){for(var h=0;h<this.rowCount;h++)t=d[h*this.columnCount+a],t&&(t.rexSizer.hidden||(s=t.rexSizer.padding,u=this.getChildWidth(t)+s.left+s.right,e=Math.max(e,u)));i+=e}this.columnWidth[a]=e}var r=this.space,o=Math.max(r.indentLeftOdd,r.indentLeftEven);return i+xd(r.left,o,...r.column,r.right)},yC=function(v){if(this.rexSizer.hidden)return 0;v===void 0&&(v=!0);for(var i=0,e,d=this.sizerChildren,t,s,u,n,a=0;a<this.rowCount;a++){if(n=this.rowProportions[a],e=0,n===0||v){for(var h=0;h<this.columnCount;h++)t=d[a*this.columnCount+h],t&&(t.rexSizer.hidden||(u=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:vt(t),s=t.rexSizer.padding,u+=s.top+s.bottom,e=Math.max(e,u)));i+=e}this.rowHeight[a]=e}var r=this.space,o=Math.max(r.indentTopOdd,r.indentTopEven);return i+xd(r.top,o,...r.row,r.bottom)},TC=function(v,i){var e,d=v.rexSizer;if(d.expand){var t=d.padding;e=i-t.left-t.right}return e},SC=function(v,i){var e,d=v.rexSizer;if(d.expand){var t=d.padding;e=i-t.top-t.bottom}return e},CC=function(v){v===void 0&&(v=[]);for(var i=this.sizerChildren,e,d=0,t=i.length;d<t;d++)e=i[d],e&&e.isRexSizer&&v.push(e);return v},EC=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,Ls.call(this),this},PC=function(){for(var v,i,e,d=this.innerLeft,t=this.innerTop,s,u=t,n,a,h,r,o,c,l=this.space.column,f=this.space.row,p=this.space.indentLeftOdd,g=this.space.indentLeftEven,m=this.space.indentTopOdd,x=this.space.indentTopEven,y,T,S,C,E=0;E<this.rowCount;E++){T=this.getRowHeight(E),S=E%2?g:p,s=d+S;for(var P=0;P<this.columnCount;P++){if(y=this.getColumnWidth(P),v=this.getChildAt(P,E),!v||v.rexSizer.hidden){s+=y+l[P];continue}Fs.call(this,v),o=this.getExpandedChildWidth(v,y),c=this.getExpandedChildHeight(v,T),v.isRexSizer?(v.runLayout(this,o,c),Da(v,this)):oi(v,o,c),i=v.rexSizer,e=i.padding,n=s+e.left,h=y-e.left-e.right,C=P%2?x:m,a=u+C+e.top,r=T-e.top-e.bottom,Is.call(this,v,n,a,h,r,i.align),s+=y+l[P]}u+=T+f[E]}},MC=function(i){var i=La.call(this,i);if(this.proportionWidthLength===void 0){var e=this.totalColumnProportions;if(e>0){var d=i-this.getChildrenWidth(!1);d>=0&&(this.proportionWidthLength=d/e)}else this.proportionWidthLength=0}return i},AC=function(v,e){var e=Fa.call(this,v,e);if(this.proportionHeightLength===void 0){var d=this.totalRowProportions;if(d>0){var t=e-this.getChildrenHeight(!1);t>=0&&(this.proportionHeightLength=t/d)}else this.proportionHeightLength=0}return e},OC=function(v){var i,e,d;for(var t in this.sizerChildren)i=this.sizerChildren[t],i&&i.isRexSizer&&!i.ignoreLayout&&(d=this.getColumnWidth(parseInt(t)%this.columnCount),e=this.getExpandedChildWidth(i,d),e=i.resolveWidth(e),i.resolveChildrenWidth(e))},RC=function(v){var i,e,d;for(var t in this.sizerChildren)i=this.sizerChildren[t],!(!i||i.isRexSizer&&i.ignoreLayout||!i.runWidthWrap)&&(d=this.getColumnWidth(parseInt(t)%this.columnCount),e=this.getExpandedChildWidth(i,d),i.isRexSizer&&(e=i.resolveWidth(e)),i.runWidthWrap(e));return this};const LC=Phaser.Utils.Objects.IsPlainObject,Xi=Phaser.Utils.Objects.GetValue,zh=Phaser.Display.Align.CENTER;var Vh=function(v,i,e,d,t){if(typeof v=="number"||typeof i=="number")if(v===void 0){for(var s,u=0;u<d;u++)if(s=i*d+u,!e[s])return s}else if(i===void 0){for(var s,u=0;u<t;u++)if(s=u*d+v,!e[s])return s}else{var s=i*d+v;if(!e[s])return s}else if(i===!0){for(var s,u=0;u<d;u++)for(var n=0;n<t;n++)if(s=n*d+u,!e[s])return s}else for(var u=0,a=e.length;u<a;u++)if(!e[u])return u;return null},FC=function(v,i,e,d,t,s,u){if(Rs.call(this,v),LC(i)){var a=i;i=Xi(a,"column",void 0),e=Xi(a,"row",void 0),d=Xi(a,"align",zh),t=Xi(a,"padding",0),s=Xi(a,"expand",!1),u=Xi(a,"key",void 0)}var n=Vh(i,e,this.sizerChildren,this.columnCount,this.rowCount);if(n===null){if(typeof i=="number"&&typeof e=="number")return this;e===!0||typeof e=="number"?this.addEmptyColumn():this.addEmptyRow(),n=Vh(i,e,this.sizerChildren,this.columnCount,this.rowCount)}typeof d=="string"&&(d=Fn[d]),d===void 0&&(d=zh),t===void 0&&(t=0),s===void 0&&(s=!0);var a=this.getSizerConfig(v);return a.align=d,a.padding=qi(t),a.expand=s,this.sizerChildren[n]=v,u!==void 0&&this.addChildrenMap(u,v),this},IC={add:FC},$i=function(v,i,e,d){e===void 0&&(e=0),d===void 0&&(d=v.length-1);for(var t=e;t<=d;t++)v[t]=i;return v},wC={remove(v,i){if(this.getParentSizer(v)!==this)return this;var e=this.sizerChildren.indexOf(v);return e!==-1&&(this.sizerChildren[e]=null),Dn.call(this,v,i),this},removeAt(v,i,e){var d=this.getChildAt(v,i);return d&&this.remove(d,e),this},removeAll(v){for(var i=this.sizerChildren.length-1;i>=0;i--){var e=this.sizerChildren[i];!e||this.remove(e,v)}return this},clear(v){return $i(this.sizerChildren,null),Bn.call(this,v),this}};const Yh=Phaser.Utils.Objects.GetValue;var DC=function(v,i,e,d,t){if(e===void 0&&(e=0),d===void 0&&(d=0),this.columnCount=v,this.rowCount=i,this.gridCount=v*i,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=v*i,$i(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=v,typeof e=="number")$i(this.columnProportions,e);else for(var s=0;s<v;s++)this.columnProportions[s]=e[s]||0;if(this.rowProportions=[],this.rowProportions.length=i,typeof d=="number")$i(this.rowProportions,d);else for(var s=0;s<i;s++)this.rowProportions[s]=d[s]||0;this.columnWidth=[],this.columnWidth.length=v,this.rowHeight=[],this.rowHeight.length=i,this.space.column=[],this.space.column.length=v-1;var u=Yh(t,"column",0);if(typeof u=="number")$i(this.space.column,u);else for(var s=0,n=this.space.column.length;s<n;s++)this.space.column[s]=u[s]||0;this.space.row=[],this.space.row.length=i-1;var a=Yh(t,"row",0);if(typeof a=="number")$i(this.space.row,a);else for(var s=0,n=this.space.row.length;s<n;s++)this.space.row[s]=a[s]||0;return this},yd=function(v,i,e){i===void 0&&(i=this.rowProportions[0]||0),e===void 0&&(e=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var d=[v*this.columnCount,0],t=0;t<this.columnCount;t++)d.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,d),this.rowProportions.push(i),this.rowHeight.length+=1,this.space.row.splice(v,0,e),this},BC=function(v,i){return yd.call(this,this.rowCount,v,i),this},Td=function(v,i,e){i===void 0&&(i=this.columnProportions[0]||0),e===void 0&&(e=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var d=this.rowCount-1;d>=0;d--){var t=d*this.columnCount+v;this.sizerChildren.splice(t,0,null)}return this.columnProportions.push(i),this.columnWidth.length+=1,this.space.column.splice(v,0,e),this},bC=function(v,i){return Td.call(this,this.columnCount,v,i),this},Sd={getChildrenWidth:xC,getChildrenHeight:yC,getExpandedChildWidth:TC,getExpandedChildHeight:SC,getChildrenSizers:CC,preLayout:EC,layoutChildren:PC,resolveWidth:MC,resolveHeight:AC,resolveChildrenWidth:OC,runWidthWrap:RC,resetGrid:DC,inseryEmptyRow:yd,addEmptyRow:BC,insertEmptyColumn:Td,addEmptyColumn:bC};Object.assign(Sd,IC,wC);var GC=function(){for(var v=0,i,e=0;e<this.columnCount;e++)i=this.columnProportions[e],i>0&&(v+=i);return v},NC=function(){for(var v=0,i,e=0;e<this.rowCount;e++)i=this.rowProportions[e],i>0&&(v+=i);return v};const ks=Phaser.Utils.Objects.IsPlainObject,mt=Phaser.Utils.Objects.GetValue;class _i extends Ri{constructor(i,e,d,t,s,u,n,a,h,r){ks(e)?(r=e,e=mt(r,"x",0),d=mt(r,"y",0),t=mt(r,"width",void 0),s=mt(r,"height",void 0),u=mt(r,"column",r.col||0),n=mt(r,"row",0),a=mt(r,"columnProportions",0),h=mt(r,"rowProportions",0)):ks(t)?(r=t,t=mt(r,"width",void 0),s=mt(r,"height",void 0),u=mt(r,"column",r.col||0),n=mt(r,"row",0),a=mt(r,"columnProportions",0),h=mt(r,"rowProportions",0)):ks(u)?(r=u,u=mt(r,"column",r.col||0),n=mt(r,"row",0),a=mt(r,"columnProportions",0),h=mt(r,"rowProportions",0)):ks(a)&&(r=a,a=mt(r,"columnProportions",0),h=mt(r,"rowProportions",0)),super(i,e,d,t,s,r),this.type="rexGridSizer",this.resetGrid(u,n,a,h,mt(r,"space",void 0)),this.setIndentLeft(mt(r,"space.indentLeftOdd",0),mt(r,"space.indentLeftEven",0)),this.setIndentTop(mt(r,"space.indentTopOdd",0),mt(r,"space.indentTopEven",0)),this.addChildrenMap("items",this.sizerChildren);var o=mt(r,"createCellContainerCallback");if(o)for(var d=0,c=this.rowCount;d<c;d++)for(var e=0,l=this.columnCount;e<l;e++){var f={column:e,row:d},p=o(i,e,d,f);p&&this.add(p,f)}}destroy(i){!this.scene||(super.destroy(i),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setIndentLeft(i,e){return this.space.indentLeftOdd=i,this.space.indentLeftEven=e,this}setIndentTop(i,e){return this.space.indentTopOdd=i,this.space.indentTopEven=e,this}setColumnProportion(i,e){return i>=this.columnProportions.length?this:(this.columnProportions[i]=e,this)}setRowProportion(i,e){return i>=this.rowProportions.length?this:(this.rowProportions[i]=e,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=GC.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=NC.call(this)),this._totalRowProportions}getChildAt(i,e){return this.sizerChildren[e*this.columnCount+i]}childToGridIndex(i,e){if(!i)return null;var d=this.sizerChildren.indexOf(i);return d===-1?null:(e===void 0&&(e={}),e.x=d%this.columnCount,e.y=Math.floor(d/this.columnCount),e)}getColumnWidth(i){var e=this.columnProportions[i],d=e===0?this.columnWidth[i]:e*this.proportionWidthLength;return d}getRowHeight(i){var e=this.rowProportions[i],d=e===0?this.rowHeight[i]:e*this.proportionHeightLength;return d}}Object.assign(_i.prototype,Sd);var zC=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},VC=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},YC=function(v){v===void 0&&(v=[]);for(var i=this.sizerChildren,e,d=0,t=i.length;d<t;d++)e=i[d],e!==`
`&&e.isRexSizer&&v.push(e);return v},UC=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,Ls.call(this),this},XC=function(){for(var v=this.innerWidth,i=this.justifyPercentage,e=this.space.item,d=this.space.line,t=this.space.indentLeftOdd,s=this.space.indentLeftEven,u=this.space.indentTopOdd,n=this.space.indentTopEven,a,h,r,o=0,c,l,f=this.innerLeft,p=this.innerTop,g,m,x,y,T=this.widthWrapResult.lines,S,C,E,P,M=p,O=0,A=T.length;O<A;O++){switch(S=T[O],C=S.children,this.rtl&&C.reverse(),c=O%2?s:t,P=f+c,E=v-S.width,this.align){case 0:break;case 1:P+=E;break;case 2:P+=E/2;break;case 3:o=Cr(v,E,i,C.length);break;case 4:o=Cr(v,E,i,C.length),o===0&&(P+=E);break;case 5:o=Cr(v,E,i,C.length),o===0&&(P+=E/2);break}for(var R=0,F=C.length;R<F;R++)a=C[R],!a.rexSizer.hidden&&(h=a.rexSizer,r=h.padding,Fs.call(this,a),g=P+r.left,R>0&&(g+=e),l=R%2?n:u,m=M+l+r.top,x=gt(a),y=vt(a),P=g+x+r.right+o,Is.call(this,a,g,m,x,y,h.align));M+=S.height+d}},Cr=function(v,i,e,d){return i/v<=e?i/(d-1):0},WC=function(v,i){i===void 0?i={lines:[],width:0,height:0}:(i.lines.length=0,i.width=0,i.height=0);for(var e=this.sizerChildren,d=this.space.item,t=this.space.line,s=this.space.indentLeftOdd,u=this.space.indentLeftEven,n=this.space.indentTopOdd,a=this.space.indentTopEven,h,r,o,c=0,l,f=i.lines,p=void 0,g,m=0,x=e.length;m<x;m++){if(h=e[m],h===`
`)h=void 0,r=0,g=!0;else{if(h.rexSizer.hidden)continue;h.isRexSizer&&h.layout(),r=HC(h),g=c<r||p===void 0}if(g){p&&(p.width=v-(c+d),i.width=Math.max(i.width,p.width),i.height+=p.height+t),p={children:[],height:0},f.push(p);var l=f.length%2?s:u;c=v-l}c-=r+d,h&&(p.children.push(h),o=$C(h),p.height=Math.max(p.height,o))}return p&&(p.width=v-(c+d),i.width=Math.max(i.width,p.width),i.height+=p.height),i.height+=Math.max(n,a),i},HC=function(v){var i=v.rexSizer.padding;return gt(v)+i.left+i.right},$C=function(v){var i=v.rexSizer.padding;return vt(v)+i.top+i.bottom},KC=function(v){var i=v-this.space.left-this.space.right;this.widthWrapResult=WC.call(this,i,this.widthWrapResult),_u.call(this,v)};const Uh=Phaser.Math.Distance.Between;var ZC=function(v,i){var e=this.sizerChildren;if(e.length===0)return-1;for(var d=-1,t=1/0,s=0,u=e.length;s<u;s++){var n=e[s];if(!(Math.abs(n.centerY-i)>n.height/2)){var h=Uh(n.left,n.centerY,v,i);t>h&&(t=h,d=s);var a=e[s+1];if(!(a&&a.y===n.y)){var h=Uh(n.right,n.centerY,v,i);t>h&&(t=h,d=s+1)}}}return d};const kC=Phaser.Utils.Objects.IsPlainObject,Er=Phaser.Utils.Objects.GetValue,JC=Phaser.Display.Align.CENTER;var Pr=function(v,i,e,d){if(v===`
`)return this.addNewLine(),this;if(Rs.call(this,v),kC(i)){var t=i;i=Er(t,"padding",0),e=Er(t,"key",void 0),d=Er(t,"index",void 0)}i===void 0&&(i=0);var t=this.getSizerConfig(v);return t.align=JC,t.padding=qi(i),d===void 0||d>=this.sizerChildren.length?this.sizerChildren.push(v):this.sizerChildren.splice(d,0,v),e!==void 0&&this.addChildrenMap(e,v),this},QC={add(v,i,e){if(_e(v))for(var d=v,t=0,s=d.length;t<s;t++)Pr.call(this,d[t],i);else Pr.call(this,v,i,e);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(v,i,e,d){return Pr.call(this,i,e,d,v),this},insertAtPosition(v,i,e,d,t){var s=ZC.call(this,v,i);return s===-1&&(s=void 0),this.insert(s,e,d,t),this}};const jC=Phaser.Utils.Array.Remove;var qC={remove(v,i){return this.getParentSizer(v)!==this?this:(jC(this.sizerChildren,v),Dn.call(this,v,i),this)},removeAll(v){for(var i=this.sizerChildren.length-1;i>=0;i--)this.remove(this.sizerChildren[i],v);return this},clear(v){return this.sizerChildren.length=0,Bn.call(this,v),this}},Cd={getChildrenWidth:zC,getChildrenHeight:VC,getChildrenSizers:YC,preLayout:UC,layoutChildren:XC,runWidthWrap:KC};Object.assign(Cd,QC,qC);var _C=function(v){v===void 0&&(v=this.sizerChildren);for(var i=0,e,d,t=0,s=v.length;t<s;t++)e=v[t],e!==`
`&&(d=this.getChildWidth(e),i=Math.max(d,i));return i},tE=function(v){v===void 0&&(v=this.sizerChildren);for(var i=0,e,d,t=0,s=v.length;t<s;t++)e=v[t],e!==`
`&&(d=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:vt(e),i=Math.max(d,i));return i};const Xh=Phaser.Utils.Objects.IsPlainObject,Wt=Phaser.Utils.Objects.GetValue;class li extends Ri{constructor(i,e,d,t,s,u){Xh(e)?(u=e,e=Wt(u,"x",0),d=Wt(u,"y",0),t=Wt(u,"width",void 0),s=Wt(u,"height",void 0)):Xh(t)&&(u=t,t=Wt(u,"width",void 0),s=Wt(u,"height",void 0)),super(i,e,d,t,s,u),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(Wt(u,"orientation",0)),this.setItemSpacing(Wt(u,"space.item",0)),this.setLineSpacing(Wt(u,"space.line",0)),this.setIntentLeft(Wt(u,"space.indentLeftOdd",0),Wt(u,"space.indentLeftEven",0)),this.setIntentTop(Wt(u,"space.indentTopOdd",0),Wt(u,"space.indentTopEven",0)),this.setAlign(Wt(u,"align",0)),this.setJustifyPercentage(Wt(u,"justifyPercentage",.25)),this.setRTL(Wt(u,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(i){return this.orientation=ba(i),this}setItemSpacing(i){return this.space.item=i,this}setLineSpacing(i){return this.space.line=i,this}setIntentLeft(i,e){return this.space.indentLeftOdd=i,this.space.indentLeftEven=e,this}setIntentTop(i,e){return this.space.indentTopOdd=i,this.space.indentTopEven=e,this}setAlign(i){return typeof i=="string"&&(i=eE[i]),this.align=i,this}setJustifyPercentage(i){return this.justifyPercentage=i,this}setRTL(i){return i===void 0&&(i=!0),this.rtl=i,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=_C.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=tE.call(this)),this._maxChildHeight}}const eE={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(li.prototype,Cd);var vn=function(v,i,e,d){var t=new _r(i,e,d);if(v&&!v.isRexSizer){var s=t.createGeometryMask();v.setMask(s),this.once("destroy",function(){v.setMask(),s.destroy()})}return this.pin(t),t};const Se=Phaser.Utils.Objects.GetValue;class Ki extends rt{constructor(i,e){super(i,e),this.type="rexLabel";var d=Se(e,"background",void 0),t=Se(e,"icon",void 0),s=Se(e,"iconMask",void 0),u=Se(e,"text",void 0),n=Se(e,"action",void 0),a=Se(e,"actionMask",void 0),h=Se(e,"align",void 0),r=Se(e,"space.icon",0),o=Se(e,"space.text",0);if(d&&this.addBackground(d),(h==="right"||h==="bottom"||h==="center")&&this.addSpace(),t){var c;this.orientation===0?(u||n)&&(c={right:r}):(u||n)&&(c={bottom:r}),this.add(t,{proportion:0,padding:c}),s&&(s=vn.call(this,t,t,1))}if(u){var l=Se(e,"expandTextWidth",!1),f=Se(e,"expandTextHeight",!1),p,c,g;this.orientation===0?(p=l?1:0,n&&(c={right:o}),g=f):(p=f?1:0,n&&(c={bottom:o}),g=l),this.add(u,{proportion:p,expand:g,padding:c})}n&&(this.add(n),a&&(a=vn.call(this,n,n,1))),h==="center"&&this.addSpace(),this.addChildrenMap("background",d),this.addChildrenMap("icon",t),this.addChildrenMap("iconMask",s),this.addChildrenMap("text",u),this.addChildrenMap("action",n),this.addChildrenMap("actionMask",a)}get text(){var i=this.childrenMap.text;return i===void 0?"":i.text}set text(i){var e=this.childrenMap.text;e!==void 0&&e.setText(i)}setText(i){return this.text=i,this}appendText(i){return this.text+=i,this}setTexture(i,e){var d=this.childrenMap.icon;if(d!==void 0)return d.setTexture(i,e),this}get texture(){var i=this.childrenMap.icon;if(i!==void 0)return i.texture}get frame(){var i=this.childrenMap.icon;if(i!==void 0)return i.frame}runLayout(i,e,d){if(this.ignoreLayout)return this;super.runLayout(i,e,d);var t=this.childrenMap.iconMask;t&&(t.setPosition(),this.resetChildPositionState(t));var s=this.childrenMap.actionMask;return s&&(s.setPosition(),this.resetChildPositionState(s)),this}resize(i,e){super.resize(i,e);var d=this.childrenMap.iconMask;d&&d.resize();var t=this.childrenMap.actionMask;return t&&t.resize(),this}}const Js=rt.prototype.add,Wh=rt.prototype.addSpace;var Mr=function(v){var i=!v.isRexSpace,e=!i||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(i){var d=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");d&&Wh.call(this),Js.call(this,v,{proportion:e,expand:!0});var t=!this.buttonsExpand&&this.buttonsAlign==="center";t&&Wh.call(this),this.hasTailSpace=t}else Js.call(this,v,{proportion:e,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var s=this.sizerChildren.length-1;Js.call(this,v,{index:s,proportion:e,expand:!0})}else Js.call(this,v,{proportion:e,expand:!0});return i&&this.buttonGroup.add(v),this},iE={addButton(v){if(_e(v))for(var i=v,e=0,d=i.length;e<d;e++)Mr.call(this,i[e]);else Mr.call(this,v);return this},addButtons(v){for(var i=0,e=v.length;i<e;i++)Mr.call(this,v[i]);return this}};const sE=rt.prototype.remove,nE=rt.prototype.clear;var Ar=function(v,i){return this.getParentSizer(v)!==this?this:(this.buttonGroup.remove(v),sE.call(this,v,i),this)},rE={remove(v,i){if(_e(v))for(var e=v,d=0,t=e.length;d<t;d++)Ar.call(this,e[d],i);else Ar.call(this,v,i);return this},clear(v){var i=this.buttonGroup.buttons;return i.length=0,nE.call(this,v),this},removeButton(e,i){var e=this.getButton(e);return e?(this.remove(e,i),this):this},clearButtons(v){for(var i=this.buttonGroup.buttons,e=i.length-1;e>=0;e--)Ar.call(this,i[e],v);return this}},aE={add(v){if(this.buttons.push(v),this.buttonsType){var i=v.name;i===""?console.error(`${this.parent.constructor.name}: Button key is an empty string`):this.buttonMap.hasOwnProperty(i)&&console.error(`${this.parent.constructor.name}: Duplicate button key '${i}'`),this.buttonMap[i]=v,this.dataManager.set(i,void 0).set(i,!1)}return v._buttonBehavior=new wn(v,this.clickConfig),v._buttonBehavior.on("click",function(e,d,t,s){this.fireEvent("button.click",d,t,s)},this).on("enable",function(e,d){this.fireEvent("button.enable",d)},this).on("disable",function(e,d){this.fireEvent("button.disable",d)},this),v.on("pointerover",function(e,d,t,s){this.fireEvent("button.over",v,e,s)},this).on("pointerout",function(e,d){this.fireEvent("button.out",v,e,d)},this),this},addMultiple(v){for(var i=0,e=v.length;i<e;i++)this.add(gameObject[i]);return this}};const oE=Phaser.Utils.Array.Remove;var hE={remove(v){if(oE(this.buttons,v),this.buttonsType){var i=v.name;delete this.buttonMap[i],this.dataManager.remove(i)}return this},clear(){if(this.buttons.length=0,this.buttonsType)for(var v in this.buttonMap)delete this.buttonMap[v],this.dataManager.remove(v);return this}},lE=function(v,i,...e){var d;if(typeof i=="number"){if(d=i,i=this.buttons[d],!i)return}else if(d=this.buttons.indexOf(i),d===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(v,i,d,...e),this.groupName!==void 0?this.eventEmitter.emit(v,i,this.groupName,d,...e):this.eventEmitter.emit(v,i,d,...e)};const Zi=Phaser.Utils.Objects.GetValue;var Hh=function(v){var i=Zi(v,"dataManager",void 0);if(i===void 0){var e=this.parent;e.setDataEnabled(),i=e.data}this.dataManager=i;var d,t;d=Zi(v,"setValueCallback",void 0),t=Zi(v,"setValueCallbackScope",void 0),d===void 0&&(d=Zi(v,"setButtonStateCallback",void 0),t=Zi(v,"setButtonStateCallbackScope",void 0)),this.setValueCallback=d,this.setValueCallbackScope=t,i.events.on("changedata",function(s,u,n,a){var h=this.buttonMap[u];if(!!h){var r=this.setValueCallback,o=this.setValueCallbackScope;r&&(o?r.call(o,h,n,a):r(h,n,a)),this.fireEvent("button.statechange",h,n,a)}},this)},uE={setButtonsType(v){v===void 0&&(v={});var i=Zi(v,"buttonsType",v.type);switch(this.buttonsType=i,i){case"radio":this.setRadioType(v);break;case"checkboxes":this.setCheckboxesType(v);break}return this},setRadioType(v){Hh.call(this,v);var i=void 0,e=this.parent,d=this.buttons,t=this.dataManager;return Object.defineProperty(e,"value",{get:function(){return i},set:function(s){s!==i&&(i=s,d.forEach(function(u){var n=u.name,a=t.get(n);n===s?a||t.set(n,!0):a&&t.set(n,!1)}))},enumerable:!0,configurable:!0}),e.on("button.click",function(s){e.value=s.name}),this},setCheckboxesType(v){Hh.call(this,v);var i=this.parent,e=this.dataManager;return i.on("button.click",function(d){e.toggle(d.name)}),this},clearAllButtonsState(){for(var v in this.buttonMap)this.dataManager.set(v,!1);return this},getAllButtonsState(){var v={};for(var i in this.buttonMap)v[i]=this.dataManager.get(i);return v},setSelectedButtonName(v){return this.parent.value=v,this},getSelectedButtonName(){return this.parent.value},setButtonState(v,i){return i===void 0&&(i=!0),this.dataManager.set(v,i),this},getButtonState(v){return this.dataManager.get(v)}},dE=function(v,i){if(v)if(_e(v)){for(var e,d=0,t=v.length;d<t;d++)if(e=$h(v[d],i),e)return e}else{var e;for(var s in v)if(e=$h(v[s],i),e)return e}else return null},$h=function(v,i){return v?v.hasOwnProperty("name")?v.name===i?v:null:GetElementByName(v,i):null},Gn={getButton(v){var i=this.buttons,e,d=typeof v;switch(d){case"number":e=i[v];break;case"string":e=dE(i,v);break;default:e=v,i.indexOf(e)===-1&&(e=void 0);break}return e},setButtonEnable(v,i){var e=this.buttons;if(v===void 0||typeof v=="boolean"){i=v;for(var d=0,t=e.length;d<t;d++)e[d]._buttonBehavior.setEnable(i)}else this.getButton(v)._buttonBehavior.setEnable(i);return this},toggleButtonEnable(v){var i=this.buttons;if(v===void 0||typeof v=="boolean")for(var e=0,d=i.length;e<d;e++)i[e]._buttonBehavior.toggleEnable();else this.getButton(v)._buttonBehavior.toggleEnable();return this},getButtonEnable(v){return v===void 0&&(v=0),this.getButton(v)._buttonBehavior.enable},emitButtonClick(v){var i=this.buttonGroup?this.buttonGroup:this;return i.fireEvent("button.click",v),this},showButton(v){return Ci(this.getButton(v)),this},hideButton(v){return Ei(this.getButton(v)),this},isButtonShown(v){return td(this.getButton(v)),this},forEachButtton(v,i){for(var e=this.buttons,d=0,t=e.length;d<t;d++)i?v.call(i,e[d],d,e):v(e[d],d,e);return this}};class Nn{constructor(i){this.parent=i.parent,this.eventEmitter=i.eventEmitter,this.groupName=i.groupName,this.clickConfig=i.clickConfig,this.buttonsType=void 0,this.buttons=[],this.buttonMap={}}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var fE={fireEvent:lE};Object.assign(Nn.prototype,aE,hE,uE,Gn,fE);var Ga={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(v){return this.buttonGroup.setSelectedButtonName(v),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(v,i){return this.buttonGroup.setButtonState(v,i),this},getButtonState(v){return this.buttonGroup.getButtonState(v)}};const xi=Phaser.Utils.Objects.GetValue;class ne extends rt{constructor(i,e){e===void 0&&(e={});var d=e.space;typeof d=="number"&&(e.space={item:d}),super(i,e),this.type="rexButtons",this.buttonGroup=new Nn({parent:this,eventEmitter:xi(e,"eventEmitter",this),groupName:xi(e,"groupName",void 0),clickConfig:xi(e,"click",void 0)}).setButtonsType(e);var t=xi(e,"background",void 0),s=xi(e,"buttons",void 0);this.buttonsExpand=xi(e,"expand",!1),this.buttonsAlign=xi(e,"align",void 0),t&&this.addBackground(t),s&&this.addButtons(s),this.addChildrenMap("background",t),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(i){!this.scene||(super.destroy(i),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(i){this.buttonGroup.groupName=i}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(ne.prototype,iE,rE,Gn,Ga);const cE=_i.prototype.add;var vE={addButton(v,i,e){return cE.call(this,v,i,e,void 0,0,this.buttonsExpand),this.buttonGroup.add(v),this},addButtons(v,i){for(var e=0,d=v;e<d;e++)this.addButton(v[e],void 0,i);return this}};const pE=_i.prototype.remove,gE=_i.prototype.clear;var Or=function(e,i){var e=this.getButton(e);return e?(this.buttonGroup.remove(e),pE.call(this,e,i),this):this},mE={remove(v,i){if(_e(v))for(var e=v,d=0,t=e.length;d<t;d++)Or.call(this,e[d],i);else Or.call(this,v,i);return this},clear(v){var i=this.buttonGroup.buttons;return i.length=0,gE.call(this,v),this},removeButton(v,i){return this.remove(v,i),this},clearButtons(v){for(var i=this.buttonGroup.buttons,e=i.length-1;e>=0;e--)Or.call(this,i[e],v);return this}};const Fe=Phaser.Utils.Objects.GetValue;class Ed extends _i{constructor(i,e){e===void 0&&(e={});var d=Fe(e,"row",0),t=Fe(e,"column",e.col||0),s=Fe(e,"createCellContainerCallback"),u=Fe(e,"buttons",void 0),n=Fe(e,"expand",!0),a=n?1:0;if(s&&(e.createCellContainerCallback=void 0),u!==void 0){d=Math.max(d,u.length);for(var h=0,r=u.length;h<r;h++)t=Math.max(t,u[h].length)}e.row=d,e.column=t,e.columnProportions=a,e.rowProportions=a,super(i,e),this.type="rexGridButtons",this.buttonGroup=new Nn({parent:this,eventEmitter:Fe(e,"eventEmitter",this),groupName:Fe(e,"groupName",void 0),clickConfig:Fe(e,"click",void 0)}).setButtonsType(e);var o=Fe(e,"background",void 0);if(this.buttonsExpand=n,Fe(e,"space",void 0),o&&this.addBackground(o),u)for(var c,l,f=0,p=u.length;f<p;f++){c=u[f];for(var g=0,m=c.length;g<m;g++)l=c[g],l&&this.addButton(l,g,f)}else if(s)for(var x=0;x<d;x++)for(var y=0;y<t;y++){var l=s(i,y,x);l&&this.addButton(l,y,x)}this.addChildrenMap("background",o),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(i){!this.scene||(super.destroy(i),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(i){this.buttonGroup.groupName=i}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Ed.prototype,vE,mE,Gn,Ga);const Pd=li.prototype.add;var Qs=function(v){return Pd.call(this,v),this.buttonGroup.add(v),this},xE={addButton(v){if(_e(v))for(var i=v,e=0,d=i.length;e<d;e++)Qs.call(this,i[e]);else Qs.call(this,v);return this},addButtons(v){if(_e(v[0]))for(var i=v,e,d=0,t=i.length-1;d<=t;d++){e=i[d];for(var s=0,u=e.length;s<u;s++)Qs.call(this,e[s]);d>t&&Pd.addNewLine(this)}else for(var s=0,u=v.length;s<u;s++)Qs.call(this,v[s]);return this}};const yE=li.prototype.remove,TE=li.prototype.clear;var Rr=function(e,i){var e=this.getButton(e);return e?(this.buttonGroup.remove(e),yE.call(this,e,i),this):this},SE={remove(v,i){if(_e(v))for(var e=v,d=0,t=e.length;d<t;d++)Rr.call(this,e[d],i);else Rr.call(this,v,i);return this},clear(v){var i=this.buttonGroup.buttons;return i.length=0,TE.call(this,v),this},removeButton(v,i){return this.remove(v,i),this},clearButtons(v){for(var i=this.buttonGroup.buttons,e=i.length-1;e>=0;e--)Rr.call(this,i[e],v);return this}};const Wi=Phaser.Utils.Objects.GetValue;class xs extends li{constructor(i,e){e===void 0&&(e={});var d=e.space;typeof d=="number"&&(e.space={item:d,line:d}),super(i,e),this.type="rexFixWidthButtons",this.buttonGroup=new Nn({parent:this,eventEmitter:Wi(e,"eventEmitter",this),groupName:Wi(e,"groupName",void 0),clickConfig:Wi(e,"click",void 0)}).setButtonsType(e);var t=Wi(e,"background",void 0),s=Wi(e,"buttons",void 0);this.buttonsAlign=Wi(e,"align",void 0),t&&this.addBackground(t),s&&this.addButtons(s),this.addChildrenMap("background",t),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(i){!this.scene||(super.destroy(i),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(i){this.buttonGroup.groupName=i}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(xs.prototype,xE,SE,Gn,Ga);var CE={getChoice(v){var i=this.childrenMap.choicesSizer;if(i)return i.getButton(v)},getAction(v){return this.childrenMap.actionsSizer.getButton(v)},getToolbar(v){return this.childrenMap.toolbarSizer.getButton(v)},getLeftToolbar(v){return this.childrenMap.leftToolbarSizer.getButton(v)},setChoiceEnable(v,i){var e=this.childrenMap.choicesSizer;return e&&e.setButtonEnable(v,i),this},setActionEnable(v,i){return this.childrenMap.actionsSizer.setButtonEnable(v,i),this},setToolbarEnable(v,i){return this.childrenMap.toolbarSizer.setButtonEnable(v,i),this},setLeftToolbarEnable(v,i){return this.childrenMap.leftToolbarSizer.setButtonEnable(v,i),this},toggleChoiceEnable(v){var i=this.childrenMap.choicesSizer;return i&&i.toggleButtonEnable(v),this},toggleActionEnable(v){return this.childrenMap.actionsSizer.toggleButtonEnable(v),this},toggleToolbarEnable(v){return this.childrenMap.toolbarSizer.toggleButtonEnable(v),this},toggleLeftToolbarEnable(v){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(v),this},getChoiceEnable(v){var i=this.childrenMap.choicesSizer;return i?i.getButtonEnable(v):!1},getActionEnable(v){return this.childrenMap.actionsSizer.getButtonEnable(v)},getToolbarEnable(v){return this.childrenMap.toolbarSizer.getButtonEnable(v)},getLeftToolbarEnable(v){return this.childrenMap.leftToolbarSizer.getButtonEnable(v)},emitChoiceClick(v){var i=this.childrenMap.choicesSizer;return i&&i.emitButtonClick(v),this},emitActionClick(v){return this.childrenMap.actionsSizer.emitButtonClick(v),this},emitToolbarClick(v){return this.childrenMap.toolbarSizer.emitButtonClick(v),this},emitLeftToolbarClick(v){return this.childrenMap.leftToolbarSizer.emitButtonClick(v),this},showChoice(v){var i=this.childrenMap.choicesSizer;return i&&i.showButton(v),this},showAction(v){return this.childrenMap.actionsSizer.showButton(v),this},showToolbar(v){return this.childrenMap.toolbarSizer.showButton(v),this},showLeftToolbar(v){return this.childrenMap.leftToolbarSizer.showButton(v),this},hideChoice(v){var i=this.childrenMap.choicesSizer;return i&&i.hideButton(v),this},hideAction(v){return this.childrenMap.actionsSizer.hideButton(v),this},hideToolbar(v){return this.childrenMap.toolbarSizer.hideButton(v),this},hideLeftToolbar(v){return this.childrenMap.leftToolbarSizer.hideButton(v),this},addChoice(v){var i=this.childrenMap.choicesSizer;return i&&i.addButton(v),this},addAction(v){return this.childrenMap.actionsSizer.addButton(v),this},addToolbar(v){return this.childrenMap.toolbarSizer.addButton(v),this},addLeftToolbar(v){return this.childrenMap.leftToolbarSizer.addButton(v),this},removeChoice(v,i){var e=this.childrenMap.choicesSizer;return e&&e.removeButton(v,i),this},removeAction(v,i){return this.childrenMap.actionsSizer.removeButton(v,i),this},removeToolbar(v,i){return this.childrenMap.toolbarSizer.removeButton(v,i),this},removeLeftToolbar(v,i){return this.childrenMap.leftToolbarSizer.removeButton(v,i),this},clearChoices(v){var i=this.childrenMap.choicesSizer;return i&&i.clearButtons(v),this},clearActions(v){return this.childrenMap.actionsSizer.clearButtons(v),this},clearToolbar(v){return this.childrenMap.toolbarSizer.clearButtons(v),this},clearLeftToolbar(v){return this.childrenMap.leftToolbarSizer.clearButtons(v),this},forEachChoice(v,i){var e=this.childrenMap.choicesSizer;return e&&e.forEachButtton(v,i),this},forEachAction(v,i){return this.childrenMap.actionsSizer.forEachButtton(v,i),this},forEachToolbar(v,i){return this.childrenMap.toolbarSizer.forEachButtton(v,i),this},forEachLeftToolbar(v,i){return this.childrenMap.leftToolbarSizer.forEachButtton(v,i),this},setAllButtonsEnable(v){return v===void 0&&(v=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(v),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(v),this.childrenMap.actionsSizer&&this.setActionEnable(v),this.childrenMap.choicesSizer&&this.setChoiceEnable(v),this},getChoicesButtonStates(){var v=this.childrenMap.choicesSizer;return v?v.getAllButtonsState():{}},getChoicesButtonState(v){var i=this.childrenMap.choicesSizer;return v===void 0?i?i.getAllButtonsState():{}:i?i.getButtonState(v):!1},setChoicesButtonState(v,i){var e=this.childrenMap.choicesSizer;return e&&e.setButtonState(v,i),this},clearChoicesButtonStates(){var v=this.childrenMap.choicesSizer;return v&&v.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var v=this.childrenMap.choicesSizer;return v?v.getSelectedButtonName():""},setChoicesSelectedButtonName(v){var i=this.childrenMap.choicesSizer;return i&&i.setSelectedButtonName(v),this}};const it=Phaser.Utils.Objects.GetValue;class EE extends rt{constructor(i,e){e===void 0&&(e={}),e.orientation=1,super(i,e),this.type="rexDialog",this.eventEmitter=it(e,"eventEmitter",this);var d=it(e,"background",void 0),t=it(e,"title",void 0),s=it(e,"toolbar",void 0),u=it(e,"toolbarBackground",void 0),n=it(e,"leftToolbar",void 0),a=it(e,"leftToolbarBackground",void 0),h=it(e,"content",void 0),r=it(e,"description",void 0),o,c=it(e,"choices",void 0),l=it(e,"choicesBackground",void 0),f,p=it(e,"actions",void 0),g=it(e,"actionsBackground",void 0),m=it(e,"click",void 0);d&&this.addBackground(d);var x;s&&(x=new ne(i,{groupName:"toolbar",background:u,buttons:s,orientation:0,space:{item:it(e,"space.toolbarItem",0)},click:m,eventEmitter:this.eventEmitter}));var y;if(n&&(y=new ne(i,{groupName:"leftToolbar",background:a,buttons:n,orientation:0,space:{item:it(e,"space.leftToolbarItem",0)},click:m,eventEmitter:this.eventEmitter})),t||s||n){var T=!!t&&it(e,"expand.title",!0),S=it(e,"align.title","center"),C=t&&!T&&S==="center"||!t&&(s||n),E=!C,P;E?P=new rt(i,{orientation:0}):P=new Li(i);var M=E?!0:{height:!0};if(y&&P.add(y,{align:"left",expand:M}),t){E&&!T&&S==="right"&&P.addSpace();var R={left:it(e,"space.titleLeft",0),right:it(e,"space.titleRight",0)},O=T?1:0;P.add(t,{align:S,proportion:O,expand:M,padding:R}),E&&!T&&S==="left"&&P.addSpace()}x&&(E&&!t&&P.addSpace(),P.add(x,{align:"right",expand:M}));var A=it(e,"space.title",0),R;(h||r||c||p)&&(R={bottom:A}),this.add(P,{padding:R,expand:!0})}if(h){var F=it(e,"align.content","center"),I=it(e,"space.content",0),R={left:it(e,"space.contentLeft",0),right:it(e,"space.contentRight",0),bottom:r||c||p?I:0},B=it(e,"expand.content",!0);this.add(h,{align:F,padding:R,expand:B})}if(r){var F=it(e,"align.description","center"),N=it(e,"space.description",0),R={left:it(e,"space.descriptionLeft",0),right:it(e,"space.descriptionRight",0),bottom:c||p?N:0},B=it(e,"expand.description",!0);this.add(r,{align:F,padding:R,expand:B})}if(c){var Y=it(e,"choicesType","").split("-"),X=cs(Y,"wrap")?xs:cs(Y,"grid")?Ed:ne,W=cs(Y,"radio")?"radio":cs(Y,"checkboxes")?"checkboxes":void 0,w={left:it(e,"space.choicesBackgroundLeft",0),right:it(e,"space.choicesBackgroundRight",0),top:it(e,"space.choicesBackgroundTop",0),bottom:it(e,"space.choicesBackgroundBottom",0)},L=it(e,"space.choice",0);X===ne?w.item=L:X===xs?(w.item=L,w.line=it(e,"space.choiceLine",L)):(w.column=it(e,"space.choiceColumn",L),w.row=it(e,"space.choiceRow",L));var D={width:it(e,"choicesWidth",void 0),height:it(e,"choicesHeight",void 0),groupName:"choices",buttonsType:W,background:l,buttons:c,space:w,click:m,eventEmitter:this.eventEmitter,setValueCallback:it(e,"choicesSetValueCallback",void 0),setValueCallbackScope:it(e,"choicesSetValueCallbackScope",void 0)};X===ne&&(D.orientation=cs(Y,"x")?0:1),o=new X(i,D);var b=it(e,"space.choices",0),R={left:it(e,"space.choicesLeft",0),right:it(e,"space.choicesRight",0),bottom:p?b:0},F=it(e,"align.choices","center"),B=it(e,"expand.choices",!0);this.add(o,{align:F,padding:R,expand:B})}if(p){f=new ne(i,{groupName:"actions",background:g,buttons:p,orientation:0,space:{item:it(e,"space.action",0)},expand:it(e,"expand.actions",!1),align:it(e,"align.actions","center"),click:m,eventEmitter:this.eventEmitter});var R={left:it(e,"space.actionsLeft",0),right:it(e,"space.actionsRight",0)};this.add(f,{align:"center",padding:R,expand:!0})}this.addChildrenMap("background",d),this.addChildrenMap("title",t),this.addChildrenMap("toolbar",s),this.addChildrenMap("leftToolbar",n),this.addChildrenMap("content",h),this.addChildrenMap("description",r),this.addChildrenMap("choices",c),this.addChildrenMap("actions",p),this.addChildrenMap("choicesSizer",o),this.addChildrenMap("actionsSizer",f),this.addChildrenMap("toolbarSizer",x),this.addChildrenMap("leftToolbarSizer",y)}}var cs=function(v,i){return v.indexOf(i)!==-1};Object.assign(EE.prototype,CE);Phaser.Utils.Objects.GetValue;var PE={getButtonsSizer(v){return this.childrenMap[`${v}ButtonsSizer`]},getButton(v,i){var e=this.getButtonsSizer(v);return e?e.getButton(i):void 0},setButtonEnable(v,i,e){return this.getButtonsSizer(v).setButtonEnable(i,e),this},setLeftButtonEnable(v,i){return this.childrenMap.leftButtonsSizer.setButtonEnable(v,i),this},setRightButtonEnable(v,i){return this.childrenMap.rightButtonsSizer.setButtonEnable(v,i),this},setTopButtonEnable(v,i){return this.childrenMap.topButtonsSizer.setButtonEnable(v,i),this},setBottomButtonEnable(v,i){return this.childrenMap.bottomButtonsSizer.setButtonEnable(v,i),this},toggleButtonEnable(v,i){return this.getButtonsSizer(v).toggleButtonEnable(i),this},toggleLeftButtonEnable(v){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(v),this},toggleRightButtonEnable(v){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(v),this},toggleTopButtonEnable(v){return this.childrenMap.topButtonsSizer.toggleButtonEnable(v),this},toggleBottomButtonEnable(v){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(v),this},getButtonEnable(v,i){return this.getButtonsSizer(v).getButtonEnable(i)},getLeftButtonEnable(v){return this.childrenMap.leftButtonsSizer.getButtonEnable(v)},getRightButtonEnable(v){return this.childrenMap.rightButtonsSizer.getButtonEnable(v)},getTopButtonEnable(v){return this.childrenMap.topButtonsSizer.getButtonEnable(v)},getBottomButtonEnable(v){return this.childrenMap.bottomButtonsSizer.getButtonEnable(v)},emitButtonClick(v,i){var e=this.getButtonsSizer(v);return e?(e.emitButtonClick(i),this):this},emitLeftButtonClick(v){return this.childrenMap.leftButtonsSizer.emitButtonClick(v),this},emitRightButtonClick(v){return this.childrenMap.rightButtonsSizer.emitButtonClick(v),this},emitTopButtonClick(v){return this.childrenMap.topButtonsSizer.emitButtonClick(v),this},emitBottomButtonClick(v){return this.childrenMap.bottomButtonsSizer.emitButtonClick(v),this},getLeftButton(v){return this.childrenMap.leftButtonsSizer.getButton(v)},getRightButton(v){return this.childrenMap.rightButtonsSizer.getButton(v)},getTopButton(v){return this.childrenMap.topButtonsSizer.getButton(v)},getBottomButton(v){return this.childrenMap.bottomButtonsSizer.getButton(v)},showButton(v,i){return Ci(this.getButton(v,i)),this},showLeftButton(v){return Ci(this.getLeftButton(v)),this},showRightButton(v){return Ci(this.getRightButton(v)),this},showTopButton(v){return Ci(this.getTopButton(v)),this},showBottomButton(v){return Ci(this.getBottomButton(v)),this},hideButton(v,i){return Ei(this.getButton(v,i)),this},hideLeftButton(v){return Ei(this.getLeftButton(v)),this},hideRightButton(v){return Ei(this.getRightButton(v)),this},hideTopButton(v){return Ei(this.getTopButton(v)),this},hideBottomButton(v){return Ei(this.getBottomButton(v)),this},addButton(v,i){return this.getButtonsSizer(v).addButton(i),this},addLeftButton(v){return this.addButton("left",v),this},addRightButton(v){return this.addButton("right",v),this},addTopButton(v){return this.addButton("top",v),this},removeButton(v,i,e){return this.getButtonsSizer(v).removeButton(i,e),this},removeLeftButton(v,i){return this.removeButton("left",v,i),this},removeRightButton(v,i){return this.removeButton("right",v,i),this},removeTopButton(v,i){return this.removeButton("top",v,i),this},removeBottomButton(v,i){return this.removeButton("bottom",v,i),this},clearButtons(v,i){return this.getButtonsSizer(v).clearButtons(i),this},clearLeftButtons(v){return this.clearButtons("left",v),this},clearRightButtons(v){return this.clearButtons("right",v),this},clearTopButtons(v){return this.clearButtons("top",v),this},clearBottomButtonss(v){return this.clearButtons("bottom",v),this},forEachButton(v,i,e){return this.getButtonsSizer(v).forEachButtton(i,e),this},forEachLeftButton(v,i){return this.childrenMap.leftButtonsSizer.forEachButtton(v,i),this},forEachRightButton(v,i){return this.childrenMap.rightButtonsSizer.forEachButtton(v,i),this},forEachTopButton(v,i){return this.childrenMap.topButtonsSizer.forEachButtton(v,i),this},forEachBottomButton(v,i){return this.childrenMap.bottomButtonsSizer.forEachButtton(v,i),this}};const St=Phaser.Utils.Objects.GetValue;class ME extends _i{constructor(i,e){e===void 0&&(e={}),e.column=3,e.row=3,super(i,e),this.type="rexTabs",this.eventEmitter=St(e,"eventEmitter",this);var d=St(e,"background",void 0),t=St(e,"panel",void 0),s=St(e,"leftButtons",void 0),u=St(e,"leftButtonsBackground",void 0),n,a=St(e,"rightButtons",void 0),h=St(e,"rightButtonsBackground",void 0),r,o=St(e,"topButtons",void 0),c=St(e,"topButtonsBackground",void 0),l,f=St(e,"bottomButtons",void 0),p=St(e,"bottomButtonsBackground",void 0),g,m=St(e,"click",void 0);if(d&&this.addBackground(d),t&&this.add(t,1,1,"center",0,!0),s){var x=St(e,"space.leftButtonsOffset",0),y=St(e,"space.leftButton",0);n=new ne(i,{groupName:"left",background:u,buttons:s,orientation:1,space:{item:y},align:St(e,"align.leftButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:x};this.add(n,0,1,"top",T,!1)}if(a){var S=St(e,"space.rightButtonsOffset",0),C=St(e,"space.rightButton",0);r=new ne(i,{groupName:"right",background:h,buttons:a,orientation:1,space:{item:C},align:St(e,"align.rightButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:S};this.add(r,2,1,"top",T,!1)}if(o){var E=St(e,"space.topButtonsOffset",0),P=St(e,"space.topButton",0);l=new ne(i,{groupName:"top",background:c,buttons:o,orientation:0,space:{item:P},align:St(e,"align.topButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:E};this.add(l,1,0,"left",T,!1)}if(f){var M=St(e,"space.bottomButtonsOffset",0),O=St(e,"space.bottomButton",0);g=new ne(i,{groupName:"bottom",background:p,buttons:f,orientation:0,space:{item:O},align:St(e,"align.bottomButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:M};this.add(g,1,2,"left",T,!1)}this.addChildrenMap("background",d),this.addChildrenMap("panel",t),this.addChildrenMap("leftButtons",s),this.addChildrenMap("rightButtons",a),this.addChildrenMap("topButtons",o),this.addChildrenMap("bottomButtons",f),this.addChildrenMap("leftButtonsSizer",n),this.addChildrenMap("rightButtonsSizer",r),this.addChildrenMap("topButtonsSizer",l),this.addChildrenMap("bottomButtonsSizer",g)}}Object.assign(ME.prototype,PE);const Kh=Phaser.Math.Percent;var Md=function(v,i,e){var d;return v.y===i.y?d=Kh(e.x,v.x,i.x):v.x===i.x&&(d=Kh(e.y,v.y,i.y)),d},AE=function(v,i,e){if(!!this.enable){Lr.x=i,Lr.y=e;var d,t;this.reverseAxis?(d=this.getEndPoint(),t=this.getStartPoint()):(d=this.getStartPoint(),t=this.getEndPoint()),this.value=Md(d,t,Lr)}},Lr={},Zh=function(v,i,e){if(!!this.enable&&!!v.isDown){Fr.x=v.worldX,Fr.y=v.worldY;var d,t;this.reverseAxis?(d=this.getEndPoint(),t=this.getStartPoint()):(d=this.getStartPoint(),t=this.getEndPoint());var s=Md(d,t,Fr);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-s)<.1?this.value=s:this.easeValueTo(s)}},Fr={},Ad=function(v,i){i===void 0&&(i=OE);var e=this.childrenMap.thumb,d=e.x,t=e.y;return In(e,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,v),i.x=e.x,i.y=e.y,e.x=d,e.y=t,i},OE={};const RE=Phaser.Display.Align.LEFT_CENTER,LE=Phaser.Display.Align.TOP_CENTER;var FE=function(v){if(v===void 0&&(v=IE),this.childrenMap.thumb){var i=this.orientation===0?RE:LE;Ad.call(this,i,v)}else this.orientation===0?(v.x=this.innerLeft+1,v.y=this.centerY):(v.x=this.centerX,v.y=this.innerTop+1);return v},IE={};const wE=Phaser.Display.Align.RIGHT_CENTER,DE=Phaser.Display.Align.BOTTOM_CENTER;var BE=function(v){if(v===void 0&&(v=bE),this.childrenMap.thumb){var i=this.orientation===0?wE:DE;Ad.call(this,i,v)}else this.orientation===0?(v.x=this.innerRight-1,v.y=this.centerY):(v.x=this.centerX,v.y=this.innerBottom-1);return v},bE={};const kh=Phaser.Math.Linear;var GE=function(v,i,e,d){return d===void 0&&(d=NE),d.x=kh(i.x,e.x,v),d.y=kh(i.y,e.y,v),d},NE={},zE=function(v){var i=this.childrenMap.thumb;if(i===void 0)return this;v===void 0&&(v=this.value);var e,d;return this.reverseAxis?(e=this.getEndPoint(),d=this.getStartPoint()):(e=this.getStartPoint(),d=this.getEndPoint()),GE(v,e,d,i),this.resetChildPositionState(i),this};const VE=Phaser.Display.Align.LEFT_CENTER,YE=Phaser.Display.Align.TOP_CENTER,UE=Phaser.Display.Align.RIGHT_CENTER,XE=Phaser.Display.Align.BOTTOM_CENTER;var WE=function(v){var i=this.childrenMap.indicator;if(i===void 0)return this;v===void 0&&(v=this.value);var e=this.reverseAxis,d,t,s=this.childrenMap.thumb;if(s)if(this.orientation===0){var u=gt(s);if(e){var n=s.x-u*s.originX;d=this.right-n}else{var n=s.x-u*s.originX,a=n+u;d=a-this.left}}else{var h=vt(s);if(e){var r=s.y-h*s.originY;t=this.bottom-r}else{var r=s.y-h*s.originY,o=r+h;t=o-this.top}}else this.orientation===0?d=this.width*v:t=this.height*v;oi(i,d,t);var c;e?c=this.orientation===0?UE:XE:c=this.orientation===0?VE:YE,qu(i,this,c),this.resetChildPositionState(i)};const Ht=Phaser.Utils.Objects.GetValue,HE=Phaser.Math.Clamp,$E=Phaser.Math.Linear,Jh=Phaser.Math.Percent,KE=Phaser.Math.Snap.To;class Od extends rt{constructor(i,e){super(i,e),this.type="rexSlider",this.eventEmitter=Ht(e,"eventEmitter",this),this.reverseAxis=Ht(e,"reverseAxis",!1);var d=Ht(e,"background",void 0),t=Ht(e,"track",void 0),s=Ht(e,"indicator",void 0),u=Ht(e,"thumb",void 0);d&&this.addBackground(d),t&&this.add(t,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0}),s&&this.pin(s),u&&this.pin(u);var n=Ht(e,"input",0);switch(typeof n=="string"&&(n=ZE[n]),n){case 0:u&&(u.setInteractive(),this.scene.input.setDraggable(u),u.on("drag",AE,this).on("dragstart",function(r){this.eventEmitter.emit("inputstart",r)},this).on("dragend",function(r){this.eventEmitter.emit("inputend",r)},this));break;case 1:this.setInteractive().on("pointerdown",Zh,this).on("pointermove",Zh,this).on("pointerdown",function(r){this.eventEmitter.emit("inputstart",r)},this).on("pointerup",function(r){this.eventEmitter.emit("inputend",r)},this).on("pointerover",function(r){r.isDown&&this.eventEmitter.emit("inputstart",r)},this).on("pointerout",function(r){r.isDown&&this.eventEmitter.emit("inputend",r)},this);break}this.addChildrenMap("background",d),this.addChildrenMap("track",t),this.addChildrenMap("indicator",s),this.addChildrenMap("thumb",u);var a=Ht(e,"valuechangeCallback",null);if(a!==null){var h=Ht(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",a,h)}this.setEnable(Ht(e,"enable",void 0)),this.setGap(Ht(e,"gap",void 0)),this.setValue(Ht(e,"value",0),Ht(e,"min",void 0),Ht(e,"max",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Ht(e,"easeValue.duration",0)).setEaseValueFunction(Ht(e,"easeValue.ease","Linear"))}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setGap(i){return this.gap=i,this}get value(){return this._value}set value(i){this.gap!==void 0&&(i=KE(i,this.gap));var e=this._value;this._value=HE(i,0,1),e!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter))}setValue(i,e,d){return i==null?this:(e!==void 0&&(i=Jh(i,e,d)),this.value=i,this)}addValue(i,e,d){return e!==void 0&&(i=Jh(i,e,d)),this.value+=i,this}getValue(i,e){var d=this.value;return i!==void 0&&(d=$E(i,e,d)),d}runLayout(i,e,d){return this.ignoreLayout?this:(super.runLayout(i,e,d),this.updateThumb(),this.updateIndicator(),this)}}const ZE={pan:0,drag:0,click:1,none:-1};var kE={getStartPoint:FE,getEndPoint:BE,updateThumb:zE,updateIndicator:WE};Object.assign(Od.prototype,kE,Os);var Rd={v:0,vertical:0,h:1,horizontal:1};const JE=Phaser.Utils.Objects.GetValue;var zn=function(v,i){var e=JE(v,"scrollMode",0);return typeof e=="string"&&(e=Rd[e]),e};const ie=Phaser.Utils.Objects.GetValue;class QE extends rt{constructor(i,e){super(i,e),this.type="rexScrollBar";var d=ie(e,"background",void 0),t=ie(e,"buttons",void 0),s=ie(t,"top",ie(t,"left",void 0)),u=ie(t,"bottom",ie(t,"right",void 0)),n,a=ie(e,"slider",void 0);if(d&&this.addBackground(d),s){this.add(s);var h=new qr(s);h.on("intouch",function(){if(!!this.enable){var g=n.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=g}},this)}if(a){a.orientation=this.orientation,a.eventEmitter=this,a.value=null;var r;if(this.orientation===0){var o=ie(a,"width",void 0);r=o===void 0?1:0}else{var c=ie(a,"height",void 0);r=c===void 0?1:0}n=new Od(i,a),i.add.existing(n),this.add(n,{proportion:r})}if(u){this.add(u);var h=new qr(u);h.on("intouch",function(){if(!!this.enable){var m=n.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=m}},this)}var l=[s,u];this.addChildrenMap("background",d),this.addChildrenMap("slider",n),this.addChildrenMap("buttons",l);var f=ie(e,"valuechangeCallback",null);if(f!==null){var p=ie(e,"valuechangeCallbackScope",void 0);this.on("valuechange",f,p)}this.setEnable(ie(e,"enable",void 0)),this.setValue(ie(e,"value",0)),this.setScrollStep(ie(t,"step",.01))}setScrollStep(i){return this.scrollStep=i,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(i){this.childrenMap.slider&&this.childrenMap.slider.setEnable(i)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(i){!this.childrenMap.slider||(this.childrenMap.slider.value=i)}setValue(i,e,d){return this.childrenMap.slider&&this.childrenMap.slider.setValue(i,e,d),this}addValue(i,e,d){return this.childrenMap.slider&&this.childrenMap.slider.addValue(i,e,d),this}getValue(i,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(i,e):0}easeValueTo(i,e,d){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(i,e,d),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(i),this}setEaseValueFunction(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(i),this}}class jE extends QE{constructor(i,e){e===void 0&&(e={});var d=Ai(e);e={slider:d},e.orientation=d.orientation,delete d.orientation,e.background=d.background,delete d.background,e.buttons=d.buttons,delete d.buttons,super(i,e);var t=this.childrenMap.slider;this.addChildrenMap("track",t.childrenMap.track),this.addChildrenMap("indicator",t.childrenMap.indicator),this.addChildrenMap("thumb",t.childrenMap.thumb)}}class qE extends Oi{constructor(i,e){super(e),this.parent=i,this.init()}init(){this.start("IDLE")}next_IDLE(){var i,e=this.parent,d=e.dragState;return d.isDown&&(i=e.dragThreshold===0?"DRAG":"DRAGBEGIN"),i}update_IDLE(i,e){this.next()}next_DRAGBEGIN(){var i,e=this.parent,d=e.dragState;return d.isDown?i=d.pointer.getDistance()>=e.dragThreshold?"DRAG":"DRAGBEGIN":i="IDLE",i}update_DRAGBEGIN(i,e){this.next()}next_DRAG(){var i,e=this.parent,d=e.dragState;return d.isUp&&(e.outOfBounds?i="BACK":e.slidingEnable?i="SLIDE":i="IDLE"),i}update_DRAG(i,e){var d=this.parent,t=d.dragState;t.justMoved&&d.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var i,e=this.parent,d=e.dragState;return d.isDown?i="DRAG":e.isSliding||(i="IDLE"),i}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(i,e){this.parent.sliding(i,e),this.next()}next_BACK(){var i,e=this.parent,d=e.dragState;return d.isDown?i="DRAG":e.isPullBack||(i="IDLE"),i}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(i,e){this.parent.pullBack(i,e),this.next()}}const js=Phaser.Utils.Objects.GetValue,_E=Phaser.Math.Distance.Between;class tP extends me{constructor(i,e){super(i,e),this._enable=void 0,i.setInteractive(js(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(js(i,"enable",!0)),this.holdThreshold=js(i,"holdThreshold",50),this.pointerOutReleaseEnable=js(i,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(i){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){this._enable!==i&&(i||(this.isInTouched=!1,this.pointer=void 0),this._enable=i)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(i){return i===void 0&&(i=!0),this.pointerOutReleaseEnable=i,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var i=this.scene.sys.game,e=i.loop.delta;return e}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var i=_E(this.preX,this.preY,this.x,this.y),e=i/(this.dt*.001);return e}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(i,e,d){!this.enable||!i.isDown||this.pointer!==void 0||(this.pointer=i,this.localX=e,this.localY=d)}onPointOut(i){!this.enable||this.pointer!==i||(this.pointer=void 0)}onPointerMove(i,e,d){!this.enable||!i.isDown||this.pointer!==i||(this.localX=e,this.localY=d)}preupdate(i,e){if(!!this.enable){var d=this.pointer;this.justMoved=!1,d&&!this.isInTouched?(this.x=d.worldX,this.y=d.worldY,this.preX=d.worldX,this.preY=d.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",d,this.localX,this.localY)):d&&this.isInTouched?this.x===d.x&&this.y===d.y?this.holdStartTime===void 0?this.holdStartTime=i:i-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=d.worldX,this.y=d.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",d,this.localX,this.localY)):!d&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",d))}}}const Ir=Phaser.Utils.Objects.GetValue;class eP{constructor(i){this.resetFromJSON(i)}resetFromJSON(i){return this.setValue(Ir(i,"value",0)),this.setSpeed(Ir(i,"speed",0)),this.setAcceleration(Ir(i,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(i){return this.value=i,this}setSpeed(i){return this.speed=i,this}setAcceleration(i){return this.acceleration=i,this}updateSpeed(i){return this.acceleration!==0&&(this.speed+=this.acceleration*i,this.speed<0&&(this.speed=0)),this}getDeltaValue(i){return this.updateSpeed(i),this.speed<=0?0:this.speed*i}update(i){return this.updateSpeed(i),this.speed>0&&(this.value+=this.getDeltaValue(i)),this}get isMoving(){return this.speed>0}}class iP{constructor(){this.value,this.dir,this.movement=new eP}init(i,e,d,t,s){return this.value=i,this.end=s,s!==void 0?this.dir=i<s:this.dir=e,this.movement.setSpeed(d).setAcceleration(-t),this}stop(){this.movement.reset()}update(i){var e=this.movement.getDeltaValue(i);return this.dir||(e=-e),this.end===void 0?this.value+=e:e===0?this.value=this.end:(this.value+=e,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const Gt=Phaser.Utils.Objects.GetValue,sP=Phaser.Math.Clamp;class nP extends me{constructor(i,e){super(i,e);var d=Gt(e,"enable",!0);this._state=new qE(this,{enable:d,eventEmitter:!1});var t={inputConfig:Gt(e,"inputConfig",void 0),enable:d,pointerOutRelease:Gt(e,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new tP(i,t),this._enable=void 0,this._value=void 0,this._slowDown=new iP;var s=Gt(e,"valuechangeCallback",null);if(s!==null){var u=Gt(e,"valuechangeCallbackScope",void 0);this.on("valuechange",s,u)}if(s=Gt(e,"overmaxCallback",null),s!==null){var u=Gt(e,"overmaxCallbackScope",void 0);this.on("overmax",s,u)}if(s=Gt(e,"overminCallback",null),s!==null){var u=Gt(e,"overminCallbackScope",void 0);this.on("overmin",s,u)}this.resetFromJSON(e),this.boot()}resetFromJSON(i){this.setOrientationMode(Gt(i,"orientation",0)),this.setDragThreshold(Gt(i,"threshold",10)),this.setSlidingDeceleration(Gt(i,"slidingDeceleration",5e3)),this.setBackDeceleration(Gt(i,"backDeceleration",2e3));var e=Gt(i,"bounds",void 0);return e?this.setBounds(e):this.setBounds(Gt(i,"max",0),Gt(i,"min",0)),this.setValue(Gt(i,"value",this.maxValue||0)),this.setEnable(Gt(i,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(i){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(i),this.dragState.destroy(i),this._state=void 0,this.dragState=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return this._enable=i,this._state.setEnable(i),this.dragState.setEnable(i),this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(i){return typeof i=="string"&&(i=rP[i]),this.orientationMode=i,this}setDragThreshold(i){return this.dragThreshold=i,this}setSlidingDeceleration(i){return this.slidingDeceleration=i,this}setBackDeceleration(i){return this.backDeceleration=i,this}setBounds(i,e){if(Array.isArray(i)){var d=i;i=d[0],e=d[1]}return i<e?(this.minValue=i,this.maxValue=e):(this.minValue=e,this.maxValue=i),this}get value(){return this._value}set value(i){if(i!==this._value){var e=this._value,d=this.overMax(i),t=this.overMin(i);d&&this.emit("overmax",i,e),t&&this.emit("overmin",i,e),this.backEnable||(d&&(i=this.maxValue),t&&(i=this.minValue)),this._value=i,this.emit("valuechange",i,e)}}setValue(i,e){return e===void 0&&(e=!1),e&&(i=sP(i,this.minValue,this.maxValue)),this.value=i,this}addValue(i,e){return this.setValue(this.value+i,e),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(i){return this.maxValue!=null&&i>this.maxValue}overMin(i){return this.minValue!=null&&i<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return this.orientationMode===0?this.dragState.dy:this.orientationMode===1?this.dragState.dx:0}get dragSpeed(){return this.orientationMode===0?this.dragState.speedY:this.orientationMode===1?this.dragState.speedX:0}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var i=this.value,e=this.dragSpeed;if(e===0){this._slowDown.stop(),this._state.next();return}var d=this.slidingDeceleration;this._slowDown.init(i,e>0,Math.abs(e),d)}sliding(i,e){e*=.001;var d=this._slowDown.update(e).value;this.overMax(d)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(d)?(this.value=this.minValue,this._slowDown.stop()):this.value=d}onPullBack(){var i=this.value,e=this.outOfMinBound?this.minValue:this.maxValue,d=Math.abs(e-i),t=this.backDeceleration,s=Math.sqrt(2*t*d);this._slowDown.init(i,void 0,s,t,e)}pullBack(i,e){e*=.001,this.value=this._slowDown.update(e).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const rP={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},qs=Phaser.Utils.Objects.GetValue;class aP extends me{constructor(i,e){if(super(i,e),this.parent!==this.scene?this.focusMode=qs(e,"focus",!1):this.focusMode=!1,this.setSpeed(qs(e,"speed",.1)),this.setEnable(qs(e,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var i=this.parent;i.setInteractive(qs(e,"inputConfig",void 0)).on("wheel",function(t,s,u,n,a){!this.enable||this.scroll(u)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(i,e,d,t,s,u){!this.enable||this.scroll(t)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setSpeed(i){return this.speed=i,this}scroll(i){i*=this.speed,this.emit("scroll",i,this.parent,this)}}const It=Phaser.Utils.Objects.GetValue;var oP=function(v,i){var e=v.scene,d=zn(i),t=new rt(e,{orientation:d}),s=It(i,"child.gameObject",void 0),u=0,n=It(i,"slider",void 0),a,h=0,r=It(n,"position",0);typeof r=="string"&&(r=hP[r]);var o=r===0,c=It(i,"scroller",!0),l,f=It(i,"mouseWheelScroller",!1),p;if(s){var g=It(i,"space.child",0);if(v.childMargin={},typeof g!="number"){var m=g;d===0?(u={left:It(m,"left",0),right:It(m,"right",0)},v.childMargin.top=It(m,"top",0),v.childMargin.bottom=It(m,"bottom",0)):(u={top:It(m,"top",0),bottom:It(m,"bottom",0)},v.childMargin.top=It(m,"left",0),v.childMargin.bottom=It(m,"right",0))}else n&&(d===0?u=o?{right:g}:{left:g}:u=o?{bottom:g}:{top:g}),v.childMargin.top=0,v.childMargin.bottom=0;n?(n===!0&&(n={}),n.orientation=t.orientation===0?1:0,a=new jE(e,n),h=It(i,"space.slider",0),v.adaptThumbSizeMode=It(n,"adaptThumbSize",!1),v.minThumbSize=It(n,"minThumbSize",void 0)):(v.adaptThumbSizeMode=!1,v.minThumbSize=void 0),c&&(c===!0&&(c={}),c.orientation=d,l=new nP(s,c)),f&&(p=new aP(s,f)),a&&!o&&t.add(a,{proportion:0,align:"center",padding:h,expand:!0});var x=It(i,"child.proportion",1),y=It(i,"child.expand",!0);t.add(s,{proportion:x,align:"center",padding:u,expand:y}),a&&o&&t.add(a,{proportion:0,align:"center",padding:h,expand:!0})}return a&&a.on("valuechange",function(T){v.t=T,v.emit("scroll",v)}),l&&l.on("valuechange",function(T){v.childOY=T,v.emit("scroll",v)}),p&&p.on("scroll",function(T){v.addChildOY(-T,!0)}),v.addChildrenMap("child",s),v.addChildrenMap("slider",a),v.addChildrenMap("scroller",l),v.addChildrenMap("mouseWheelScroller",p),t},hP={right:0,left:1,bottom:0,top:1};rt.prototype.runLayout;var lP=function(){var v=this.topChildOY,i=this.bottomChildOY,e=this.childrenMap.scroller,d=this.childrenMap.slider;return e&&e.setBounds(i,v),d&&d.setEnable(i!==v),this.updateController(),this.adaptThumbSizeMode&&uP.call(this),this},uP=function(){var v=Math.min(this.childVisibleHeight/this.childHeight,1),i=this.childrenMap.slider,e=i.childrenMap.track,d=i.childrenMap.thumb,t=this.minThumbSize;if(this.scrollMode===0){var s=e.displayHeight*v;t!==void 0&&s<t&&(s=t),oi(d,void 0,s)}else{var u=e.displayWidth*v;t!==void 0&&u<t&&(u=t),oi(d,u,void 0)}dP.call(this)},dP=function(){var v=this.childrenMap.slider,i=v.minWidth,e=v.minHeight;v.minWidth=v.width,v.minHeight=v.height,v.layout(),v.minWidth=i,v.minHeight=e},fP=function(){var v=this.childrenMap.scroller,i=this.childrenMap.slider;v&&v.setValue(this.childOY),i&&i.setValue(this.t)};const Ie=Phaser.Utils.Objects.GetValue,Qh=Phaser.Math.Clamp;class Vn extends rt{constructor(i,e){e===void 0&&(e={});var d=zn(e);e.orientation=d===0?1:0,super(i,e),this.type=Ie(e,"type","rexScrollable");var t=Ie(e,"background",void 0),s=oP(this,e),u=Ie(e,"header",void 0),n=Ie(e,"footer",void 0);if(t&&this.addBackground(t),u){var a=Ie(e,"align.header","center"),h=Ie(e,"space.header",0),r;d===0?r={bottom:h}:r={right:h};var o=Ie(e,"expand.header",!0);this.add(u,{proportion:0,align:a,padding:r,expand:o})}if(s&&this.add(s,{proportion:1,align:"center",padding:0,expand:!0}),n){var a=Ie(e,"align.footer","center"),c=Ie(e,"space.footer",0),r;d===0?r={top:c}:r={left:c};var o=Ie(e,"expand.footer",!0);this.add(n,{proportion:0,align:a,padding:r,expand:o})}this.addChildrenMap("background",t),this.addChildrenMap("header",u),this.addChildrenMap("footer",n),this.runLayoutFlag=!1}runLayout(i,e,d){return this.ignoreLayout?this:(super.runLayout(i,e,d),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(i){var e=this.childMargin;if(e.top!==0||e.bottom!==0){var d=this.childrenMap.child,t=d.topChildOY-d.bottomChildOY,s=t+e.top+e.bottom,u=s*i-e.top;i=u/t}this.childrenMap.child.t=i,this.updateController()}get t(){var i=this.childrenMap.child.t,e=this.childMargin;if(e.top!==0||e.bottom!==0){var d=this.childrenMap.child,t=d.topChildOY-d.bottomChildOY,s=t+e.top+e.bottom,u=t*i+e.top;i=u/s}return i}set childOY(i){this.childrenMap.child.childOY=i,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var i=this.childrenMap.child;return i.topChildOY!==i.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(i,e){return e===void 0&&(e=!1),e&&(i=Qh(i,this.bottomChildOY,this.topChildOY)),this.childOY=i,this}addChildOY(i,e){return this.setChildOY(this.childOY+i,e),this}setT(i,e){return e===void 0&&(e=!1),e&&(i=Qh(i,0,1)),this.t=i,this}addT(i,e){return this.setT(this.t+i,e),this}scrollToTop(){return this.t=0,this}scrollToBottom(){return this.t=1,this}get sliderEnable(){var i=this.childrenMap.slider;return i?i.enable:!1}set sliderEnable(i){var e=this.childrenMap.slider;!e||e.setEnable(i)}setSliderEnable(i){return i===void 0&&(i=!0),this.sliderEnable=i,this}get scrollerEnable(){var i=this.childrenMap.scroller;return i?i.enable:!1}set scrollerEnable(i){var e=this.childrenMap.scroller;!e||e.setEnable(i)}setScrollerEnable(i){return i===void 0&&(i=!0),this.scrollerEnable=i,this}get mouseWheelScrollerEnable(){var i=this.childrenMap.mouseWheelScroller;return i?i.enable:!1}set mouseWheelScrollerEnable(i){var e=this.childrenMap.mouseWheelScrollerEnable;!e||e.setEnable(i)}setMouseWheelScrollerEnable(i){return i===void 0&&(i=!0),this.mouseWheelScrollerEnable=i,this}setDropZoneEnable(i){i===void 0&&(i=!0);var e=this.childrenMap.child;return e.setInteractive(),e.input.dropZone=i,this}}var cP={resizeController:lP,updateController:fP};Object.assign(Vn.prototype,cP);class Ld{constructor(i,e){this.container=null,this._deltaHeight=0,this.setParent(i)}setParent(i){this.parent=i,this.parentContainer=i.getParentContainer()}destroy(i){i===void 0&&(i=!1),i||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(i){return i?(this.container&&this.container.destroy(),this.container=i,this.parentContainer.add(i),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var i=this.container;return this.container=null,this.parentContainer.remove(i),i}else return null}setXY(i,e){return this.container&&this.parentContainer.setChildLocalPosition(this.container,i,e),this}get deltaHeight(){return this._deltaHeight}set deltaHeight(i){i==null&&(i=0);var e=this.parent;this._deltaHeight===0&&i!==0?e.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&i===0&&e.nonZeroDeltaHeightCount--;var d=this._deltaHeight!==i;if(this._deltaHeight=i,d){e.resetTotalRowsHeight();var t=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(t,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(i){this.deltaHeight=i}setDeltaHeight(i){return this.deltaHeight=i,this}setDeltaWidth(i){return this.deltaHeight=i,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(i){this.scrollMode!==1&&this.setDeltaHeight(i-this.parent.defaultCellHeight)}setHeight(i){return this.height=i,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(i){this.scrollMode!==0&&this.setDeltaHeight(i-this.parent.defaultCellHeight)}setWidth(i){return this.width=i,this}get scene(){return this.parentContainer.scene}}Object.assign(Ld.prototype,mn);const _s=Phaser.Utils.Objects.GetValue,vP=Phaser.Utils.Array.SpliceOne;class pP{constructor(i,e){this.parent=i,this.cells=[],this.cellPool=new Es,this.resetFromJSON(e)}resetFromJSON(i){return this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(_s(i,"cellHeight",30)),this.setDefaultCellWidth(_s(i,"cellWidth",30)),this.initCells(_s(i,"cellsCount",0)),this.setColumnCount(_s(i,"columns",1)),this}destroy(i){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(i){return this.defaultCellHeight=i,this}setDefaultCellWidth(i){return this.defaultCellWidth=i,this}initCells(i){var e=this.cells;e.length=i;for(var d=0;d<i;d++)e[d]=null;return this}insertNewCells(i,e){var d=this.cells;if(i===d.length){var t=i+e;d.legth=t;for(var s=i;s<t;s++)d[s]=null}else{var u=[];u.length=e;for(var s=0;s<e;s++)u[s]=null;this.cells.splice(i,0,...u)}return this.resetTotalRowsHeight(),this}removeCells(i,e){for(var d=i+e,t=i;t<d;t++)this.freeCell(t);return d===this.cells.length?this.cells.length=i:(e===1?vP(this.cells,i):this.cells.splice(i,e),this.buildCellIndex(i)),this.resetTotalRowsHeight(),this}setColumnCount(i){return this.colCount=i,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(i){return i>=0&&i<this.cells.length}heightToRowIndex(i,e){if(this.defaultCellHeightMode){var n=i/this.defaultCellHeight;return e?n=Math.ceil(n):n=Math.floor(n),n}for(var d=this.rowCount,t=i,s,u,n=0;;)if(u=this.getRowHeight(n),t-=u,s=n>=0&&n<d,t>0&&s)n+=1;else{if(t===0)return n;if(e){var a=n;n+=1,s=n>=0&&n<d,s||(n=a)}return n}}widthToColIndex(i,e){var d=i/this.defaultCellWidth;return e?d=Math.ceil(d):d=Math.floor(d),d}colRowToCellIndex(i,e){return i>=this.colCount?null:e*this.colCount+i}rowIndexToHeight(i,e){if(this.defaultCellHeightMode)return(e-i+1)*this.defaultCellHeight;for(var d,t=0,s=i;s<=e;s++)d=this.getRowHeight(s),t+=d;return t}colIndexToWidth(i,e){return(e-i+1)*this.defaultCellWidth}getRowHeight(i){var e=this.colCount;if(e<=1)return this.getCellHeight(this.colRowToCellIndex(0,i));for(var d=0,t,s=0;s<e;s++)t=this.getCellHeight(this.colRowToCellIndex(s,i)),d<t&&(d=t);return d}getColWidth(i){return this.defaultCellWidth}getCellHeight(i){if(!this.isValidCellIdx(i))return 0;var e;if(this.defaultCellHeightMode)e=this.defaultCellHeight;else{var d=this.getCell(i,!1),t=d?d.deltaHeight:0;e=this.defaultCellHeight+t}return e}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(i){return i%this.colCount}cellIndxeToRowIndex(i){return Math.floor(i/this.colCount)}getCell(i,e){if(!this.isValidCellIdx(i))return null;if(e===void 0&&(e=!0),this.cells[i]===null&&e){var d=this.newCell(i);this.cells[i]=d}return this.cells[i]}newCell(i){var e=this.cellPool.pop();return e===null?e=new Ld(this):e.setParent(this),e.index=i,e}buildCellIndex(i){i===void 0&&(i=0);for(var e=this.cells,d,t=i,s=e.length;t<s;t++)d=e[t],d&&(d.index=t);return this}getParentContainer(){return this.parent}freeCell(i){return typeof i=="number"&&(i=this.cells[i]),i?(i.destroy(),this.cellPool.push(i),this):this}}var gP=function(v){var i=this.table,e=this.topTableOY,d=this.bottomTableOY,t=v>this.topTableOY,s=v<this.bottomTableOY;if(this.clampTableOXY){var u=i.rowCount,n=i.heightToRowIndex(this.instHeight,!0);u<n?v=0:t?v=e:s&&(v=d)}return this._tableOY!==v&&(this._tableOY=v),t&&(this.execeedTopState||this.emit("execeedtop",this,v,e)),this.execeedTopState=t,s&&(this.execeedBottomState||this.emit("execeedbottom",this,v,d)),this.execeedBottomState=s,this},mP=function(v){var i=this.table,e=this.leftTableOX,d=this.rightTableOX,t=v>this.leftTableOX,s=v<this.rightTableOX;if(this.clampTableOXY){var u=i.colCount,n=i.widthToColIndex(this.instWidth,!0);u<n?v=0:t?v=e:s&&(v=d)}return this._tableOX!==v&&(this._tableOX=v),t&&(this.execeedLeftState||this.emit("execeedleft",this,v,e)),this.execeedLeftState=t,s&&(this.execeedRightState||this.emit("execeedright",this,v,d)),this.execeedRightState=s,this},Fd=function(v){return v.hasOwnProperty("geometryMask")?v.geometryMask:v.bitmapMask};const xP=Phaser.Geom.Intersects.RectangleToRectangle,yP=Phaser.Geom.Rectangle.Overlaps;var TP=function(v,i,e){if(!!i){e===void 0&&(e=v.getAllChildren());for(var d=v.getBounds(),t=Fd(i),s,u,n,a=0,h=e.length;a<h;a++)if(s=e[a],!s.hasOwnProperty("isRexContainerLite")&&s!==t&&!!SP(s))if(s.getBounds)switch(u=s.getBounds(u),n=CP(d,u),n){case 4:EP(v,s);break;case 0:xP(d,u)||yP(d,u)?wr(v,s,i):PP(v,s);break;default:wr(v,s,i);break}else wr(v,s,i)}},SP=function(v){if(!v.displayList)return!1;for(;;){var i=v.rexContainer;if(i)if(i.visible){var e=i.parent;if(e){v=e;continue}else return!0}else return!1;else return v.visible}},CP=function(v,i){var e=0,d=i.top,t=i.bottom,s=i.left,u=i.right;return e+=v.contains(s,d)?1:0,e+=v.contains(s,t)?1:0,e+=v.contains(u,d)?1:0,e+=v.contains(u,t)?1:0,e},EP=function(v,i,e){v.setChildMaskVisible(i,!0),i.clearMask&&i.clearMask()},wr=function(v,i,e){v.setChildMaskVisible(i,!0),i.setMask&&i.setMask(e)},PP=function(v,i,e){v.setChildMaskVisible(i,!1),i.clearMask&&i.clearMask()};const Dr=Phaser.Utils.Objects.GetValue,MP={update:0,everyTick:1};var Id={setupChildrenMask(v){return v===!1?this:(this.setMaskUpdateMode(Dr(v,"updateMode",0)),this.enableChildrenMask(Dr(v,"padding",0)),this.setMaskLayer(Dr(v,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(v){return typeof v=="string"&&(v=MP[v]),this.maskUpdateMode=v,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(v){var i=vn.call(this,null,this,0,v);return this.childrenMask=i.createGeometryMask(),this},setMaskChildrenFlag(v){return v===void 0&&(v=!0),this.maskChildrenFlag=v,this},setMaskLayer(v){return this.maskLayer=v,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.layer?this.layer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):TP(this,this.childrenMask),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var v=Fd(this.childrenMask);return v.setPosition().resize(),this.resetChildPositionState(v),this}},AP=function(){if(this.cellsCount!==0){var v=this.table,i=v.heightToRowIndex(-this.tableOY);i<=0&&(i=0);var e=i,d=v.widthToColIndex(-this.tableOX);d<=0&&(d=0);for(var t=d,s=v.colRowToCellIndex(t,e),u=this.bottomBound,n=this.rightBound,a=v.cellsCount-1,h=v.colCount-1,r=this.getCellTLX(t),o=r,c=this.getCellTLY(e);c<u&&s<=a;){if(this.table.isValidCellIdx(s)){var l=v.getCell(s,!0);this.visibleCells.set(l),this.preVisibleCells.contains(l)||this.showCell(l),this.scrollMode===0?l.setXY(o,c):l.setXY(c,o)}o<n&&t<h?(o+=v.getColWidth(t),t+=1):(o=r,c+=v.getRowHeight(e),t=d,e+=1),s=v.colRowToCellIndex(t,e)}}},wd=function(v){var i=null,e=v.getContainer();if(e?(i=e,v.popContainer()):this.cellContainersPool&&(i=this.cellContainersPool.getFirstDead(),i!==null&&i.setActive(!0).setVisible(!0)),this.emit("cellvisible",v,i,this),this.cellContainersPool){var e=v.getContainer();e?i===null?this.cellContainersPool.add(e):i!==e&&(this.cellContainersPool.add(e),this.cellContainersPool.killAndHide(i)):i!==null&&this.cellContainersPool.killAndHide(i)}},OP=function(v){var i=this.scrollMode===0?this.topLeftX:this.topLeftY,e=this.tableOX+this.table.colIndexToWidth(0,v-1)+i;return e},RP=function(v){var i=this.scrollMode===0?this.topLeftY:this.topLeftX,e=this.tableOY+this.table.rowIndexToHeight(0,v-1)+i;return e},LP=function(){var v=this.preVisibleCells,i=this.visibleCells;v.iterate(function(e){i.contains(e)||this.hideCell(e)},this)},Dd=function(v){if(this.emit("cellinvisible",v),this.cellContainersPool){var i=v.popContainer();i&&this.cellContainersPool.killAndHide(i)}v.destroyContainer()},FP=function(v){return v===void 0&&(v=!1),v&&(jh.call(this),this.hideCells()),jh.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},jh=function(){var v=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=v,this.visibleCells.clear()},IP=function(v){var i=this.table.getCell(v,!1);return i&&this.visibleCells.contains(i)},Bd=function(v,i){i-=this.y+this.topLeftY,v-=this.x+this.topLeftX;var e=this.tableOY-(this.scrollMode===0?i:v),d=this.tableOX-(this.scrollMode===0?v:i),t=this.table,s=t.heightToRowIndex(-e),u=t.widthToColIndex(-d),n=t.colRowToCellIndex(u,s);return n===null||!this.isCellVisible(n)?null:n},wP=function(v,i){var e=Bd.call(this,v,i);if(e!==null)return this.getCellContainer(e)},DP=function(v,i){return this.visibleCells.each(v,i),this},BP=function(v,i){return this.visibleCells.iterate(v,i),this},bP=function(v,i){return this.table.cells.slice().forEach(v,i),this},GP=function(v,i){return this.table.cells.forEach(v,i),this},NP=function(v){var i=this.cellsCount;return i===v?this:(i>v?this.removeCells(v,i-v):this.insertNewCells(i,v-i),this)};const zP=Phaser.Math.Clamp;var VP=function(v,i){return typeof v=="object"&&(v=v.index),i===void 0&&(i=1),i<=0?this:(v=zP(v,0,this.cellsCount),this.table.insertNewCells(v,i),this)},YP=function(v,i){if(typeof v=="object"&&(v=v.index),i===void 0&&(i=1),v<0&&(i+=v,v=0),i<=0)return this;if(v>this.cellsCount)return this;for(var e,d=v,t=v+i;d<t;d++)e=this.getCell(d,!1),e&&(this.visibleCells.contains(e)&&(Dd.call(this,e),this.visibleCells.delete(e)),this.preVisibleCells.delete(e));return this.table.removeCells(v,i),this},UP=function(v){return this.table.colCount===v?this:(this.table.setColumnCount(v),this)},XP=function(v,i){return this.setCellsCount(v*i),this.table.setColumnCount(v),this},WP=function(v){var i=this.table.getCell(v,!1);return!i||!i.container?this:(wd.call(this,i),this)},bd={setTableOY:gP,setTableOX:mP,showCells:AP,showCell:wd,getCellTLX:OP,getCellTLY:RP,hideCells:LP,hideCell:Dd,updateTable:FP,isCellVisible:IP,pointToCellIndex:Bd,pointToCellContainer:wP,eachVisibleCell:DP,iterateVisibleCell:BP,eachCell:bP,iterateCell:GP,setCellsCount:NP,insertNewCells:VP,removeCells:YP,setColumnCount:UP,setGridSize:XP,updateVisibleCell:WP};Object.assign(bd,Id);const HP=Phaser.GameObjects.Group,qh=Phaser.Structs.Set,we=Phaser.Utils.Objects.GetValue;class Gd extends ze{constructor(i,e,d,t,s,u){u===void 0&&(u={}),super(i,e,d,t,s),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new qh,this.preVisibleCells=new qh,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var n=we(u,"reuseCellContainer",!1);n&&(this.cellContainersPool=new HP(i));var a=we(u,"cellVisibleCallback",null);if(a!==null){var h=we(u,"cellVisibleCallbackScope",void 0);this.on("cellvisible",a,h)}if(a=we(u,"cellInvisibleCallback",null),a!==null){var h=we(u,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",a,h)}we(u,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(we(u,"mask",void 0)),this.setScrollMode(we(u,"scrollMode",0)),this.setClampMode(we(u,"clamplTableOXY",!0));var r,o,c,l=this.scrollMode===0;if(l?(r=u.cellWidth,o=u.cellHeight,c=u.columns):(r=u.cellHeight,o=u.cellWidth,c=we(u,"rows",u.columns)),this.expandCellSize=r===void 0,this.expandCellSize){var t=l?this.width:this.height;r=t/c}u.cellWidth=r,u.cellHeight=o,u.columns=c,this.table=new pP(this,u),this.updateTable()}destroy(i){!this.scene||(this.destroyChildrenMask(),this.table.destroy(i),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(i))}setScrollMode(i){return typeof i=="string"&&(i=$P[i.toLowerCase()]),this.scrollMode=i,this}setClampMode(i){return i===void 0&&(i=!0),this.clampTableOXY=i,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(i){this.setTableOY(i).updateTable()}set tableOX(i){this.setTableOX(i).updateTable()}setTableOXY(i,e){return this.setTableOY(e).setTableOX(i),this}addTableOY(i){return this.setTableOY(this.tableOY+i),this}addTableOX(i){return this.setTableOX(this.tableOX+i),this}addTableOXY(i,e){return this.addTableOY(e).addTableOX(i),this}setTableOYByPercentage(i){return this.setTableOY(-this.tableVisibleHeight*i),this}getTableOYPercentage(){var i=this.tableVisibleHeight;return i===0?0:this.tableOY/-i}set t(i){this.setTableOYByPercentage(i).updateTable()}get t(){return this.getTableOYPercentage()}getCell(i){return this.table.getCell(i,!0)}getCellContainer(i){var e=this.table.getCell(i,!1),d;return e&&(d=e.getContainer()),d}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(i,e){var d;return typeof i=="number"?d=this.table.getCell(i,!0):d=i,d.height=e,this}setCellWidth(i,e){var d;return typeof i=="number"?d=this.table.getCell(i,!0):d=i,d.width=e,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var i=this.tableHeight-this.instHeight;return i<0&&(i=0),i}get tableVisibleWidth(){var i,e=this.tableWidth,d=this.instWidth;return e>d?i=e-d:i=0,i}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(i,e){return this.width===i&&this.height===e?this:(super.resize(i,e),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}}Object.assign(Gd.prototype,bd);const $P={v:0,vertical:0,h:1,horizontal:1};var KP=function(v){Object.defineProperty(v,"childOY",{configurable:!0,get:function(){return v.tableOY},set:function(i){v.tableOY=i}}),Object.defineProperty(v,"topChildOY",{get:function(){return v.topTableOY}}),Object.defineProperty(v,"bottomChildOY",{get:function(){return v.bottomTableOY}}),Object.defineProperty(v,"childVisibleHeight",{get:function(){return v.instHeight}}),Object.defineProperty(v,"childHeight",{get:function(){return v.tableHeight}})},ZP=function(v){v.on("cellvisible",function(i,u,d){var t=this.createCellContainerCallback,s=this.createCellContainerCallbackScope;i.item=this.items[i.index];var u;s?u=t.call(s,i,u,d):u=t(i,u,d),u&&(u.setOrigin&&u.setOrigin(0),u.isRexSizer&&u.layout()),i.item=void 0,i.setContainer(u)},this)},Ne=function(v,i,e,d,t,s,u){var n;if(t===void 0?n=d:n=e.pointToCellIndex(d,t),n!=null){var a=e.getCellContainer(n);a&&v.emit(i,a,n,s,u)}},kP=function(v,i){v.on("pointerdown",function(e,d,t,s){Ne(this.eventEmitter,"cell.down",v,e.x,e.y,e,s)},this).on("pointerup",function(e,d,t,s){Ne(this.eventEmitter,"cell.up",v,e.x,e.y,e,s)},this)},JP=function(v,i){v.on("pointermove",_h,this).on("pointerover",_h,this).on("pointerout",QP,this)},_h=function(v,i,e,d){var t=this.childrenMap.child,s=t.pointToCellIndex(v.x,v.y);if(s!==t.input.lastOverCellIndex){var u=t.input.lastOverCellIndex;t.input.lastOverCellIndex=s,Ne(this.eventEmitter,"cell.out",t,u,void 0,v,d),Ne(this.eventEmitter,"cell.over",t,s,void 0,v,d)}},QP=function(v,i){var e=this.childrenMap.child,d=e.input.lastOverCellIndex;e.input.lastOverCellIndex=void 0,Ne(this.eventEmitter,"cell.out",e,d,void 0,v,i)};const jP=Phaser.Utils.Objects.GetValue;var qP=function(v,i){var e=jP(i,"click",void 0);e!==!1&&(e===void 0&&(e={}),e.threshold=10,v._click=new wn(v,e),v._click.on("click",function(d,t,s,u){Ne(this.eventEmitter,"cell.click",t,s.x,s.y,s,u)},this))};const _P=Phaser.Utils.Objects.GetValue;var tM=function(v,i){var e=_P(i,"tap",void 0);e!==!1&&(v._tap=new nd(v,e),v._tap.on("tap",function(d,t,s){var u=`cell.${d.tapsCount}tap`;Ne(this.eventEmitter,u,d.gameObject,d.x,d.y,s)},this))};const eM=Phaser.Utils.Objects.GetValue;var iM=function(v,i){var e=eM(i,"press",void 0);e!==!1&&(v._press=new rd(v,e),v._press.on("pressstart",function(d,t,s){Ne(this.eventEmitter,"cell.pressstart",v,d.x,d.y,s)},this).on("pressend",function(d,t,s){Ne(this.eventEmitter,"cell.pressend",v,d.x,d.y,s)},this))};const sM=Phaser.Utils.Objects.GetValue;var nM=function(v,i){var e=sM(i,"swipe",void 0);e!==!1&&(e===void 0&&(e={}),e.dir="4dir",v._swipe=new wa(v,e),v._swipe.on("swipe",function(d,t,s){var u=d.left?"left":d.right?"right":d.up?"up":"down";Ne(this.eventEmitter,`cell.swipe${u}`,v,d.x,d.y,s)},this))},rM=function(v,i){v.setInteractive(),kP.call(this,v,i),JP.call(this,v,i),qP.call(this,v,i),tM.call(this,v,i),iM.call(this,v,i),nM.call(this,v,i)},aM=function(v){v===void 0?this.items.length=0:this.items=v;var i=this.childrenMap.child;return i.setCellsCount(this.items.length),i.updateTable(!0),this.resizeController(),this};const De=Phaser.Utils.Objects.GetValue;class oM extends Vn{constructor(i,e){e===void 0&&(e={});var d=zn(e),t=De(e,"table",void 0);t===void 0&&(t={}),t.scrollMode=d,t.clamplTableOXY=De(e,"clamplChildOY",!1);var s=De(t,"width",void 0),u=De(t,"height",void 0),n=new Gd(i,0,0,s,u,t);i.add.existing(n);var a,h;d===0?(a=s===void 0?1:0,h=u===void 0):(a=u===void 0?1:0,h=s===void 0),KP(n),n.minWidth=s===void 0?0:void 0,n.minHeight=u===void 0?0:void 0,e.type="rexGridTable",e.child={gameObject:n,proportion:a,expand:h};var r=De(e,"space",void 0);r&&(r.child=r.table),super(i,e),this.addChildrenMap("table",n),this.addChildrenMap("tableLayer",n.maskLayer),this.eventEmitter=De(e,"eventEmitter",this);var o=De(e,"createCellContainerCallback",ri),c=De(e,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(o,c),ZP.call(this,n),this.resizeControllerFlag=!1;var l=d===0?"cellheightchange":"cellwidthchange";n.on(l,function(){this.resizeControllerFlag=!0},this),De(t,"interactive",!0)&&rM.call(this,n,t),this.setItems(De(e,"items",[])),i.game.events.on("poststep",this.onPostStep,this)}destroy(i){!this.scene||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(i))}setCreateCellContainerCallback(i,e){return this.createCellContainerCallback=i,this.createCellContainerCallbackScope=e,this}refresh(){return this.setItems(this.items),this}getCell(i){var e=this.childrenMap.child;return e.getCell(i)}getCellContainer(i){var e=this.childrenMap.child;return e.getCellContainer(i)}updateVisibleCell(i){var e=this.childrenMap.child;return e.updateVisibleCell(i)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}}var hM={setItems:aM};Object.assign(oM.prototype,hM);var Na=function(v,i){return v.sameOrientation?v.orientation=i.orientation:v.orientation=i.orientation===0?1:0,v},lM=function(v,i){v.popUp(Na(v.root.easeIn,v))},uM=function(v,i){v.scaleDown(Na(v.root.easeOut,v))},dM={setTransitInCallback(v){return v===void 0&&(v=lM),this.transitInCallback=v,this},setTransitOutCallback(v){return v===void 0&&(v=uM),this.transitOutCallback=v,this}},Nd=function(v,i,e,d,t){var s=v.scene,u=s.sys.events,n=s.time.delayedCall(i,u.once,["postupdate",function(){e.call(d,t)}],u);return n},fM={delayCall(v,i,e){return this.timer=Nd(this,v,i,e),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}},cM=function(v,i){var d=this.childrenMap.subMenu;if(d&&d.parentButton===v)return this;this.collapseSubMenu();var e;this.root.toggleOrientation?e=this.orientation===0?1:0:e=this.orientation;var d=new this.constructor(this.scene,{items:i,orientation:e,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:v});return this.pin(d),this.childrenMap.subMenu=d,this.root.emit("expand",d,v,this),this},vM=function(){var v=this.root;v.emit("collapse",this,this.parentButton,v);var i=v.easeOut.duration;return v.transitOutCallback(this,i),this.collapseSubMenu(),this.delayCall(i,this.destroy,this),this},pM=function(){var v=this.childrenMap.subMenu;return v===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(v),v.collapse(),this)},zd={expandSubMenu:cM,collapse:vM,collapseSubMenu:pM};Object.assign(zd,dM,fM);var gM=function(v,i,e,d){var t;return e&&(i.scene=v,d?t=e.call(d,i):t=e(i),i.scene=void 0),t},mM=function(v,i,e,d){var t,s=[],u;if(i&&e)for(var n=0,a=i.length;n<a;n++)t=i[n],t.scene=v,d?u=e.call(d,t,n,i):u=e(t,n,i),t.scene=void 0,s.push(u);return s},xM=function(v){v.on(v.root.expandEventName,function(i,e){if(!this._isPassedEvent){var d=this.root.childrenKey,t=this.items[e][d];t&&this.expandSubMenu(i,t)}},v).on("button.click",function(i,e,d,t){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",i,e,d,t),this.root._isPassedEvent=!1)},v).on("button.over",function(i,e,d,t){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",i,e,d,t),this.root._isPassedEvent=!1)},v).on("button.out",function(i,e,d,t){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",i,e,d,t),this.root._isPassedEvent=!1)},v)},tl=function(v,i){return typeof i=="number"&&(i={duration:i}),i.hasOwnProperty("orientation")&&i.orientation!==void 0?i.sameOrientation=ba(i.orientation)===v.orientation:i.sameOrientation=!0,i.destroy=!1,i},yM=function(){var v=this.root,i=v.easeIn.duration;v.transitInCallback(this,i),this!==this.root&&this.delayCall(i,function(){this.root.emit("popup.complete",this)},this)};const Qt=Phaser.Utils.Objects.GetValue;class TM extends ne{constructor(i,e){e===void 0&&(e={}),e.hasOwnProperty("orientation")||(e.orientation=1);var d=e._rootMenu,t=e._parentMenu,s=e._parentButton,u=Qt(e,"popup",!0),n=Qt(e,"items",void 0),a=Qt(e,"createBackgroundCallback",void 0),h=Qt(e,"createBackgroundCallbackScope",void 0);e.background=gM(i,n,a,h);var r=Qt(e,"createButtonCallback",void 0),o=Qt(e,"createButtonCallbackScope",void 0);if(e.buttons=mM(i,n,r,o),super(i,e),this.type="rexMenu",this.items=n,this.root=d===void 0?this:d,this.isRoot=this.root===this,this.parentMenu=t,this.parentButton=s,this.timer=void 0,this.isRoot){this.isPopUpMode=u;var c=e.bounds;c===void 0&&(c=Ln(i)),this.bounds=c,this.subMenuSide=[this.y<c.centerY?ea:on,this.x<c.centerX?ta:an];var l=Qt(e,"subMenuSide",void 0);l!==void 0&&(typeof l=="string"&&(l=SM[l]),this.subMenuSide[this.orientation]=l),this.toggleOrientation=Qt(e,"toggleOrientation",!1),this.expandEventName=Qt(e,"expandEvent","button.click"),this.easeIn=tl(this,Qt(e,"easeIn",0)),this.easeOut=tl(this,Qt(e,"easeOut",0)),this.setTransitInCallback(Qt(e,"transitIn")),this.setTransitOutCallback(Qt(e,"transitOut")),this.createBackgroundCallback=a,this.createBackgroundCallbackScope=h,this.createButtonCallback=r,this.createButtonCallbackScope=o,this.childrenKey=Qt(e,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=Qt(e,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&i.input.on("pointerdown",this.onPointerDownOutside,this)}var f=0,p=0;if(!this.root.easeIn.sameOrientation){var g=Na(this.root.easeIn,this).orientation,m=t?t.orientation:this.orientation,l=this.root.subMenuSide[m];g===0&&l===an&&(f=1),g===1&&l===on&&(p=1)}if(u&&this.setOrigin(f,p).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var l=this.root.subMenuSide[t.orientation];switch(l){case an:this.alignTop(s.top).alignRight(s.left);break;case ta:this.alignTop(s.top).alignLeft(s.right);break;case on:this.alignLeft(s.left).alignBottom(s.top);break;case ea:this.alignLeft(s.left).alignTop(s.bottom);break}}xM(this),u&&(this.pushIntoBounds(this.root.bounds),yM.call(this))}destroy(i){!this.scene||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(i),this.removeDelayCall())}isInTouching(i){return super.isInTouching(i)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(i):!1}onPointerDownOutside(i){this.isInTouching(i)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const an=2,ta=0,on=3,ea=1,SM={up:on,down:ea,left:an,right:ta};Object.assign(TM.prototype,zd);var CM=function(v,i){v.popUp(this.listEaseInDuration,"y","Cubic")},EM=function(v,i){v.scaleDown(this.listEaseOutDuration,"y","Linear")},PM={setWrapEnable(v){return v===void 0&&(v=!0),this.listWrapEnable=v,this},setCreateButtonCallback(v){return this.listCreateButtonCallback=v,this},setCreateBackgroundCallback(v){return this.listCreateBackgroundCallback=v,this},setButtonClickCallback(v){return this.listOnButtonClick=v,this},setButtonOverCallback(v){return this.listOnButtonOver=v,this},setButtonOutCallback(v){return this.listOnButtonOut=v,this},setListEaseInDuration(v){return v===void 0&&(v=0),this.listEaseInDuration=v,this},setListEaseOutDuration(v){return v===void 0&&(v=0),this.listEaseOutDuration=v,this},setListTransitInCallback(v){return v===void 0&&(v=CM),this.listTransitInCallback=v,this},settListTTransitOutCallback(v){return v===void 0&&(v=EM),this.listTransitOutCallback=v,this},setListBounds(v){return this.listBounds=v,this},setListWidth(v){return this.listWidth=v,this},setListHeight(v){return this.listHeight=v,this},setListSize(v,i){return this.setListWidth(v).setListHeight(i),this},setListAlignmentMode(v){return this.listAlignMode=v,this},setListSpace(v){return v===void 0&&(v={}),this.listSpace=v,this},setListDraggable(v){return v===void 0&&(v=!0),this.listDraggable=v,this}},MM=function(v){var i,e=this.listCreateBackgroundCallback;e&&(i=e.call(this,v),v.add.existing(i));var d=[],t=this.listCreateButtonCallback;if(t)for(var s=this.options,u=0,n=s.length;u<n;u++){var a=t.call(this,v,s[u],u,s);v.add.existing(a),d.push(a)}var h=this.listWidth;h===void 0&&(this.listAlignMode==="text"?h=this.getElement("text").width:h=this.width);var r=this.listHeight,o;return this.listWrapEnable?o=new xs(v,{width:h,height:r,background:i,buttons:d,space:this.listSpace,draggable:this.listDraggable}):o=new ne(v,{width:h,height:r,orientation:"y",background:i,buttons:d,space:this.listSpace,draggable:this.listDraggable}),v.add.existing(o),o},AM=function(){if(this.listPanel)return this;var v=this.scene,i=MM.call(this,v).setOrigin(0,0).layout(),e=this.getElement(this.listAlignMode).getTopLeft().x;i.setPosition(e,this.bottom);var d=this.listBounds;d||(d=Ln(v)),i.bottom>d.bottom&&i.changeOrigin(0,1).setPosition(e,this.top),i.on("button.over",function(s,u,n,a){this.listOnButtonOver&&this.listOnButtonOver.call(this,s,u,n,a),this.emit("button.over",this,i,s,u,n,a)},this).on("button.out",function(s,u,n,a){this.listOnButtonOut&&this.listOnButtonOut.call(this,s,u,n,a),this.emit("button.out",this,i,s,u,n,a)},this);var t=this.listEaseInDuration;return this.listTransitInCallback(i,t),this.delayCall(t,function(){var s=this.listOnButtonClick;s&&i.on("button.click",function(u,n,a,h){s.call(this,u,n,a,h),this.emit("button.click",this,i,u,n,a,h)},this),v.input.once("pointerup",this.closeListPanel,this),this.emit("list.open",this,i)},this),this.pin(i),this.listPanel=i,this},OM=function(){if(!this.listPanel)return this;var v=this.listPanel;this.listPanel=void 0;var i=this.listEaseOutDuration;return this.listTransitOutCallback(v,i),this.delayCall(i,function(){this.emit("list.close",this,v),v.destroy()},this),this},RM=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},LM={delayCall(v,i,e){return this.timer=Nd(this,v,i,e),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}},Vd={openListPanel:AM,closeListPanel:OM,toggleListPanel:RM};Object.assign(Vd,PM,LM);const Ot=Phaser.Utils.Objects.GetValue;class FM extends Ki{constructor(i,e){super(i,e),this.type="rexDropDownList",this.timer=void 0,this.setOptions(Ot(e,"options"));var d=Ot(e,"list");this.setWrapEnable(Ot(d,"wrap",!1)),this.setCreateButtonCallback(Ot(d,"createButtonCallback")),this.setCreateBackgroundCallback(Ot(d,"createBackgroundCallback")),this.setButtonClickCallback(Ot(d,"onButtonClick")),this.setButtonOverCallback(Ot(d,"onButtonOver")),this.setButtonOutCallback(Ot(d,"onButtonOut")),this.setListEaseInDuration(Ot(d,"easeIn",500)),this.setListEaseOutDuration(Ot(d,"easeOut",100)),this.setListTransitInCallback(Ot(d,"transitIn")),this.settListTTransitOutCallback(Ot(d,"transitOut")),this.setListSize(Ot(d,"width"),Ot(d,"height")),this.setListAlignmentMode(Ot(d,"alignParent","text")),this.setListBounds(Ot(d,"bounds")),this.setListSpace(Ot(d,"space")),this.setListDraggable(Ot(d,"draggable",!1)),this.setValueChangeCallback(Ot(e,"setValueCallback"),Ot(e,"setValueCallbackScope")),this.setValue(Ot(e,"value")),this.onClick(this.toggleListPanel,this)}destroy(i){!this.scene||(this.listPanel&&(this.listPanel.destroy(i),this.listPanel=void 0),super.destroy(i),this.removeDelayCall())}setOptions(i){return i===void 0&&(i=[]),this.options=i,this}setValueChangeCallback(i,e){return this.valueChangeCallback=i,this.valueChangeCallbackScope=e,this}setValue(i){return this.value=i,this}get value(){return this._value}set value(i){if(this._value!==i){var e=this._value;this._value=i;var d=this.valueChangeCallback,t=this.valueChangeCallbackScope;d&&(t?d.call(t,this,i,e):d(this,i,e))}}}Object.assign(FM.prototype,Vd);const IM=Phaser.GameObjects.BitmapText;var wM=function(v){return v instanceof IM};const ge=0,Me=1,Ae=2;var Yn=function(v){var i;return wM(v)?i=Ae:El(v)?i=ge:i=Me,i},za=function(v,i,e){var d=Yn(v);switch(d){case ge:e=v.getWrappedText(i);break;case Me:e=v.getPenManager(i,e);break;case Ae:v.maxWidth>0?e=v.setText(i).getTextBounds().wrappedText.split(`
`):e=i.split(`
`);break}return e},DM=function(v,i){v===void 0&&(v=this.startLineIndex),i===void 0&&(i=v+this.pageLinesCount);var e;switch(this.textObjectType){case ge:case Ae:e=this.lines.slice(v,i).join(`
`);break;case Me:var d=this.lines.getLineStartIndex(v),t=this.lines.getLineEndIndex(i-1);e=this.lines.getSliceTagText(d,t,!0);break}return e},Br=function(v){return Array.isArray(v)?v=v.join(`
`):typeof v=="number"&&(v=v.toString()),v},BM={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(e){var i=this.totalLinesCount;this.sections.push(Br(e));var e=this.sections.join(`
`);this.lines=za(this.parent,e,this.lines);for(var d=this.totalLinesCount-i,t=Math.ceil(d/this.pageLinesCount),s=0;s<t;s++)this.pageStartIndexes.push(i+s*this.pageLinesCount);return this},setText(v,i){i===void 0&&(i=!0),i&&this.resetPageIdx(),this.clearText();for(var e=Br(v).split(this.pageBreak),d=0,t=e.length;d<t;d++)this.appendPage(e[d]);return this},appendText(v){var i=this.content+Br(v);return this.setText(i,!1),this}};const bM=Phaser.Math.Clamp;var GM={getPage(v){return v===void 0&&(v=this.pageIndex),this.setPageIndex(v).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(v){return v=bM(v,0,this.pageCount-1),this.pageIndex=v,this.startLineIndex=this.pageStartIndexes[v],this.endLineIndex=this.pageStartIndexes[v+1],this}},Yd=function(v,i){var e=Yn(v);switch(e){case ge:var s=v.style,d=s.wordWrapWidth,t=s.wordWrapCallback;s.wordWrapWidth=0,s.wordWrapCallback=void 0,v.setText(i),s.wordWrapWidth=d,s.wordWrapCallback=t;break;case Me:var s=v.style,u=s.wrapMode;s.wrapMode=0,v.setText(i),s.wrapMode=u;break;case Ae:var n=v._maxWidth;v._maxWidth=0,v.setText(i),v._maxWidth=n;break}},NM={showPage(v){return this.displayText(this.getPage(v)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(v){Yd(this.parent,v)}},Ud={getLines:DM};Object.assign(Ud,BM,GM,NM);const vs=Phaser.Utils.Objects.GetValue,zM=Phaser.Math.Clamp;class VM extends me{constructor(i,e){super(i,{eventEmitter:!1}),this.textObjectType=Yn(this.parent),this.pageStartIndexes=[],this.lines=za(this.parent,""),this.sections=[],this.resetFromJSON(e)}resetFromJSON(i){return this.setMaxLines(vs(i,"maxLines",void 0)),this.setPageBreak(vs(i,"pageBreak",`\f
`)),this.setText(vs(i,"text","")),this.setStartLineIndex(vs(i,"start",0)),this.setPageIndex(vs(i,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(i){if(!this.isShutdown){switch(this.textObjectType){case ge:this.lines.length=0;break;case Me:this.lines.destroy();break;case Ae:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(i)}}setMaxLines(i){return this.maxLines=i,this}setPageBreak(i){return this.pageBreak=i,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(i){i=zM(i,0,this.totalLinesCount-1),this._startLineIndex=i}setStartLineIndex(i){return this.startLineIndex=i,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var i;switch(this.textObjectType){case ge:case Me:var e=this.parent.style.maxLines;e>0?i=e:i=this.totalLinesCount;break;case Ae:i=this.totalLinesCount;break}return i}get content(){return this.sections.join(this.pageBreak)}}Object.assign(VM.prototype,Ud);Phaser.Utils.Objects.GetFastValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;const YM=Li.prototype.add;var el=function(v,i,e,d,t,s,u,n,a){return v.setVisible(!1),YM.call(this,v,i,e,d,t,s,u,n,a),this},UM={add:el,addPage:el},XM=function(v){return v===void 0?null:this.sizerChildren.hasOwnProperty(v)?this.sizerChildren[v]:null};const il=ze.prototype.setChildVisible;var WM=function(v){this._previousKey=this._currentKey;var i=this.previousPage;i&&(this.swapMode===0?(il.call(this,i,!1),this.emit("pageinvisible",i,this._previousKey,this)):i.destroy()),v&&!this.sizerChildren.hasOwnProperty(v)&&this.emit("createpage",v,this),this._currentKey=v;var e=this.currentPage;return e&&(il.call(this,e,!0),this.emit("pagevisible",e,this._currentKey,this),this.fadeInDuration>0&&e.setAlpha(0).fadeIn(this.fadeInDuration,1)),this},HM=function(v){return this.sizerChildren.hasOwnProperty(v)},Xd={getPage:XM,swapPage:WM,hasPage:HM};Object.assign(Xd,UM);const sl=Phaser.Utils.Objects.GetValue;class Wd extends Li{constructor(i,e){super(i,e),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(sl(e,"swapMode",0)),this.setFadeInDuration(sl(e,"fadeIn",0))}setSwapMode(i){return typeof i=="string"&&(i=$M[i]),this.swapMode=i,this}setFadeInDuration(i){return this.fadeInDuration=i,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(i){this.swapPage(i)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Wd.prototype,Xd);const $M={invisible:0,destroy:1},Hd=Phaser.Math.Vector3,KM=Phaser.Math.Matrix4;var nl=new Hd,rl=new Hd,al=new KM,ZM=function(v,i,e,d,t,s,u){i===void 0&&(i=0),e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=0),s===void 0&&(s=0),u===void 0&&(u=0),nl.set(i,e,d),rl.set(t,s,u),al.fromRotationXYTranslation(rl,nl,!0);for(var n=0,a=v.vertices.length;n<a;n++)v.vertices[n].transformMat4(al)};const kM=Phaser.GameObjects.Mesh,JM=Phaser.Utils.Objects.IsPlainObject,yi=Phaser.Utils.Objects.GetValue,QM=Phaser.Geom.Mesh.GenerateGridVerts,br=Phaser.Math.RadToDeg,hn=Phaser.Math.DegToRad,$d=45,jM=1+1/Math.sin(hn($d));class Kd extends kM{constructor(i,e,d,t,s,u){JM(e)&&(u=e,e=yi(u,"x",0),d=yi(u,"y",0),t=yi(u,"key",null),s=yi(u,"frame",null)),super(i,e,d,t,s),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(jM),this.hideCCW=yi(u,"hideCCW",!0);var n=yi(u,"gridWidth",32),a=yi(u,"gridHeight",n);this.resetVerts(n,a)}resetPerspective(){return this.setPerspective(this.width,this.height,$d),this}resetVerts(i,e){if(i!==void 0&&(this.gridWidth=i),e!==void 0&&(this.gridHeight=e),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var d=this.frame.cutWidth,t=this.frame.cutHeight;QM({mesh:this,texture:this.texture.key,frame:this.frame.name,width:d/this.height,height:t/this.height,widthSegments:Math.ceil(d/this.gridWidth),heightSegments:Math.ceil(t/this.gridHeight),flipY:this.frame.source.isRenderTexture});var s=this.transformInfo;return s&&this.transformVerts(s.x,s.y,s.z,s.rotateX,s.rotateY,s.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(i){this.modelRotation.x=i}get angleX(){return br(this.rotationX)}set angleX(i){this.rotationX=hn(i)}get rotationY(){return this.modelRotation.y}set rotationY(i){this.modelRotation.y=i}get angleY(){return br(this.rotationY)}set angleY(i){this.rotationY=hn(i)}get rotationZ(){return this.modelRotation.z}set rotationZ(i){this.modelRotation.z=i}get angleZ(){return br(this.rotationZ)}set angleZ(i){this.rotationZ=hn(i)}transformVerts(i,e,d,t,s,u){return i===void 0&&(i=0),e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=0),s===void 0&&(s=0),u===void 0&&(u=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=i,this.transformInfo.y=e,this.transformInfo.rotateX=t,this.transformInfo.rotateY=s,this.transformInfo.rotateZ=u,ZM(this,i,e,d,t,s,u),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(i){for(var e=this.vertices,d=0,t=e.length;d<t;d++)e[d].color=i}setTint(i){return this.tint=i,this}}const qM=Phaser.GameObjects.RenderTexture,_M=Phaser.Utils.Objects.IsPlainObject,tn=Phaser.Utils.Objects.GetValue;class t2 extends Kd{constructor(i,e,d,t,s,u){_M(e)&&(u=e,e=tn(u,"x",0),d=tn(u,"y",0),t=tn(u,"width",32),s=tn(u,"height",32));var n=new qM(i,e,d,t,s).setOrigin(.5);super(i,e,d,n.texture.key,null,u),this.type="rexPerspectiveRenderTexture",this.rt=n}destroy(i){super.destroy(i),this.rt.destroy(),this.rt=null}snapshot(i,e){return e===void 0&&(e={}),e.gameObjects=i,e.renderTexture=this.rt,Fu(e),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var Ee=function(v,i,e,d){if(Array.isArray(v))for(var t=!1,s=0,u=v.length;s<u;s++){var n=v[s];if(!(d&&!n)&&(e?t=i.call(e,n,s,v):t=i(n,s,v),t))return}else{var t=!1;for(var a in v){var n=v[a];if(!(d&&!n)&&(e?t=i.call(e,n,a,v):t=i(n,a,v),t))return}}};const Gr=Phaser.Math.RadToDeg,Nr=Phaser.Math.DegToRad;class e2 extends ze{constructor(i,e,d,t,s,u){super(i,e,d,t,s),this.faces=u,Ee(u,function(n){n.setPosition(e,d),this.add(n)},this,!0)}get rotationX(){return 0}set rotationX(i){}get angleX(){return Gr(this.rotationX)}set angleX(i){this.rotationX=Nr(i)}get rotationY(){return 0}set rotationY(i){}get angleY(){return Gr(this.rotationY)}set angleY(i){this.rotationY=Nr(i)}get rotationZ(){return 0}set rotationZ(i){}get angleZ(){return Gr(this.rotationZ)}set angleZ(i){this.rotationZ=Nr(i)}setDebug(i,e){return Ee(this.faces,function(d){d.setDebug(i,e)},null,!0),this}panX(i){return Ee(this.faces,function(e){e.panX(i)},null,!0),this}panY(i){return Ee(this.faces,function(e){e.panY(i)},null,!0),this}panZ(i){return Ee(this.faces,function(e){e.panZ(i)},null,!0),this}transformVerts(i,e,d,t,s,u){return Ee(this.faces,function(n){n.transformVerts(i,e,d,t,s,u)},null,!0),this}forEachFace(i,e,d){return Ee(this.faces,i,e,d),this}}const i2=Phaser.Utils.Objects.IsPlainObject,s2={key:"__WHITE"},n2={image:Kd,rendertexture:t2};var ol=function(v,i){i===void 0&&(i=s2);var e;return i2(i)?(i.hasOwnProperty("type")||(i.hasOwnProperty("key")?i.type="image":i.hasOwnProperty("width")&&(i.type="rendertexture")),e=new n2[i.type](v,i),v.add.existing(e)):e=i,e},r2=function(v,i,e){var d;if(e===void 0){d=[];for(var t,s,u=0,n=i.length;u<n;u++)s=i[u],s?t=ol(v,s):t=null,d.push(t)}else{d={};for(var t,a,u=0,n=e.length;u<n;u++)a=e[u],i.hasOwnProperty(a)?t=ol(v,i[a]):t=null,d[a]=t}return d};const a2=Phaser.Math.DegToRad,hl=a2(180);var o2=function(v,i){var e=i.back;e&&(v.orientation===0?e.transformVerts(0,0,0,0,hl,0):e.transformVerts(0,0,0,hl,0,0))};const zr=Phaser.Utils.Objects.GetValue,h2=Phaser.Math.Linear;class l2 extends ji{constructor(i,e){super(i,e),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setEase(zr(i,"ease","Cubic")),this.setFrontToBackDirection(zr(i,"frontToBack",0)),this.setBackToFrontDirection(zr(i,"backToFront",1)),this}setFrontToBackDirection(i){return typeof i=="string"&&(i=ll[i]),this.endAngleFB=i===0?180:-180,this}setBackToFrontDirection(i){return typeof i=="string"&&(i=ll[i]),this.endAngleBF=i===0?-180:180,this}start(i,e){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(i);var d=e+1,t=this.parent;return t.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*d):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*d),super.start(),this}flip(i,e){return this.isRunning?this:(i===void 0&&(i=this.duration),e===void 0&&(e=0),this.start(i,e),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+e+1)%2,this)}flipRight(i,e){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(i,e),this}flipLeft(i,e){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(i,e),this}updateGameObject(i,e){var d=this.easeFn(e.t),t=h2(this.startAngle,this.endAngle,d);i.orientation===0?i.angleY=t:i.angleX=t}}const ll={right:0,"left-to-right":0,left:1,"right-to-left":1},u2=Phaser.Utils.Objects.IsPlainObject,Ti=Phaser.Utils.Objects.GetValue,d2=["back","front"];class f2 extends e2{constructor(i,e,d,t){u2(e)&&(t=e,e=Ti(t,"x",0),d=Ti(t,"y",0));var s=r2(i,t,d2),u=s.back,n=s.front,a=Ti(t,"width"),h=Ti(t,"height");if(a===void 0||h===void 0){if(a===void 0){var r=n?n.width:0,o=u?u.width:0;a=Math.max(r,o)}if(h===void 0){var c=n?n.height:0,l=u?u.height:0;h=Math.max(c,l)}}super(i,e,d,a,h,s),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,Ee(s,function(p,g){this[`${g}Face`]=p},this);var f=Ti(t,"flip",void 0);f!==!1&&(this.flip=new l2(this,f)),this.setOrientation(Ti(t,"orientation",0)),o2(this,s),this.setFace(Ti(t,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(i){this.frontFaceRotationX!==i&&(this.frontFaceRotationX=i,Ee(this.faces,function(e){e.rotationX=i},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(i){this.frontFaceRotationY!==i&&(this.frontFaceRotationY=i,Ee(this.faces,function(e){e.rotationY=i},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(i){this.frontFaceRotationZ!==i&&(this.frontFaceRotationZ=i,Ee(this.faces,function(e){e.rotationZ=i},null,!0))}setOrientation(i){return typeof i=="string"&&(i=c2[i]),this.orientation=i,this}get face(){return this.currentFaceIndex}set face(i){typeof i=="string"&&(i=v2[i]),this.currentFaceIndex=i;var e=i===1,d=e?180:0;this.orientation===0?this.angleY=d:this.angleX=d}setFace(i){return this.face=i,this}toggleFace(){var i=this.face===0?1:0;return this.setFace(i),this}}const c2={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},v2={front:0,back:1};Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;Phaser.Utils.Objects.GetValue;const p2=Phaser.Utils.Objects.GetValue;var g2=function(v){var i=this.scene;this.setSnapshotPadding(p2(v,"snapshotPadding",0)),v=Ai(v),delete v.width,delete v.height,v.front={width:1,height:1},v.back={width:1,height:1};var e=new f2(i,v);i.add.existing(e);var d=e.flip;if(d){var t=this;d.on("start",function(){t.enterPerspectiveMode()}).on("complete",function(){t.exitPerspectiveMode()})}return e};const m2=["front","back"];var x2={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var v=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,v),this.setChildVisible(this.childrenMap.back,!v),this},setSnapshotPadding(v){return this.snapshotPadding=v,this},snapshotFace(v){typeof v=="number"&&(v=m2[v]);var i=this.perspectiveCard.faces[v],e=this.childrenMap[v];i.rt.clear();var d=e.visible;e.visible=!0;var t=e.isRexContainerLite?e.getAllVisibleChildren():e;return i.snapshot(t,{padding:this.snapshotPadding}),e.visible=d,this}};const ul=Phaser.Utils.Objects.GetValue;class y2 extends Li{constructor(i,e){super(i,e),this.type="rexPerspectiveCard";var d=e.back,t=ul(e,"expand.back",!0);this.add(d,{key:"back",expand:t});var s=e.front,u=ul(e,"expand.front",!0);this.add(s,{key:"front",expand:u}),this.perspectiveCard=g2.call(this,e),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(i){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=i;var e=i===0,d=this.childrenMap.front,t=this.childrenMap.back;this.setChildVisible(d,e),this.setChildVisible(t,!e)}}setFace(i){return this.face=i,this}toggleFace(){var i=this.face===0?1:0;return this.setFace(i),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(i){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=i}get angleX(){return this.perspectiveCard.angleX}set angleX(i){this.enterPerspectiveMode(),this.perspectiveCard.angleX=i}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(i){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=i}get angleY(){return this.perspectiveCard.angleY}set angleY(i){this.enterPerspectiveMode(),this.perspectiveCard.angleY=i}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(i){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=i}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(i){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=i}panX(i){return this.enterPerspectiveMode(),this.perspectiveCard.panX(i),this}panY(i){return this.enterPerspectiveMode(),this.perspectiveCard.panY(i),this}panZ(i){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(i),this}transformVerts(i,e,d,t,s,u){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(i,e,d,t,s,u),this}forEachFace(i,e,d){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(i,e,d),this}}Object.assign(y2.prototype,x2);var T2=function(v){var i=this.getElement("tabs.buttons");if(!(v>=i.length))return i[v].name},S2=function(v){for(var i=this.getElement("tabs.buttons"),e=0,d=i.length;e<d;e++)if(i[e].name===v)return e};const C2=Phaser.Utils.Objects.IsPlainObject,Vr=Phaser.Utils.Objects.GetValue,E2=Phaser.Utils.String.UUID;var P2=function(v,i,e){if(C2(v)){var d=v;v=Vr(d,"key"),i=Vr(d,"tab"),e=Vr(d,"page")}return v||(v=E2()),i.name=v,this.childrenMap.tabs.addButton(i),this.childrenMap.pages.addPage(e,{key:v}),this},M2=function(v){var i;return typeof v=="number"?i=v:i=this.getPageIndex(v),i!=null&&this.childrenMap.tabs.emitButtonClick(i),this},A2=function(){return this.swapPage(0),this},O2=function(){return this.swapPage(this.getElement("tabs.buttons").length-1),this},R2={swapPage:M2,swapFirstPage:A2,swapLastPage:O2},L2=function(v,i){typeof v=="number"&&(v=this.getPageKey(v));var e=this.childrenMap.tabs,d=e.getByName(v),t=this.childrenMap.pages,s=t.getElement(v);return!d||!s?this:(t.removeChildrenMap(v),e.removeButton(d,i),t.remove(s,i),this)},F2={removePage:L2},I2=function(v){return typeof v=="number"&&(v=this.getPageKey(v)),this.childrenMap.pages.getPage(v)},w2=function(v){var i;return typeof v=="number"?i=v:i=this.getPageIndex(v),this.getElement("tabs.buttons")[i]},Zd={getPageKey:T2,getPageIndex:S2,addPage:P2,getPage:I2,getTab:w2};Object.assign(Zd,R2,F2);const Si=Phaser.Utils.Objects.GetValue,en=rt.prototype.add;class D2 extends rt{constructor(i,e){e===void 0&&(e={});var d=Si(e,"tabPosition","top"),t=d==="left"||d==="right"?"x":"y";e.orientation=t,super(i,e),this.type="rexTabPages";var s=Si(e,"background",void 0);s&&this.addBackground(s);var u=Si(e,"pages"),n=new Wd(i,u);i.add.existing(n);var a=t==="y",h=a?Si(e,"wrapTabs",!1):!1,r=Si(e,"tabs",void 0);r===void 0&&(r={});var o=h?xs:ne;r.orientation=a?"x":"y",r.buttonsType="radio";var c=new o(i,r);i.add.existing(c);var l=h?!0:Si(e,"expand.tabs",!1),f=Si(e,"align.tabs","left");switch(d){case"top":case"left":en.call(this,c,{proportion:0,expand:l,align:f}),en.call(this,n,{proportion:1,expand:!0});break;case"bottom":case"right":en.call(this,n,{proportion:1,expand:!0}),en.call(this,c,{proportion:0,expand:l,align:f});break}this.addChildrenMap("background",s),this.addChildrenMap("tabs",c),this.addChildrenMap("pages",n),c.on("button.click",function(p){var g=p.name;n.hasPage(g)&&n.swapPage(g)}),c.on("button.statechange",function(p,g,m,x){var y=m?"tab.focus":"tab.blur";this.emit(y,p,p.name)},this),n.on("pagevisible",function(p,g,m){this.emit("page.focus",p,g)}),n.on("pageinvisible",function(p,g,m){this.emit("page.blur",p,g)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(i){this.showPage(i)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}}Object.assign(D2.prototype,Zd);var B2=function(v){return v!==void 0&&(this.text=v),this.lines=za(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},kd=function(v){return(v-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},Jd=function(v){return v*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},b2=function(v){var i=v+this.visibleLinesCount+1,e;switch(this.textObjectType){case ge:e=this.lines.slice(v,i).join(`
`);break;case Me:var d=this.lines.getLineStartIndex(v),t=this.lines.getLineEndIndex(i-1);e=this.lines.getSliceTagText(d,t,!0);break;case Ae:e=this.lines.slice(v,i).join(`
`);break}return e},Qd=function(){var v=this.textObject.rexSizer;this.textObject.y+=v.offsetY-v.preOffsetY,v.preOffsetY=v.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&G2.call(this)},G2=function(){if(!!this.textObject.setCrop){var v=this.textObject.rexSizer.offsetY,i,e;v<=0?(i=-v,e=this.height):(i=0,e=this.height-v),this.textObject.setCrop(0,i,this.width,e)}},N2=function(){var v=Math.max(Math.floor(kd.call(this,-this.textOY)),0),i=Jd.call(this,v)+this.textOY,e=b2.call(this,v);return Yd(this.textObject,e),this.textObject.rexSizer.offsetY=i,Qd.call(this),this},z2=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,Ls.call(this),this},V2=function(v,i,e){if(e+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===i&&this._textObjectRealHeight===e)){switch(this.textObjectWidth=i,this._textObjectRealHeight=e,this.textObjectType){case ge:case Me:v.setFixedSize(i,e);var d=v.style,t=Math.max(i,0);this.textObjectType===ge?d.wordWrapWidth=t:(d.wrapMode===0&&(d.wrapMode=1),d.wrapWidth=t);break;case Ae:v.setMaxWidth(i);break}this.setText()}},Y2=function(){var v,i,e,d=this.left,t=this.top,s,u,n,a;v=this.textObject,v.rexSizer.hidden||(i=v.rexSizer,e=i.padding,s=d+e.left,u=t+e.top,n=this.width-e.left-e.right,a=this.height-e.top-e.bottom,V2.call(this,v,n,a),In(v,s,u,n,a,i.align),i.preOffsetY=0,Qd.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},U2={setText:B2,updateTextObject:N2,preLayout:z2,layoutChildren:Y2};const dl=Phaser.Utils.Objects.IsPlainObject,he=Phaser.Utils.Objects.GetValue,X2=Phaser.Display.Align.TOP_LEFT;class jd extends Ri{constructor(i,e,d,t,s,u){dl(e)?(u=e,e=he(u,"x",0),d=he(u,"y",0),t=he(u,"width",void 0),s=he(u,"height",void 0)):dl(t)&&(u=t,t=he(u,"width",void 0),s=he(u,"height",void 0)),super(i,e,d,t,s,u),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=he(u,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(he(u,"clamplTextOY",!0)),this.alwaysScrollable=he(u,"alwaysScrollable",!1);var n=he(u,"background",void 0),a=he(u,"text",void 0);a===void 0&&(a=W2(i)),this.textCropEnable=he(u,"textCrop",!!a.setCrop);var h=he(u,"textMask",!this.textCropEnable);n&&this.addBackground(n),this.add(a),this.sizerChildren=[a];var r=this.getSizerConfig(a);r.align=X2,r.padding=qi(0),r.expand=!0,this.textObject=a,this.textObjectType=Yn(a),r.preOffsetY=0,r.offsetY=0,h&&(this.textMask=vn.call(this,this.textObject,this)),this.addChildrenMap("background",n),this.addChildrenMap("text",a)}destroy(i){if(!!this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case ge:this.lines.length=0;break;case Me:this.lines.destroy();break;case Ae:this.lines.length=0;break}this.lines=void 0}super.destroy(i)}}setClampMode(i){return i===void 0&&(i=!0),this.clampTextOY=i,this}get textLineHeight(){if(this._textLineHeight===void 0){var i;switch(this.textObjectType){case ge:case Me:var e=this.textObject.style;i=e.metrics.fontSize+e.strokeThickness;break;case Ae:var d=this.textObject.fontSize/this.textObject.fontData.size;i=this.textObject.fontData.lineHeight*d;break}this._textLineHeight=i}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var i;switch(this.textObjectType){case ge:case Me:i=this.textObject.lineSpacing;break;case Ae:i=0;break}this._textLineSpacing=i}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(kd.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=Jd.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var i=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&i<0&&(i=0),this._textVisibleHeight=i}return this._textVisibleHeight}textOYExceedTop(i){return i===void 0&&(i=this.textOY),i>this.topTextOY}textOYExeceedBottom(i){return i===void 0&&(i=this.textOY),i<this.bottomTextOY}get textOY(){return this._textOY}set textOY(i){var e=this.topTextOY,d=this.bottomTextOY,t=this.textOYExceedTop(i),s=this.textOYExeceedBottom(i);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?i=0:t?i=e:s&&(i=d)),this._textOY!==i&&(this._textOY=i,this.updateTextObject()),t&&(this.execeedTopState||this.emit("execeedtop",this,i,e)),this.execeedTopState=t,s&&(this.execeedBottomState||this.emit("execeedbottom",this,i,d)),this.execeedBottomState=s}setTextOY(i){return this.textOY=i,this}set t(i){this.textOY=-this.textVisibleHeight*i}get t(){var i=this.textVisibleHeight;return i===0?0:this.textOY/-i}setTextOYByPercentage(i){return this.t=i,this}}var W2=function(v){return v.add.text(0,0,"")};Object.assign(jd.prototype,U2);var H2=function(v){Object.defineProperty(v,"childOY",{configurable:!0,get:function(){return v.textOY},set:function(i){v.textOY=i}}),Object.defineProperty(v,"topChildOY",{get:function(){return v.topTextOY}}),Object.defineProperty(v,"bottomChildOY",{get:function(){return v.bottomTextOY}}),Object.defineProperty(v,"childVisibleHeight",{get:function(){return v.textObjectHeight}}),Object.defineProperty(v,"childHeight",{get:function(){return v.textHeight}})},$2=function(v){var i=this.childrenMap.child;return i.setText(v),this.resizeController(),this},K2=function(v){return this.setText(this.text+v),this};const Qe=Phaser.Utils.Objects.GetValue;class Z2 extends Vn{constructor(i,e){e===void 0&&(e={});var d=Qe(e,"text",void 0),t=Qe(e,"textWidth",void 0),s=Qe(e,"textHeight",void 0),u=Qe(e,"textCrop",!!d.setCrop),n=Qe(e,"textMask",!u),a=Qe(e,"content",""),h=new jd(i,{width:t,height:s,text:d,textMask:n,textCrop:u&&!n,content:a,clamplTextOY:Qe(e,"clamplChildOY",!1),alwaysScrollable:Qe(e,"alwaysScrollable",!1)});i.add.existing(h);var r=t===void 0?1:0,o=s===void 0;H2(h),e.scrollMode=0,e.type="rexTextArea",e.child={gameObject:h,proportion:r,expand:o};var c=Qe(e,"space",void 0);c&&(c.child=c.text),super(i,e),this.addChildrenMap("text",d)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}var k2={setText:$2,appendText:K2};Object.assign(Z2.prototype,k2);var J2=function(){if(this.rexSizer.hidden)return 0;var v,i=this.child,e=i.rexSizer;return e.hidden?v=0:this.scrollMode===0?v=this.getChildWidth(i):v=0,v},Q2=function(){if(this.rexSizer.hidden)return 0;var v,i=this.child,e=i.rexSizer;return e.hidden||this.scrollMode===0?v=0:v=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.hasOwnProperty("minHeight")?i.minHeight:vt(i),v},j2=function(v){return v===void 0&&(v=[]),this.child&&this.child.isRexSizer&&v.push(this.child),v},q2=function(){var v=this.left,i=this.top;this.scrollMode===0?i+=this.childOY:v+=this.childOY,this.child.setPosition(v,i),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},_2=function(){var v=this.child,i,e;v.rexSizer.hidden||(this.scrollMode===0?i=this.width:e=this.height,v.isRexSizer?v.runLayout(this,i,e):oi(v,i,e),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},qd={getChildrenWidth:J2,getChildrenHeight:Q2,getChildrenSizers:j2,resetChildPosition:q2,layoutChildren:_2};Object.assign(qd,Id);const fl=Phaser.Utils.Objects.IsPlainObject,Ce=Phaser.Utils.Objects.GetValue,tA=Phaser.Display.Align.TOP_LEFT;class _d extends Ri{constructor(i,e,d,t,s,u){fl(e)?(u=e,e=Ce(u,"x",0),d=Ce(u,"y",0),t=Ce(u,"width",void 0),s=Ce(u,"height",void 0)):fl(t)&&(u=t,t=Ce(u,"width",void 0),s=Ce(u,"height",void 0)),super(i,e,d,t,s,u),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(Ce(u,"scrollMode",!0)),this.setClampMode(Ce(u,"clamplChildOY",!0));var n=Ce(u,"child",void 0),a=Ce(u,"expand",!0);n.setOrigin&&n.setOrigin(0),this.add(n),this.sizerChildren=[n];var h=this.getSizerConfig(n);h.align=tA,h.expand=a,this.child=n,this.setupChildrenMask(Ce(u,"mask",void 0))}destroy(i){!this.scene||(this.destroyChildrenMask(),this.child=void 0,super.destroy(i))}setScrollMode(i){return typeof i=="string"&&(i=Rd[i.toLowerCase()]),this.scrollMode=i,this}setClampMode(i){return i===void 0&&(i=!0),this.clampChildOY=i,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?vt(this.child):gt(this.child)}get childWidth(){return this.scrollMode===0?gt(this.child):vt(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var i=this.childHeight-this.childVisibleHeight;return i<0&&(i=0),i}childOYExceedTop(i){return i===void 0&&(i=this.childOY),i>this.topChildOY}childOYExeceedBottom(i){return i===void 0&&(i=this.childOY),i<this.bottomChildOY}get childOY(){return this._childOY}set childOY(i){var e=this.topChildOY,d=this.bottomChildOY,t=this.childOYExceedTop(i),s=this.childOYExeceedBottom(i);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?i=0:t?i=e:s&&(i=d)),this._childOY!==i&&(this._childOY=i,this.resetChildPosition()),t&&(this.execeedTopState||this.emit("execeedtop",this,i,e)),this.execeedTopState=t,s&&(this.execeedBottomState||this.emit("execeedbottom",this,i,d)),this.execeedBottomState=s}setChildOY(i){return this.childOY=i,this}set t(i){this.childOY=-this.visibleHeight*i}get t(){var i=this.visibleHeight;return i===0?0:this.childOY/-i}setChildOYByPercentage(i){return this.t=i,this}}Object.assign(_d.prototype,qd);const ps=Phaser.Utils.Objects.GetValue;class tf extends Vn{constructor(i,e){e===void 0&&(e={});var d=zn(e),t=ps(e,"panel",void 0);t===void 0&&(t={}),t.scrollMode=d,t.clamplChildOY=ps(e,"clamplChildOY",!1);var s=new _d(i,t);i.add.existing(s);var u=ps(t,"width",void 0),n=ps(t,"height",void 0),a,h;d===0?(a=u===void 0?1:0,h=n===void 0):(a=n===void 0?1:0,h=u===void 0),e.type="rexScrollablePanel",e.child={gameObject:s,proportion:a,expand:h};var r=ps(e,"space",void 0);r&&(r.child=r.panel),super(i,e),this.addChildrenMap("panel",s.child),this.addChildrenMap("panelLayer",s.maskLayer)}setChildrenInteractive(i){return i===void 0&&(i={}),i.hasOwnProperty("eventEmitter")||(i.eventEmitter=this),i.hasOwnProperty("targets")||(i.targets=[this.childrenMap.panel]),od(this.childrenMap.child,i),this}}Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;var eA=function(){return function(v,i,e,d){i!=="panel"&&e.setChildVisible(v,!0)}},iA=function(){return function(v,i,e,d){i!=="panel"&&e.setChildVisible(v,!1)}},sA={show:eA,hide:iA},nA=function(v,i){return i===void 0&&(i=1),function(e,d,t,s){d!=="panel"&&t.fadeChild(e,s?0:v,i)}},rA=function(v,i){return i===void 0&&(i=0),function(e,d,t,s){d!=="panel"&&t.fadeChild(e,s?0:v,i)}},aA={show:nA,hide:rA},cl=function(v,i){return function(e,d,t,s){d!=="panel"&&t.moveChild(e,s?0:v,i)}},oA={show:cl,hide:cl},vl=function(v,i){return function(e,d,t,s){d==="panel"&&t.moveChild(e,s?0:v,i)}},hA={show:vl,hide:vl};const Yr={visible:sA,fade:aA,move:oA,"move-panel":hA};var lA=function(v){var i,e;[i,...e]=typeof v=="string"?[v]:v;var d,t;return Yr.hasOwnProperty(i)?(d=Yr[i].show.apply(null,e),t=Yr[i].hide.apply(null,e)):(d=ri,t=ri),{show:d,hide:t}},uA={showChild(v,i){var e=this.sizerChildren[v];return e&&(this.emit("showchild",e,v,this,i),this.resetChildState(e)),this},hideChild(v,i){var e=this.sizerChildren[v];return e&&(this.emit("hidechild",e,v,this,i),this.resetChildState(e)),this},swapChild(v,i){return this.currentChildKey===v||(this.currentChildKey==="panel"||v==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=v,this.hideChild(this.previousChildKey,i),this.showChild(this.currentChildKey,i)):(this.swapChild("panel",i),this.swapChild(v,i))),this},showPanel(v){return this.swapChild("panel",v),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var v=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(v),this},toggleRightSide(){var v=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(v),this},toggleTopSide(){var v=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(v),this},toggleBottomSide(){var v=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(v),this}};const dA=ze.prototype.setChildVisible;var fA={setChildVisible(v,i){var e;if(typeof v=="string"){var e=v;v=this.sizerChildren[e]}else e=bn(this.sizerChildren,v);return i===void 0&&(i=this.currentChildKey===e),dA.call(this,v,i),this}},cA={fadeChild(v,i,e){var d;return typeof v=="string"?(d=v,v=this.sizerChildren[d]):d=bn(this.sizerChildren,v),i===void 0&&(i=500),e===void 0&&(e=this.currentChildKey===d?1:0),v.fadeIn(i,{start:v.alpha,end:e}),this},fadeChildPromise(v,i,e){return typeof v=="string"&&(v=this.sizerChildren[key]),this.fadeChild(v,i,e),v._fade?Kt(v._fade):Promise.resolve()}},vA={moveChild(v,i,e,d){var t;typeof v=="string"?(t=v,v=this.sizerChildren[t]):t=bn(this.sizerChildren,v),i===void 0&&(i=500);var s=this.currentChildKey===t;if(d===void 0)switch(t){case"leftSide":case"rightSide":d=gt(v);break;case"topSide":case"bottomSide":d=vt(v);break;default:if(s)switch(this.previousChildKey){case"leftSide":case"rightSide":d=gt(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":d=vt(this.sizerChildren[this.previousChildKey]);break;default:d=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":d=gt(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":d=vt(this.sizerChildren[this.currentChildKey]);break;default:d=0;break}break}var u,n,a,h;if(s)switch(t){case"panel":switch(this.previousChildKey){case"leftSide":u=!0;break;case"rightSide":n=!0;break;case"topSide":a=!0;break;case"bottomSide":h=!0;break}break;case"leftSide":n=!0;break;case"rightSide":u=!0;break;case"topSide":h=!0;break;case"bottomSide":a=!0;break}else switch(t){case"panel":switch(this.currentChildKey){case"leftSide":n=!0;break;case"rightSide":u=!0;break;case"topSide":h=!0;break;case"bottomSide":a=!0;break}break;case"leftSide":u=!0;break;case"rightSide":n=!0;break;case"topSide":a=!0;break;case"bottomSide":h=!0;break}return u?v.moveTo(i,`-=${d}`,void 0,e):n?v.moveTo(i,`+=${d}`,void 0,e):a?v.moveTo(i,void 0,`-=${d}`,e):h?v.moveTo(i,void 0,`+=${d}`,e):v.moveTo(0),this},moveChildPromise(v,i,e,d){return typeof v=="string"&&(v=this.sizerChildren[key]),this.moveChild(v,i,e,d),v._easeMove?Kt(v._easeMove):Promise.resolve()}},ef={};Object.assign(ef,fA,cA,vA);const se=Phaser.Utils.Objects.GetValue;class pA extends Li{constructor(i,e){super(i,e),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var d=se(e,"showChildCallback",void 0);if(d)if(na(d)){var t=se(e,"showChildCallbackScope",void 0);this.on("showchild",d,t);var s=se(e,"hideChildCallback",void 0),u=se(e,"hideChildCallbackScope",void 0);this.on("hidechild",s,u)}else{var n=lA(d);this.on("showchild",n.show),this.on("hidechild",n.hide)}var a=se(e,"background",void 0),h=se(e,"panel",void 0),r=se(e,"leftSide",void 0),o=se(e,"rightSide",void 0),c=se(e,"topSide",void 0),l=se(e,"bottomSide",void 0);if(a&&this.addBackground(a),h&&this.add(h,"panel","center",0,!0),r){var f=se(e,"expand.left",!0);this.add(r,"leftSide","left-top",0,{height:f})}if(o){var f=se(e,"expand.right",!0);this.add(o,"rightSide","right-top",0,{height:f})}if(c){var f=se(e,"expand.top",!0);this.add(c,"topSide","left-top",0,{width:f})}if(l){var f=se(e,"expand.bottom",!0);this.add(l,"bottomSide","left-bottom",0,{width:f})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(pA.prototype,uA,ef);Phaser.Utils.Objects.GetValue;Phaser.Math.Distance.Between;Phaser.Math.RotateAroundDistance;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetAdvancedValue;Phaser.Math.Linear;Phaser.Math.RotateAround;Phaser.Geom.Mesh.Vertex;Phaser.Geom.Mesh.Face;Phaser.GameObjects.Mesh;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.GameObjects.RenderTexture;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.GameObjects.RenderTexture;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function sf(v){return typeof v=="undefined"||v===null}function gA(v){return typeof v=="object"&&v!==null}function mA(v){return Array.isArray(v)?v:sf(v)?[]:[v]}function xA(v,i){var e,d,t,s;if(i)for(s=Object.keys(i),e=0,d=s.length;e<d;e+=1)t=s[e],v[t]=i[t];return v}function yA(v,i){var e="",d;for(d=0;d<i;d+=1)e+=v;return e}function TA(v){return v===0&&Number.NEGATIVE_INFINITY===1/v}var SA=sf,CA=gA,EA=mA,PA=yA,MA=TA,AA=xA,Va={isNothing:SA,isObject:CA,toArray:EA,repeat:PA,isNegativeZero:MA,extend:AA};function nf(v,i){var e="",d=v.reason||"(unknown reason)";return v.mark?(v.mark.name&&(e+='in "'+v.mark.name+'" '),e+="("+(v.mark.line+1)+":"+(v.mark.column+1)+")",!i&&v.mark.snippet&&(e+=`

`+v.mark.snippet),d+" "+e):d}function ys(v,i){Error.call(this),this.name="YAMLException",this.reason=v,this.mark=i,this.message=nf(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ys.prototype=Object.create(Error.prototype);ys.prototype.constructor=ys;ys.prototype.toString=function(i){return this.name+": "+nf(this,i)};var Pi=ys,OA=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],RA=["scalar","sequence","mapping"];function LA(v){var i={};return v!==null&&Object.keys(v).forEach(function(e){v[e].forEach(function(d){i[String(d)]=e})}),i}function FA(v,i){if(i=i||{},Object.keys(i).forEach(function(e){if(OA.indexOf(e)===-1)throw new Pi('Unknown option "'+e+'" is met in definition of "'+v+'" YAML type.')}),this.options=i,this.tag=v,this.kind=i.kind||null,this.resolve=i.resolve||function(){return!0},this.construct=i.construct||function(e){return e},this.instanceOf=i.instanceOf||null,this.predicate=i.predicate||null,this.represent=i.represent||null,this.representName=i.representName||null,this.defaultStyle=i.defaultStyle||null,this.multi=i.multi||!1,this.styleAliases=LA(i.styleAliases||null),RA.indexOf(this.kind)===-1)throw new Pi('Unknown kind "'+this.kind+'" is specified for "'+v+'" YAML type.')}var Zt=FA;function pl(v,i){var e=[];return v[i].forEach(function(d){var t=e.length;e.forEach(function(s,u){s.tag===d.tag&&s.kind===d.kind&&s.multi===d.multi&&(t=u)}),e[t]=d}),e}function IA(){var v={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},i,e;function d(t){t.multi?(v.multi[t.kind].push(t),v.multi.fallback.push(t)):v[t.kind][t.tag]=v.fallback[t.tag]=t}for(i=0,e=arguments.length;i<e;i+=1)arguments[i].forEach(d);return v}function ia(v){return this.extend(v)}ia.prototype.extend=function(i){var e=[],d=[];if(i instanceof Zt)d.push(i);else if(Array.isArray(i))d=d.concat(i);else if(i&&(Array.isArray(i.implicit)||Array.isArray(i.explicit)))i.implicit&&(e=e.concat(i.implicit)),i.explicit&&(d=d.concat(i.explicit));else throw new Pi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.forEach(function(s){if(!(s instanceof Zt))throw new Pi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Pi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Pi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),d.forEach(function(s){if(!(s instanceof Zt))throw new Pi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var t=Object.create(ia.prototype);return t.implicit=(this.implicit||[]).concat(e),t.explicit=(this.explicit||[]).concat(d),t.compiledImplicit=pl(t,"implicit"),t.compiledExplicit=pl(t,"explicit"),t.compiledTypeMap=IA(t.compiledImplicit,t.compiledExplicit),t};var wA=ia,DA=new Zt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(v){return v!==null?v:""}}),BA=new Zt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(v){return v!==null?v:[]}}),bA=new Zt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(v){return v!==null?v:{}}}),GA=new wA({explicit:[DA,BA,bA]});function NA(v){if(v===null)return!0;var i=v.length;return i===1&&v==="~"||i===4&&(v==="null"||v==="Null"||v==="NULL")}function zA(){return null}function VA(v){return v===null}var YA=new Zt("tag:yaml.org,2002:null",{kind:"scalar",resolve:NA,construct:zA,predicate:VA,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function UA(v){if(v===null)return!1;var i=v.length;return i===4&&(v==="true"||v==="True"||v==="TRUE")||i===5&&(v==="false"||v==="False"||v==="FALSE")}function XA(v){return v==="true"||v==="True"||v==="TRUE"}function WA(v){return Object.prototype.toString.call(v)==="[object Boolean]"}var HA=new Zt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:UA,construct:XA,predicate:WA,represent:{lowercase:function(v){return v?"true":"false"},uppercase:function(v){return v?"TRUE":"FALSE"},camelcase:function(v){return v?"True":"False"}},defaultStyle:"lowercase"});function $A(v){return 48<=v&&v<=57||65<=v&&v<=70||97<=v&&v<=102}function KA(v){return 48<=v&&v<=55}function ZA(v){return 48<=v&&v<=57}function kA(v){if(v===null)return!1;var i=v.length,e=0,d=!1,t;if(!i)return!1;if(t=v[e],(t==="-"||t==="+")&&(t=v[++e]),t==="0"){if(e+1===i)return!0;if(t=v[++e],t==="b"){for(e++;e<i;e++)if(t=v[e],t!=="_"){if(t!=="0"&&t!=="1")return!1;d=!0}return d&&t!=="_"}if(t==="x"){for(e++;e<i;e++)if(t=v[e],t!=="_"){if(!$A(v.charCodeAt(e)))return!1;d=!0}return d&&t!=="_"}if(t==="o"){for(e++;e<i;e++)if(t=v[e],t!=="_"){if(!KA(v.charCodeAt(e)))return!1;d=!0}return d&&t!=="_"}}if(t==="_")return!1;for(;e<i;e++)if(t=v[e],t!=="_"){if(!ZA(v.charCodeAt(e)))return!1;d=!0}return!(!d||t==="_")}function JA(v){var i=v,e=1,d;if(i.indexOf("_")!==-1&&(i=i.replace(/_/g,"")),d=i[0],(d==="-"||d==="+")&&(d==="-"&&(e=-1),i=i.slice(1),d=i[0]),i==="0")return 0;if(d==="0"){if(i[1]==="b")return e*parseInt(i.slice(2),2);if(i[1]==="x")return e*parseInt(i.slice(2),16);if(i[1]==="o")return e*parseInt(i.slice(2),8)}return e*parseInt(i,10)}function QA(v){return Object.prototype.toString.call(v)==="[object Number]"&&v%1===0&&!Va.isNegativeZero(v)}var jA=new Zt("tag:yaml.org,2002:int",{kind:"scalar",resolve:kA,construct:JA,predicate:QA,represent:{binary:function(v){return v>=0?"0b"+v.toString(2):"-0b"+v.toString(2).slice(1)},octal:function(v){return v>=0?"0o"+v.toString(8):"-0o"+v.toString(8).slice(1)},decimal:function(v){return v.toString(10)},hexadecimal:function(v){return v>=0?"0x"+v.toString(16).toUpperCase():"-0x"+v.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),qA=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function _A(v){return!(v===null||!qA.test(v)||v[v.length-1]==="_")}function tO(v){var i,e;return i=v.replace(/_/g,"").toLowerCase(),e=i[0]==="-"?-1:1,"+-".indexOf(i[0])>=0&&(i=i.slice(1)),i===".inf"?e===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:i===".nan"?NaN:e*parseFloat(i,10)}var eO=/^[-+]?[0-9]+e/;function iO(v,i){var e;if(isNaN(v))switch(i){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===v)switch(i){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===v)switch(i){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Va.isNegativeZero(v))return"-0.0";return e=v.toString(10),eO.test(e)?e.replace("e",".e"):e}function sO(v){return Object.prototype.toString.call(v)==="[object Number]"&&(v%1!==0||Va.isNegativeZero(v))}var nO=new Zt("tag:yaml.org,2002:float",{kind:"scalar",resolve:_A,construct:tO,predicate:sO,represent:iO,defaultStyle:"lowercase"}),rO=GA.extend({implicit:[YA,HA,jA,nO]}),aO=rO,rf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),af=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function oO(v){return v===null?!1:rf.exec(v)!==null||af.exec(v)!==null}function hO(v){var i,e,d,t,s,u,n,a=0,h=null,r,o,c;if(i=rf.exec(v),i===null&&(i=af.exec(v)),i===null)throw new Error("Date resolve error");if(e=+i[1],d=+i[2]-1,t=+i[3],!i[4])return new Date(Date.UTC(e,d,t));if(s=+i[4],u=+i[5],n=+i[6],i[7]){for(a=i[7].slice(0,3);a.length<3;)a+="0";a=+a}return i[9]&&(r=+i[10],o=+(i[11]||0),h=(r*60+o)*6e4,i[9]==="-"&&(h=-h)),c=new Date(Date.UTC(e,d,t,s,u,n,a)),h&&c.setTime(c.getTime()-h),c}function lO(v){return v.toISOString()}var uO=new Zt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:oO,construct:hO,instanceOf:Date,represent:lO});function dO(v){return v==="<<"||v===null}var fO=new Zt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:dO}),Ya=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function cO(v){if(v===null)return!1;var i,e,d=0,t=v.length,s=Ya;for(e=0;e<t;e++)if(i=s.indexOf(v.charAt(e)),!(i>64)){if(i<0)return!1;d+=6}return d%8===0}function vO(v){var i,e,d=v.replace(/[\r\n=]/g,""),t=d.length,s=Ya,u=0,n=[];for(i=0;i<t;i++)i%4===0&&i&&(n.push(u>>16&255),n.push(u>>8&255),n.push(u&255)),u=u<<6|s.indexOf(d.charAt(i));return e=t%4*6,e===0?(n.push(u>>16&255),n.push(u>>8&255),n.push(u&255)):e===18?(n.push(u>>10&255),n.push(u>>2&255)):e===12&&n.push(u>>4&255),new Uint8Array(n)}function pO(v){var i="",e=0,d,t,s=v.length,u=Ya;for(d=0;d<s;d++)d%3===0&&d&&(i+=u[e>>18&63],i+=u[e>>12&63],i+=u[e>>6&63],i+=u[e&63]),e=(e<<8)+v[d];return t=s%3,t===0?(i+=u[e>>18&63],i+=u[e>>12&63],i+=u[e>>6&63],i+=u[e&63]):t===2?(i+=u[e>>10&63],i+=u[e>>4&63],i+=u[e<<2&63],i+=u[64]):t===1&&(i+=u[e>>2&63],i+=u[e<<4&63],i+=u[64],i+=u[64]),i}function gO(v){return Object.prototype.toString.call(v)==="[object Uint8Array]"}var mO=new Zt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:cO,construct:vO,predicate:gO,represent:pO}),xO=Object.prototype.hasOwnProperty,yO=Object.prototype.toString;function TO(v){if(v===null)return!0;var i=[],e,d,t,s,u,n=v;for(e=0,d=n.length;e<d;e+=1){if(t=n[e],u=!1,yO.call(t)!=="[object Object]")return!1;for(s in t)if(xO.call(t,s))if(!u)u=!0;else return!1;if(!u)return!1;if(i.indexOf(s)===-1)i.push(s);else return!1}return!0}function SO(v){return v!==null?v:[]}var CO=new Zt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:TO,construct:SO}),EO=Object.prototype.toString;function PO(v){if(v===null)return!0;var i,e,d,t,s,u=v;for(s=new Array(u.length),i=0,e=u.length;i<e;i+=1){if(d=u[i],EO.call(d)!=="[object Object]"||(t=Object.keys(d),t.length!==1))return!1;s[i]=[t[0],d[t[0]]]}return!0}function MO(v){if(v===null)return[];var i,e,d,t,s,u=v;for(s=new Array(u.length),i=0,e=u.length;i<e;i+=1)d=u[i],t=Object.keys(d),s[i]=[t[0],d[t[0]]];return s}var AO=new Zt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:PO,construct:MO}),OO=Object.prototype.hasOwnProperty;function RO(v){if(v===null)return!0;var i,e=v;for(i in e)if(OO.call(e,i)&&e[i]!==null)return!1;return!0}function LO(v){return v!==null?v:{}}var FO=new Zt("tag:yaml.org,2002:set",{kind:"mapping",resolve:RO,construct:LO});aO.extend({implicit:[uO,fO],explicit:[mO,CO,AO,FO]});function gl(v){return v===48?"\0":v===97?"\x07":v===98?"\b":v===116||v===9?"	":v===110?`
`:v===118?"\v":v===102?"\f":v===114?"\r":v===101?"\x1B":v===32?" ":v===34?'"':v===47?"/":v===92?"\\":v===78?"\x85":v===95?"\xA0":v===76?"\u2028":v===80?"\u2029":""}var IO=new Array(256),wO=new Array(256);for(var Hi=0;Hi<256;Hi++)IO[Hi]=gl(Hi)?1:0,wO[Hi]=gl(Hi);Phaser.GameObjects.Image;Phaser.GameObjects.Sprite;Phaser.GameObjects.Video;Phaser.GameObjects.Text;Phaser.Utils.Objects.IsPlainObject;class DO extends Phaser.GameObjects.Container{constructor(i,e,d,t,s="",u=20,n,a,h=370,r=400){super(i,Math.round(e),Math.round(d)),i.add.existing(this).setDepth(1),this.text=s,this.fontSize=u,this.description=i.add.text(e,d-40,"Possible Moves: ",{fontFamily:V.textStyle}).setFontSize(20),this.panel=new tf(i,{x:e,y:d,width:h,height:r,scrollMode:"vertical",background:i.add.existing(new $t(i,0,0,2,2,10,V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c4))),panel:{child:i.add.existing(new li(i,{space:{left:3,right:3,top:3,bottom:3,item:8,line:8}})),mask:{padding:1}},mouseWheelScroller:!0,slider:{track:i.add.existing(new $t(i,0,0,20,10,10,V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c2))),thumb:i.add.existing(new $t(i,0,0,0,0,13,V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c3)))},space:{left:10,right:10,top:10,bottom:10,panel:10}}).layout().setOrigin(0),this.updatePanel(s)}updatePanel(i){let e=this.panel.getElement("panel"),d=this.panel.scene;e.clear(!0);for(var t=i.split(`
`),s=0,u=t.length;s<u;s++){for(var n=t[s].split(" "),a=0,h=n.length;a<h;a++)e.add(d.add.text(0,0,n[a],{fontFamily:V.textStyle,color:V.COLORPACK_1.black,fontStyle:"bold"}).setFontSize(this.fontSize));s<u-1&&e.addNewLine()}return this.panel.layout(),this.panel}makeInvisible(){this.panel.setVisible(!1),this.description.setVisible(!1)}makeVisible(){this.panel.setVisible(!0),this.description.setVisible(!0)}}class BO extends Phaser.GameObjects.Container{constructor(i,e,d,t=370,s=400){super(i,Math.round(e),Math.round(d)),i.add.existing(this).setDepth(1),this.panel=new tf(i,{x:e,y:d,width:t,height:s,scrollMode:"vertical",panel:{child:i.add.existing(new li(i,{space:{left:100,right:5,top:3,bottom:3,item:8,line:15}})),mask:{padding:1}},mouseWheelScroller:!0,slider:{track:i.add.existing(this.slider=new $t(i,0,0,5,10,10,V.convertColorToNumber(V.COLORS_PARALLAX.lighter_blue))).setAlpha(.6),thumb:i.add.existing(this.sliderknob=new $t(i,0,0,0,0,13,V.convertColorToNumber(V.COLORPACK_1.white))).setAlpha(.8)},space:{left:10,right:10,top:10,bottom:10,panel:10}}).layout()}addNewLine(i){let e=this.panel.getElement("panel");return this.panel.scene,e.add(i),e.addNewLine(),this.panel.layout(),i}addText(i){let e=this.panel.getElement("panel");return this.panel.scene,e.add(i),this.panel.layout(),i}addLineBreak(){this.panel.getElement("panel").addNewLine(),this.panel.layout()}getSlider(){return[this.slider,this.sliderknob]}}class ml extends Phaser.GameObjects.Container{constructor(i,e,d,t,s,u=!0,n=1){super(i,e,d),this.dimensions=new Phaser.Math.Vector2(this.scene.renderer.width/10-20,50),this.enabled=!0,this.activated=!0,this.disabledAlpha=.4,this.current_alpha=1,this.inFadeTween=!1,this.coordinates=new Phaser.Math.Vector2(e,d),this.tweenList=[],this.panel_buttons=new Map,this.game=t,this.phaserGameController=s,this.possibleActions=dt.toArray(this.game.lts.getVisibleActions()).sort(),this.curEnvironment=t.getEnvironment(),this.scale=n,this.dimensions=this.dimensions.scale(n),this.createPanel(),this.displayCaption=u,this.caption=i.add.image(0,-this.dimensions.y+4,"sand_clock").setOrigin(.5).setScale(.15),this.add(this.caption),u||this.caption.setVisible(!1),i.add.existing(this),this.setDepth(1)}enable(){this.enabled=!0,this.sizer.setInteractive();let i=this.sizer.getAllChildren();this.caption.setAlpha(1);for(let e=0;e<i.length;e++)i[e].setAlpha(1),i[e]instanceof Ki&&i[e].setInteractive();return this.tickButton.setVisible(!0),this}disable(){this.enabled=!1,this.sizer.disableInteractive(),this.sizer_bg.setStrokeStyle();let i=this.sizer.getAllChildren();this.caption.setAlpha(.9);for(let e=0;e<i.length;e++)i[e].setAlpha(this.disabledAlpha),i[e]instanceof Phaser.GameObjects.Image&&i[e].setAlpha(.9),i[e]instanceof Ki&&i[e].disableInteractive();return this.tickButton.setVisible(!1),this}makeVisible(){return this.activated=!0,this.displayCaption&&this.caption.setVisible(!0),this.sizer.setVisible(!0),this.tickButton.setVisible(!0),this}setPanelPosition(i){this.coordinates=i,this.updatePanel()}makeInvisible(){return this.activated=!1,this.caption.setVisible(!1),this.sizer.setVisible(!1),this.tickButton.setVisible(!1),this}isEnabled(){return this.enabled}getActiveActions(){let i=[];return this.panel_buttons.forEach((e,d)=>{e&&i.push(d.getElement("text").text)}),i}updatePanel(){this.curEnvironment=this.game.getEnvironment(),this.possibleActions=dt.toArray(this.game.lts.getVisibleActions()).sort(),this.destroyPanel(),this.createPanel()}redBlinking(){this.blinkingRectangle.alpha=0,this.scene.tweens.add({targets:this.blinkingRectangle,alpha:.8,ease:Phaser.Math.Easing.Quintic.InOut,duration:160,repeat:1,onComplete:()=>{this.blinkingRectangle.alpha=0}})}getPanelPosition(){return this.coordinates.clone()}destroyPanel(){let i=this.sizer.getAllChildren();for(let e=0;e<i.length;e++)i[e].destroy(!1);this.blinkingRectangle.destroy(),this.sizer.destroy(!1),this.panel_buttons.clear(),this.tickButton.destroy()}swooshAnimation(i){let e=this.scene.tweens.add({targets:this.coordinates,x:i.x,y:i.y,duration:800});this.inFadeTween=!0;let d=this.scene.tweens.add({targets:this.sizer,alpha:0,ease:Phaser.Math.Easing.Cubic.InOut,duration:800,onUpdate:t=>{this.updatePanel(),this.current_alpha=t.getValue()},onComplete:()=>{this.makeInvisible(),this.inFadeTween=!1}});this.tweenList.push(e),this.tweenList.push(d)}stopAllTweens(){for(let i=0;i<this.tweenList.length;i++)this.tweenList[i].complete()}createPanel(){let i=this.dimensions.x;for(let t=2;t<this.possibleActions.length;t++)i+=50*this.scale;this.tickButton=new Of(this.scene,this.coordinates.x+i/2+30*this.scale,this.coordinates.y,"ui_tick_btn",()=>{let t=this.getActiveActions();this.phaserGameController.setEnvironmentAndDoTimeout(new Set(t))},V.COLORS_BLUE_LIGHT.c3,void 0,this.scale),this.tickButton.setDepth(6),this.sizer=new li(this.scene,{x:this.coordinates.x,y:this.coordinates.y,width:i,height:this.dimensions.y,align:"center",space:{item:7*this.scale,top:7*this.scale,bottom:7*this.scale}}).setDepth(6),this.blinkingRectangle=this.scene.add.existing(new $t(this.scene,this.coordinates.x,this.coordinates.y,i,this.dimensions.y+4,10*this.scale,V.COLOR_BORDEAUX)).setDepth(7).setAlpha(0),this.sizer.addBackground(this.scene.add.existing(this.sizer_bg=new $t(this.scene,0,0,2*this.scale,2*this.scale,10*this.scale,V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c4)).setDepth(6)));for(var e=0;e<this.possibleActions.length;e++){let t,s,u=this.curEnvironment.has(this.possibleActions[e])?this.scene.add.existing(new $t(this.scene,0,0,0,0,14*this.scale,V.convertColorToNumber(V.COLORS_GREEN.c1)).setStrokeStyle(4,V.convertColorToNumber(V.COLORS_GREEN.c3)).setDepth(6)):this.scene.add.existing(new $t(this.scene,0,0,0,0,14*this.scale,V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c1)).setDepth(6));this.possibleActions[e]==="a"||this.possibleActions[e]==="b"||this.possibleActions[e]==="c"?(this.possibleActions[e]==="a"?t=this.scene.add.image(0,0,"fire_icon").setScale(.057*this.scale).setDepth(6):this.possibleActions[e]==="b"?t=this.scene.add.image(0,0,"water_icon").setScale(.05*this.scale).setDepth(6):this.possibleActions[e]==="c"&&(t=this.scene.add.image(0,0,"leaf_icon").setScale(.05*this.scale).setDepth(6)),this.scene.add.existing(s=new Ki(this.scene,{width:40*this.scale,height:40*this.scale,background:u,icon:t,text:this.scene.add.text(0,0,this.possibleActions[e],{fontFamily:V.textStyle,fontStyle:"bold"}).setFontSize(22).setResolution(2).setVisible(!1).setSize(0,0),space:{left:5*this.scale,right:5*this.scale,top:5*this.scale,bottom:5*this.scale},align:"center"}).setDepth(6))):this.scene.add.existing(s=new Ki(this.scene,{width:40*this.scale,height:40*this.scale,background:u,text:this.scene.add.text(0,0,this.possibleActions[e],{fontFamily:V.textStyle,fontStyle:"bold"}).setFontSize(22).setResolution(2),space:{left:5*this.scale,right:5*this.scale,top:5*this.scale,bottom:5*this.scale},align:"center"}).setDepth(6)),this.sizer.add(s),this.panel_buttons.set(s,!!this.curEnvironment.has(this.possibleActions[e]))}let d=this.sizer.getAllChildren();for(let t=0;t<d.length;t++){let s=d[t];s instanceof Ki&&(s.setInteractive(),s.on("pointerover",()=>{this.panel_buttons.get(s)?s.getElement("background").setFillStyle(V.convertColorToNumber(V.COLORS_GREEN.c2)).setAlpha(1):s.getElement("background").setFillStyle(V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c2)).setAlpha(.5)}),s.on("pointerup",()=>{this.panel_buttons.set(s,this.panel_buttons.get(s)===void 0?!0:!this.panel_buttons.get(s)),this.panel_buttons.get(s)?(s.getElement("background").setFillStyle(V.convertColorToNumber(V.COLORS_GREEN.c2)).setAlpha(1),s.getElement("background").setStrokeStyle(4,V.convertColorToNumber(V.COLORS_GREEN.c3))):(s.getElement("background").setFillStyle(V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c2)).setAlpha(.5),s.getElement("background").setStrokeStyle())}),s.on("pointerout",()=>{this.panel_buttons.get(s)?s.getElement("background").setFillStyle(V.convertColorToNumber(V.COLORS_GREEN.c1)).setAlpha(1):s.getElement("background").setFillStyle(V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c1)).setAlpha(.5)}),s.on("pointerdown",()=>{this.panel_buttons.get(s)?s.getElement("background").setFillStyle(V.convertColorToNumber(V.COLORS_GREEN.c3)).setAlpha(1):s.getElement("background").setFillStyle(V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c3)).setAlpha(.5)}))}if(this.sizer.layout(),this.enabled||this.disable(),this.activated||this.makeInvisible(),this.inFadeTween){this.caption.setAlpha(1);let t=this.sizer.getAllChildren();for(let s=0;s<t.length;s++)t[s].setAlpha(this.current_alpha)}}}class of{constructor(i){this.game=i,this.consoleLogSignature=console.log}generateGraph(){if(this.game.getPlay().length===0){this.printError("generateGraph: Cannot generate graph for uninitialized game");return}else{this.graph=new Ts((e,d)=>e[0]!==d[0]?1:0);let i=this.graph.addNode([this.game.getPlay()[0],[],0]);this.appendNodesRecursively(i)}}appendNodesRecursively(i){if(this.graphHasNode(i.data[0])){let e=this.game.possibleMoves(i.data[0],!0);for(let d=0;d<e.length;d++){let t=this.graphHasNode(e[d]);if(t!==void 0){t.data[1].find(s=>s.data[0].samePosition(i.data[0]))===void 0&&(t.data[1].push(i),this.graph.addEdge(i.data,t.data,""));continue}else{let s=[];s.push(i),t=this.graph.addNode([e[d],s,0]),this.graph.addEdge(i.data,t.data,""),this.appendNodesRecursively(t)}}}else this.printError("appendNodesRecursively: Called function with node that doesn't exist.")}graphHasNode(i){return this.graph.getNodes().find(t=>t.data[0].samePosition(i))}getWinningRegionOfPosition(i){if(this.graph!==void 0&&this.game.getPlay().length>0){i==null&&(i=this.game.getPlay()[this.game.getPlay().length-1]);let e=this.graphHasNode(i);if(e!==void 0)return Boolean(e.data[2])}}determineWinningRegion(){if(this.graph!==void 0){let i=this.graph.getNodes().sort((d,t)=>d.adjacent.length-t.adjacent.length).filter(d=>d.data[0].activePlayer===Mt.Defender),e=new Map;for(let d=0;d<i.length;d++)e.set(i[d],i[d].adjacent.length),i[d].data[2]=0;for(let d=0;d<i.length;d++)e.get(i[d])===0&&this.propagateAttackerWin(i[d],e)}}propagateAttackerWin(i,e){if(i.data[2]===0){i.data[2]=1;for(let d=0;d<i.data[1].length;d++){let t=this.graphHasNode(i.data[1][d].data[0]);t!==void 0?(e.set(t,e.get(t)-1),(t.data[0].activePlayer===Mt.Attacker||e.get(t)===0)&&this.propagateAttackerWin(t,e)):this.printError("propagateAttackerWin: undefined predecessor (not in num_map)")}}}modifiedBfs(i){if(this.graph!==void 0){let e=this.graph.getNodes();i===void 0&&(i=this.game.getPlay()[0]);let d=e.find(r=>r.data[0].samePosition(i));if(d===void 0||d.adjacent.length===0)return;let t=new Map,s=new Map,u=new Map,n=[];for(let r=0;r<e.length;r++)s.set(e[r],-1),t.set(e[r],!1),u.set(e[r],void 0);for(t.set(d,!0),s.set(d,0),n.push(d);n.length!==0;){let r=n.shift();for(let o=0;o<r.adjacent.length;o++){let c=t.get(r.adjacent[o].node);if(c!==void 0)if(c)s.set(r.adjacent[o].node,1/0),u.get(r.adjacent[o].node)===void 0&&u.set(r.adjacent[o].node,r);else{if(t.set(r.adjacent[o].node,!0),s.set(r.adjacent[o].node,s.get(r)+1),u.set(r.adjacent[o].node,r),r.adjacent[o].node.data[2]===0)return[r.adjacent[o].node,u,s];n.push(r.adjacent[o].node)}else this.printError("modifiedBfs: visited list returned undefined node")}}let a=d,h=Array.from(s.entries());for(let r=0;r<s.size;r++)s.get(a)<h[r][1]&&(a=h[r][0]);return[a,u,s]}else this.printError("modifiedBfs: graph uninitialized")}getNextMove(i){if(i===void 0&&this.game.getPlay().length>0&&(i=this.game.getPlay()[this.game.getPlay().length-1]),i===void 0){this.printError("getNextMove: current Position undefined");return}let e=this.modifiedBfs(i);if(e!==void 0&&e[0]!==void 0){let d=e[0],t=[],s=!1;for(;d!==void 0;)if(t.push(d),d=e[1].get(d),d!==void 0&&d.data[0].samePosition(i))if(s){t.push(d);break}else s=!0;return t[t.length-2].data[0]}else{let d=this.graphHasNode(i);if(d!==void 0&&d.adjacent.length>0){let t=Math.floor(Math.random()*d.adjacent.length);return this.printError("getNextMove: bfs returned undefined but there are adjacent nodes"),d.adjacent[t].node.data[0]}console.log("getNextMove: could not find any next move");return}}getShortestPathString(i){let e="";for(let d=0;d<i.length;d++)e=e.concat(i[d].data[0].toString()+", ");return e}BFS_attacker(i){if(this.graph!==void 0){let e=this.graph.getNodes();i===void 0&&(i=this.game.getPlay()[0]);let d=e.find(h=>h.data[0].samePosition(i));if(d===void 0||d.adjacent.length===0)return;let t=new Map,s=new Map,u=new Map,n=[],a=[];for(let h=0;h<e.length;h++)s.set(e[h],-1),t.set(e[h],!1),u.set(e[h],void 0);for(t.set(d,!0),s.set(d,0),n.push(d);n.length!==0;){let h=n.shift();h.adjacent.length===0&&Boolean(h.data[2])===!0&&a.push(h);for(let r=0;r<h.adjacent.length;r++){let o=t.get(h.adjacent[r].node);o!==void 0?o?u.get(h.adjacent[r].node)===void 0&&u.set(h.adjacent[r].node,h):(t.set(h.adjacent[r].node,!0),s.set(h.adjacent[r].node,s.get(h)+1),u.set(h.adjacent[r].node,h),n.push(h.adjacent[r].node)):this.printError("Bfs_attacker: visited list returned undefined node")}}return[a,u,s]}else this.printError("Bfs_attacker: graph uninitialized")}getShortestPathFromBfs(i){i===void 0&&this.game.getPlay().length>0&&(i=this.game.getPlay()[this.game.getPlay().length-1]);let e=this.BFS_attacker(i);if(e!==void 0){let d=e[0],t=e[2],s=1/0,u=-1;for(let r=0;r<d.length;r++)t.get(d[r])<s&&(u=r,s=t.get(d[r]));let n=[],a=d[u],h=e[1];for(;n.push(a),!a.data[0].samePosition(i);)a=h.get(a);return n}}launchModifiedMinMax(i){if(this.graph!==void 0){let e=this.graph.getNodes();i===void 0&&(i=this.game.getPlay()[0]);let d=e.find(a=>a.data[0].samePosition(i));if(d===void 0||d.adjacent.length===0)return;let t=[],s=this.minMaxAttackerCost(d,t);console.log("ShortestMinMaxPath moves number: "+s);let u=this.minMax(d,t),n=[];for(let a=0;a<u.path.length;a++)u.path[a]!==void 0?n.push(u.path[a].data[0]):n.push(void 0);return n.reverse()}else this.printError("modifiedMinMax: graph uninitialized")}minMax(i,e){if(e.find(d=>d.data[0].samePosition(i.data[0])))return{cost:1/0,path:[]};if(i.adjacent.length===0){let d=[];return d.push(i),{cost:1,path:d}}if(i.data[0].activePlayer===Mt.Defender){let d=0,t=[];for(let s=0;s<i.adjacent.length;s++){if(Boolean(i.adjacent[s].node.data[2])===!1)continue;e.push(i);let u=this.minMax(i.adjacent[s].node,e);e.pop(),u.cost>d&&(d=u.cost,t=u.path)}return t.push(i),{cost:d+1,path:t}}else if(i.data[0].activePlayer===Mt.Attacker){let d=1/0,t=[];for(let s=0;s<i.adjacent.length;s++){if(Boolean(i.adjacent[s].node.data[2])===!1)continue;e.push(i);let u=this.minMax(i.adjacent[s].node,e);e.pop(),u.cost<d&&(d=u.cost,t=u.path)}return t.push(i),{cost:d+1,path:t}}else return this.printError("minMax: error occured that should not be possible :D"),{cost:-1,path:[]}}minMaxAttackerCost(i,e){if(e.find(d=>d.data[0].samePosition(i.data[0])))return 1/0;if(i.adjacent.length===0)return i.data[0].activePlayer===Mt.Attacker?1:0;if(i.data[0].activePlayer===Mt.Defender){let d=0;for(let t=0;t<i.adjacent.length;t++){if(Boolean(i.adjacent[t].node.data[2])===!1)continue;e.push(i);let s=this.minMaxAttackerCost(i.adjacent[t].node,e);e.pop(),s>d&&(d=s)}return d}else if(i.data[0].activePlayer===Mt.Attacker){let d=1/0;for(let t=0;t<i.adjacent.length;t++){if(Boolean(i.adjacent[t].node.data[2])===!1)continue;e.push(i);let s=this.minMaxAttackerCost(i.adjacent[t].node,e);e.pop(),s<d&&(d=s)}return d+1}else return this.printError("minMax: error occured that should not be possible :D"),-1}calculateBlunderScore(i){if(this.graph!==void 0){if(i.adjacent.length===0)return i.data[0].activePlayer===Mt.Defender?(i.data[2]=1,1):(this.printError("calculateBlunderScore: Attacker stuck but this should not be possible (Symmetry Move)"),i.data[2]=0,0);if(i.data[0].activePlayer===Mt.Attacker)for(let e=0;e<i.adjacent.length;e++);}else this.printError("calculateBlunderScore: graph not initialized")}max(i,e){return i>e?i:e}min(i,e){return i<=e?i:e}printGraph(){console.log("-------------------- GAME MOVE GRAPH --------------------"),console.log("Graph: <Vertex>: <(edgeLabel, destinationNode)> ..."),this.graph.getNodes().forEach(i=>{let e="Vertex "+i.data[0].toString()+", score = "+i.data[2]+": ";for(let d=0;d<i.adjacent.length;d++)e=e.concat(i.adjacent[d].node.data[0].toString(),", ");e=e.concat("            predecessors: ");for(let d=0;d<i.data[1].length;d++)e=e.concat(i.data[1][d].data[0].toString()+", ");console.log(e)})}disableConsole(){console.log=()=>{}}enableConsole(){console.log=this.consoleLogSignature}printError(i){try{throw i}catch(e){console.log(e)}}}class bO extends Phaser.GameObjects.Container{constructor(i,e,d,t=()=>{console.log("replay action")},s=()=>{console.log("next level action")}){super(i,i.renderer.width/2,i.renderer.height/2),this.dimensions=new Phaser.Math.Vector2(this.scene.renderer.width/3.8,230),this.setSize(this.dimensions.x,this.dimensions.y),this.movesNeeded=d,this.stars=e,this.replay_action=t,this.next_level_action=s,this.textStyle={fontFamily:V.textStyle,color:V.COLORPACK_1.black},this.coordinates=new Phaser.Math.Vector2(i.renderer.width/2,i.renderer.height/2),this.sizer=this.createPanel(),i.add.existing(this)}createPanel(){let i=new rt(this.scene,{x:this.coordinates.x,y:this.coordinates.y,width:this.dimensions.x,height:this.dimensions.y,orientation:"y",space:{item:5,top:10,bottom:10,left:7,right:7}});return i.addBackground(this.scene.add.existing(new $t(this.scene,0,0,2,2,10,V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c4)))),i.add(this.scene.add.text(0,0,"You win!",this.textStyle).setFontSize(30).setResolution(2).setFontStyle("bold"),{align:"center"}),i.add(this.scene.add.text(0,0,"Moves needed: "+this.movesNeeded,this.textStyle).setResolution(2).setFontSize(20),{padding:{top:10,bottom:3}}),this.stars===1?i.add(this.scene.add.text(0,0,"There is room for improvement!",this.textStyle).setResolution(2).setFontSize(20)):this.stars===2?i.add(this.scene.add.text(0,0,"Well done!",this.textStyle).setResolution(2).setFontSize(20)):this.stars===3&&i.add(this.scene.add.text(0,0,"Perfect score!",this.textStyle).setResolution(2).setFontSize(20)),i.add(this.createStarsContainer(this.stars),{padding:{top:3,bottom:3}}),i.add(new rt(this.scene).add(this.replay_btn=new sa(this.scene,0,0,this.replay_action,V.COLORS_BLUE_LIGHT.c3,V.COLORS_BLUE_LIGHT.c1,"Replay",this.textStyle),{padding:{top:10,right:7}}).add(this.next_level_btn=new sa(this.scene,0,0,this.next_level_action,V.COLORS_BLUE_LIGHT.c3,V.COLORS_BLUE_LIGHT.c1,"Next Level",this.textStyle),{padding:{top:10,left:7}})),i.setDepth(8),i.layout(),i}createStarsContainer(i){let e=new rt(this.scene,{orientation:"x"}),d=.08;for(let t=0;t<i&&t<3;t++)e.add(this.scene.add.image(0,0,"star").setScale(d));for(let t=i;t<3;t++)e.add(this.scene.add.image(0,0,"star_empty").setScale(d));return e}destroyPopup(){this.replay_btn.destroyButton(),this.next_level_btn.destroyButton(),this.sizer.destroy(),this.destroy()}}class GO extends Phaser.GameObjects.Container{constructor(i,e=()=>{console.log("replay action")}){super(i,i.renderer.width/2,i.renderer.height/2),this.dimensions=new Phaser.Math.Vector2(this.scene.renderer.width/4.4,130),this.setSize(this.dimensions.x,this.dimensions.y),this.textStyle={fontFamily:V.textStyle,color:V.COLORPACK_1.black},this.replay_action=e,this.coordinates=new Phaser.Math.Vector2(i.renderer.width/2,i.renderer.height/2),this.sizer=this.createPanel(),i.add.existing(this)}createPanel(){let i=new rt(this.scene,{x:this.coordinates.x,y:this.coordinates.y,width:this.dimensions.x,height:this.dimensions.y,orientation:"y",space:{item:10,top:17,bottom:17,left:7,right:7}});return i.addBackground(this.scene.add.existing(new $t(this.scene,0,0,2,2,10,V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c4)))),i.add(this.scene.add.text(0,0,"You lose",this.textStyle).setFontSize(30).setResolution(2).setFontStyle("bold"),{align:"center"}),i.add(this.scene.add.text(0,0,"No (winning) moves left",this.textStyle).setFontSize(20).setResolution(2),{align:"center",padding:{bottom:10}}),i.add(new rt(this.scene).add(this.replay_btn=new sa(this.scene,0,0,this.replay_action,V.COLORS_BLUE_LIGHT.c3,V.COLORS_BLUE_LIGHT.c1,"Try again",this.textStyle))),i.setDepth(8),i.layout(),i}destroyPopup(){this.replay_btn.destroyButton(),this.sizer.destroy(),this.destroy()}}class sa extends Phaser.GameObjects.Container{constructor(i,e,d,t=()=>{},s,u=s,n,a){super(i,e,d),this.dimensions=new Phaser.Math.Vector2(140,35),this.setSize(this.dimensions.x,this.dimensions.y),this.background=i.add.existing(new $t(i,0,0,this.dimensions.x,this.dimensions.y,10,V.convertColorToNumber(s))),s!==u&&this.background.setStrokeStyle(4,V.convertColorToNumber(u)),this.text=i.add.text(0,0,n,a).setOrigin(.5).setResolution(2).setFontSize(22).setFontStyle("bold"),this.add(this.background),this.add(this.text),i.add.existing(this),this.setDepth(1),this.setInteractive(),this.on("pointerover",()=>{this.scale=1.1,this.background.setFillStyle(V.convertColorToNumber(s)).setAlpha(.8)}),this.on("pointerdown",()=>{this.scale=.95,this.background.setFillStyle(V.convertColorToNumber(s)).setAlpha(.6)}),this.on("pointerup",()=>{t(),this.scale=1.1,this.background.setFillStyle(V.convertColorToNumber(s)).setAlpha(.8)}),this.on("pointerout",()=>{this.scale=1,this.background.setFillStyle(V.convertColorToNumber(s)).setAlpha(1)})}destroyButton(){this.text.destroy(),this.background.destroy(),this.destroy()}}class wt{constructor(i,e=V.lts_xy_offset,d=V.first_coordinates,t=V.second_coordinates,s){this.left_coordinates=d,this.right_coordinates=t,this.offset_between_vertices=e,this.scene=i,this.stateBtns=new Map;let u=new Be;this.game=new je("","",u),this.nextProcessAfterTimeout="",this.current_hightlights=[],this.player_icons=[],this.game_initialized=!1,this.debug=!1,this.level_description=s,this.num_moves_for_stars=[0,0],this.num_moves=0}addState(i,e,d,t){if(this.game.lts.addState(i),e===0){const s=new Un(this.scene,this.left_coordinates.x+this.offset_between_vertices.x*t,this.left_coordinates.y+this.offset_between_vertices.y*d,()=>{this.encapsulateDoMove(i)===-1&&s.redBlinking()},i,this.debug);this.stateBtns.set(i,s)}else if(e===1){const s=new Un(this.scene,this.right_coordinates.x+this.offset_between_vertices.x*t,this.right_coordinates.y+this.offset_between_vertices.y*d,()=>{this.encapsulateDoMove(i)===-1&&s.redBlinking()},i,this.debug);this.stateBtns.set(i,s)}else console.log("PhaserGameController: addState: lts_num has illegal parameter")}addTransition(i,e,d){let t=this.stateBtns.get(i),s=this.stateBtns.get(e);t!==void 0&&s!==void 0?(this.game.lts.addTransition(i,e,d),i===e&&(d==="a"||d==="c")?new Rf(this.scene,t.x,t.y,s.x,s.y,"arrow_tail","arrow_middle","arrow_head",d,.2,75):new Lf(this.scene,t.x,t.y,s.x,s.y,d,1)):this.printError("addTransition: illegal arguments: "+i+", "+e)}startGame(i,e,d,t=!0,s=!0,u=[0,0,0]){if(this.game.startNewGame(e,d)===0){this.createEnvironmentField(),this.game.setReactive(t),this.game.setBisimilar(s),this.game_initialized=!0,this.createHighlights(e,d),this.createReactiveElements(),this.environment_panel.disable(),this.movable_environment_panel.disable(),t||(this.environment_container.setVisible(!1),this.environment_panel.makeInvisible()),this.createCurrentPositionField(),this.createPossibleMovesField(),t||s||this.switch_button.setVisible(!1),this.debug||(this.environment_container.setVisible(!1),this.current_position.setVisible(!1),this.possible_moves_text.makeInvisible()),this.ai_controller=new of(this.game),this.ai_controller.generateGraph(),this.ai_controller.determineWinningRegion();for(let n=0;n<u.length;n++)u[n]>=0&&(this.num_moves_for_stars[n]=u[n]);this.num_moves=0}}setEnvironmentAndDoTimeout(i){this.setEnvironment(i,!1);let e=this.doMove(this.nextProcessAfterTimeout,!1);if(e===-1){let d=this.game.getPlay()[this.game.getPlay().length-1];d instanceof Ft||d instanceof Pt?this.game.setEnvironment(d.environment,!0):(d instanceof Lt||d instanceof xt)&&this.game.resetEnvironment(!0),this.movable_environment_panel.redBlinking(),this.scene.time.delayedCall(400,()=>{this.movable_environment_panel.disable(),this.movable_environment_panel.makeInvisible(),this.environment_panel.updatePanel(),this.movable_environment_panel.updatePanel()})}else this.movable_environment_panel.disable(),this.environment_panel.updatePanel(),this.movable_environment_panel.updatePanel(),this.movable_environment_panel.swooshAnimation(this.environment_panel.getPanelPosition());return e}encapsulateDoMove(i,e=!1){let d=this.game.getPlay()[this.game.getPlay().length-1];if(d.activePlayer===Mt.Defender)return console.log("Not player's turn"),-1;{this.movable_environment_panel.isEnabled()&&(this.movable_environment_panel.disable(),this.movable_environment_panel.makeInvisible());let t=this.game.lts.getActionBetweenTwoProcesses(d.process1,i);if((d instanceof Lt||Ft)&&!e&&t!==void 0&&t===V.TIMEOUT_ACTION){this.movable_environment_panel.disable(),this.movable_environment_panel.makeInvisible();let s=this.stateBtns.get(d.process1),u=this.stateBtns.get(i);if(s!==void 0&&u!==void 0){this.nextProcessAfterTimeout=i;let n=new le.Math.Vector2(u.x-s.x,u.y-s.y),a=new le.Math.Vector2(s.x,s.y).add(n.clone().scale(.5));this.movable_environment_panel.stopAllTweens(),this.movable_environment_panel.setPanelPosition(a),this.movable_environment_panel.enable(),this.movable_environment_panel.makeVisible(),this.scene.background.setInteractive()}else this.printError("encapsulateDoMove: cannot display environment panel, buttons were not found")}else return this.doMove(i,e)}}doMove(i,e=!1){let d=this.game.getPlay()[this.game.getPlay().length-1],t=this.game.possibleMoves(),s,u=V.NO_ACTION;if(t.length===0)return this.printError("doMove: no possible moves from current position"),-1;if(this.game.lts.hasTransition(d.process1,i)||(e=!0),d instanceof Lt||d instanceof Ft){if(e?(s=t.filter(n=>d.isSymmetryMove(n)&&n.process1===i),u=V.NO_ACTION):(s=t.filter(n=>n.process1===i),s.length!==0&&(u=s[0].previousAction)),s.length===0)return this.printError("doMove: no possible move to process "+i),-1}else if(d instanceof xt||d instanceof Pt){if(s=t.filter(n=>n.process2===i),s.length===0)return this.printError("doMove: no possible move to process "+i),-1;u=d.previousAction}else return this.printError("doMove: current position type unknown"),-1;if(s.length>1&&console.log("doMove: multiple moves are possible for given arguments, TODO: implement strategy to choose correct one"),this.game.performMove(u,s[0])===-1)return console.log("move not possible: "+u+", "+s.toString()),-1;if(e&&(this.player_icons[0].toggleFlipX(),this.player_icons[2].toggleFlipX(),this.scene.events.emit("clickedSymmetryButton")),this.updateVisualsAfterMove(),d=this.game.getPlay()[this.game.getPlay().length-1],t=this.game.possibleMoves(void 0,!0),this.num_moves++,d.activePlayer===Mt.Defender)if(t.length===0)this.launchEndScreen(!0);else{let n=this.ai_controller.getNextMove(d);n!==void 0&&(this.game.performMove(d.previousAction,n)===-1?this.printError("doMove: Could not execute move the defender AI said to be possible: "+n.toString()):(this.updateVisualsAfterMove(),t=this.game.possibleMoves(void 0,!0),t.length===0&&this.launchEndScreen(!1)))}return e||(this.scene.events.emit("clickedLtsButton"),this.scene.events.emit("clickedButton",this.stateBtns.get(i))),0}launchEndScreen(i){if(i){let e=parseInt(localStorage.getItem("currentLevel"));if(e!==void 0&&e>=0&&e<=17){console.log("The attacker won the game!");let d=1;for(let n=0;n<this.num_moves_for_stars.length&&n<2;n++)this.num_moves<=this.num_moves_for_stars[n]&&(d=n+2);let t=localStorage.getItem("levels");if(t===null)this.printError("launchEndScreen: retrieving levels from storage returned null");else{let n=JSON.parse(t);n[e].stars<d&&(n[e].stars=d),e<17&&n[e+1].state===!1&&(n[e+1].state=!0),localStorage.setItem("levels",JSON.stringify(n))}let s=this.scene.add.rectangle(this.scene.renderer.width/2,this.scene.renderer.height/2,this.scene.renderer.width+1,this.scene.renderer.height+1,0,.7).setOrigin(.5).setDepth(7),u=new bO(this.scene,d,this.num_moves,()=>{this.scene.fade(!1,()=>{u.destroyPopup(),s.destroy(),console.clear(),this.scene.scene.stop("GUIScene"),this.scene.scene.restart()})},()=>{this.scene.fade(!1,()=>{localStorage.setItem("currentLevel",JSON.stringify(e+1)),console.clear(),u.destroyPopup(),s.destroy(),this.scene.scene.stop("GUIScene"),this.scene.scene.start(this.getSceneKeyFromIndex(e+1))})})}else{this.printError("launchEndScreen: currenLevel: "+e);let d=this.scene.add.text(this.scene.renderer.width/2,this.scene.renderer.height/2,"The attacker won the game!",{fontFamily:V.textStyle,color:V.COLORS_GREEN.c2,fontStyle:"bold",stroke:"#0",strokeThickness:3}).setFontSize(50).setDepth(4).setOrigin(.5).setInteractive().on("pointerdown",()=>{d.destroy()});return}}else{console.log("The defender wins the game!");let e=this.scene.add.rectangle(this.scene.renderer.width/2,this.scene.renderer.height/2,this.scene.renderer.width+1,this.scene.renderer.height+1,0,.7).setOrigin(.5).setDepth(4),d=new GO(this.scene,()=>{this.scene.fade(!1,()=>{d.destroyPopup(),e.destroy(),console.clear(),this.scene.scene.stop("GUIScene"),this.scene.scene.restart()})})}}printAIGraph(){this.ai_controller!==void 0&&this.ai_controller!==null?this.ai_controller.printGraph():this.printError("printAIGraph: AI not initialized.")}printAttackerShortestPath(){if(this.ai_controller!==void 0&&this.ai_controller!==null){let i=this.ai_controller.getShortestPathFromBfs();if(i!==void 0){let e=0,d="",t;for(let s=0;s<i.length;s++)(i[s].data[0].activePlayer===Mt.Defender||t===Mt.Attacker&&i[s].data[0].activePlayer===Mt.Attacker)&&e++,t=i[s].data[0].activePlayer,d=d.concat(i[s].data[0].toString()+", ");d=d.concat("; moves: "+e),console.log(d)}else this.printError("printAttackerShortestPath: path undefined")}else this.printError("printAttackerShortestPath: AI not initialized.")}printAttackerShortestMinMaxPath(){if(this.ai_controller!==void 0&&this.ai_controller!==null){let i=this.ai_controller.launchModifiedMinMax();if(i!==void 0){let e=0,d="",t;for(let s=0;s<i.length;s++)(i[s].activePlayer===Mt.Defender||t===Mt.Attacker&&i[s].activePlayer===Mt.Attacker)&&e++,t=i[s].activePlayer,d=d.concat(i[s].toString()+", ");d=d.concat("; moves: "+e+"; pathlen: "+(i.length-1)),console.log(d)}else this.printError("printAttackerShortestMindMaxPath: returned path is undefined")}else this.printError("printAttackerShortestMinMaxPath: AI not initialized.")}getSceneKeyFromIndex(i){switch(i){case 0:return"Sim_Level1";case 1:return"Sim_Level2";case 2:return"Sim_Level3";case 3:return"Sim_Level4";case 4:return"Bisim_Level1";case 5:return"Bisim_Level2";case 6:return"Bisim_Level3";case 7:return"Bisim_Level4";case 8:return"ReBisim_Level1";case 9:return"ReBisim_Level2";case 10:return"ReBisim_Level3";case 11:return"ReBisim_Level4";case 12:return"ReBisim_Level5";case 13:return"ReBisim_Level6";case 14:return"ReBisim_Level7";case 15:return"ReBisim_Level8";case 16:return"ReBisim_Level9";case 17:return"ReBisim_Level10";default:this.printError("getSceneKeyFromIndex: Unknown index "+i);return}}updateVisualsAfterMove(){if(this.updateHightlights(),this.game.isReactive()&&(this.updateEnvironmentContainer(),this.environment_panel.updatePanel(),this.movable_environment_panel.updatePanel()),this.debug&&(this.updateCurrentPositionField(),this.updatePossibleMovesField()),this.game.getPlay()[this.game.getPlay().length-1].activePlayer===Mt.Defender?this.level_description.setTurn(!1):this.level_description.setTurn(!0),this.ai_controller.getWinningRegionOfPosition()===!1&&this.replayPulseTween===void 0){let d=this.scene.scene.get("GUIScene").replay_btn,t=d.scale;this.replayPulseTween=this.scene.tweens.add({targets:d,duration:700,scale:t+.15,ease:le.Math.Easing.Quadratic.InOut,yoyo:!0,loop:-1})}}setGameMode(i=!0,e=!0){this.game.setReactive(i),this.game.setBisimilar(e),this.environment_container.setVisible(this.game.isReactive()),this.environment_panel.setVisible(this.game.isReactive()),this.game.isBisimilar()||this.game.isReactive()?this.switch_button.setVisible(!0):this.switch_button.setVisible(!1)}setEnvironmentFromString(i){if(this.game.isReactive()){let e=i.split(/(?!$)/u),d=new Set;for(let t=0;t<e.length;t++)e[t].charCodeAt(0)>=97&&e[t].charCodeAt(0)<=122&&e[t]!=="t"&&d.add(e[t].charAt(0));this.game.setEnvironment(d),this.updateEnvironmentContainer(),this.environment_panel.updatePanel(),this.movable_environment_panel.updatePanel(),this.updatePossibleMovesField()}else this.printError("setEnvironmentFromString: was called but game is not reactive")}setEnvironment(i,e=!0){this.game.isReactive()?(this.game.setEnvironment(i,!e),this.game_initialized&&e&&(this.updateEnvironmentContainer(),this.environment_panel.updatePanel(),this.movable_environment_panel.updatePanel(),this.updatePossibleMovesField())):this.printError("setEnvironment: was called but game is not reactive")}createHighlights(i,e){if(this.game_initialized){let d=this.stateBtns.get(i);if(d!==void 0)this.current_hightlights[0]=this.scene.add.circle(d.x,d.y,36).setDepth(0),this.current_hightlights[0].setStrokeStyle(4,V.convertColorToNumber(V.COLORS_GREEN.c2)).setVisible(this.debug);else{this.printError("startGame: "+i+" is not in stateBtns list.");return}let t=this.stateBtns.get(e);if(t!==void 0)this.current_hightlights[1]=this.scene.add.circle(t.x,t.y,36).setDepth(0),this.current_hightlights[1].setStrokeStyle(4,V.convertColorToNumber(V.COLORS_RED.c4)).setVisible(this.debug);else{this.printError("startGame: "+e+" is not in stateBtns list.");return}if(this.scene.anims.create({key:"witch_idle_animation",frames:this.scene.anims.generateFrameNumbers("witch_idle",{frames:[0,1,2,3,4,5]}),frameRate:6,repeat:-1})!==!1){this.player_icons[0]=this.scene.add.sprite(d.x+1,d.y+15,"witch_idle").setScale(.95).setOrigin(.5).setDepth(4),this.player_icons[0].play("witch_idle_animation");const n=this.scene.make.graphics({x:d.x,y:d.y,add:!1});n.fillStyle(16777215),n.arc(0,0,29,0,Math.PI*2),n.fillPath().setDepth(6),this.player_icons[1]=n;let a=n.createGeometryMask();this.player_icons[0].mask=a}else this.printError("createHighlights: could not generate player animation");if(this.scene.anims.create({key:"wizard_idle_animation",frames:this.scene.anims.generateFrameNumbers("purple_wizard",{frames:[0,1,2,3,4,5,6,7]}),frameRate:6,repeat:-1})!==!1){this.player_icons[2]=this.scene.add.sprite(t.x-5,t.y-38,"purple_wizard").setScale(.95).setOrigin(.5).setDepth(4),this.player_icons[2].play("wizard_idle_animation").toggleFlipX();const n=this.scene.make.graphics({x:t.x,y:t.y,add:!1});n.fillStyle(16777215),n.arc(0,0,29,0,Math.PI*2),n.fillPath().setDepth(6),this.player_icons[3]=n;let a=n.createGeometryMask();this.player_icons[2].mask=a}else this.printError("createHighlights: could not generate player animation")}}createReactiveElements(){this.switch_button=new Af(this.scene,this.scene.renderer.width/2,this.scene.renderer.height/2,"ui_swap_btn",()=>{this.encapsulateDoMove(this.game.getCurrent(1),!0)}).setScale(.14),this.environment_panel=new ml(this.scene,this.scene.renderer.width/2,this.scene.renderer.height-100,this.game,this,!0,1),this.movable_environment_panel=new ml(this.scene,0,0,this.game,this,!1,.7).makeInvisible(),this.scene.background.on("pointerdown",()=>{this.movable_environment_panel.disable(),this.movable_environment_panel.makeInvisible(),this.movable_environment_panel.update(),this.scene.background.disableInteractive()})}createEnvironmentField(){let i=new le.Math.Vector2(this.scene.renderer.width*3.15/4,150);const e=this.scene.add.text(i.x,i.y,"Environment: ",{fontFamily:V.textStyle}).setFontSize(20);let d=this.scene.add.text(i.x+140,i.y,this.game.getEnvironmentString(),{fontFamily:V.textStyle,fixedWidth:150,fixedHeight:36}).setFontSize(20);this.environment_container=this.scene.add.container(0,0,[d,e]);let t=new Xf(d);d.setInteractive().on("pointerup",()=>{t.open(void 0,s=>{this.setEnvironmentFromString(s.text)})})}pulsateNextMoveButtons(){if(this.game_initialized&&this.game.getPlay().length>0){let i=this.game.possibleMoves(void 0,!0),e=[];i.forEach(s=>{e.push(s.process1)});let d=e.filter((s,u,n)=>n.indexOf(s)===u),t=1;for(let s=0;s<d.length;s++){let u=this.stateBtns.get(d[s]);u!==void 0?(t=u.scale,this.scene.tweens.add({targets:u,duration:700,scale:t+.1,ease:le.Math.Easing.Quadratic.InOut,yoyo:!0,loop:-1})):this.printError("pulsateNextMoveButtons: could not get button from label: "+d[s])}this.scene.events.on("clickedLtsButton",()=>{let u=this.scene.tweens.getAllTweens().filter(n=>n.targets[0]instanceof Un);console.log(u.length);for(let n=0;n<u.length;n++){let a=u[n].targets[0];u[n].complete(),a.setScale(t)}this.scene.events.off("clickedLtsButton"),this.pulsateNextMoveButtons()})}}pulsateSymmetrySwapBtn(){if(this.game_initialized&&this.switch_button!==void 0){let i=this.switch_button.scale,e=this.scene.tweens.add({targets:this.switch_button,duration:700,scale:i+.04,ease:le.Math.Easing.Quadratic.InOut,yoyo:!0,loop:-1});this.scene.events.on("clickedSymmetryButton",()=>{e.complete(),this.switch_button.setScale(i),this.scene.events.off("clickedSymmetryButton")})}}pulsateProcessBtn(i){if(this.game_initialized){let e=this.stateBtns.get(i);if(e===void 0){this.printError("pulsateProcessBtn: button "+i+" not found");return}let d=e.scale,t=this.scene.tweens.add({targets:e,duration:700,scale:d+.1,ease:le.Math.Easing.Quadratic.InOut,yoyo:!0,loop:-1});this.scene.events.on("clickedButton",()=>{console.log("test"),t.complete(),e.setScale(d),this.scene.events.off("clickedButton")},e)}}createCurrentPositionField(){if(this.game.getPlay().length!==0){let i=new le.Math.Vector2(this.scene.renderer.width*3.15/4,200),e=this.scene.add.text(i.x,i.y,"Position: ",{fontFamily:V.textStyle}).setFontSize(20),d=this.scene.add.text(i.x+140,i.y,this.game.getPlay()[this.game.getPlay().length-1].toString(),{fontFamily:V.textStyle}).setFontSize(18);this.current_position=this.scene.add.container(0,0,[d,e])}}createPossibleMovesField(){let i=new le.Math.Vector2(this.scene.renderer.width*3.15/4,this.scene.renderer.height-300);this.possible_moves_text=new DO(this.scene,i.x,i.y+40,"panel","",void 0,void 0,void 0,250,230),this.updatePossibleMovesField()}updateEnvironmentContainer(){this.game.getPlay().length!==0?this.environment_container.getAll().length===2?this.environment_container.first.text=this.game.getEnvironmentString():this.printError("updateEnvironmentContainer: environment_field not initialized"):this.printError("game not initialized")}updateCurrentPositionField(){this.game.getPlay().length!==0&&this.current_position.getAll().length===2?this.current_position.first.text=this.game.getPlay()[this.game.getPlay().length-1].toString():this.printError("game not initialized")}updatePossibleMovesField(){if(this.game.getPlay().length!==0){let i=this.game.getPossibleMovesString(void 0,void 0,!0);this.possible_moves_text.updatePanel(i)}else this.printError("game not initialized")}updateHightlights(){let i=this.game.getCurrent(0),e=this.stateBtns.get(i),d=this.game.getCurrent(1),t=this.stateBtns.get(d);e!==void 0&&t!==void 0&&(this.current_hightlights[0].setPosition(e.x,e.y),this.current_hightlights[1].setPosition(t.x,t.y),e.x>this.scene.renderer.width/2?(this.player_icons[0].setPosition(e.x-1,e.y+15),this.player_icons[2].setPosition(t.x+5,t.y-38)):(this.player_icons[0].setPosition(e.x+1,e.y+15),this.player_icons[2].setPosition(t.x-5,t.y-38)),this.player_icons[1].setPosition(e.x,e.y),this.player_icons[3].setPosition(t.x,t.y))}printError(i){try{throw i}catch(e){console.log(e)}}}class Dt extends Phaser.GameObjects.Container{constructor(i,e,d,t,s,u=!0){super(i,e,d),this.level_x=i.add.text(0,0,"Level "+t,{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setOrigin(.5).setFontSize(25).setResolution(2).setStroke("#A3A3A3",1),this.level_type=i.add.text(0,40,s,{fontFamily:V.textStyle,color:V.COLORPACK_1.white,fontStyle:"bold"}).setOrigin(.5).setFontSize(33).setResolution(2).setStroke("#A3A3A3",1),this.enemy_turn=i.add.text(0,85,"Opponent's turn",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setOrigin(.4,.5).setFontSize(30).setResolution(2).setStroke("#A3A3A3",1),this.player_turn=i.add.text(0,85,"Your turn",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setOrigin(.4,.5).setFontSize(30).setResolution(2).setStroke("#A3A3A3",1),this.img_player=i.add.image(this.player_turn.x-90,this.player_turn.y+10,"witch_idle",0).setOrigin(.5),this.img_opponent=i.add.image(this.enemy_turn.x-135,this.enemy_turn.y-40,"purple_wizard",0).setFlipX(!0).setScale(1);const n=this.scene.make.graphics({x:this.x+this.img_player.x,y:this.y+this.player_turn.y,add:!1});n.fillStyle(16777215),n.arc(0,0,20,0,Math.PI*2),n.fillPath().setDepth(6);let a=n.createGeometryMask();this.img_player.mask=a;const h=this.scene.make.graphics({x:this.x+this.img_opponent.x+1,y:this.y+this.enemy_turn.y,add:!1});h.fillStyle(16777215),h.arc(0,0,20,0,Math.PI*2),h.fillPath().setDepth(6);let r=h.createGeometryMask();this.img_opponent.mask=r,this.add(this.level_x),this.add(this.level_type),this.add(this.enemy_turn),this.add(this.player_turn),this.add(this.img_player),this.add(this.img_opponent),i.add.existing(this),this.setDepth(2),this.setTurn(u)}setTurn(i=!0){i?(this.img_opponent.setVisible(!1),this.enemy_turn.setVisible(!1),this.img_player.setVisible(!0),this.player_turn.setVisible(!0)):(this.img_opponent.setVisible(!0),this.enemy_turn.setVisible(!0),this.img_player.setVisible(!1),this.player_turn.setVisible(!1))}}class NO extends Ct{constructor(){super("DemoScene")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,new Mi(this,V.UI_offset,"ui_leftarrow_btn",()=>{this.fade(!1,()=>{this.scene.start("ParallaxScene")})},"Back"),this.setupLTS()}update(i,e){}setupLTS(){let i=V.first_coordinates,e=V.second_coordinates,d=V.lts_xy_offset,t=new Dt(this,this.renderer.width/2,50,"Demo","Reactive Bisimulation",!0),s=new wt(this,d,i,e,t);s.addState("p0",0,0,0),s.addState("p1",0,1,-1),s.addState("p2",0,1,0),s.addState("p3",0,1,1),s.addState("p4",0,2,-1),s.addState("p5",0,2,0),s.addState("p6",0,2,1),s.addState("p7",0,3,-1),s.addState("p8",0,3,1),s.addTransition("p0","p1","b"),s.addTransition("p0","p2",V.TIMEOUT_ACTION),s.addTransition("p0","p3",V.TIMEOUT_ACTION),s.addTransition("p2","p4","a"),s.addTransition("p2","p5",V.HIDDEN_ACTION),s.addTransition("p3","p6",V.HIDDEN_ACTION),s.addTransition("p5","p7","b"),s.addTransition("p5","p8","a"),s.addTransition("p6","p8","a"),s.addState("q0",1,0,0),s.addState("q1",1,1,-1),s.addState("q2",1,1,0),s.addState("q3",1,1,1),s.addState("q4",1,2,-1),s.addState("q5",1,2,0),s.addState("q6",1,2,1),s.addState("q7",1,3,-1),s.addState("q8",1,3,1),s.addTransition("q0","q1","b"),s.addTransition("q0","q2",V.TIMEOUT_ACTION),s.addTransition("q0","q3",V.TIMEOUT_ACTION),s.addTransition("q2","q4","a"),s.addTransition("q2","q6",V.HIDDEN_ACTION),s.addTransition("q3","q5",V.HIDDEN_ACTION),s.addTransition("q5","q7","b"),s.addTransition("q5","q8","a"),s.addTransition("q6","q8","a"),s.startGame(this,"p0","q0"),s.printAIGraph()}}class zO extends Ct{constructor(){super("ParallaxScene")}preload(){this.load.image("parallax0","assets/background_parallax/Free-Horizontal-Game-Backgrounds/PNG/game_background_3/layers/sky.png"),this.load.image("parallax1","assets/background_parallax/Free-Horizontal-Game-Backgrounds/PNG/game_background_3/layers/clouds_1.png"),this.load.image("parallax2","assets/background_parallax/Free-Horizontal-Game-Backgrounds/PNG/game_background_3/layers/rocks.png"),this.load.image("parallax3","assets/background_parallax/Free-Horizontal-Game-Backgrounds/PNG/game_background_3/layers/clouds_2.png"),this.load.image("parallax4","assets/background_parallax/Free-Horizontal-Game-Backgrounds/PNG/game_background_3/layers/ground_1.png"),this.load.image("parallax5","assets/background_parallax/Free-Horizontal-Game-Backgrounds/PNG/game_background_3/layers/ground_2.png"),this.load.image("parallax6","assets/background_parallax/Free-Horizontal-Game-Backgrounds/PNG/game_background_3/layers/ground_3.png")}create(){this.images=[],this.images[0]=this.add.tileSprite(0,0,0,0,"parallax0").setOrigin(0,0).setScrollFactor(0,1),this.images[1]=this.add.tileSprite(0,0,0,0,"parallax1").setOrigin(0,0).setScrollFactor(0,1),this.images[2]=this.add.tileSprite(0,0,0,0,"parallax2").setOrigin(0,0).setScrollFactor(0,1),this.images[3]=this.add.tileSprite(0,0,0,0,"parallax3").setOrigin(0,0).setScrollFactor(0,1),this.images[4]=this.add.tileSprite(0,0,0,0,"parallax4").setOrigin(0,0).setScrollFactor(0,1),this.images[5]=this.add.tileSprite(0,0,0,0,"parallax5").setOrigin(0,0).setScrollFactor(0,1),this.images[6]=this.add.tileSprite(0,0,0,0,"parallax6").setOrigin(0,0).setScrollFactor(0,1);for(let i=0;i<this.images.length;i++){let e=this.renderer.height/this.images[i].height;this.images[i].scale=e}this.fade(!0,void 0,500),this.scene.launch("MainMenuScene")}update(i,e){const d=this.cameras.main,t=.5;d.scrollX+=t;for(let s=0;s<this.images.length;s++){const u=this.images[s];u.tilePositionX=this.cameras.main.scrollX*.2*s}}}class VO extends Ct{constructor(){super("LevelMapScene"),this.zoomTime=600,this.zoomAmount=.4,this.levelObjects=[]}preload(){this.load.image("world_map","assets/LevelMap/LevelMap.png"),this.load.image("world_map_blur","assets/LevelMap/LevelMap_blur.png"),this.load.spritesheet("blue_button","assets/LevelMap/blue_button.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("orange_button","assets/LevelMap/orange_button.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("red_button","assets/LevelMap/red_button.png",{frameWidth:16,frameHeight:16})}create(){this.cameras.main.zoom=1-this.zoomAmount,this.tweens.add({targets:this.cameras.main,ease:Phaser.Math.Easing.Sine.Out,duration:this.zoomTime,zoom:1});let i=this.add.image(0,0,"world_map").setOrigin(0,0).setDepth(0),e=this.add.image(0,0,"world_map_blur").setOrigin(0,0).setDepth(0);i.scale=this.renderer.width/i.width,e.scale=this.renderer.width/i.width,this.fadeImageOut(e,this.zoomTime),this.fade(!0);let d=JSON.parse(localStorage.getItem("levels"));d===null&&(d=[{state:!0,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0}]),localStorage.setItem("levels",JSON.stringify(d)),new Mi(this,1.5*V.UI_offset,"ui_leftarrow_btn",()=>{this.fade(!1,()=>{this.scene.start("ParallaxScene")})},"Back"),this.input.keyboard.on("keydown-ESC",s=>{this.fade(!1,()=>{this.scene.start("ParallaxScene")})}),this.levelObjects=[],this.add.text(600,this.renderer.height-150,"Simulation",{fontFamily:V.textStyle,color:V.COLORPACK_1.white,fontStyle:"bold italic"}).setOrigin(.5).setFontSize(45).setStroke("#000000",4).setResolution(2),this.levelObjects.push(new Bt(this,350,this.renderer.height-70,"blue_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","0"),this.scene.start("Sim_Level1")})},"Level 1.1")),this.levelObjects.push(new Bt(this,160,this.renderer.height-150,"blue_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","1"),this.scene.start("Sim_Level2")})},"Level 1.2")),this.levelObjects.push(new Bt(this,350,this.renderer.height-210,"blue_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","2"),this.scene.start("Sim_Level3")})},"Level 1.3")),this.levelObjects.push(new Bt(this,520,this.renderer.height-290,"blue_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","3"),this.scene.start("Sim_Level4")})},"Level 1.4")),this.add.text(300,40,"Bisimulation",{fontFamily:V.textStyle,color:V.COLORPACK_1.white,fontStyle:"bold italic"}).setOrigin(.5).setFontSize(45).setStroke("#000000",4).setResolution(2),this.levelObjects.push(new Bt(this,270,this.renderer.height/2+45,"orange_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","4"),this.scene.start("Bisim_Level1")})},"Level 2.1")),this.levelObjects.push(new Bt(this,200,this.renderer.height/2-50,"orange_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","5"),this.scene.start("Bisim_Level2")})},"Level 2.2")),this.levelObjects.push(new Bt(this,95,187,"orange_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","6"),this.scene.start("Bisim_Level3")})},"Level 2.3")),this.levelObjects.push(new Bt(this,290,200,"orange_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","7"),this.scene.start("Bisim_Level4")})},"Level 2.4").disable()),this.add.text(this.renderer.width-300,110,"Reactive Bisimulation",{fontFamily:V.textStyle,color:V.COLORPACK_1.white,fontStyle:"bold italic"}).setOrigin(.5).setFontSize(45).setStroke("#000000",4).setResolution(2),this.levelObjects.push(new Bt(this,440,150,"red_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","8"),this.scene.start("ReBisim_Level1")})},"Level 3.1")),this.levelObjects.push(new Bt(this,540,240,"red_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","9"),this.scene.start("ReBisim_Level2")})},"Level 3.2")),this.levelObjects.push(new Bt(this,720,220,"red_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","10"),this.scene.start("ReBisim_Level3")})},"Level 3.3")),this.levelObjects.push(new Bt(this,800,350,"red_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","11"),this.scene.start("ReBisim_Level4")})},"Level 3.4").disable()),this.levelObjects.push(new Bt(this,930,255,"red_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","12"),this.scene.start("ReBisim_Level5")})},"Level 3.5")),this.levelObjects.push(new Bt(this,1120,210,"red_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","13"),this.scene.start("ReBisim_Level6")})},"Level 3.6").disable()),this.levelObjects.push(new Bt(this,1045,360,"red_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","14"),this.scene.start("ReBisim_Level7")})},"Level 3.7").disable()),this.levelObjects.push(new Bt(this,1125,510,"red_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","15"),this.scene.start("ReBisim_Level8")})},"Level 3.8").disable()),this.levelObjects.push(new Bt(this,1160,655,"red_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","16"),this.scene.start("ReBisim_Level9")})},"Level 3.9").disable()),this.levelObjects.push(new Bt(this,973,682,"red_button",()=>{this.fade(!1,()=>{localStorage.setItem("currentLevel","17"),this.scene.start("ReBisim_Level10")})},"Level 3.10"));let t=0;for(let s=0;s<this.levelObjects.length;s++)d[s].state?(t=s,this.levelObjects[s].enable()):this.levelObjects[s].disable(),this.levelObjects[s].setStars(d[s].stars);this.curLevelBtn=this.levelObjects[t],this.curLevelBtn!==void 0&&(this.pulseTween=this.tweens.add({targets:this.curLevelBtn,duration:800,scale:1.15,ease:Phaser.Math.Easing.Quadratic.InOut,yoyo:!0,loop:-1})),this.input.keyboard.on("keydown-T",s=>{s.shiftKey&&this.toggleAllLevels()}),this.input.keyboard.on("keydown-R",s=>{s.shiftKey&&this.resetAllProgress()})}update(i,e){}toggleAllLevels(){let i=JSON.parse(localStorage.getItem("levels")),e=!1;for(let d=0;d<i.length;d++)if(i[d].state===!1){e=!0;break}if(e){localStorage.setItem("levelsBeforeToggle",JSON.stringify(i));for(let d=0;d<i.length;d++)i[d].state=!0;localStorage.setItem("levels",JSON.stringify(i))}else{let d=localStorage.getItem("levelsBeforeToggle");if(d!==null){let t=JSON.parse(d);localStorage.removeItem("levelsBeforeToggle"),localStorage.setItem("levels",JSON.stringify(t))}}this.scene.restart()}resetAllProgress(){let i=[{state:!0,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0},{state:!1,stars:0}];localStorage.removeItem("levelsBeforeToggle"),localStorage.setItem("levels",JSON.stringify(i)),this.scene.restart()}}class YO extends Phaser.GameObjects.Container{constructor(i,e){switch(super(i,i.renderer.width/2,i.renderer.height/2),this.coordinates=new Phaser.Math.Vector2(i.renderer.width/2,i.renderer.height/2),e){case 0:this.dimensions=new Phaser.Math.Vector2(this.scene.renderer.width/1.8,this.scene.renderer.height/2.3);break;case 1:this.dimensions=new Phaser.Math.Vector2(this.scene.renderer.width/1.8,this.scene.renderer.height/2.1);break;case 2:this.dimensions=new Phaser.Math.Vector2(this.scene.renderer.width/1.2,this.scene.renderer.height/1.6);break;case 3:this.dimensions=new Phaser.Math.Vector2(this.scene.renderer.width/1.26,this.scene.renderer.height/1.34),this.coordinates=new Phaser.Math.Vector2(i.renderer.width/2,i.renderer.height/2+35);break;default:this.dimensions=new Phaser.Math.Vector2(this.scene.renderer.width/1.8,this.scene.renderer.height/2.3)}this.setSize(this.dimensions.x,this.dimensions.y),this.textStyle={fontFamily:V.textStyle,color:V.COLORPACK_1.black},this.grey_bg=this.scene.add.rectangle(this.scene.renderer.width/2,this.scene.renderer.height/2,this.scene.renderer.width+1,this.scene.renderer.height+1,0,.4).setOrigin(.5).setDepth(7).setInteractive(),this.sizer=this.createPanel(e),this.exit_btn=new UO(this.scene,this.coordinates.x+this.dimensions.x/2-22,this.coordinates.y-this.dimensions.y/2+22,()=>{this.fadeOut(()=>{this.destroyPopup(),i.input.removeListener("pointerup",void 0,this)})},this.textStyle),this.fadeIn(),this.scene.time.delayedCall(100,()=>{this.scene.input.addListener("pointerup",()=>{this.fadeOut(()=>{this.destroyPopup(),i.input.removeListener("pointerup",void 0,this)})},this)})}createPanel(i){let e=new rt(this.scene,{x:this.coordinates.x,y:this.coordinates.y,width:this.dimensions.x,height:this.dimensions.y,orientation:"y",space:{item:5,top:15,bottom:5,left:15,right:15}});switch(e.addBackground(this.scene.add.existing(new $t(this.scene,0,0,2,2,10,V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c4)))),i){case 0:e.add(this.scene.add.text(0,0,"Simulation Rules",this.textStyle).setFontSize(30).setResolution(2).setFontStyle("bold"),{align:"center"});break;case 1:e.add(this.scene.add.text(0,0,"Bisimulation Rules",this.textStyle).setFontSize(30).setResolution(2).setFontStyle("bold"),{align:"center"});break;case 2:case 3:e.add(this.scene.add.text(0,0,"Reactive Bisimulation Rules",this.textStyle).setFontSize(30).setResolution(2).setFontStyle("bold"),{align:"center"});break;default:e.add(this.scene.add.text(0,0,"Unknown Gamemode Rules :)",this.textStyle).setFontSize(30).setResolution(2).setFontStyle("bold"),{align:"center"})}e.add(this.scene.add.text(0,0,"Goal: Make the defender unable to simulate your spells",this.textStyle).setFontSize(22).setResolution(2),{padding:{top:10,bottom:10}});let d=this.scene.add.image(0,0,"witch_icon").setOrigin(.5).setScale(.7);e.add(new rt(this.scene,{orientation:"x"}).add(d,{padding:{right:5}}).add(this.scene.add.text(0,0,"Attacker Rules:",this.textStyle).setFontSize(26).setResolution(2).setFontStyle("bold")),{align:"left"});let t=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"    \u2022 Cast ",this.textStyle).setFontSize(22).setResolution(2)).add(this.scene.add.image(0,0,"fire_arrow_icon").setOrigin(.5).setScale(.08)).add(this.scene.add.text(0,0,", ",this.textStyle).setFontSize(22).setResolution(2)).add(this.scene.add.image(0,0,"water_arrow_icon").setOrigin(.5).setScale(.08)).add(this.scene.add.text(0,0," or ",this.textStyle).setFontSize(22).setResolution(2)).add(this.scene.add.image(0,0,"plant_arrow_icon").setOrigin(.5).setScale(.08)).add(this.scene.add.text(0,0," basic magic spells ",this.textStyle).setFontSize(22).setResolution(2).setFontStyle("bold"));if(e.add(t,{align:"left"}),i>=1){let u=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"    \u2022 Use ",this.textStyle).setFontSize(22).setResolution(2)).add(this.scene.add.image(0,0,"ui_swap_btn").setOrigin(.5).setScale(.07)).add(this.scene.add.text(0,0," to swap sides",this.textStyle).setFontSize(22).setResolution(2));e.add(u,{align:"left"})}if(i>=2){let u=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"    \u2022 Cast ",this.textStyle).setFontSize(22).setResolution(2)).add(this.scene.add.image(0,0,"timeout_arrow_icon").setOrigin(.5).setScale(.08)).add(this.scene.add.text(0,0," time magic spell",this.textStyle).setFontSize(22).setResolution(2).setFontStyle("bold")),n=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"        \u2022 condition: Disable all basic spells that are possible in the current state",this.textStyle).setFontSize(20).setResolution(2)),a=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"        \u2022 consequence: disabled basic spells ",this.textStyle).setFontSize(20).setResolution(2)).add(this.scene.add.text(0,0,"won't be possible after ",this.textStyle).setFontSize(20).setResolution(2).setFontStyle("bold")).add(this.scene.add.text(0,0,"this spell,",this.textStyle).setFontSize(20).setResolution(2)),h=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"                       unless ",this.textStyle).setFontSize(20).setResolution(2).setFontStyle("bold")).add(this.scene.add.text(0,0,"no basic spell is possible by the selection ",this.textStyle).setFontSize(20).setResolution(2)).add(this.scene.add.text(0,0,"(idling)",this.textStyle).setFontSize(20).setResolution(2).setFontStyle("italic"));e.add(u,{align:"left"}),e.add(n,{align:"left",padding:{top:5}}),e.add(a,{align:"left"}),e.add(h,{align:"left"})}if(i>=3){let u=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"    \u2022 Cast ",this.textStyle).setFontSize(22).setResolution(2)).add(this.scene.add.image(0,0,"tau_arrow_icon").setOrigin(.5).setScale(.08)).add(this.scene.add.text(0,0," portal magic spell",this.textStyle).setFontSize(22).setResolution(2).setFontStyle("bold")),n=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"        \u2022 basic spell that cannot be disabled",this.textStyle).setFontSize(20).setResolution(2)),a=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"        \u2022 transfers ",this.textStyle).setFontSize(20).setResolution(2).setFontStyle("bold")).add(this.scene.add.text(0,0,"disabled-spell-properties from previous time magic to the next state",this.textStyle).setFontSize(20).setResolution(2));e.add(u,{align:"left",padding:{top:5}}),e.add(n,{align:"left",padding:{top:5}}),e.add(a,{align:"left"})}let s=this.scene.add.image(0,0,"purple_wizard_icon",0).setOrigin(.5).setScale(.7);return e.add(new rt(this.scene,{orientation:"x"}).add(s,{padding:{right:5}}).add(this.scene.add.text(0,0,"Defender Rules:",this.textStyle).setFontSize(26).setResolution(2).setFontStyle("bold")),{align:"left",padding:{top:10}}),e.add(new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"    \u2022 Simulates ",this.textStyle).setFontSize(22).setResolution(2)).add(this.scene.add.text(0,0,"magic spells ",this.textStyle).setFontSize(22).setResolution(2).setFontStyle("italic")).add(this.scene.add.text(0,0,"of the attacker",this.textStyle).setFontSize(22).setResolution(2)),{align:"left"}),e.setDepth(8),e.layout(),e}destroyPopup(){this!==void 0&&(this.exit_btn.destroyButton(),this.sizer.destroy(),this.grey_bg.destroy(),this.destroy())}fadeOut(i=()=>{}){this.grey_bg.alpha=1,this.sizer.alpha=1,this.exit_btn.alpha=1,this.scene.tweens.add({targets:this.grey_bg,duration:250,alpha:0}),this.scene.tweens.add({targets:this.exit_btn,duration:250,alpha:0}),this.scene.tweens.add({targets:this.sizer,duration:250,alpha:0,onComplete:()=>{i()}})}fadeIn(){this.grey_bg.alpha=0,this.sizer.alpha=0,this.exit_btn.alpha=0,this.scene.tweens.add({targets:this.grey_bg,duration:250,alpha:1}),this.scene.tweens.add({targets:this.exit_btn,duration:250,alpha:1}),this.scene.tweens.add({targets:this.sizer,duration:250,alpha:1})}}class UO extends Phaser.GameObjects.Container{constructor(i,e,d,t=()=>{},s){super(i,e,d),this.dimensions=new Phaser.Math.Vector2(50,50),this.default_scale=.8;let u=V.COLORS_BLUE_LIGHT.c3;this.setSize(this.dimensions.x,this.dimensions.y),this.icon=i.add.image(0,0,"ui_cross_btn").setScale(.25).setTint(V.convertColorToNumber(V.COLORPACK_FINAL.white)),this.background=i.add.circle(0,0,20,V.convertColorToNumber(u)).setOrigin(.5).setAlpha(1),this.add(this.background),this.add(this.icon),i.add.existing(this),this.setDepth(9).setScale(this.default_scale),this.setInteractive(),this.on("pointerover",()=>{this.scale=this.default_scale,this.background.fillColor=V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c2)}),this.on("pointerdown",()=>{this.scale=this.default_scale-.1}),this.on("pointerup",()=>{t(),i.input.removeListener("pointerup",void 0,"popUpListener"),this.scale=this.default_scale,this.background.fillColor=V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c2)}),this.on("pointerout",()=>{this.scale=this.default_scale,this.background.fillColor=V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c3)})}destroyButton(){this.destroy()}}class XO extends Ct{constructor(){super("GUIScene")}init(){}preload(){}create(i){this.otherRunningScene=i.otherRunningScene;let e=new Mi(this,3.5*V.UI_offset,"ui_home_btn",()=>{this.fade(!1,()=>{console.clear(),this.toHome()})},"Home"),d=new Mi(this,1.5*V.UI_offset,"ui_level_map_btn",()=>{this.fade(!1,()=>{console.clear(),this.toLevelMap()})},"Map");this.input.keyboard.on("keydown-ESC",u=>{this.fade(!1,()=>{console.clear(),this.toLevelMap()})}),this.replay_btn=new Mi(this,this.renderer.width-3.5*V.UI_offset,"ui_replay_btn",()=>{this.fade(!1,()=>{console.clear(),this.restartLevel()})},"Restart");let t=new Mi(this,this.renderer.width-1.5*V.UI_offset,"ui_questionmark_btn",()=>{new YO(this,i.levelType)},"Rules",!1),s=[];s.push(e,d,this.replay_btn,t);for(let u=0;u<s.length;u++)this.fadeImage(s[u],void 0,V.camFadeSpeed),this.fadeImage(s[u].text,void 0,V.camFadeSpeed)}update(i,e){}toHome(){this.otherRunningScene!==void 0&&this.otherRunningScene!==null&&this.scene.stop(this.otherRunningScene),this.scene.start("ParallaxScene")}toLevelMap(){this.otherRunningScene!==void 0&&this.otherRunningScene!==null&&this.scene.stop(this.otherRunningScene),this.scene.start("LevelMapScene")}restartLevel(){this.otherRunningScene!==void 0&&this.otherRunningScene!==null&&this.scene.stop(this.otherRunningScene),this.scene.start(this.otherRunningScene)}}class WO{testReactiveBisimgame0(){let i=this.getReactiveBisimLTS();const e=new je("0","0",i);console.log("----------------- TESTS -----------------"),e.setEnvironment(new Set(["c"])),console.log("isMovePossible(0-b->P ): "+e.isMovePossible("b",new xt("P","0'","b"))+", expected: false (environment doesn't allow)"),e.resetEnvironment(),console.log("isMovePossible(0-b->P ): "+e.isMovePossible("b",new xt("P","0'","b"))+", expected: true"),console.log("Timeout action: "+e.isMovePossible(V.TIMEOUT_ACTION,new Pt("2","0'",V.TIMEOUT_ACTION,e.getEnvironment()))+", expected false"),i.addVisibleActionToA("c"),e.resetEnvironment(),console.log("Timeout action, wrong nextNode: "+e.isMovePossible(V.TIMEOUT_ACTION,new xt("2","0'",V.TIMEOUT_ACTION))+", expected false"),console.log("possible moves:"),console.log(e.possibleMoves()),e.performMove("b",new xt("P","0'","b")),console.log(e.possibleMoves())}testIsMovePossible(){let i=this.getReactiveLTS01();console.log("----------------- isMovePossible TESTS -----------------"),console.log("----------------- Timeout Simulation Challenge -----------------"),i.startNewGame("p0","q0",new Lt("p0","q0")),console.log("Current position: "+i.getPlay()[i.getPlay().length-1].toString()),console.log("isMovePossible(p0-t->p1): "+i.getMoveStringFromCode(i.isMovePossible("t",new Pt("p1","q0","t",new Set("b"))))+", should not be possible, b still in environment"),console.log("isMovePossible(p0-t->p1): "+i.getMoveStringFromCode(i.isMovePossible("t",new Pt("p1","q0","t",new Set("a"))))+", should be possible"),console.log("----------------- Restricted Simulation Challenge -----------------"),i.startNewGame("p1","q1",new Ft("p1","q1",i.getEnvironment())),console.log("Current position: "+i.getPlay()[i.getPlay().length-1].toString()),console.log("isMovePossible(p1 -a-> p3): "+i.getMoveStringFromCode(i.isMovePossible("a",new xt("p3","q1","a")))+", should work, because initialsEmpty"),i.startNewGame("p1","q1",new Ft("p1","q1",new Set("a"))),console.log("Current position: "+i.getPlay()[i.getPlay().length-1].toString()),console.log("isMovePossible(p1 -a-> p3): "+i.getMoveStringFromCode(i.isMovePossible("a",new xt("p3","q1","a")))+", should work, environment allows action"),console.log("isMovePossible(p1 -b-> p4): "+i.getMoveStringFromCode(i.isMovePossible("b",new xt("p4","q1","b")))+", should not work, environment doesn't allow action"),console.log("----------------- Invisible Simulation Challenge -----------------"),console.log("----------------- Timeouted Timeout Simulation Challenge -----------------"),console.log("----------------- Restricted Symmetry Moves -----------------")}testStarsAlgorithm(){let i=this.getSymmetryLTS2(),e=new of(i);e.generateGraph(),e.determineWinningRegion(),e.printGraph()}getSymmetryLTS(){let i=new Be;return i.addState("p0"),i.addState("p1"),i.addTransition("p0","p1","a"),i.addState("q0"),i.addState("q1"),i.addState("q2"),i.addTransition("q0","q1","a"),i.addTransition("q0","q2","b"),new je("p0","q0",i,!1,!0)}getSymmetryLTS2(){let i=new Be;return i.addState("p0"),i.addState("p1"),i.addState("p2"),i.addState("p3"),i.addTransition("p0","p1","a"),i.addTransition("p0","p2","a"),i.addTransition("p1","p3","b"),i.addState("q0"),i.addState("q1"),i.addState("q2"),i.addTransition("q0","q1","a"),i.addTransition("q1","q2","b"),new je("p0","q0",i,!1,!0)}getReactiveLTS01(){let i=new Be;return i.addState("p0"),i.addState("p1"),i.addState("p2"),i.addState("p3"),i.addState("p4"),i.addTransition("p0","p1",V.TIMEOUT_ACTION),i.addTransition("p0","p2","b"),i.addTransition("p1","p3","a"),i.addTransition("p1","p4","b"),i.addState("q0"),i.addState("q1"),i.addState("q2"),i.addState("q3"),i.addState("q4"),i.addTransition("q0","q1",V.TIMEOUT_ACTION),i.addTransition("q0","q2","b"),i.addTransition("q1","q3","a"),i.addTransition("q1","q4","a"),new je("p0","q0",i,!0,!0)}getReactiveLTS00(){let i=new Be;return i.addState("p0"),i.addState("p1"),i.addState("p2"),i.addTransition("p0","p1",V.TIMEOUT_ACTION),i.addTransition("p0","p2","b"),i.addState("q0"),i.addState("q1"),i.addState("q2"),i.addTransition("q0","q1",V.TIMEOUT_ACTION),i.addTransition("q0","q2","b"),new je("p0","q0",i,!0,!0)}getAttackerWinningLTS(){let i=new Be;return i.addState("p0"),i.addState("p1"),i.addState("p2"),i.addTransition("p0","p1","a"),i.addTransition("p1","p2","b"),i.addState("q0"),i.addState("q1"),i.addState("q2"),i.addTransition("q0","q1","a"),i.addTransition("q1","q2","a"),new je("p0","q0",i,!0,!0)}getReactiveBisimLTS(){const i=new Be;return i.addState("0"),i.addState("P"),i.addState("2"),i.addState("3"),i.addState("Q"),i.addState("5"),i.addState("6"),i.addState("R"),i.addState("S"),i.addTransition("0","P","b"),i.addTransition("0","2",V.TIMEOUT_ACTION),i.addTransition("0","3",V.TIMEOUT_ACTION),i.addTransition("2","Q","a"),i.addTransition("2","5",V.HIDDEN_ACTION),i.addTransition("3","6",V.HIDDEN_ACTION),i.addTransition("5","R","b"),i.addTransition("5","S","a"),i.addTransition("6","S","a"),i.addState("0'"),i.addState("P'"),i.addState("2'"),i.addState("3'"),i.addState("Q'"),i.addState("5'"),i.addState("6'"),i.addState("R'"),i.addState("S'"),i.addTransition("0'","P'","b"),i.addTransition("0'","2'",V.TIMEOUT_ACTION),i.addTransition("0'","3'",V.TIMEOUT_ACTION),i.addTransition("2'","Q'","a"),i.addTransition("2'","6'",V.HIDDEN_ACTION),i.addTransition("3'","5'",V.HIDDEN_ACTION),i.addTransition("5'","R'","b"),i.addTransition("5'","S'","a"),i.addTransition("6'","S'","a"),i}testSetOps(){let i=new Set(["1","2","3","4","5"]),e=new Set(["2","3","6","7","8"]),d=new Set(["3","6"]),t=new Set(["3","6"]);console.log("isSubset: "+dt.isSubset(d,e)+", expected: true"),console.log("isSubset: "+dt.isSubset(d,i)+", expected: false"),console.log("isSubsetEq: "+dt.isSubsetEq(d,e)+", expected: true"),console.log("isSubsetEq: "+dt.isSubsetEq(d,t)+", expected: true"),console.log("isSubsetEq: "+dt.isSubsetEq(d,i)+", expected: false"),console.log("intersect: "+dt.toArray(dt.intersect(i,e))+", expected: [2, 3]"),console.log("union: "+dt.toArray(dt.union(i,e))+", expected: [1, 2, 3, 4, 5, 6, 7, 8]"),console.log("difference: "+dt.toArray(dt.difference(i,e))+", expected: [1, 4, 5]")}testLTSController(){const i=new Be;i.addState("0"),i.addState("1"),i.addState("2"),i.addState("3"),i.addState("4"),i.addTransition("0","1","a"),i.addTransition("0","2","t"),i.addTransition("1","3","tau"),i.addTransition("2","4","b"),i.addTransition("0","3","tau"),i.addTransition("0","4","b"),i.addTransition("1","3","t"),i.setCurrentState("0"),console.log("current: "+i.current),i.graph.print(),console.log("-------------------------------------------------------"),console.log("performing actions: 0-a->1 (possible), 1-a->2 (not possible), 1-tau->3 (possible)"),i.performAction("0","1","a"),i.performAction("1","2","a"),i.performAction("1","3","tau"),console.log("current: "+i.current),i.setCurrentState("3",1),console.log("set current to 3: "),console.log(i.current),i.graph.print(),console.log(i.getActionsAndDestinations("0"))}testGraph(){const i=new Ts(this.comparator0);i.addNode(0),i.addNode(1),i.addNode(2),i.addNode(3),i.addNode(4),i.addEdge(0,1,"a"),i.addEdge(0,2,"t"),i.addEdge(1,3,"tau"),i.addEdge(2,4,"b"),i.addEdge(0,3,"tau"),i.addEdge(0,4,"b"),i.addEdge(1,3,"t"),console.log("NodeAmount: "+i.getNodeAmount(),+", expected: 5"),console.log("vertices: "+i.getNodes().toString())+"",console.log("edges: "+i.getEdgesAsString()),i.print(),console.log("-------------------------------------------------------"),i.removeNode(3),i.removeEdge(0,4,"b"),i.print()}comparator0(i,e){return i<e?-1:i>e?1:0}}class HO extends Phaser.Scene{constructor(){super("TestScene")}preload(){}create(){new WO().testStarsAlgorithm()}}class $O extends Ct{constructor(){super("CreditsScene"),this.clickedBtn=!1}preload(){}create(){this.clickedBtn=!1,this.toFadeIn=[];let i=new Mi(this,1.5*V.UI_offset,"ui_leftarrow_btn",()=>{this.tweens.killAll();for(let s=0;s<this.toFadeIn.length-1;s++)this.fadeImageOut(this.toFadeIn[s],s*10);this.fadeImageOut(this.toFadeIn[this.toFadeIn.length-1],(this.toFadeIn.length-1)*10,!0,()=>{this.scene.start("MainMenuScene")})},"Back");this.toFadeIn.push(i),this.toFadeIn.push(i.text),this.toFadeIn.push(this.add.text(this.renderer.width/2,50,"Credits",{fontFamily:V.textStyle,fontStyle:"bold",color:V.COLORPACK_1.white}).setResolution(2).setFontSize(45).setOrigin(.5)),this.toFadeIn.push(this.add.text(this.renderer.width/2-10,100,"This game is part of a bachelor project",{fontFamily:V.textStyle,fontStyle:"bold",color:V.COLORPACK_1.white}).setResolution(2).setFontSize(30).setOrigin(.5)),this.toFadeIn.push(this.getLinkIcon("https://github.com/eloinoel/ReactiveBisimilarityGame").setPosition(980,100));let e=this.add.image(this.renderer.width/2+80,this.renderer.height-50,"logo").setOrigin(.5).setScale(.3),d=this.add.text(this.renderer.width/2-70,this.renderer.height-50,"Built with",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(20).setOrigin(.5).setDepth(1).setResolution(2);this.toFadeIn.push(d),this.toFadeIn.push(e);let t=new BO(this,this.renderer.width/2,this.renderer.height/2+40,this.renderer.width-50,this.renderer.height-250);this.toFadeIn.push(t.getSlider()[0]),this.toFadeIn.push(t.getSlider()[1]),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"Design and Programming:                  Eloi Sandt",{fontFamily:V.textStyle,fontStyle:"bold",color:V.COLORPACK_1.white}).setResolution(2).setFontSize(30))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"Consulting:                              Benjamin Bisping",{fontFamily:V.textStyle,fontStyle:"bold",color:V.COLORPACK_1.white}).setResolution(2).setFontSize(30))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"Influences:",{fontFamily:V.textStyle,fontStyle:"bold",color:V.COLORPACK_1.white}).setResolution(2).setFontSize(30))),this.toFadeIn.push(t.addText(this.add.text(0,0,"    - Similar Game ",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.getLinkIcon("https://concurrency-theory.org/rvg-game/"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"                               Dominik Peacock",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(23))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"    - Adopted Levels",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.add.text(0,0,"        Level 2.1, 2.3                                Dominik Peacock",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(23))),this.toFadeIn.push(t.addNewLine(this.getLinkIcon("https://concurrency-theory.org/rvg-game/"))),this.toFadeIn.push(t.addText(this.add.text(0,0,"        Level 2.4                                     Luca Tesei",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(23))),this.toFadeIn.push(t.addNewLine(this.getLinkIcon("http://didattica.cs.unicam.it/old/lib/exe/fetch.php?media=didattica:magistrale:rtpsv:ay_1718:ex_and_solutions_bisim_hml_weak_fixpoint.pdf"))),this.toFadeIn.push(t.addText(this.add.text(0,0,"        Level 3.7                                     Rob van Glabbeek",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(23))),this.toFadeIn.push(t.addNewLine(this.getLinkIcon("https://link.springer.com/content/pdf/10.1007/s00236-022-00417-1.pdf"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"Assets:",{fontFamily:V.textStyle,fontStyle:"bold",color:V.COLORPACK_1.white}).setResolution(2).setFontSize(30))),this.toFadeIn.push(t.addText(this.add.text(0,0,"Blue Witch",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.getLinkIcon("https://9e0.itch.io/witches-pack"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"                                       9E0",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.add.text(0,0,"Purple Wizard",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.getLinkIcon("https://hajileee.itch.io/hajileees-fantasy-characters-pack-magic-set"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"                                    Eli Cuaycong",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.add.text(0,0,"Parallax Forest Background",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.getLinkIcon("https://free-game-assets.itch.io/free-horizontal-game-backgrounds"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"                       Free Game Assets",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.add.text(0,0,"Magic State Buttons",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.getLinkIcon("https://wenrexa.itch.io/ui-different02"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"                              Wenrexa",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.add.text(0,0,"Dark Sky Level Background",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.getLinkIcon("https://unsplash.com/photos/G9i_plbfDgk"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"                        Jeremy Bishop",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.add.text(0,0,"Level Map Background",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.getLinkIcon("https://pin.it/1XkedXH"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"                             Smiling Dog",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.add.text(0,0,"UI Buttons",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.getLinkIcon("https://www.gamedeveloperstudio.com/graphics/viewgraphic.php?page-name=Icons-for-games-game-asset-pack&item=195s4a451z1x9n2a6u"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"                                       Robert Brooks",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.add.text(0,0,"Highscore Stars",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.getLinkIcon("https://simple-wares.itch.io/basic-bars-buttons-asset-pack/"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"                                  Simple Wares",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.add.text(0,0,"Water and Fire Icon",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.getLinkIcon("https://www.flaticon.com/"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"                              Freepik",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.add.text(0,0,"Leaf Icon",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.getLinkIcon("https://www.flaticon.com/"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"                                        Pixel Perfect",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.add.text(0,0,"Transition Arrows",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.getLinkIcon("https://www.flaticon.com/free-icon/next_2413462"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"                                iconixar",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.add.text(0,0,"Sand Clock",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.getLinkIcon("https://www.flaticon.com/free-icon/sand-clock_2838686"))),this.toFadeIn.push(t.addNewLine(this.add.text(0,0,"                                       Freepik",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(24))),this.toFadeIn.push(t.addText(this.add.text(0,0,"Other Assets                                          Eloi Sandt",{fontFamily:V.textStyle,color:V.COLORPACK_1.white}).setResolution(2).setFontSize(23)));for(let s=0;s<this.toFadeIn.length;s++)this.fadeImage(this.toFadeIn[s],s*20);this.input.keyboard.on("keydown-ESC",s=>{this.tweens.killAll();for(let u=0;u<this.toFadeIn.length-1;u++)this.fadeImageOut(this.toFadeIn[u],u*10,!1);this.fadeImageOut(this.toFadeIn[this.toFadeIn.length-1],(this.toFadeIn.length-1)*10,!0,()=>{this.scene.start("MainMenuScene")})})}getLinkIcon(i){let e=.335,d=this.add.image(0,0,"link_icon").setInteractive().setScale(e).setTint(V.convertColorToNumber(V.COLORPACK_1.white));d.tintFill=!0;let t=()=>{let s=window.open(i,"_blank");s&&s.focus?s.focus():s||(window.location.href=i)};return d.on("pointerup",t),d.on("pointerout",()=>{d.setScale(e)}),d.on("pointerover",()=>{d.setScale(e+.1)}),d}update(i,e){}}class ts extends Phaser.GameObjects.Container{constructor(i,e){switch(super(i,i.renderer.width/2,i.renderer.height/2),this.coordinates=new Phaser.Math.Vector2(i.renderer.width/2,i.renderer.height/2),e){case 0:this.dimensions=new Phaser.Math.Vector2(this.scene.renderer.width/1.8,this.scene.renderer.height/3.5);break;case 1:this.dimensions=new Phaser.Math.Vector2(this.scene.renderer.width/1.8,this.scene.renderer.height/3.5);break;case 2:this.dimensions=new Phaser.Math.Vector2(this.scene.renderer.width/1.35,this.scene.renderer.height/2);break;case 3:this.dimensions=new Phaser.Math.Vector2(this.scene.renderer.width/1.26,this.scene.renderer.height/2.2);break;default:this.dimensions=new Phaser.Math.Vector2(this.scene.renderer.width/1.8,this.scene.renderer.height/2.3)}this.setSize(this.dimensions.x,this.dimensions.y),this.textStyle={fontFamily:V.textStyle,color:V.COLORPACK_1.white},this.grey_bg=this.scene.add.rectangle(this.scene.renderer.width/2,this.scene.renderer.height/2,this.scene.renderer.width+1,this.scene.renderer.height+1,0,.95).setOrigin(.5).setDepth(7),this.sizer=this.createPanel(e),this.grey_bg.setInteractive().on("pointerup",()=>{this.fadeOut(this.scene)})}createPanel(i){let e=new rt(this.scene,{x:this.coordinates.x,y:this.coordinates.y,width:this.dimensions.x,height:this.dimensions.y,orientation:"y",space:{item:50,top:15,bottom:5,left:15,right:15}});switch(e.addBackground(this.scene.add.existing(new $t(this.scene,0,0,2,2,10,V.convertColorToNumber(V.COLORS_BLUE_LIGHT.c4)).setAlpha(0))),i){case 0:e.add(this.scene.add.text(0,0,"Simulation",this.textStyle).setFontSize(30).setResolution(2).setFontStyle("bold"),{align:"center"}),e.add(new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"Cast magic spells by clicking on a neighbouring state ",this.textStyle).setFontSize(26).setResolution(3)).add(this.scene.add.image(0,0,"magic_and_state").setOrigin(.5).setScale(.7)),{align:"center",padding:{top:-40}});let d=this.scene.add.image(0,0,"purple_wizard_icon",0).setOrigin(.5).setScale(.7);e.add(new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"and make ",this.textStyle).setFontSize(26).setResolution(3)).add(d).add(this.scene.add.text(0,0," unable to copy your spell sequence",this.textStyle).setFontSize(26).setResolution(3)),{align:"center",padding:{top:-50}});break;case 1:e.add(this.scene.add.text(0,0,"Bisimulation",this.textStyle).setFontSize(30).setResolution(2).setFontStyle("bold"),{align:"center"});let t=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"Use ",this.textStyle).setFontSize(26).setResolution(3)).add(this.scene.add.image(0,0,"ui_swap_btn").setOrigin(.5).setScale(.07)).add(this.scene.add.text(0,0," to swap sides",this.textStyle).setFontSize(26).setResolution(3));e.add(t,{align:"center"});break;case 2:e.add(this.scene.add.text(0,0,"Reactive Bisimulation",this.textStyle).setFontSize(30).setResolution(2).setFontStyle("bold"),{align:"center"});let s=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"Cast ",this.textStyle).setFontSize(28).setResolution(2)).add(this.scene.add.image(0,0,"timeout_arrow_icon").setOrigin(.5).setScale(.1)).add(this.scene.add.text(0,0," time magic spells",this.textStyle).setFontSize(28).setResolution(2)),u=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"\u2022 For that, all other possible magic in the current state has to be disabled",this.textStyle).setFontSize(22).setResolution(2)),n=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"\u2022 You can disable other magic spells ",this.textStyle).setFontSize(22).setResolution(2)).add(this.scene.add.image(0,0,"environment_panel").setOrigin(.5).setScale(1)).add(this.scene.add.text(0,0," by selection, when using ",this.textStyle).setFontSize(22).setResolution(2)).add(this.scene.add.image(0,0,"timeout_arrow_icon").setOrigin(.5).setScale(.08)),a=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"\u2022 The disabled spells will remain disabled until another spell is cast ",this.textStyle).setFontSize(22).setResolution(2)).add(this.scene.add.image(0,0,"environment_panel_disabled").setOrigin(.5).setScale(.8));e.add(s,{align:"center"}),e.add(u,{align:"center"}),e.add(n,{align:"center"}),e.add(a,{align:"center",padding:{top:-40}}),e.add(new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"In this example ",this.textStyle).setFontSize(22).setResolution(2)).add(this.scene.add.image(0,0,"timeout_disabling").setOrigin(.5).setScale(.6)).add(this.scene.add.text(0,0," only ",this.textStyle).setFontSize(22).setResolution(2)).add(this.scene.add.image(0,0,"fire_icon").setOrigin(.5).setScale(.07)).add(this.scene.add.text(0,0," would have to be disabled ",this.textStyle).setFontSize(22).setResolution(2)),{align:"center",padding:{top:-60}});break;case 3:e.add(this.scene.add.text(0,0,"Reactive Bisimulation",this.textStyle).setFontSize(30).setResolution(2).setFontStyle("bold"),{align:"center"});let h=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"If no spell is possible ",this.textStyle).setFontSize(26).setResolution(2)).add(this.scene.add.image(0,0,"environment_panel_no_spell_possible").setOrigin(.5).setScale(.8)).add(this.scene.add.text(0,0," after a time spell, ",this.textStyle).setFontSize(26).setResolution(2)),r=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"You can reset the restriction by casting any spell",this.textStyle).setFontSize(26).setResolution(2));e.add(h,{align:"center",padding:{top:-20,bottom:-20}}),e.add(r,{align:"center"});break;case 4:e.add(this.scene.add.text(0,0,"Reactive Bisimulation",this.textStyle).setFontSize(30).setResolution(2).setFontStyle("bold"),{align:"center"});let o=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"Beware that consecutive time spells are only possible, ",this.textStyle).setFontSize(26).setResolution(2)),c=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"if no other magic is castable after the last time spell",this.textStyle).setFontSize(26).setResolution(2));e.add(o,{align:"center"}),e.add(c,{align:"center"});break;case 5:e.add(this.scene.add.text(0,0,"Reactive Bisimulation",this.textStyle).setFontSize(30).setResolution(2).setFontStyle("bold"),{align:"center"});let l=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"Cast ",this.textStyle).setFontSize(26).setResolution(2)).add(this.scene.add.image(0,0,"tau_arrow_icon").setOrigin(.5).setScale(.08)).add(this.scene.add.text(0,0," portal magic spells",this.textStyle).setFontSize(26).setResolution(2)),f=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0," to transfer time magic restrictions to the next state",this.textStyle).setFontSize(26).setResolution(2)),p=new rt(this.scene,{orientation:"x"}).add(this.scene.add.text(0,0,"portal magic cannot be disabled by time magic",this.textStyle).setFontSize(26).setResolution(2));e.add(l,{align:"center"}),e.add(f,{align:"center"}),e.add(p,{align:"center"});break;default:e.add(this.scene.add.text(0,0,"Unknown Gamemode :)",this.textStyle).setFontSize(30).setResolution(2).setFontStyle("bold"),{align:"center"})}return e.add(this.scene.add.text(0,0,"< Click to continue >",this.textStyle).setFontSize(20).setResolution(2)),e.setDepth(8),e.layout(),e}fadeOut(i,e=()=>{}){this.grey_bg.alpha=1,this.sizer.alpha=1,i.tweens.add({targets:this.grey_bg,duration:500,alpha:0}),i.tweens.add({targets:this.sizer,duration:500,alpha:0})}}class KO extends Ct{constructor(){super("Sim_Level1"),this.levelType=3}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:0}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"1.1","Simulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates,V.second_coordinates,i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1),e.addState("p2",0,1,1),e.addState("p3",0,2,-1),e.addTransition("p0","p1","a"),e.addTransition("p1","p2","a"),e.addTransition("p1","p3","a"),e.addTransition("p2","p0","a"),e.addState("q0",1,0,0),e.addState("q1",1,1,-1),e.addState("q2",1,1,1),e.addState("q3",1,2,-1),e.addTransition("q0","q1","a"),e.addTransition("q1","q2","a"),e.addTransition("q1","q3","a"),e.addTransition("q0","q2","a"),e.startGame(this,"p0","q0",!1,!1,[6,3]),new ts(this,0),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 3"),e.pulsateNextMoveButtons()}}class ZO extends Ct{constructor(){super("Sim_Level2")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:0}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"1.2","Simulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates,V.second_coordinates,i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1),e.addState("p2",0,1,1),e.addState("p3",0,2,0),e.addTransition("p0","p1","a"),e.addTransition("p0","p2","a"),e.addTransition("p1","p3","a"),e.addTransition("p2","p3","b"),e.addState("q0",1,0,0),e.addState("q1",1,1,-1),e.addState("q2",1,1,1),e.addState("q3",1,2,0),e.addTransition("q0","q1","a"),e.addTransition("q0","q2","a"),e.addTransition("q1","q3","a"),e.addTransition("q2","q3","a"),e.startGame(this,"p0","q0",!1,!1,[3,2]),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 2")}}class kO extends Ct{constructor(){super("Sim_Level3")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:0}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"1.3","Simulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates,V.second_coordinates,i);e.addState("p0",0,0,0),e.addState("p1",0,1,0),e.addState("p2",0,2,-1),e.addState("p3",0,2,1),e.addTransition("p0","p1","c"),e.addTransition("p1","p2","a"),e.addTransition("p1","p3","b"),e.addTransition("p2","p3","a"),e.addTransition("p3","p2","a"),e.addState("q0",1,0,0),e.addState("q1",1,1,-1),e.addState("q2",1,1,1),e.addState("q3",1,2,-1),e.addState("q4",1,2,1),e.addTransition("q0","q1","c"),e.addTransition("q0","q2","c"),e.addTransition("q1","q3","a"),e.addTransition("q2","q4","b"),e.addTransition("q3","q4","a"),e.addTransition("q4","q3","a"),e.startGame(this,"p0","q0",!1,!1,[3,2]),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 2")}}class JO extends Ct{constructor(){super("Sim_Level4")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:0}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"1.4","Simulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates.clone().add(new Phaser.Math.Vector2(0,50)),V.second_coordinates.clone().add(new Phaser.Math.Vector2(0,50)),i);e.addState("p0",0,0,0),e.addState("p1",0,1,0),e.addTransition("p0","p1","a"),e.addTransition("p1","p0","a"),e.addTransition("p0","p0","b"),e.addTransition("p1","p1","b"),e.addState("q0",1,0,-1),e.addState("q1",1,0,1),e.addState("q2",1,1,-1),e.addState("q3",1,1,1),e.addTransition("q0","q2","a"),e.addTransition("q3","q1","a"),e.addTransition("q0","q1","b"),e.addTransition("q1","q0","b"),e.addTransition("q2","q3","b"),e.addTransition("q3","q2","b"),e.startGame(this,"p0","q0",!1,!1,[3,2]),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 2")}}class QO extends Ct{constructor(){super("Bisim_Level1")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:1}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"2.1","Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates,V.second_coordinates,i);e.addState("q0",1,0,0),e.addState("q1",1,1,-1),e.addState("q2",1,1,1),e.addState("q3",1,2,-2),e.addState("q4",1,2,0),e.addTransition("q0","q1","a"),e.addTransition("q0","q2","a"),e.addTransition("q1","q3","c"),e.addTransition("q1","q4","b"),e.addState("p0",0,0,0),e.addState("p1",0,1,0),e.addState("p2",0,2,-1),e.addState("p3",0,2,1),e.addTransition("p0","p1","a"),e.addTransition("p1","p2","c"),e.addTransition("p1","p3","b"),e.startGame(this,"p0","q0",!1,!0,[6,4]),new ts(this,1),e.pulsateSymmetrySwapBtn(),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 4")}}class jO extends Ct{constructor(){super("Bisim_Level2")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:1}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"2.2","Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates,V.second_coordinates,i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1),e.addState("p2",0,1,1),e.addState("p3",0,2,-2),e.addTransition("p0","p1","a"),e.addTransition("p0","p2","a"),e.addTransition("p1","p3","b"),e.addTransition("p2","p2","b"),e.addState("q0",1,0,0),e.addState("q1",1,1,0),e.addState("q2",1,2,0),e.addTransition("q0","q1","a"),e.addTransition("q1","q1","b"),e.addTransition("q1","q2","b"),e.startGame(this,"p0","q0",!1,!0,[5,4]),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 4")}}class qO extends Ct{constructor(){super("Bisim_Level3")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:1}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"2.3","Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates.clone().subtract(new Phaser.Math.Vector2(0,75)),V.second_coordinates.clone().subtract(new Phaser.Math.Vector2(0,75)),i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1),e.addState("p2",0,1,1),e.addState("p3",0,2,-2),e.addState("p4",0,2,0),e.addState("p5",0,3,0),e.addTransition("p0","p1","a"),e.addTransition("p0","p2","a"),e.addTransition("p1","p3","a"),e.addTransition("p3","p4","a"),e.addTransition("p4","p1","a"),e.addTransition("p2","p4","a"),e.addTransition("p4","p5","a"),e.addState("q0",1,0,0),e.addState("q1",1,1,-1),e.addState("q2",1,1,1),e.addState("q3",1,2,-1),e.addState("q4",1,2,1),e.addState("q5",1,3,0),e.addTransition("q0","q1","a"),e.addTransition("q0","q2","a"),e.addTransition("q1","q2","a"),e.addTransition("q2","q4","a"),e.addTransition("q4","q3","a"),e.addTransition("q3","q1","a"),e.addTransition("q3","q5","a"),e.addTransition("q4","q5","a"),e.startGame(this,"p0","q0",!1,!0,[8,7]),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 7")}}class _O extends Ct{constructor(){super("Bisim_Level4")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:1}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"2.4","Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates.clone().subtract(new Phaser.Math.Vector2(50,0)),V.second_coordinates.clone().add(new Phaser.Math.Vector2(50,0)),i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1.5),e.addState("p2",0,1,0),e.addState("p3",0,1,1.5),e.addState("p4",0,2,-1.5),e.addState("p5",0,2,1.5),e.addState("p6",0,2,0),e.addTransition("p0","p1","a"),e.addTransition("p0","p2","a"),e.addTransition("p0","p3","a"),e.addTransition("p1","p4","c"),e.addTransition("p3","p5","c"),e.addTransition("p1","p6","b"),e.addTransition("p2","p3","b"),e.addTransition("p6","p5","c"),e.addState("q0",1,0,0),e.addState("q1",1,1,0),e.addState("q2",1,2,-1),e.addState("q3",1,2,1),e.addState("q4",1,1,-1.5),e.addTransition("q0","q1","a"),e.addTransition("q1","q4","b"),e.addTransition("q1","q2","b"),e.addTransition("q2","q3","c"),e.addTransition("q1","q3","c"),e.startGame(this,"p0","q0",!1,!0,[5,3]),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 3")}}class tR extends Ct{constructor(){super("ReBisim_Level1")}preload(){}create(){this.fade(!0);let i=this.add.image(this.renderer.width/2,this.renderer.height/2,"background_demo").setOrigin(.5).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:2}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"3.1","Reactive Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates,V.second_coordinates,i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1),e.addState("p2",0,1,1),e.addState("p3",0,2,0),e.addTransition("p0","p1",V.TIMEOUT_ACTION),e.addTransition("p0","p2","a"),e.addTransition("p1","p3","b"),e.addState("q0",1,0,0),e.addState("q1",1,1,-1),e.addState("q2",1,1,1),e.addState("q3",1,2,0),e.addTransition("q0","q2","a"),e.addTransition("q0","q1",V.TIMEOUT_ACTION),e.addTransition("q1","q3","a"),e.startGame(this,"p0","q0",!0,!0,[3,2]),new ts(this,2),e.pulsateProcessBtn("p1"),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 2")}}class eR extends Ct{constructor(){super("ReBisim_Level2")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:2}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"3.2","Reactive Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates,V.second_coordinates,i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1.5),e.addState("p2",0,1,0),e.addState("p3",0,1,1.5),e.addState("p4",0,2,-.75),e.addState("p5",0,2,.75),e.addTransition("p0","p1","a"),e.addTransition("p0","p2",V.TIMEOUT_ACTION),e.addTransition("p0","p3","b"),e.addTransition("p2","p4","a"),e.addTransition("p2","p5","a"),e.addState("q0",1,0,0),e.addState("q1",1,1,-1.5),e.addState("q2",1,1,0),e.addState("q3",1,1,1.5),e.addState("q4",1,2,-.75),e.addState("q5",1,2,.75),e.addTransition("q0","q1","a"),e.addTransition("q0","q2",V.TIMEOUT_ACTION),e.addTransition("q0","q3","b"),e.addTransition("q2","q4","a"),e.addTransition("q2","q5","b"),e.startGame(this,"p0","q0",!0,!0,[4,3]),new ts(this,3),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 3")}}class iR extends Ct{constructor(){super("ReBisim_Level3")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:2}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"3.3","Reactive Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates.clone().subtract(new Phaser.Math.Vector2(50,75)),V.second_coordinates.clone().subtract(new Phaser.Math.Vector2(-50,75)),i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1),e.addState("p2",0,1,0),e.addState("p3",0,2,-1),e.addState("p4",0,2,1),e.addState("p5",0,3,0),e.addState("p6",0,3,1),e.addTransition("p0","p1","a"),e.addTransition("p0","p2",V.TIMEOUT_ACTION),e.addTransition("p2","p3","c"),e.addTransition("p2","p4",V.TIMEOUT_ACTION),e.addTransition("p4","p5","a"),e.addTransition("p4","p6","a"),e.addState("q0",1,0,0),e.addState("q1",1,1,0),e.addState("q2",1,1,1),e.addState("q3",1,2,0),e.addState("q4",1,2,-1.5),e.addState("q5",1,3,0),e.addTransition("q0","q1",V.TIMEOUT_ACTION),e.addTransition("q0","q2","a"),e.addTransition("q1","q3",V.TIMEOUT_ACTION),e.addTransition("q1","q4","c"),e.addTransition("q3","q5","a"),e.addTransition("q3","q4","c"),e.startGame(this,"p0","q0",!0,!0,[5,4]),new ts(this,4),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 4")}}class sR extends Ct{constructor(){super("ReBisim_Level4")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:2}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"3.4","Reactive Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates,V.second_coordinates.clone().add(new Phaser.Math.Vector2(50,0)),i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1.5),e.addState("p2",0,2,-1.5),e.addState("p3",0,2,0),e.addTransition("p0","p1","a"),e.addTransition("p1","p3",V.TIMEOUT_ACTION),e.addTransition("p1","p2","a"),e.addTransition("p3","p3","b"),e.addTransition("p3","p0",V.TIMEOUT_ACTION),e.addState("q0",1,0,0),e.addState("q1",1,1,-1.5),e.addState("q2",1,1,1.5),e.addState("q3",1,2,-1.5),e.addState("q4",1,2,0),e.addTransition("q0","q1","a"),e.addTransition("q1","q4",V.TIMEOUT_ACTION),e.addTransition("q1","q3","a"),e.addTransition("q4","q4","b"),e.addTransition("q4","q2","c"),e.addTransition("q4","q0",V.TIMEOUT_ACTION),e.startGame(this,"p0","q0",!0,!0,[5,4]),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 4")}}class nR extends Ct{constructor(){super("ReBisim_Level5")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:2}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"3.5","Reactive Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates.clone().subtract(new Phaser.Math.Vector2(50,50)),V.second_coordinates.clone().subtract(new Phaser.Math.Vector2(-50,50)),i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1),e.addState("p2",0,1,1),e.addState("p3",0,1.75,2.25),e.addState("p4",0,2.5,-1),e.addState("p5",0,2.5,1),e.addTransition("p0","p1","a"),e.addTransition("p0","p2","a"),e.addTransition("p1","p4",V.TIMEOUT_ACTION),e.addTransition("p2","p4",V.TIMEOUT_ACTION),e.addTransition("p4","p5","a"),e.addTransition("p5","p2","a"),e.addTransition("p2","p3",V.TIMEOUT_ACTION),e.addState("q0",1,0,0),e.addState("q1",1,1,-1),e.addState("q2",1,1,1),e.addState("q3",1,1.75,2.25),e.addState("q4",1,2.5,-1),e.addState("q5",1,2.5,1),e.addTransition("q0","q1","a"),e.addTransition("q0","q2","a"),e.addTransition("q2","q4",V.TIMEOUT_ACTION),e.addTransition("q1","q4",V.TIMEOUT_ACTION),e.addTransition("q2","q5",V.TIMEOUT_ACTION),e.addTransition("q5","q3","a"),e.addTransition("q3","q2","a"),e.startGame(this,"p0","q0",!0,!0,[6,5]),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 5")}}class rR extends Ct{constructor(){super("ReBisim_Level6")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:3}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"3.6","Reactive Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates.clone().subtract(new Phaser.Math.Vector2(50,75)),V.second_coordinates.clone().subtract(new Phaser.Math.Vector2(-50,75)),i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1),e.addState("p2",0,1,1),e.addState("p3",0,2,0),e.addState("p4",0,3,-1),e.addState("p5",0,3,1),e.addTransition("p0","p1","a"),e.addTransition("p0","p2",V.TIMEOUT_ACTION),e.addTransition("p2","p3",V.HIDDEN_ACTION),e.addTransition("p3","p4","a"),e.addTransition("p3","p5","b"),e.addState("q0",1,0,0),e.addState("q1",1,1,-1),e.addState("q2",1,1,1),e.addState("q3",1,2,0),e.addState("q4",1,3,-1),e.addState("q5",1,3,1),e.addTransition("q0","q1","a"),e.addTransition("q0","q2",V.TIMEOUT_ACTION),e.addTransition("q2","q3",V.HIDDEN_ACTION),e.addTransition("q3","q4","a"),e.addTransition("q3","q5","c"),e.startGame(this,"p0","q0",!0,!0,[4,3]),new ts(this,5),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 3")}}class aR extends Ct{constructor(){super("ReBisim_Level7")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:3}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"3.7","Reactive Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates.clone().subtract(new Phaser.Math.Vector2(50,75)),V.second_coordinates.clone().subtract(new Phaser.Math.Vector2(-50,75)),i);e.addState("p0",0,0,0),e.addState("p1",0,1,0),e.addState("p2",0,1,1),e.addState("p3",0,2,-1),e.addState("p4",0,2,0),e.addState("p5",0,2,1),e.addState("p6",0,3,-1),e.addState("p7",0,3,1),e.addTransition("p0","p1",V.HIDDEN_ACTION),e.addTransition("p0","p2",V.HIDDEN_ACTION),e.addTransition("p1","p3","a"),e.addTransition("p1","p4",V.HIDDEN_ACTION),e.addTransition("p2","p5",V.HIDDEN_ACTION),e.addTransition("p4","p6",V.TIMEOUT_ACTION),e.addTransition("p4","p7","a"),e.addTransition("p5","p7","a"),e.addState("q0",1,0,0),e.addState("q1",1,1,0),e.addState("q2",1,1,1),e.addState("q3",1,2,-1),e.addState("q4",1,2,0),e.addState("q5",1,2,1),e.addState("q6",1,3,-1),e.addState("q7",1,3,1),e.addTransition("q0","q1",V.HIDDEN_ACTION),e.addTransition("q0","q2",V.HIDDEN_ACTION),e.addTransition("q1","q3","a"),e.addTransition("q1","q5",V.HIDDEN_ACTION),e.addTransition("q2","q4",V.HIDDEN_ACTION),e.addTransition("q4","q6",V.TIMEOUT_ACTION),e.addTransition("q4","q7","a"),e.addTransition("q5","q7","a"),e.startGame(this,"p0","q0",!0,!0,[4,3]),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 3")}}class oR extends Ct{constructor(){super("ReBisim_Level8")}preload(){}create(){this.fade(!0);let i=this.add.image(this.renderer.width/2,this.renderer.height/2,"background_demo").setOrigin(.5).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:3}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"3.8","Reactive Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates.clone().subtract(new Phaser.Math.Vector2(40,50)),V.second_coordinates.clone().subtract(new Phaser.Math.Vector2(-50,50)),i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1),e.addState("p2",0,1,1),e.addState("p3",0,2,-1),e.addState("p4",0,2,1),e.addState("p5",0,3,-1),e.addTransition("p0","p1",V.HIDDEN_ACTION),e.addTransition("p1","p1","b"),e.addTransition("p1","p3",V.TIMEOUT_ACTION),e.addTransition("p4","p2","c"),e.addTransition("p3","p4",V.HIDDEN_ACTION),e.addTransition("p2","p3","c"),e.addTransition("p3","p5","b"),e.addState("q0",1,0,0),e.addState("q1",1,1,-1),e.addState("q2",1,1,1),e.addState("q3",1,2,-1),e.addState("q4",1,2,1),e.addTransition("q0","q1",V.HIDDEN_ACTION),e.addTransition("q1","q1","b"),e.addTransition("q1","q3",V.TIMEOUT_ACTION),e.addTransition("q3","q4",V.HIDDEN_ACTION),e.addTransition("q4","q2","c"),e.addTransition("q2","q1","c"),e.addTransition("q2","q3","c"),e.startGame(this,"p0","q0",!0,!0,[7,6]),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 6")}}class hR extends Ct{constructor(){super("ReBisim_Level9")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:3}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"3.9","Reactive Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates.clone().subtract(new Phaser.Math.Vector2(50,0)),V.second_coordinates.clone().subtract(new Phaser.Math.Vector2(-50,0)),i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1.5),e.addState("p2",0,1,0),e.addState("p3",0,2,0),e.addState("p4",0,2,1.5),e.addTransition("p0","p1","b"),e.addTransition("p0","p2",V.TIMEOUT_ACTION),e.addTransition("p1","p3","b"),e.addTransition("p3","p4","a"),e.addTransition("p3","p2",V.TIMEOUT_ACTION),e.addTransition("p2","p1",V.HIDDEN_ACTION),e.addState("q0",1,0,0),e.addState("q1",1,1,0),e.addState("q2",1,1,1.5),e.addState("q3",1,1,-1.5),e.addState("q4",1,2,0),e.addState("q5",1,2,1.5),e.addTransition("q0","q1",V.TIMEOUT_ACTION),e.addTransition("q0","q2","b"),e.addTransition("q1","q2",V.HIDDEN_ACTION),e.addTransition("q1","q3","b"),e.addTransition("q2","q4","b"),e.addTransition("q4","q1",V.TIMEOUT_ACTION),e.addTransition("q4","q5","a"),e.startGame(this,"p0","q0",!0,!0,[7,5]),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 5")}}class lR extends Ct{constructor(){super("ReBisim_Level10")}preload(){}create(){this.fade(!0);let i=this.add.image(0,0,"background_demo").setOrigin(0).setDepth(0);i.scale=this.renderer.width/i.width,this.background=i,this.scene.launch("GUIScene",{otherRunningScene:this,levelType:3}),this.setupLTS()}update(i,e){}setupLTS(){let i=new Dt(this,this.renderer.width/2,50,"3.10","Reactive Bisimulation",!0),e=new wt(this,V.lts_xy_offset,V.first_coordinates.clone().subtract(new Phaser.Math.Vector2(50,0)),V.second_coordinates.clone().subtract(new Phaser.Math.Vector2(-50,0)),i);e.addState("p0",0,0,0),e.addState("p1",0,1,-1.5),e.addState("p2",0,1,0),e.addState("p3",0,1,1.5),e.addState("p4",0,2,0),e.addTransition("p0","p1","c"),e.addTransition("p0","p2",V.TIMEOUT_ACTION),e.addTransition("p1","p4",V.HIDDEN_ACTION),e.addTransition("p4","p3","b"),e.addTransition("p3","p0",V.HIDDEN_ACTION),e.addTransition("p2","p3",V.HIDDEN_ACTION),e.addTransition("p4","p2",V.TIMEOUT_ACTION),e.addTransition("p2","p1","c"),e.addState("q0",1,0,-1.5),e.addState("q1",1,0,0),e.addState("q2",1,1,-1.5),e.addState("q3",1,1,0),e.addState("q4",1,1,1.5),e.addState("q5",1,2,-1.5),e.addState("q6",1,2,0),e.addTransition("q0","q1",V.HIDDEN_ACTION),e.addTransition("q1","q2",V.TIMEOUT_ACTION),e.addTransition("q1","q3","c"),e.addTransition("q2","q0",V.HIDDEN_ACTION),e.addTransition("q2","q5","c"),e.addTransition("q2","q3","c"),e.addTransition("q3","q6",V.HIDDEN_ACTION),e.addTransition("q6","q4","b"),e.addTransition("q4","q1",V.HIDDEN_ACTION),e.addTransition("q6","q2",V.TIMEOUT_ACTION),e.startGame(this,"p0","q1",!0,!0,[8,7]),e.printAttackerShortestMinMaxPath(),console.log("expected moves: 7")}}var uR={type:le.AUTO,parent:"game",backgroundColor:"#0",scale:{mode:le.Scale.NONE,width:V.DEFAULT_WIDTH,height:V.DEFAULT_HEIGHT,autoCenter:le.Scale.CENTER_BOTH,min:{width:V.MIN_WIDTH,height:V.MIN_HEIGHT},max:{width:V.MAX_WIDTH,height:V.MAX_HEIGHT},zoom:1},dom:{createContainer:!0},scene:[cf,zO,ff,VO,$O,KO,ZO,kO,JO,QO,jO,qO,_O,tR,eR,iR,sR,nR,rR,aR,oR,hR,lR,XO,HO,NO],render:{}};new le.Game(uR);
